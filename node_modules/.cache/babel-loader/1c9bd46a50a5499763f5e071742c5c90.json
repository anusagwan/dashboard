{"ast":null,"code":"import _slicedToArray from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/Charts/Mix/doubleline.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Chart from 'chart.js';\nimport { Bar, Line } from 'react-chartjs-2';\nimport Modal from 'react-awesome-modal';\nimport { rejects } from 'assert'; // import Table from '../table'\n\nimport { Tabs } from 'antd';\nimport { Switch, Icon } from 'antd';\nimport Table from '../aggridTable';\nimport DounleBar from '../Mix/doubleBar';\nvar TabPane = Tabs.TabPane;\n\nvar LineBarChart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LineBarChart, _Component);\n\n  function LineBarChart(props) {\n    var _this;\n\n    _classCallCheck(this, LineBarChart);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LineBarChart).call(this));\n\n    _this.showTabledata = function () {\n      _this.setState(function (prevState) {\n        return {\n          showGraph: !prevState.showGraph,\n          showTable: !prevState.showTable\n        };\n      });\n    };\n\n    _this.state = {\n      visible: false,\n      showGraph: typeof props.showGraph === \"undefined\" ? true : props.showGraph,\n      showTable: typeof props.showTable === \"undefined\" ? false : props.showTable\n    };\n    return _this;\n  }\n\n  _createClass(LineBarChart, [{\n    key: \"openModal\",\n    value: function openModal() {\n      this.setState({\n        visible: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        visible: false\n      });\n\n      if (this.props.closePageModal) {\n        this.props.closePageModal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var chartData = this.props.data; // console.log('chartData for bar line', chartData);\n\n      var barIndex = chartData.line_index1; // console.log(\"bar index\", barIndex)\n\n      var datasets = [];\n      var labels = [];\n      var colors = [];\n      var visible = !!this.props.inModal || !!this.state.visible;\n      colors.push({\n        backgroundColor: '#2685CB'\n      });\n      colors.push({\n        backgroundColor: '#EC932F'\n      });\n      colors.push({\n        backgroundColor: '#4B4ADA'\n      });\n      colors.push({\n        backgroundColor: '#FC3026'\n      });\n      colors.push({\n        backgroundColor: '#CD36E7'\n      });\n      var object = chartData.data; // console.log('what is bar index in object??????',object)\n\n      for (var key in object) {\n        var index = Object.keys(object).indexOf(key); // console.log('what is key in double line ? -------',key)\n\n        if (key == barIndex) {\n          // console.log(\"line data\", key)\n          datasets.push({\n            label: key,\n            type: 'line',\n            data: object[key],\n            fill: false,\n            borderColor: colors[index % 4].backgroundColor,\n            backgroundColor: colors[index % 4].backgroundColor,\n            pointBorderColor: colors[index % 4].backgroundColor,\n            pointBackgroundColor: colors[index % 4].backgroundColor,\n            pointHoverBackgroundColor: colors[index % 4].backgroundColor,\n            pointHoverBorderColor: colors[index % 4].backgroundColor,\n            yAxisID: 'y-axis-1'\n          }); // console.log('left value for line',datasets)\n        } else {\n          datasets.push({\n            label: key,\n            type: 'line',\n            data: object[key],\n            fill: false,\n            borderColor: colors[index % 4].backgroundColor,\n            backgroundColor: colors[index % 4].backgroundColor,\n            pointBorderColor: colors[index % 4].backgroundColor,\n            pointBackgroundColor: colors[index % 4].backgroundColor,\n            pointHoverBackgroundColor: colors[index % 4].backgroundColor,\n            pointHoverBorderColor: colors[index % 4].backgroundColor,\n            yAxisID: 'y-axis-2'\n          }); // console.log('right value for line',datasets)\n        }\n      }\n\n      var labelsData = chartData.labels;\n      var labelsKey = Object.keys(labelsData); // console.log(labelsKey)\n\n      var x_labelData = chartData.x_label;\n\n      for (var key in labelsData) {\n        labelsData[key].map(function (label) {\n          labels.push(label);\n        });\n      }\n\n      datasets.reverse();\n      var data = {\n        labels: labels,\n        datasets: datasets\n      };\n      var options = {\n        plugins: {\n          datalabels: {\n            display: false\n          },\n          labels: false\n        },\n        responsive: true,\n        tooltips: {\n          mode: 'nearest',\n          callbacks: {\n            title: function title(_ref, data) {\n              var _ref2 = _slicedToArray(_ref, 1),\n                  tooltipItems = _ref2[0];\n\n              // console.log('tooltip title',data ,tooltipItems)\n              return x_labelData + ' : ' + tooltipItems.xLabel;\n            },\n            beforeLabel: function beforeLabel(tooltipItem, data) {\n              var ranges = [{\n                divider: 1e9,\n                suffix: 'B'\n              }, {\n                divider: 1e6,\n                suffix: 'M'\n              }, {\n                divider: 1e3,\n                suffix: 'k'\n              }];\n\n              function formatNumber(n) {\n                for (var i = 0; i < ranges.length; i++) {\n                  if (Math.abs(n) >= ranges[i].divider) {\n                    var newNumber = (n / ranges[i].divider).toFixed(2);\n                    return newNumber.toString() + ranges[i].suffix;\n                  }\n                }\n\n                return n;\n              } // console.log(typeof tooltipItem.yLabel,tooltipItem.yLabel)\n\n\n              if (data.datasets[tooltipItem.datasetIndex].label.includes(\"$\")) {\n                return data.datasets[tooltipItem.datasetIndex].label + ': ' + '\\n' + '$' + formatNumber(tooltipItem.yLabel) + '\\n';\n              } else {\n                return data.datasets[tooltipItem.datasetIndex].label + ': ' + '\\n' + formatNumber(tooltipItem.yLabel) + '\\n';\n              }\n            },\n            label: function label(tooltipItem) {\n              return;\n            }\n          }\n        },\n        elements: {\n          line: {\n            fill: false,\n            tension: 0.000001\n          }\n        },\n        scales: {\n          xAxes: [{\n            display: true,\n            gridLines: {\n              display: false\n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.x_label,\n              fontWeight: 900,\n              fontStyle: \"bold\" // position: 'top',\n\n            }\n          }],\n          yAxes: [{\n            type: 'linear',\n            display: true,\n            position: 'left',\n            id: 'y-axis-1',\n            gridLines: {\n              display: false\n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.y_label1,\n              fontWeight: 900,\n              fontStyle: \"bold\"\n            },\n            ticks: {\n              callback: function callback(value) {\n                // console.log('left data labels for line',value)\n                var ranges = [{\n                  divider: 1e9,\n                  suffix: 'B'\n                }, {\n                  divider: 1e6,\n                  suffix: 'M'\n                }, {\n                  divider: 1e3,\n                  suffix: 'k'\n                }];\n                console.log('awr37qtgsjad', value);\n\n                function formatNumber(n) {\n                  for (var i = 0; i < ranges.length; i++) {\n                    if (Math.abs(n) >= ranges[i].divider) {\n                      return Math.round(n / ranges[i].divider).toString() + ranges[i].suffix;\n                    }\n                  }\n\n                  return n;\n                }\n\n                return \"$\" + formatNumber(value);\n              }\n            }\n          }, {\n            type: 'linear',\n            display: true,\n            position: 'right',\n            id: 'y-axis-2',\n            gridLines: {\n              display: false\n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.y_label2,\n              fontWeight: 900,\n              fontStyle: \"bold\"\n            },\n            ticks: {\n              callback: function callback(value) {\n                var ranges = [{\n                  divider: 1e9,\n                  suffix: 'B'\n                }, {\n                  divider: 1e6,\n                  suffix: 'M'\n                }, {\n                  divider: 1e3,\n                  suffix: 'k'\n                }];\n\n                function formatNumber(n) {\n                  for (var i = 0; i < ranges.length; i++) {\n                    if (Math.abs(n) >= ranges[i].divider) {\n                      return Math.round(n / ranges[i].divider).toString() + ranges[i].suffix;\n                    }\n                  }\n\n                  return n;\n                }\n\n                return \"$\" + formatNumber(value);\n              }\n            }\n          }]\n        },\n        legend: {\n          display: true,\n          position: 'bottom',\n          fontFamily: \"Helvetica\",\n          fontSize: \"12px\",\n          labels: {\n            boxWidth: 5\n          }\n        }\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: visible,\n        width: \"700\",\n        height: \"600\",\n        effect: \"fadeInDown\",\n        onClickAway: function onClickAway() {\n          return _this2.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginTop: \"0px\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"graph-heading\",\n        style: {\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \" \", chartData.title, React.createElement(\"i\", {\n        className: \"fa fa-ellipsis-v pull-right modelIcon\",\n        onClick: function onClick() {\n          return _this2.openOptions();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          textAlign: \"right\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        checkedChildren: React.createElement(Icon, {\n          style: {\n            fontSize: \"18px\"\n          },\n          type: \"table\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        }),\n        unCheckedChildren: React.createElement(Icon, {\n          style: {\n            fontSize: \"18px\"\n          },\n          type: \"bar-chart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        }),\n        defaultChecked: true,\n        onChange: function onChange() {\n          return _this2.showTabledata();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      })), this.state.showGraph ? React.createElement(Line, {\n        data: data,\n        options: options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }) : React.createElement(Table, {\n        data: chartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }))), React.createElement(Line, {\n        data: data,\n        options: options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return LineBarChart;\n}(Component); //onElementsClick={(e) => { this.openModal() }}\n\n\nexport default LineBarChart;","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/Charts/Mix/doubleline.js"],"names":["React","Component","ReactDOM","Chart","Bar","Line","Modal","rejects","Tabs","Switch","Icon","Table","DounleBar","TabPane","LineBarChart","props","showTabledata","setState","prevState","showGraph","showTable","state","visible","closePageModal","chartData","data","barIndex","line_index1","datasets","labels","colors","inModal","push","backgroundColor","object","key","index","Object","keys","indexOf","label","type","fill","borderColor","pointBorderColor","pointBackgroundColor","pointHoverBackgroundColor","pointHoverBorderColor","yAxisID","labelsData","labelsKey","x_labelData","x_label","map","reverse","options","plugins","datalabels","display","responsive","tooltips","mode","callbacks","title","tooltipItems","xLabel","beforeLabel","tooltipItem","ranges","divider","suffix","formatNumber","n","i","length","Math","abs","newNumber","toFixed","toString","datasetIndex","includes","yLabel","elements","line","tension","scales","xAxes","gridLines","scaleLabel","labelString","fontWeight","fontStyle","yAxes","position","id","y_label1","ticks","callback","value","console","log","round","y_label2","legend","fontFamily","fontSize","boxWidth","closeModal","marginTop","padding","openOptions","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport Chart from 'chart.js';\nimport {Bar , Line} from 'react-chartjs-2';\nimport Modal from 'react-awesome-modal';\nimport { rejects } from 'assert';\n// import Table from '../table'\nimport { Tabs } from 'antd';\nimport { Switch, Icon } from 'antd';\nimport Table from '../aggridTable'\nimport DounleBar from '../Mix/doubleBar'\n\nconst TabPane = Tabs.TabPane;\n\n\n\n\n\nclass LineBarChart extends Component {\n\n  constructor(props) {\n    super();\n    this.state = {\n      visible: false,\n      showGraph: typeof props.showGraph === \"undefined\" ? true :  props.showGraph,\n      showTable: typeof props.showTable === \"undefined\" ? false :  props.showTable\n    };\n  }\n\n  openModal() {\n    this.setState({\n      visible: true\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      visible: false\n    });\n    if(this.props.closePageModal){\n      this.props.closePageModal();\n    }\n  }\n\n  showTabledata = ()=>{\n    this.setState(prevState => ({\n     showGraph: !prevState.showGraph,\n     showTable: !prevState.showTable,\n   }));\n  }\n\n  \n  render() {\n    var chartData = this.props.data;\n    // console.log('chartData for bar line', chartData);\n    let barIndex = chartData.line_index1;\n    // console.log(\"bar index\", barIndex)\n    let datasets = [];\n    let labels = [];\n    var colors = []\n    let visible = !!this.props.inModal || !!this.state.visible;\n    colors.push({\n      backgroundColor: '#2685CB'\n    })\n    colors.push({\n      backgroundColor: '#EC932F'\n    })\n    colors.push({\n      backgroundColor: '#4B4ADA'\n    })\n    colors.push({\n      backgroundColor: '#FC3026'\n    })\n    colors.push({\n      backgroundColor: '#CD36E7'\n    })\n    var object = chartData.data;\n    // console.log('what is bar index in object??????',object)\n    for (var key in object) {\n      \n      var index = Object.keys(object).indexOf(key);\n      // console.log('what is key in double line ? -------',key)\n      if (key == barIndex) {\n        // console.log(\"line data\", key)\n        datasets.push(\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: key,\n            type:'line',\n\t\t\t\t\t\tdata:  object[key],\n\t\t\t\t\t\tfill: false,\n\t\t\t\t\t\tborderColor: colors[index % 4].backgroundColor,\n\t\t\t\t\t\tbackgroundColor: colors[index % 4].backgroundColor,\n\t\t\t\t\t\tpointBorderColor: colors[index % 4].backgroundColor,\n\t\t\t\t\t\tpointBackgroundColor: colors[index % 4].backgroundColor,\n\t\t\t\t\t\tpointHoverBackgroundColor: colors[index % 4].backgroundColor,\n\t\t\t\t\t\tpointHoverBorderColor: colors[index % 4].backgroundColor,\n\t\t\t\t\t\tyAxisID: 'y-axis-1'\n\t\t\t\t\t\t}\n        )\n        // console.log('left value for line',datasets)\n      } else {\n        datasets.push(\n          {\n          label: key,\n          type:'line',\n\t\t\t\t\tdata:  object[key],\n\t\t\t\t\tfill: false,\n\t\t\t\t\tborderColor: colors[index % 4].backgroundColor,\n\t\t\t\t\tbackgroundColor: colors[index % 4].backgroundColor,\n\t\t\t\t\tpointBorderColor: colors[index % 4].backgroundColor,\n\t\t\t\t\tpointBackgroundColor: colors[index % 4].backgroundColor,\n\t\t\t\t\tpointHoverBackgroundColor: colors[index % 4].backgroundColor,\n\t\t\t\t\tpointHoverBorderColor: colors[index % 4].backgroundColor,\n\t\t\t\t\tyAxisID: 'y-axis-2'\n          }\n        )\n    \n\n        // console.log('right value for line',datasets)\n      }\n    }\n    \n\n    \n\n    let labelsData = chartData.labels;\n    let labelsKey = Object.keys(labelsData)\n    // console.log(labelsKey)\n    var x_labelData = chartData.x_label;\n    \n    for (var key in labelsData) {\n      labelsData[key].map((label)=>{\n      labels.push(label);\n   })\n   }\n   datasets.reverse();\n\n    const data = {\n\t\t\tlabels: labels,\n\t\t\tdatasets: datasets\n    };\n    \n\n\n\t\tconst options = {\n      plugins: {\n        datalabels: {\n           display: false\n        },\n        labels:false\n     },\n      responsive: true,\n\n      tooltips: {\n        mode: 'nearest',\n        callbacks: {\n          title: function([tooltipItems],data) {\n            // console.log('tooltip title',data ,tooltipItems)\n              return x_labelData + ' : ' + tooltipItems.xLabel;\n            },\n\n            beforeLabel: function(tooltipItem,data) {\n              var ranges = [\n                          { divider: 1e9, suffix: 'B' },\n                          { divider: 1e6, suffix: 'M' },\n                          { divider: 1e3, suffix: 'k' }\n                       ];\n                       function formatNumber(n) {\n                            for (var i = 0; i < ranges.length; i++) {\n                               if (Math.abs(n) >= (ranges[i].divider)) {\n                                 let newNumber = (n / ranges[i].divider).toFixed(2)\n                                  return newNumber.toString() + ranges[i].suffix;\n                               }\n                            }\n                            return n;\n                         }\n              // console.log(typeof tooltipItem.yLabel,tooltipItem.yLabel)\n              if(data.datasets[tooltipItem.datasetIndex].label.includes(\"$\")){\n                return data.datasets[tooltipItem.datasetIndex].label + ': '  + '\\n' + '$' + formatNumber(tooltipItem.yLabel) + '\\n';\n              }else{\n                return data.datasets[tooltipItem.datasetIndex].label + ': '  + '\\n' +  formatNumber(tooltipItem.yLabel) + '\\n';\n\n              }\n          },\n          label: function(tooltipItem) {\n            return ;\n          }\n\n        },\n      },\n\n\t\t\telements: {\n\t\t\t\tline: {\n\t\t\t\t\tfill: false,\n\t\t\t\t\ttension: 0.000001\n\t\t\t\t}\n\t\t\t},\n\t\t\tscales: { \n\t\t\t\txAxes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tgridLines: {\n\t\t\t\t\t\t\tdisplay: false\n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.x_label,\n              fontWeight: 900,\n              fontStyle: \"bold\",\n              \n              // position: 'top',\n            }\n            \n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tyAxes: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'linear',\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tposition: 'left',\n\t\t\t\t\t\tid: 'y-axis-1', \n\t\t\t\t\t\tgridLines: {\n\t\t\t\t\t\t\tdisplay: false\n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.y_label1,\n              fontWeight: 900,\n              fontStyle: \"bold\",\n            },\n            ticks: {\n              callback: function(value) {\n                // console.log('left data labels for line',value)\n\n                 var ranges = [\n                  { divider: 1e9, suffix: 'B' },\n                    { divider: 1e6, suffix: 'M' },\n                    { divider: 1e3, suffix: 'k' }\n                 ];\n                 console.log('awr37qtgsjad', value);\n                 function formatNumber(n) {\n                    for (var i = 0; i < ranges.length; i++) {\n                       if (Math.abs(n) >= ranges[i].divider) {\n                          return Math.round(n / ranges[i].divider).toString() + ranges[i].suffix;\n                       }\n                    }\n                    return n;\n                 }\n                 return \"$\" +  formatNumber(value);\n              }\n           },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'linear',\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tposition: 'right',\n            id: 'y-axis-2',\n\t\t\t\t\t\tgridLines: {\n\t\t\t\t\t\t\tdisplay: false \n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.y_label2,\n              fontWeight: 900,\n              fontStyle: \"bold\",\n            },\n            ticks: {\n              callback: function(value) {\n                 var ranges = [\n                  { divider: 1e9, suffix: 'B' },\n                    { divider: 1e6, suffix: 'M' },\n                    { divider: 1e3, suffix: 'k' }\n                 ];\n                 function formatNumber(n) {\n                    for (var i = 0; i < ranges.length; i++) {\n                       if (Math.abs(n) >= ranges[i].divider) {\n                          return Math.round(n / ranges[i].divider).toString() + ranges[i].suffix;\n                       }\n                    }\n                    return n;\n                 }\n                 return \"$\" + formatNumber(value);\n              }\n           },\n\t\t\t\t\t}\n\t\t\t\t]\n      },\n      legend: {\n        display: true,\n        position: 'bottom',\n        fontFamily: \"Helvetica\",\n        fontSize: \"12px\",\n        labels: {\n          boxWidth: 5,\n      },\n      \n        \n      }\n      \n\t\t};\n\n    return (\n      \n      <div>\n        {/* <Modal visible={this.state.visible} Width=\"700\" Height=\"530\" effect=\"fadeInDown\"  onClickAway={() => this.closeModal()}>\n        <div style={{margin:\"10px\"}}>\n        <div className=\"graph-heading\" style={{padding:\"10px\"}}> {chartData.title}\n                            <i className=\"fa fa-ellipsis-v pull-right\"></i>\n                            </div>\n       \n        <Tabs defaultActiveKey=\"1\">\n        <TabPane tab=\"Chart\" key=\"1\">\n        <Line data={data} options={options} />  \n        </TabPane>\n        <TabPane tab=\"Table\" key=\"2\">\n          <Table data={chartData}/>\n        </TabPane>\n      </Tabs>\n        </div>\n        </Modal> */}\n        <Modal visible={visible} width=\"700\" height=\"600\" effect=\"fadeInDown\"  onClickAway={() => this.closeModal()}>\n        <div style={{marginTop:\"0px\",padding:\"10px\"}}>\n        <div className=\"graph-heading\" style={{padding:\"10px\"}}> {chartData.title}\n          <i className=\"fa fa-ellipsis-v pull-right modelIcon\" onClick={() => this.openOptions()}></i>\n        </div>\n        <div style={{textAlign: \"right\",padding: \"10px\"}}>\n        <Switch checkedChildren={<Icon style={{fontSize:\"18px\"}} type=\"table\" />} unCheckedChildren={<Icon style={{fontSize:\"18px\"}} type=\"bar-chart\"/>} defaultChecked onChange={()=>this.showTabledata()}/>\n        </div>\n      {this.state.showGraph ? \n        <Line data={data} options={options} />\n      :  <Table data={chartData}/>}\n        </div>\n        </Modal>\n       <Line\n          data={data}\n          options={options}\n          \n        />\n      </div>\n    );\n  }\n}\n//onElementsClick={(e) => { this.openModal() }}\nexport default LineBarChart;\n\n\n\n"]},"metadata":{},"sourceType":"module"}