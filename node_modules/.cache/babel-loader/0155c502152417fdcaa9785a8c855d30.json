{"ast":null,"code":"import _toConsumableArray from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/AutoPromoCreation/AutoPromos.js\";\nimport React, { Component } from \"react\";\nimport PromoTable from \"./PromoTable\";\nimport { Button, Form } from \"react-bootstrap\";\nimport BarChart from \"../Charts/BarCharts\";\nimport AutopromoCharts from \"./Autopromocharts\";\nimport ShowPromoDialog from \"./showPromoDialog\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport AdgroupHistory from \"../../pages/AdgroupHistory.page\";\nimport { getNewPromoDetails as _getNewPromoDetails, savePromos as _savePromos } from \"../../actions/autoPromoCreation\";\nimport \"./radioButton.css\";\nimport axios from \"axios\";\nimport { config } from \"../../utils/config\";\nimport Modal from \"react-awesome-modal\";\n\nvar Promos =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Promos, _Component);\n\n  function Promos(props) {\n    var _this;\n\n    _classCallCheck(this, Promos);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Promos).call(this, props));\n\n    _this.onselectPromo = function (obj) {\n      console.log(\"obj:::::::::::::::::\", obj);\n\n      _this.setState({\n        showModel: true\n      }); // obj.optimizedValue = {\n      //   promo_value: obj.promo_value,\n      //   promo_type: obj.promo_type\n      // };\n\n\n      _this.setState({\n        selectedPromo: obj\n      });\n    };\n\n    _this.showToast = function () {\n      _this.setState({\n        showToast: true\n      });\n\n      toast.info(\"Promotion submitted for approval\", {\n        containerId: \"TOP_RIGHT_TOAST\",\n        className: \"toasterCss\"\n      });\n    };\n\n    _this.onCancel = function () {\n      _this.setState({\n        showModel: false,\n        isAdd: false\n      });\n    };\n\n    _this.onSetClick = function (index) {\n      _this.setState({\n        selectedIndex: index\n      });\n\n      _this.setState({\n        onEdit: false\n      });\n    };\n\n    _this.onAdd = function (obj) {\n      var a = obj.promo_data[0];\n      var cloneObj = {\n        adgroup: \"\",\n        category: a.category,\n        kpi: {},\n        promo_type: \"\",\n        promo_value: \"\"\n      };\n\n      _this.setState({\n        isAdd: true\n      });\n\n      _this.setState({\n        showModel: true\n      });\n\n      _this.setState({\n        selectedPromo: cloneObj\n      });\n    };\n\n    _this.onApply = function (promo) {\n      // promo.adgroup = \"BATIKS ALL\";\n      var obj = {\n        promos: [promo],\n        budget_utilized: 0\n      };\n\n      var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n      axios.post(\"\".concat(config.autoCreateUrl, \"/get_kpi/\"), obj).then(function (res) {\n        console.log(\"chart data fetched\", res.data, promo);\n\n        if (res.data) {\n          if (self.state.isAdd && self.props.getOptimizedData) {\n            console.log(\"self.props.optimizedData:\", self.props.getOptimizedData);\n            var data = res.data.promo_data[0];\n            var obj1 = data.kpi;\n            var kpi = self.props.getOptimizedData.promo_data[0].kpi;\n            console.log(\"kpi:\", obj1);\n            obj1.margin = kpi && kpi.margin ? [kpi.margin[0], kpi.margin[1], obj1.margin[1]] : _toConsumableArray(obj.margin);\n            obj1.qty = kpi && kpi.qty ? [kpi.qty[0], kpi.qty[1], obj1.qty[1]] : _toConsumableArray(obj.qty);\n            obj1.revenue = kpi && kpi.revenue ? [kpi.revenue[0], kpi.revenue[1], obj1.revenue[1]] : _toConsumableArray(obj.revenue); // obj1.qty.splice(2, 0, kpi.qty[1]);\n            // obj1.revenue.splice(2, 0, kpi.revenue[1]);\n\n            data.optimizedValue = {\n              promo_value: self.props.getOptimizedData.promo_data[0].promo_value,\n              promo_type: self.props.getOptimizedData.promo_data[0].promo_type\n            }; // obj.margin.splice(2, 0, kpi.margin[1]) =\n            //   // kpi && kpi.margin\n            //   [...obj.margin, kpi.margin[1]];\n            // // // : [...obj.margin];\n            // obj.qty = [...obj.qty, kpi.qty[1]];\n            // obj.revenue = [...obj.revenue, kpi.revenue[1]];\n\n            console.log(\"objjjjj:\", obj1, res.data.promo_data[0]);\n            self.setState({\n              selectedPromo: res.data.promo_data[0]\n            });\n          } else {\n            var _data = res.data.promo_data[0]; // data.promo_value =promo.promo_value\n            //   data.promo_type = promo_data[0];\n\n            var _obj = _data.kpi;\n            _obj.margin = promo.kpi && promo.kpi.margin ? [promo.kpi.margin[0], promo.kpi.margin[1], _obj.margin[1]] : _toConsumableArray(_obj.margin);\n            _obj.qty = promo.kpi && promo.kpi.qty ? [promo.kpi.qty[0], promo.kpi.qty[1], _obj.qty[1]] : _toConsumableArray(_obj.qty);\n            _obj.revenue = promo.kpi && promo.kpi.revenue ? [promo.kpi.revenue[0], promo.kpi.revenue[1], _obj.revenue[1]] : _toConsumableArray(_obj.revenue); // data.optimizedValue = {\n            //   promo_value: promo.promo_value,\n            //   promo_type: promo.promo_type\n            // };\n\n            self.setState({\n              selectedPromo: _data\n            });\n          } // if (!Object.keys(promo.kpi).length) {\n          //   this.props.onAddPromo(promo.adgroup);\n          // }\n\n        }\n      }).catch(function (err) {\n        console.log(\"errrrr\", err);\n      });\n    };\n\n    _this.callOptimizedData = function (subCategory) {\n      _this.props.onAddPromo(subCategory);\n    };\n\n    _this.onSaveEditedPromo = function (obj) {\n      _this.setState({\n        showModel: false\n      });\n\n      _this.props.onSaveEditedPromo(_this.state.selectedPromo, _this.state.selectedIndex);\n    };\n\n    _this.onAddNewPromo = function () {\n      _this.setState({\n        showModel: false,\n        isAdd: false\n      });\n\n      _this.props.onAddNewPromo(_this.state.selectedPromo, _this.state.selectedIndex); // this.state.selectedPromo\n      // this.state.selectedIndex\n      // this.props.autoPromoData;\n\n    };\n\n    _this.onSave = function () {\n      _this.props.savePromos(_this.props.autoPromoData, _this.state.selectedIndex);\n\n      _this.setState({\n        onEdit: false\n      });\n    };\n\n    _this.setHideToast = function () {\n      _this.setState({\n        showToast: false\n      });\n    };\n\n    _this.onEdit = function () {\n      _this.setState({\n        onEdit: true\n      });\n    };\n\n    _this.setShowAdGroupHistory = function () {\n      _this.setState({\n        showAdGroupHistory: false\n      });\n    };\n\n    _this.state = {\n      showModel: false,\n      showAdGroupHistory: false,\n      selectedIndex: 0,\n      onEdit: false,\n      selectedPromo: {},\n      isAdd: false,\n      showToast: false,\n      adGroupCategory: '',\n      adGroupSku: ''\n    };\n    return _this;\n  }\n\n  _createClass(Promos, [{\n    key: \"onShowHistory\",\n    value: function onShowHistory(category, skuGroup) {\n      this.setState({\n        adGroupCategory: category,\n        adGroupSku: skuGroup\n      });\n      this.setState({\n        showAdGroupHistory: true\n      });\n    }\n  }, {\n    key: \"render\",\n    // componentWillUnmount() {\n    //   debugger;\n    //   console.log(\"Clock\", \"componentWillUnmount\");\n    //   this.setState({ showModel: false });\n    // }\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-evenly\",\n          marginTop: \"30px\",\n          marginLeft: \"-104px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(ToastContainer, {\n        containerId: \"TOP_RIGHT_TOAST\",\n        position: toast.POSITION.TOP_RIGHT,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), [0, 1, 2].map(function (index) {\n        return React.createElement(\"div\", {\n          className: _this2.state.selectedIndex === index ? \"activeShadow\" : \"\",\n          style: {\n            padding: \"8px\",\n            width: \"16.6rem\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-md-8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          class: \"container-radio-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }, \"Set 0\".concat(index + 1), React.createElement(\"input\", {\n          id: \"setLabel\",\n          type: \"radio\",\n          checked: _this2.state.selectedIndex === index,\n          name: \"set\",\n          onClick: function onClick() {\n            return _this2.onSetClick(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          class: \"checkmark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"col-md-2\",\n          style: {\n            paddingRight: \"6px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, _this2.state.selectedIndex === index ? React.createElement(\"button\", {\n          className: \"btn btn-primary btn-sm\",\n          onClick: function onClick() {\n            _this2.state.selectedIndex === index && _this2.state.onEdit ? _this2.onSave() : _this2.onEdit();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274\n          },\n          __self: this\n        }, _this2.state.selectedIndex === index && _this2.state.onEdit ? \"Save\" : \" Edit \") : null)), React.createElement(PromoTable, {\n          onselectPromo: function onselectPromo(e) {\n            return _this2.onselectPromo(e);\n          },\n          autoPromoData: _this2.props.autoPromoData[index].promo_data,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }), _this2.state.selectedIndex === index && _this2.state.onEdit ? React.createElement(Button, {\n          variant: \"secondary\",\n          style: {\n            width: \"100%\",\n            backgroundColor: \"#44677B\"\n          },\n          onClick: function onClick() {\n            return _this2.onAdd(_this2.props.autoPromoData[index]);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, \"+ Add\") : null);\n      })), React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          marginTop: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          fontSize: \"15px\",\n          paddingRight: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"Budget Utilized:\", \" \"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"$\", parseFloat(this.props.autoPromoData[this.state.selectedIndex].budget_utilized.toFixed(2)).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"))), React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          // display: \"flex\",\n          justifyContent: \"space-evenly\",\n          marginTop: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(AutopromoCharts, {\n        title: \"Quanity\",\n        width: \"16.5rem\",\n        height: \"328px\",\n        data: this.props.autoPromoData[this.state.selectedIndex].overall_kpi.qty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, React.createElement(AutopromoCharts, {\n        title: \"Revenue\",\n        width: \"16.5rem\",\n        height: \"328px\",\n        data: this.props.autoPromoData[this.state.selectedIndex].overall_kpi.revenue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(AutopromoCharts, {\n        title: \"Margin\",\n        width: \"16.5rem\",\n        height: \"328px\",\n        data: this.props.autoPromoData[this.state.selectedIndex].overall_kpi.margin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\",\n          marginTop: \"20px\",\n          marginBottom: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"secondary\",\n        style: {\n          backgroundColor: \"#44677B\"\n        },\n        onClick: function onClick() {\n          return _this2.showToast();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, \"Submit promotions for approval\")), this.state.selectedIndex + 1 && this.state.selectedPromo && Object.keys(this.state.selectedPromo).length && !!this.state.showModel ? React.createElement(ShowPromoDialog, {\n        selectedDate: this.props.selectedDate,\n        show: this.state.showModel,\n        callOptimizedData: function callOptimizedData(subCategory) {\n          return _this2.callOptimizedData(subCategory);\n        },\n        data: this.state.selectedPromo,\n        optimizedData: this.props.getOptimizedData,\n        onCancel: function onCancel() {\n          return _this2.onCancel();\n        },\n        subCategories: this.props.subCategories,\n        onApply: function onApply(promo) {\n          return _this2.onApply(promo);\n        },\n        isAdd: this.state.isAdd,\n        onShowHistory: function onShowHistory(category, subgroup) {\n          return _this2.onShowHistory(category, subgroup);\n        },\n        onAdd: function onAdd(data) {\n          return _this2.onAddNewPromo(data);\n        },\n        key: this.props.selectedIndex + this.state.selectedPromo,\n        onSaveEditedPromo: function onSaveEditedPromo(obj) {\n          return _this2.onSaveEditedPromo(obj);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }) : null, React.createElement(Modal, {\n        visible: this.state.showAdGroupHistory,\n        width: \"100%\",\n        height: \"100%\",\n        effect: \"fadeInDown\",\n        style: {\n          zIndex: 10000\n        },\n        onClickAway: function onClickAway() {\n          return _this2.setShowAdGroupHistory();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          overflowY: 'auto',\n          height: '700px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        onClick: function onClick() {\n          return _this2.setShowAdGroupHistory();\n        },\n        className: \"pull-right\",\n        style: {\n          cursor: \"pointer\",\n          zIndex: \"10000\",\n          position: \"relative\",\n          margin: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-times\",\n        \"aria-hidden\": \"true\",\n        style: {\n          fontSize: \"22px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      })), React.createElement(AdgroupHistory, {\n        adGroupCategory: this.state.adGroupCategory,\n        adGroupSku: this.state.adGroupSku,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Promos;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {// summaryCumulativeFilters: state.summaryData.summaryCumulativeFilters,\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getNewPromoDetails: function getNewPromoDetails(val) {\n      return dispatch(_getNewPromoDetails(val));\n    },\n    savePromos: function savePromos(promos, index) {\n      return dispatch(_savePromos(promos, index));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Promos));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/AutoPromoCreation/AutoPromos.js"],"names":["React","Component","PromoTable","Button","Form","BarChart","AutopromoCharts","ShowPromoDialog","connect","withRouter","ToastContainer","toast","AdgroupHistory","getNewPromoDetails","savePromos","axios","config","Modal","Promos","props","onselectPromo","obj","console","log","setState","showModel","selectedPromo","showToast","info","containerId","className","onCancel","isAdd","onSetClick","index","selectedIndex","onEdit","onAdd","a","promo_data","cloneObj","adgroup","category","kpi","promo_type","promo_value","onApply","promo","promos","budget_utilized","self","post","autoCreateUrl","then","res","data","state","getOptimizedData","obj1","margin","qty","revenue","optimizedValue","catch","err","callOptimizedData","subCategory","onAddPromo","onSaveEditedPromo","onAddNewPromo","onSave","autoPromoData","setHideToast","setShowAdGroupHistory","showAdGroupHistory","adGroupCategory","adGroupSku","skuGroup","display","justifyContent","marginTop","marginLeft","POSITION","TOP_RIGHT","map","padding","width","paddingRight","e","backgroundColor","fontSize","parseFloat","toFixed","toString","replace","overall_kpi","textAlign","marginBottom","Object","keys","length","selectedDate","subCategories","subgroup","onShowHistory","zIndex","overflowY","height","cursor","position","mapStateToProps","mapDispatchToProps","dispatch","val"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,iBAA7B;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,SACEC,kBAAkB,IAAlBA,mBADF,EAEEC,UAAU,IAAVA,WAFF,QAGO,iCAHP;AAIA,OAAO,mBAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;;IACMC,M;;;;;AACJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gFAAMA,KAAN;;AADiB,UAenBC,aAfmB,GAeH,UAAAC,GAAG,EAAI;AACrBC,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCF,GAApC;;AACA,YAAKG,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd,EAFqB,CAGrB;AACA;AACA;AACA;;;AACA,YAAKD,QAAL,CAAc;AAAEE,QAAAA,aAAa,EAAEL;AAAjB,OAAd;AACD,KAvBkB;;AAAA,UAyBnBM,SAzBmB,GAyBP,YAAM;AAChB,YAAKH,QAAL,CAAc;AACZG,QAAAA,SAAS,EAAE;AADC,OAAd;;AAGAhB,MAAAA,KAAK,CAACiB,IAAN,CAAW,kCAAX,EAA+C;AAC7CC,QAAAA,WAAW,EAAE,iBADgC;AAE7CC,QAAAA,SAAS,EAAE;AAFkC,OAA/C;AAID,KAjCkB;;AAAA,UAmCnBC,QAnCmB,GAmCR,YAAM;AACf,YAAKP,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE,KAAb;AAAoBO,QAAAA,KAAK,EAAE;AAA3B,OAAd;AACD,KArCkB;;AAAA,UAuCnBC,UAvCmB,GAuCN,UAAAC,KAAK,EAAI;AACpB,YAAKV,QAAL,CAAc;AAAEW,QAAAA,aAAa,EAAED;AAAjB,OAAd;;AACA,YAAKV,QAAL,CAAc;AAAEY,QAAAA,MAAM,EAAE;AAAV,OAAd;AACD,KA1CkB;;AAAA,UA4CnBC,KA5CmB,GA4CX,UAAAhB,GAAG,EAAI;AACb,UAAIiB,CAAC,GAAGjB,GAAG,CAACkB,UAAJ,CAAe,CAAf,CAAR;AACA,UAAIC,QAAQ,GAAG;AACbC,QAAAA,OAAO,EAAE,EADI;AAEbC,QAAAA,QAAQ,EAAEJ,CAAC,CAACI,QAFC;AAGbC,QAAAA,GAAG,EAAE,EAHQ;AAIbC,QAAAA,UAAU,EAAE,EAJC;AAKbC,QAAAA,WAAW,EAAE;AALA,OAAf;;AAOA,YAAKrB,QAAL,CAAc;AACZQ,QAAAA,KAAK,EAAE;AADK,OAAd;;AAGA,YAAKR,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd;;AACA,YAAKD,QAAL,CAAc;AACZE,QAAAA,aAAa,EAAEc;AADH,OAAd;AAGD,KA5DkB;;AAAA,UA8DnBM,OA9DmB,GA8DT,UAAAC,KAAK,EAAI;AACjB;AACA,UAAI1B,GAAG,GAAG;AACR2B,QAAAA,MAAM,EAAE,CAACD,KAAD,CADA;AAERE,QAAAA,eAAe,EAAE;AAFT,OAAV;;AAIA,UAAIC,IAAI,wDAAR;;AACAnC,MAAAA,KAAK,CACFoC,IADH,WACWnC,MAAM,CAACoC,aADlB,gBAC4C/B,GAD5C,EAEGgC,IAFH,CAEQ,UAAAC,GAAG,EAAI;AACXhC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC+B,GAAG,CAACC,IAAtC,EAA4CR,KAA5C;;AACA,YAAIO,GAAG,CAACC,IAAR,EAAc;AACZ,cAAIL,IAAI,CAACM,KAAL,CAAWxB,KAAX,IAAoBkB,IAAI,CAAC/B,KAAL,CAAWsC,gBAAnC,EAAqD;AACnDnC,YAAAA,OAAO,CAACC,GAAR,CACE,2BADF,EAEE2B,IAAI,CAAC/B,KAAL,CAAWsC,gBAFb;AAIA,gBAAIF,IAAI,GAAGD,GAAG,CAACC,IAAJ,CAAShB,UAAT,CAAoB,CAApB,CAAX;AACA,gBAAImB,IAAI,GAAGH,IAAI,CAACZ,GAAhB;AACA,gBAAIA,GAAG,GAAGO,IAAI,CAAC/B,KAAL,CAAWsC,gBAAX,CAA4BlB,UAA5B,CAAuC,CAAvC,EAA0CI,GAApD;AACArB,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBmC,IAApB;AACAA,YAAAA,IAAI,CAACC,MAAL,GAAchB,GAAG,IAAIA,GAAG,CAACgB,MAAX,GACZ,CAAChB,GAAG,CAACgB,MAAJ,CAAW,CAAX,CAAD,EAAgBhB,GAAG,CAACgB,MAAJ,CAAW,CAAX,CAAhB,EAA+BD,IAAI,CAACC,MAAL,CAAY,CAAZ,CAA/B,CADY,sBAERtC,GAAG,CAACsC,MAFI,CAAd;AAGAD,YAAAA,IAAI,CAACE,GAAL,GAAWjB,GAAG,IAAIA,GAAG,CAACiB,GAAX,GACT,CAACjB,GAAG,CAACiB,GAAJ,CAAQ,CAAR,CAAD,EAAajB,GAAG,CAACiB,GAAJ,CAAQ,CAAR,CAAb,EAAyBF,IAAI,CAACE,GAAL,CAAS,CAAT,CAAzB,CADS,sBAELvC,GAAG,CAACuC,GAFC,CAAX;AAGAF,YAAAA,IAAI,CAACG,OAAL,GAAelB,GAAG,IAAIA,GAAG,CAACkB,OAAX,GACb,CAAClB,GAAG,CAACkB,OAAJ,CAAY,CAAZ,CAAD,EAAiBlB,GAAG,CAACkB,OAAJ,CAAY,CAAZ,CAAjB,EAAiCH,IAAI,CAACG,OAAL,CAAa,CAAb,CAAjC,CADa,sBAETxC,GAAG,CAACwC,OAFK,CAAf,CAfmD,CAkBnD;AACA;;AACAN,YAAAA,IAAI,CAACO,cAAL,GAAsB;AACpBjB,cAAAA,WAAW,EACTK,IAAI,CAAC/B,KAAL,CAAWsC,gBAAX,CAA4BlB,UAA5B,CAAuC,CAAvC,EAA0CM,WAFxB;AAGpBD,cAAAA,UAAU,EAAEM,IAAI,CAAC/B,KAAL,CAAWsC,gBAAX,CAA4BlB,UAA5B,CAAuC,CAAvC,EAA0CK;AAHlC,aAAtB,CApBmD,CAyBnD;AACA;AACA;AACA;AACA;AACA;;AACAtB,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBmC,IAAxB,EAA8BJ,GAAG,CAACC,IAAJ,CAAShB,UAAT,CAAoB,CAApB,CAA9B;AACAW,YAAAA,IAAI,CAAC1B,QAAL,CAAc;AACZE,cAAAA,aAAa,EAAE4B,GAAG,CAACC,IAAJ,CAAShB,UAAT,CAAoB,CAApB;AADH,aAAd;AAGD,WAnCD,MAmCO;AACL,gBAAIgB,KAAI,GAAGD,GAAG,CAACC,IAAJ,CAAShB,UAAT,CAAoB,CAApB,CAAX,CADK,CAEL;AACA;;AACA,gBAAIlB,IAAG,GAAGkC,KAAI,CAACZ,GAAf;AACAtB,YAAAA,IAAG,CAACsC,MAAJ,GACEZ,KAAK,CAACJ,GAAN,IAAaI,KAAK,CAACJ,GAAN,CAAUgB,MAAvB,GACI,CAACZ,KAAK,CAACJ,GAAN,CAAUgB,MAAV,CAAiB,CAAjB,CAAD,EAAqBZ,KAAK,CAACJ,GAAN,CAAUgB,MAAV,CAAiB,CAAjB,CAArB,EAAyCtC,IAAG,CAACsC,MAAJ,CAAW,CAAX,CAAzC,CADJ,sBAEQtC,IAAG,CAACsC,MAFZ,CADF;AAIAtC,YAAAA,IAAG,CAACuC,GAAJ,GACEb,KAAK,CAACJ,GAAN,IAAaI,KAAK,CAACJ,GAAN,CAAUiB,GAAvB,GACI,CAACb,KAAK,CAACJ,GAAN,CAAUiB,GAAV,CAAc,CAAd,CAAD,EAAkBb,KAAK,CAACJ,GAAN,CAAUiB,GAAV,CAAc,CAAd,CAAlB,EAAmCvC,IAAG,CAACuC,GAAJ,CAAQ,CAAR,CAAnC,CADJ,sBAEQvC,IAAG,CAACuC,GAFZ,CADF;AAIAvC,YAAAA,IAAG,CAACwC,OAAJ,GACEd,KAAK,CAACJ,GAAN,IAAaI,KAAK,CAACJ,GAAN,CAAUkB,OAAvB,GACK,CAACd,KAAK,CAACJ,GAAN,CAAUkB,OAAV,CAAkB,CAAlB,CAAD,EAAsBd,KAAK,CAACJ,GAAN,CAAUkB,OAAV,CAAkB,CAAlB,CAAtB,EAA2CxC,IAAG,CAACwC,OAAJ,CAAY,CAAZ,CAA3C,CADL,sBAEQxC,IAAG,CAACwC,OAFZ,CADF,CAbK,CAiBL;AACA;AACA;AACA;;AACAX,YAAAA,IAAI,CAAC1B,QAAL,CAAc;AACZE,cAAAA,aAAa,EAAE6B;AADH,aAAd;AAGD,WA5DW,CA8DZ;AACA;AACA;;AACD;AACF,OAtEH,EAuEGQ,KAvEH,CAuES,UAAAC,GAAG,EAAI;AACZ1C,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsByC,GAAtB;AACD,OAzEH;AA0ED,KA/IkB;;AAAA,UAiJnBC,iBAjJmB,GAiJC,UAAAC,WAAW,EAAI;AACjC,YAAK/C,KAAL,CAAWgD,UAAX,CAAsBD,WAAtB;AACD,KAnJkB;;AAAA,UAqJnBE,iBArJmB,GAqJC,UAAA/C,GAAG,EAAI;AACzB,YAAKG,QAAL,CAAc;AACZC,QAAAA,SAAS,EAAE;AADC,OAAd;;AAGA,YAAKN,KAAL,CAAWiD,iBAAX,CACE,MAAKZ,KAAL,CAAW9B,aADb,EAEE,MAAK8B,KAAL,CAAWrB,aAFb;AAID,KA7JkB;;AAAA,UA+JnBkC,aA/JmB,GA+JH,YAAM;AACpB,YAAK7C,QAAL,CAAc;AACZC,QAAAA,SAAS,EAAE,KADC;AAEZO,QAAAA,KAAK,EAAE;AAFK,OAAd;;AAIA,YAAKb,KAAL,CAAWkD,aAAX,CACE,MAAKb,KAAL,CAAW9B,aADb,EAEE,MAAK8B,KAAL,CAAWrB,aAFb,EALoB,CASpB;AACA;AACA;;AACD,KA3KkB;;AAAA,UA6KnBmC,MA7KmB,GA6KV,YAAM;AACb,YAAKnD,KAAL,CAAWL,UAAX,CAAsB,MAAKK,KAAL,CAAWoD,aAAjC,EAAgD,MAAKf,KAAL,CAAWrB,aAA3D;;AACA,YAAKX,QAAL,CAAc;AACZY,QAAAA,MAAM,EAAE;AADI,OAAd;AAGD,KAlLkB;;AAAA,UAoLnBoC,YApLmB,GAoLJ,YAAM;AACnB,YAAKhD,QAAL,CAAc;AACZG,QAAAA,SAAS,EAAE;AADC,OAAd;AAGD,KAxLkB;;AAAA,UA0LnBS,MA1LmB,GA0LV,YAAM;AACb,YAAKZ,QAAL,CAAc;AAAEY,QAAAA,MAAM,EAAE;AAAV,OAAd;AACD,KA5LkB;;AAAA,UAmMnBqC,qBAnMmB,GAmMK,YAAK;AAC3B,YAAKjD,QAAL,CAAc;AACZkD,QAAAA,kBAAkB,EAAE;AADR,OAAd;AAGD,KAvMkB;;AAEjB,UAAKlB,KAAL,GAAa;AACX/B,MAAAA,SAAS,EAAE,KADA;AAEXiD,MAAAA,kBAAkB,EAAE,KAFT;AAGXvC,MAAAA,aAAa,EAAE,CAHJ;AAIXC,MAAAA,MAAM,EAAE,KAJG;AAKXV,MAAAA,aAAa,EAAE,EALJ;AAMXM,MAAAA,KAAK,EAAE,KANI;AAOXL,MAAAA,SAAS,EAAE,KAPA;AAQXgD,MAAAA,eAAe,EAAE,EARN;AASXC,MAAAA,UAAU,EAAE;AATD,KAAb;AAFiB;AAalB;;;;kCAiLalC,Q,EAAUmC,Q,EAAU;AAChC,WAAKrD,QAAL,CAAc;AAACmD,QAAAA,eAAe,EAAEjC,QAAlB;AAA4BkC,QAAAA,UAAU,EAAEC;AAAxC,OAAd;AACA,WAAKrD,QAAL,CAAc;AAACkD,QAAAA,kBAAkB,EAAE;AAArB,OAAd;AACD;;;AAQD;AACA;AACA;AACA;AACA;6BACS;AAAA;;AACP,aACE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,KAAK,EAAE;AACLI,UAAAA,OAAO,EAAE,MADJ;AAELC,UAAAA,cAAc,EAAE,cAFX;AAGLC,UAAAA,SAAS,EAAE,MAHN;AAILC,UAAAA,UAAU,EAAE;AAJP,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQE,oBAAC,cAAD;AACE,QAAA,WAAW,EAAE,iBADf;AAEE,QAAA,QAAQ,EAAEtE,KAAK,CAACuE,QAAN,CAAeC,SAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,EAYG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAUC,GAAV,CAAc,UAAAlD,KAAK;AAAA,eAClB;AACE,UAAA,SAAS,EACP,MAAI,CAACsB,KAAL,CAAWrB,aAAX,KAA6BD,KAA7B,GAAqC,cAArC,GAAsD,EAF1D;AAIE,UAAA,KAAK,EAAE;AAAEmD,YAAAA,OAAO,EAAE,KAAX;AAAkBC,YAAAA,KAAK,EAAE;AAAzB,WAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAME;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAO,UAAA,KAAK,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACWpD,KAAK,GAAG,CADnB,GAEE;AACE,UAAA,EAAE,EAAC,UADL;AAEE,UAAA,IAAI,EAAC,OAFP;AAGE,UAAA,OAAO,EAAE,MAAI,CAACsB,KAAL,CAAWrB,aAAX,KAA6BD,KAHxC;AAIE,UAAA,IAAI,EAAC,KAJP;AAKE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACD,UAAL,CAAgBC,KAAhB,CAAN;AAAA,WALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,EASE;AAAG,UAAA,KAAK,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UATF,CADF,CADF,EAwBE;AAAK,UAAA,SAAS,EAAC,UAAf;AAA0B,UAAA,KAAK,EAAE;AAAEqD,YAAAA,YAAY,EAAE;AAAhB,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,MAAI,CAAC/B,KAAL,CAAWrB,aAAX,KAA6BD,KAA7B,GACC;AACE,UAAA,SAAS,EAAC,wBADZ;AAEE,UAAA,OAAO,EAAE,mBAAM;AACb,YAAA,MAAI,CAACsB,KAAL,CAAWrB,aAAX,KAA6BD,KAA7B,IAAsC,MAAI,CAACsB,KAAL,CAAWpB,MAAjD,GACI,MAAI,CAACkC,MAAL,EADJ,GAEI,MAAI,CAAClC,MAAL,EAFJ;AAGD,WANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAQG,MAAI,CAACoB,KAAL,CAAWrB,aAAX,KAA6BD,KAA7B,IAAsC,MAAI,CAACsB,KAAL,CAAWpB,MAAjD,GACG,MADH,GAEG,QAVN,CADD,GAaG,IAdN,CAxBF,CANF,EA+CE,oBAAC,UAAD;AACE,UAAA,aAAa,EAAE,uBAAAoD,CAAC;AAAA,mBAAI,MAAI,CAACpE,aAAL,CAAmBoE,CAAnB,CAAJ;AAAA,WADlB;AAEE,UAAA,aAAa,EAAE,MAAI,CAACrE,KAAL,CAAWoD,aAAX,CAAyBrC,KAAzB,EAAgCK,UAFjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA/CF,EAmDG,MAAI,CAACiB,KAAL,CAAWrB,aAAX,KAA6BD,KAA7B,IAAsC,MAAI,CAACsB,KAAL,CAAWpB,MAAjD,GACC,oBAAC,MAAD;AACE,UAAA,OAAO,EAAC,WADV;AAEE,UAAA,KAAK,EAAE;AAAEkD,YAAAA,KAAK,EAAE,MAAT;AAAiBG,YAAAA,eAAe,EAAE;AAAlC,WAFT;AAGE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACpD,KAAL,CAAW,MAAI,CAAClB,KAAL,CAAWoD,aAAX,CAAyBrC,KAAzB,CAAX,CAAN;AAAA,WAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADD,GAQG,IA3DN,CADkB;AAAA,OAAnB,CAZH,CADF,EA6EE;AACE,QAAA,KAAK,EAAE;AACL4C,UAAAA,OAAO,EAAE,MADJ;AAELC,UAAAA,cAAc,EAAE,QAFX;AAGLC,UAAAA,SAAS,EAAE;AAHN,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOE;AAAO,QAAA,KAAK,EAAE;AAAEU,UAAAA,QAAQ,EAAE,MAAZ;AAAoBH,UAAAA,YAAY,EAAE;AAAlC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACmB,GADnB,CAPF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAEGI,UAAU,CACT,KAAKxE,KAAL,CAAWoD,aAAX,CACE,KAAKf,KAAL,CAAWrB,aADb,EAEEc,eAFF,CAEkB2C,OAFlB,CAE0B,CAF1B,CADS,CAAV,CAKEC,QALF,GAMEC,OANF,CAMU,uBANV,EAMmC,GANnC,CAFH,CAVF,CA7EF,EAkGE;AACE,QAAA,SAAS,EAAC,KADZ;AAEE,QAAA,KAAK,EAAE;AACL;AACAf,UAAAA,cAAc,EAAE,cAFX;AAGLC,UAAAA,SAAS,EAAE;AAHN,SAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AACE,QAAA,KAAK,EAAC,SADR;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,QAAA,MAAM,EAAC,OAHT;AAIE,QAAA,IAAI,EACF,KAAK7D,KAAL,CAAWoD,aAAX,CAAyB,KAAKf,KAAL,CAAWrB,aAApC,EAAmD4D,WAAnD,CACGnC,GANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CARF,EAmBE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AACE,QAAA,KAAK,EAAC,SADR;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,QAAA,MAAM,EAAC,OAHT;AAIE,QAAA,IAAI,EACF,KAAKzC,KAAL,CAAWoD,aAAX,CAAyB,KAAKf,KAAL,CAAWrB,aAApC,EAAmD4D,WAAnD,CACGlC,OANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAnBF,EA8BE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,eAAD;AACE,QAAA,KAAK,EAAC,QADR;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,QAAA,MAAM,EAAC,OAHT;AAIE,QAAA,IAAI,EACF,KAAK1C,KAAL,CAAWoD,aAAX,CAAyB,KAAKf,KAAL,CAAWrB,aAApC,EAAmD4D,WAAnD,CACGpC,MANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CA9BF,CAlGF,EA4IE;AACE,QAAA,KAAK,EAAE;AACLqC,UAAAA,SAAS,EAAE,QADN;AAELhB,UAAAA,SAAS,EAAE,MAFN;AAGLiB,UAAAA,YAAY,EAAE;AAHT,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOE,oBAAC,MAAD;AACE,QAAA,OAAO,EAAC,WADV;AAEE,QAAA,KAAK,EAAE;AAAER,UAAAA,eAAe,EAAE;AAAnB,SAFT;AAGE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAAC9D,SAAL,EAAN;AAAA,SAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAPF,CA5IF,EA2JG,KAAK6B,KAAL,CAAWrB,aAAX,GAA2B,CAA3B,IACD,KAAKqB,KAAL,CAAW9B,aADV,IAEDwE,MAAM,CAACC,IAAP,CAAY,KAAK3C,KAAL,CAAW9B,aAAvB,EAAsC0E,MAFrC,IAGD,CAAC,CAAC,KAAK5C,KAAL,CAAW/B,SAHZ,GAIC,oBAAC,eAAD;AACE,QAAA,YAAY,EAAE,KAAKN,KAAL,CAAWkF,YAD3B;AAEE,QAAA,IAAI,EAAE,KAAK7C,KAAL,CAAW/B,SAFnB;AAGE,QAAA,iBAAiB,EAAE,2BAAAyC,WAAW;AAAA,iBAC5B,MAAI,CAACD,iBAAL,CAAuBC,WAAvB,CAD4B;AAAA,SAHhC;AAME,QAAA,IAAI,EAAE,KAAKV,KAAL,CAAW9B,aANnB;AAOE,QAAA,aAAa,EAAE,KAAKP,KAAL,CAAWsC,gBAP5B;AAQE,QAAA,QAAQ,EAAE;AAAA,iBAAM,MAAI,CAAC1B,QAAL,EAAN;AAAA,SARZ;AASE,QAAA,aAAa,EAAE,KAAKZ,KAAL,CAAWmF,aAT5B;AAUE,QAAA,OAAO,EAAE,iBAAAvD,KAAK;AAAA,iBAAI,MAAI,CAACD,OAAL,CAAaC,KAAb,CAAJ;AAAA,SAVhB;AAWE,QAAA,KAAK,EAAE,KAAKS,KAAL,CAAWxB,KAXpB;AAYE,QAAA,aAAa,EAAE,uBAACU,QAAD,EAAW6D,QAAX;AAAA,iBAAwB,MAAI,CAACC,aAAL,CAAmB9D,QAAnB,EAA4B6D,QAA5B,CAAxB;AAAA,SAZjB;AAaE,QAAA,KAAK,EAAE,eAAAhD,IAAI;AAAA,iBAAI,MAAI,CAACc,aAAL,CAAmBd,IAAnB,CAAJ;AAAA,SAbb;AAcE,QAAA,GAAG,EAAE,KAAKpC,KAAL,CAAWgB,aAAX,GAA2B,KAAKqB,KAAL,CAAW9B,aAd7C;AAeE,QAAA,iBAAiB,EAAE,2BAAAL,GAAG;AAAA,iBAAI,MAAI,CAAC+C,iBAAL,CAAuB/C,GAAvB,CAAJ;AAAA,SAfxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJD,GAqBG,IAhLN,EAkLG,oBAAC,KAAD;AACD,QAAA,OAAO,EAAE,KAAKmC,KAAL,CAAWkB,kBADnB;AAED,QAAA,KAAK,EAAC,MAFL;AAGD,QAAA,MAAM,EAAC,MAHN;AAID,QAAA,MAAM,EAAC,YAJN;AAKD,QAAA,KAAK,EAAE;AAAC+B,UAAAA,MAAM,EAAE;AAAT,SALN;AAMD,QAAA,WAAW,EAAE;AAAA,iBAAM,MAAI,CAAChC,qBAAL,EAAN;AAAA,SANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAWD;AAAK,QAAA,KAAK,EAAE;AAACiC,UAAAA,SAAS,EAAC,MAAX;AAAkBC,UAAAA,MAAM,EAAC;AAAzB,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AACE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAAClC,qBAAL,EAAN;AAAA,SADX;AAEE,QAAA,SAAS,EAAC,YAFZ;AAGE,QAAA,KAAK,EAAE;AACLmC,UAAAA,MAAM,EAAE,SADH;AAELH,UAAAA,MAAM,EAAE,OAFH;AAGLI,UAAAA,QAAQ,EAAE,UAHL;AAILlD,UAAAA,MAAM,EAAE;AAJH,SAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUE;AAAG,QAAA,KAAK,EAAC,aAAT;AAAuB,uBAAY,MAAnC;AAA0C,QAAA,KAAK,EAAE;AAAC+B,UAAAA,QAAQ,EAAE;AAAX,SAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVF,CADA,EAaE,oBAAC,cAAD;AAAgB,QAAA,eAAe,EAAE,KAAKlC,KAAL,CAAWmB,eAA5C;AAA6D,QAAA,UAAU,EAAE,KAAKnB,KAAL,CAAWoB,UAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,CAXC,CAlLH,CADF;AAsND;;;;EAtakB3E,S;;AAyarB,IAAM6G,eAAe,GAAG,SAAlBA,eAAkB,CAAAtD,KAAK,EAAI;AAC/B,SAAO,CACL;AADK,GAAP;AAGD,CAJD;;AAMA,IAAMuD,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ,EAAI;AACrC,SAAO;AACLnG,IAAAA,kBAAkB,EAAE,4BAAAoG,GAAG;AAAA,aAAID,QAAQ,CAACnG,mBAAkB,CAACoG,GAAD,CAAnB,CAAZ;AAAA,KADlB;AAELnG,IAAAA,UAAU,EAAE,oBAACkC,MAAD,EAASd,KAAT;AAAA,aAAmB8E,QAAQ,CAAClG,WAAU,CAACkC,MAAD,EAASd,KAAT,CAAX,CAA3B;AAAA;AAFP,GAAP;AAID,CALD;;AAOA,eAAe1B,OAAO,CACpBsG,eADoB,EAEpBC,kBAFoB,CAAP,CAGbtG,UAAU,CAACS,MAAD,CAHG,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport PromoTable from \"./PromoTable\";\nimport { Button, Form } from \"react-bootstrap\";\nimport BarChart from \"../Charts/BarCharts\";\nimport AutopromoCharts from \"./Autopromocharts\";\nimport ShowPromoDialog from \"./showPromoDialog\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport AdgroupHistory from \"../../pages/AdgroupHistory.page\";\nimport {\n  getNewPromoDetails,\n  savePromos\n} from \"../../actions/autoPromoCreation\";\nimport \"./radioButton.css\";\nimport axios from \"axios\";\nimport { config } from \"../../utils/config\";\nimport Modal from \"react-awesome-modal\";\nclass Promos extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModel: false,\n      showAdGroupHistory: false,\n      selectedIndex: 0,\n      onEdit: false,\n      selectedPromo: {},\n      isAdd: false,\n      showToast: false,\n      adGroupCategory: '', \n      adGroupSku: ''\n    };\n  }\n\n  onselectPromo = obj => {\n    console.log(\"obj:::::::::::::::::\", obj);\n    this.setState({ showModel: true });\n    // obj.optimizedValue = {\n    //   promo_value: obj.promo_value,\n    //   promo_type: obj.promo_type\n    // };\n    this.setState({ selectedPromo: obj });\n  };\n\n  showToast = () => {\n    this.setState({\n      showToast: true\n    });\n    toast.info(\"Promotion submitted for approval\", {\n      containerId: \"TOP_RIGHT_TOAST\",\n      className: \"toasterCss\"\n    });\n  };\n\n  onCancel = () => {\n    this.setState({ showModel: false, isAdd: false });\n  };\n\n  onSetClick = index => {\n    this.setState({ selectedIndex: index });\n    this.setState({ onEdit: false });\n  };\n\n  onAdd = obj => {\n    let a = obj.promo_data[0];\n    let cloneObj = {\n      adgroup: \"\",\n      category: a.category,\n      kpi: {},\n      promo_type: \"\",\n      promo_value: \"\"\n    };\n    this.setState({\n      isAdd: true\n    });\n    this.setState({ showModel: true });\n    this.setState({\n      selectedPromo: cloneObj\n    });\n  };\n\n  onApply = promo => {\n    // promo.adgroup = \"BATIKS ALL\";\n    let obj = {\n      promos: [promo],\n      budget_utilized: 0\n    };\n    let self = this;\n    axios\n      .post(`${config.autoCreateUrl}/get_kpi/`, obj)\n      .then(res => {\n        console.log(\"chart data fetched\", res.data, promo);\n        if (res.data) {\n          if (self.state.isAdd && self.props.getOptimizedData) {\n            console.log(\n              \"self.props.optimizedData:\",\n              self.props.getOptimizedData\n            );\n            let data = res.data.promo_data[0];\n            let obj1 = data.kpi;\n            let kpi = self.props.getOptimizedData.promo_data[0].kpi;\n            console.log(\"kpi:\", obj1);\n            obj1.margin = kpi && kpi.margin\n            ? [kpi.margin[0], kpi.margin[1], obj1.margin[1]]\n            : [...obj.margin];\n            obj1.qty = kpi && kpi.qty\n            ? [kpi.qty[0], kpi.qty[1], obj1.qty[1]]\n            : [...obj.qty];\n            obj1.revenue = kpi && kpi.revenue\n            ? [kpi.revenue[0], kpi.revenue[1], obj1.revenue[1]]\n            : [...obj.revenue];\n            // obj1.qty.splice(2, 0, kpi.qty[1]);\n            // obj1.revenue.splice(2, 0, kpi.revenue[1]);\n            data.optimizedValue = {\n              promo_value:\n                self.props.getOptimizedData.promo_data[0].promo_value,\n              promo_type: self.props.getOptimizedData.promo_data[0].promo_type\n            };\n            // obj.margin.splice(2, 0, kpi.margin[1]) =\n            //   // kpi && kpi.margin\n            //   [...obj.margin, kpi.margin[1]];\n            // // // : [...obj.margin];\n            // obj.qty = [...obj.qty, kpi.qty[1]];\n            // obj.revenue = [...obj.revenue, kpi.revenue[1]];\n            console.log(\"objjjjj:\", obj1, res.data.promo_data[0]);\n            self.setState({\n              selectedPromo: res.data.promo_data[0]\n            });\n          } else {\n            let data = res.data.promo_data[0];\n            // data.promo_value =promo.promo_value\n            //   data.promo_type = promo_data[0];\n            let obj = data.kpi;\n            obj.margin =\n              promo.kpi && promo.kpi.margin\n                ? [promo.kpi.margin[0],promo.kpi.margin[1],obj.margin[1]]\n                : [...obj.margin];\n            obj.qty =\n              promo.kpi && promo.kpi.qty\n                ? [promo.kpi.qty[0],promo.kpi.qty[1],obj.qty[1]]\n                : [...obj.qty];\n            obj.revenue =\n              promo.kpi && promo.kpi.revenue\n                ?  [promo.kpi.revenue[0],promo.kpi.revenue[1],obj.revenue[1]]\n                : [...obj.revenue];\n            // data.optimizedValue = {\n            //   promo_value: promo.promo_value,\n            //   promo_type: promo.promo_type\n            // };\n            self.setState({\n              selectedPromo: data\n            });\n          }\n\n          // if (!Object.keys(promo.kpi).length) {\n          //   this.props.onAddPromo(promo.adgroup);\n          // }\n        }\n      })\n      .catch(err => {\n        console.log(\"errrrr\", err);\n      });\n  };\n\n  callOptimizedData = subCategory => {\n    this.props.onAddPromo(subCategory);\n  };\n\n  onSaveEditedPromo = obj => {\n    this.setState({\n      showModel: false\n    });\n    this.props.onSaveEditedPromo(\n      this.state.selectedPromo,\n      this.state.selectedIndex\n    );\n  };\n\n  onAddNewPromo = () => {\n    this.setState({\n      showModel: false,\n      isAdd: false\n    });\n    this.props.onAddNewPromo(\n      this.state.selectedPromo,\n      this.state.selectedIndex\n    );\n    // this.state.selectedPromo\n    // this.state.selectedIndex\n    // this.props.autoPromoData;\n  };\n\n  onSave = () => {\n    this.props.savePromos(this.props.autoPromoData, this.state.selectedIndex);\n    this.setState({\n      onEdit: false\n    });\n  };\n\n  setHideToast = () => {\n    this.setState({\n      showToast: false\n    });\n  };\n\n  onEdit = () => {\n    this.setState({ onEdit: true });\n  };\n\n  onShowHistory(category, skuGroup) {\n    this.setState({adGroupCategory: category, adGroupSku: skuGroup})\n    this.setState({showAdGroupHistory: true})\n  }\n\n  setShowAdGroupHistory = ()=> {\n    this.setState({\n      showAdGroupHistory: false\n    });\n  }\n\n  // componentWillUnmount() {\n  //   debugger;\n  //   console.log(\"Clock\", \"componentWillUnmount\");\n  //   this.setState({ showModel: false });\n  // }\n  render() {\n    return (\n      <div className=\"card\">\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-evenly\",\n            marginTop: \"30px\",\n            marginLeft: \"-104px\"\n          }}\n        >\n          <ToastContainer\n            containerId={\"TOP_RIGHT_TOAST\"}\n            position={toast.POSITION.TOP_RIGHT}\n          />\n          {[0, 1, 2].map(index => (\n            <div\n              className={\n                this.state.selectedIndex === index ? \"activeShadow\" : \"\"\n              }\n              style={{ padding: \"8px\", width: \"16.6rem\" }}\n            >\n              <div className=\"row\">\n                <div className=\"col-md-8\">\n                  <label class=\"container-radio-button\">\n                    {`Set 0${index + 1}`}\n                    <input\n                      id=\"setLabel\"\n                      type=\"radio\"\n                      checked={this.state.selectedIndex === index}\n                      name=\"set\"\n                      onClick={() => this.onSetClick(index)}\n                    />\n                    <p class=\"checkmark\"></p>\n                  </label>\n                </div>\n                {/* <Form.Check\n                  type=\"radio\"\n                  id={`default-radio`}\n                  label={`Set 0${index + 1}`}\n                  name=\"set\"\n                  value=\"0\"\n                  onClick={() => this.onSetClick(index)}\n                  checked={this.state.selectedIndex === index}\n                /> */}\n\n                <div className=\"col-md-2\" style={{ paddingRight: \"6px\" }}>\n                  {this.state.selectedIndex === index ? (\n                    <button\n                      className=\"btn btn-primary btn-sm\"\n                      onClick={() => {\n                        this.state.selectedIndex === index && this.state.onEdit\n                          ? this.onSave()\n                          : this.onEdit();\n                      }}\n                    >\n                      {this.state.selectedIndex === index && this.state.onEdit\n                        ? \"Save\"\n                        : \" Edit \"}\n                    </button>\n                  ) : null}\n                </div>\n              </div>\n              <PromoTable\n                onselectPromo={e => this.onselectPromo(e)}\n                autoPromoData={this.props.autoPromoData[index].promo_data}\n              />\n              {this.state.selectedIndex === index && this.state.onEdit ? (\n                <Button\n                  variant=\"secondary\"\n                  style={{ width: \"100%\", backgroundColor: \"#44677B\" }}\n                  onClick={() => this.onAdd(this.props.autoPromoData[index])}\n                >\n                  + Add\n                </Button>\n              ) : null}\n            </div>\n          ))}\n        </div>\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginTop: \"20px\"\n          }}\n        >\n          <label style={{ fontSize: \"15px\", paddingRight: \"10px\" }}>\n            Budget Utilized:{\" \"}\n          </label>\n          <span>\n            $\n            {parseFloat(\n              this.props.autoPromoData[\n                this.state.selectedIndex\n              ].budget_utilized.toFixed(2)\n            )\n              .toString()\n              .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\n          </span>\n        </div>\n        <div\n          className=\"row\"\n          style={{\n            // display: \"flex\",\n            justifyContent: \"space-evenly\",\n            marginTop: \"20px\"\n          }}\n        >\n          <div className=\"col-md-3\">\n            <AutopromoCharts\n              title=\"Quanity\"\n              width=\"16.5rem\"\n              height=\"328px\"\n              data={\n                this.props.autoPromoData[this.state.selectedIndex].overall_kpi\n                  .qty\n              }\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <AutopromoCharts\n              title=\"Revenue\"\n              width=\"16.5rem\"\n              height=\"328px\"\n              data={\n                this.props.autoPromoData[this.state.selectedIndex].overall_kpi\n                  .revenue\n              }\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <AutopromoCharts\n              title=\"Margin\"\n              width=\"16.5rem\"\n              height=\"328px\"\n              data={\n                this.props.autoPromoData[this.state.selectedIndex].overall_kpi\n                  .margin\n              }\n            />\n          </div>\n        </div>\n        <div\n          style={{\n            textAlign: \"center\",\n            marginTop: \"20px\",\n            marginBottom: \"20px\"\n          }}\n        >\n          <Button\n            variant=\"secondary\"\n            style={{ backgroundColor: \"#44677B\" }}\n            onClick={() => this.showToast()}\n          >\n            Submit promotions for approval\n          </Button>\n        </div>\n        {this.state.selectedIndex + 1 &&\n        this.state.selectedPromo &&\n        Object.keys(this.state.selectedPromo).length &&\n        !!this.state.showModel ? (\n          <ShowPromoDialog\n            selectedDate={this.props.selectedDate}\n            show={this.state.showModel}\n            callOptimizedData={subCategory =>\n              this.callOptimizedData(subCategory)\n            }\n            data={this.state.selectedPromo}\n            optimizedData={this.props.getOptimizedData}\n            onCancel={() => this.onCancel()}\n            subCategories={this.props.subCategories}\n            onApply={promo => this.onApply(promo)}\n            isAdd={this.state.isAdd}\n            onShowHistory={(category, subgroup) => this.onShowHistory(category,subgroup)}\n            onAdd={data => this.onAddNewPromo(data)}\n            key={this.props.selectedIndex + this.state.selectedPromo}\n            onSaveEditedPromo={obj => this.onSaveEditedPromo(obj)}\n          />\n        ) : null}\n        {/* <Col xs={6}> */}\n         <Modal\n        visible={this.state.showAdGroupHistory}\n        width=\"100%\"\n        height=\"100%\"\n        effect=\"fadeInDown\"\n        style={{zIndex: 10000}}\n        onClickAway={() => this.setShowAdGroupHistory()}\n      >\n      \n          \n\n        <div style={{overflowY:'auto',height:'700px'}}>\n        <span\n          onClick={() => this.setShowAdGroupHistory()}\n          className=\"pull-right\"\n          style={{\n            cursor: \"pointer\",\n            zIndex: \"10000\",\n            position: \"relative\",\n            margin: \"10px\"\n          }}\n        >\n          <i class=\"fa fa-times\" aria-hidden=\"true\" style={{fontSize: \"22px\"}}/>\n        </span>\n          <AdgroupHistory adGroupCategory={this.state.adGroupCategory} adGroupSku={this.state.adGroupSku}></AdgroupHistory>\n        </div>\n          \n            {/* <p>Promotion submitted successfully for approval</p> */}\n          {/* </Modal.Body>*/}\n\n         \n        </Modal>  \n        {/* </Col> */}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    // summaryCumulativeFilters: state.summaryData.summaryCumulativeFilters,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getNewPromoDetails: val => dispatch(getNewPromoDetails(val)),\n    savePromos: (promos, index) => dispatch(savePromos(promos, index))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(Promos));\n"]},"metadata":{},"sourceType":"module"}