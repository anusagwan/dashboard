{"ast":null,"code":"import _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/CalenderMarkdown/detailedMarkdown.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { isEqual } from 'lodash';\nimport PageLoader from '../../utils/Loader';\nimport Inventory from '../calenderComponents/inventoryDetails';\nimport CadenceChartComp from '../calenderComponents/cadenceChatComponent';\nimport CardDetails from '../calenderComponents/cardComponent';\nimport _ from 'underscore';\nimport Select from 'react-select';\nimport './markdownCalender.css';\n\nvar CalendarWrapper =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CalendarWrapper, _Component);\n\n  function CalendarWrapper(props) {\n    var _this;\n\n    _classCallCheck(this, CalendarWrapper);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalendarWrapper).call(this, props));\n\n    _this.handleWeeklyInventoryDivisions = function (simData) {\n      var inventoryUtilizationData = {};\n      simData.overall.weekly_markdown.forEach(function (markdown, idx) {\n        if (!inventoryUtilizationData[markdown]) {\n          inventoryUtilizationData[markdown] = [];\n        }\n\n        inventoryUtilizationData[markdown].push(simData.overall.weekly_inventory[idx]);\n      });\n      var inventoryUtilization = {\n        data: [],\n        totalInventory: simData.overall.weekly_inventory.reduce(function (acc) {\n          var val = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          return Number(acc) + Number(val);\n        }) // weeklyInventoryData: Object.keys(inventoryUtilizationData).map(key => inventoryUtilizationData[key]),\n\n      }; // let discounts = ;\n\n      inventoryUtilization['discounts'] = Object.keys(inventoryUtilizationData).map(function (d) {\n        return Number(d);\n      });\n      Object.keys(inventoryUtilizationData).forEach(function (key) {\n        inventoryUtilization.data.push(inventoryUtilizationData[key].reduce(function (acc) {\n          var num = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          return Number(acc) + Number(num);\n        }));\n      });\n      return inventoryUtilization;\n    };\n\n    _this.onDropdownchange = function (val) {\n      var skuvalue = val.value;\n      var markdownID = _this.props.markdownId;\n\n      _this.props.markdownCalendarGraphData({\n        mrk_id: markdownID,\n        sku_ids: skuvalue\n      });\n    };\n\n    _this.state = {\n      currentWeekCount: 0,\n      prevWeekCount: 0,\n      currentQuarter: 1,\n      // showPopUp: false,\n      currentYear: '2019',\n      totalDaysCount: null,\n      styleMargin: [],\n      showRecommendedPromoToolTip: false,\n      tooltipId: -1,\n      barChartData1: 25,\n      barChartData2: 35,\n      barChartData3: 50,\n      chartData: null,\n      showGraph: false\n    };\n    return _this;\n  }\n\n  _createClass(CalendarWrapper, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // if(!isEqual(oldprops.selectedCadenceSet,this.props.selectedCadenceSet)){\n      var newData = this.props.selectedCadenceSet;\n      this.setState({\n        chartData: newData\n      }); // }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(oldprops) {\n      if (!isEqual(oldprops.selectedCadenceSet, this.props.selectedCadenceSet)) {\n        var newData = this.props.selectedCadenceSet;\n        this.setState({\n          chartData: newData,\n          showGraph: !this.state.showGraph\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var skuList = [];\n      this.props.skuList && this.props.skuList.map(function (data) {\n        skuList.push({\n          value: data,\n          label: data\n        });\n      });\n      var selectedSku = [];\n      selectedSku.push({\n        value: this.props.selectedSku ? this.props.selectedSku : null,\n        label: this.props.selectedSku ? this.props.selectedSku : null\n      });\n      return skuList && skuList.length ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(PageLoader, {\n        loader: this.props.loader || this.state.loader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"markdownGraph\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card markdownSubContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          marginLeft: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"heading-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, this.props.markdownName)), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"promoNameText row\",\n        style: {\n          paddingLeft: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Start Date:\", this.props.markdownStartDate ? React.createElement(\"p\", {\n        className: \"promonameResult\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, this.props.markdownStartDate) : null)), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"promoNameText row\",\n        style: {\n          paddingLeft: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"End Date:\", this.props.markdownEndDate ? React.createElement(\"p\", {\n        className: \"promonameResult\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.props.markdownEndDate) : null)), React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"promoNameText row\",\n        style: {\n          paddingLeft: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"# of Sub Categories:\", this.props.skuList ? React.createElement(\"p\", {\n        className: \"promonameResult\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.props.skuList ? this.props.skuList.length : '') : null)))), React.createElement(\"div\", {\n        className: \"col-md-2 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Copy Markdown\"))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"skulistDropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Select, {\n        id: \"businessDescSelect\",\n        placeholder: \"Sub Category List\",\n        options: skuList,\n        onChange: function onChange(val) {\n          return _this2.props.onChangeSku(val);\n        },\n        value: selectedSku,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, this.state.chartData && this.state.showGraph && React.createElement(React.Fragment, null, React.createElement(CadenceChartComp, {\n        selectedCadenceSet: this.state.chartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(Inventory, {\n        inventoryUtilization: this.handleWeeklyInventoryDivisions(this.state.chartData),\n        tooltipEnabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      })), this.state.chartData && !this.state.showGraph && React.createElement(React.Fragment, null, React.createElement(CadenceChartComp, {\n        selectedCadenceSet: this.state.chartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(Inventory, {\n        inventoryUtilization: this.handleWeeklyInventoryDivisions(this.state.chartData),\n        tooltipEnabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, this.state.chartData && React.createElement(CardDetails, {\n        selectedCadenceSet: this.state.chartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })))))))) : null;\n    }\n  }]);\n\n  return CalendarWrapper;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    showLoading: state.calendar.loader\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(CalendarWrapper));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/CalenderMarkdown/detailedMarkdown.js"],"names":["React","Component","connect","withRouter","isEqual","PageLoader","Inventory","CadenceChartComp","CardDetails","_","Select","CalendarWrapper","props","handleWeeklyInventoryDivisions","simData","inventoryUtilizationData","overall","weekly_markdown","forEach","markdown","idx","push","weekly_inventory","inventoryUtilization","data","totalInventory","reduce","acc","val","Number","Object","keys","map","d","key","num","onDropdownchange","skuvalue","value","markdownID","markdownId","markdownCalendarGraphData","mrk_id","sku_ids","state","currentWeekCount","prevWeekCount","currentQuarter","currentYear","totalDaysCount","styleMargin","showRecommendedPromoToolTip","tooltipId","barChartData1","barChartData2","barChartData3","chartData","showGraph","newData","selectedCadenceSet","setState","oldprops","skuList","label","selectedSku","length","loader","marginLeft","markdownName","paddingLeft","markdownStartDate","markdownEndDate","onChangeSku","mapStateToProps","showLoading","calendar"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { isEqual } from 'lodash';\nimport PageLoader from '../../utils/Loader';\n\nimport Inventory from '../calenderComponents/inventoryDetails';\nimport CadenceChartComp from '../calenderComponents/cadenceChatComponent';\nimport CardDetails from '../calenderComponents/cardComponent';\n\nimport _ from 'underscore';\n\nimport Select from 'react-select';\nimport './markdownCalender.css';\n\nclass CalendarWrapper extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentWeekCount: 0,\n      prevWeekCount: 0,\n      currentQuarter: 1,\n      // showPopUp: false,\n      currentYear: '2019',\n      totalDaysCount: null,\n      styleMargin: [],\n      showRecommendedPromoToolTip: false,\n      tooltipId: -1,\n      barChartData1: 25,\n      barChartData2: 35,\n      barChartData3: 50,\n      chartData: null,\n      showGraph: false,\n    };\n  }\n\n  componentDidMount() {\n    // if(!isEqual(oldprops.selectedCadenceSet,this.props.selectedCadenceSet)){\n    const newData = this.props.selectedCadenceSet;\n    this.setState({\n      chartData: newData,\n    });\n    // }\n  }\n\n  componentDidUpdate(oldprops) {\n    if (!isEqual(oldprops.selectedCadenceSet, this.props.selectedCadenceSet)) {\n      const newData = this.props.selectedCadenceSet;\n\n      this.setState({\n        chartData: newData,\n        showGraph: !this.state.showGraph,\n      });\n    }\n  }\n\n  handleWeeklyInventoryDivisions = (simData) => {\n    let inventoryUtilizationData = {};\n    simData.overall.weekly_markdown.forEach((markdown, idx) => {\n      if (!inventoryUtilizationData[markdown]) {\n        inventoryUtilizationData[markdown] = [];\n      }\n      inventoryUtilizationData[markdown].push(simData.overall.weekly_inventory[idx]);\n    });\n\n    let inventoryUtilization = {\n      data: [],\n      totalInventory: simData.overall.weekly_inventory.reduce(\n        (acc, val = 0) => Number(acc) + Number(val)\n      ),\n      // weeklyInventoryData: Object.keys(inventoryUtilizationData).map(key => inventoryUtilizationData[key]),\n    };\n\n    // let discounts = ;\n    inventoryUtilization['discounts'] = Object.keys(inventoryUtilizationData).map((d) => Number(d));\n\n    Object.keys(inventoryUtilizationData).forEach((key) => {\n      inventoryUtilization.data.push(\n        inventoryUtilizationData[key].reduce((acc, num = 0) => Number(acc) + Number(num))\n      );\n    });\n\n    return inventoryUtilization;\n  };\n\n  onDropdownchange = (val) => {\n    let skuvalue = val.value;\n    let markdownID = this.props.markdownId;\n\n    this.props.markdownCalendarGraphData({\n      mrk_id: markdownID,\n      sku_ids: skuvalue,\n    });\n  };\n\n  render() {\n    let skuList = [];\n    this.props.skuList &&\n      this.props.skuList.map((data) => {\n        skuList.push({\n          value: data,\n          label: data,\n        });\n      });\n\n    let selectedSku = [];\n    selectedSku.push({\n      value: this.props.selectedSku ? this.props.selectedSku : null,\n      label: this.props.selectedSku ? this.props.selectedSku : null,\n    });\n\n    return skuList && skuList.length ? (\n      <div>\n        <PageLoader loader={this.props.loader || this.state.loader}>\n          <div id=\"markdownGraph\">\n            <div className=\"card markdownSubContainer\">\n              <div className=\"row\">\n                <div className=\"col-md-10\">\n                  <div className=\"row\" style={{ marginLeft: '5px' }}>\n                    <div className=\"col-md-4\">\n                      {/* <h4 className=\"BudgetHeading mb-0\"> */}\n                      <span className=\"heading-top\">{this.props.markdownName}</span>\n                      {/* </h4> */}\n                    </div>\n                    <div className=\"col-md-3\">\n                      <span className=\"promoNameText row\" style={{ paddingLeft: '2%' }}>\n                        Start Date:\n                        {this.props.markdownStartDate ? (\n                          <p className=\"promonameResult\">{this.props.markdownStartDate}</p>\n                        ) : null}\n                      </span>\n                    </div>\n                    <div className=\"col-md-3\">\n                      <span className=\"promoNameText row\" style={{ paddingLeft: '2%' }}>\n                        End Date:\n                        {this.props.markdownEndDate ? (\n                          <p className=\"promonameResult\">{this.props.markdownEndDate}</p>\n                        ) : null}\n                      </span>\n                    </div>\n                    <div className=\"col-md-2\">\n                      <span className=\"promoNameText row\" style={{ paddingLeft: '2%' }}>\n                        # of Sub Categories:\n                        {this.props.skuList ? (\n                          <p className=\"promonameResult\">\n                            {this.props.skuList ? this.props.skuList.length : ''}\n                          </p>\n                        ) : null}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-md-2 text-center\">\n                  <button type=\"button\" class=\"btn btn-primary\">\n                    Copy Markdown\n                  </button>\n                </div>\n              </div>\n              <hr />\n              <div className=\"skulistDropdown\">\n                <div className=\"row\">\n                  <div className=\"col-md-3\">\n                    <Select\n                      id=\"businessDescSelect\"\n                      placeholder=\"Sub Category List\"\n                      options={skuList}\n                      onChange={(val) => this.props.onChangeSku(val)}\n                      value={selectedSku}\n                    />\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col-md-9\">\n                    {this.state.chartData && this.state.showGraph && (\n                      <>\n                        <CadenceChartComp selectedCadenceSet={this.state.chartData} />\n                        <Inventory\n                          inventoryUtilization={this.handleWeeklyInventoryDivisions(\n                            this.state.chartData\n                          )}\n                          tooltipEnabled\n                        />\n                      </>\n                    )}\n\n                    {this.state.chartData && !this.state.showGraph && (\n                      <>\n                        <CadenceChartComp selectedCadenceSet={this.state.chartData} />\n                        <Inventory\n                          inventoryUtilization={this.handleWeeklyInventoryDivisions(\n                            this.state.chartData\n                          )}\n                          tooltipEnabled\n                        />\n                      </>\n                    )}\n                  </div>\n                  <div className=\"col-md-3\">\n                    {this.state.chartData && (\n                      <CardDetails selectedCadenceSet={this.state.chartData} />\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </PageLoader>\n      </div>\n    ) : null;\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  showLoading: state.calendar.loader,\n});\n\nexport default connect(mapStateToProps)(withRouter(CalendarWrapper));\n"]},"metadata":{},"sourceType":"module"}