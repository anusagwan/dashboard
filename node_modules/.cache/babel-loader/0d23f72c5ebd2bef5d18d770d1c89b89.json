{"ast":null,"code":"import _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/services/RetailCalendarDatePicker/NRFDatePicker.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { calendarConfig } from '../../config';\nimport moment from 'moment';\nimport _ from 'lodash';\nvar fstMoOfYr = calendarConfig.fstMoOfYr;\nvar days = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nvar nrfWksPatternForAYr = [4, 4, 5, 4, 4, 5, 4, 4, 5, 4, 4, 5];\nvar moJanIdx = 0;\nvar _4Wks = 4;\nvar _5Wks = 5;\nvar nrfCalYrs = {};\nvar REPORTING = '/vis/Markdown/reporting';\n\nfunction generateNrfCalYrs(yr, nrfCalYrs) {\n  var noOfDaysInAWk = days.length;\n  var noOfMosInAYr = nrfWksPatternForAYr.length;\n  var stDt = moment().year(yr).week(1).startOf('week');\n  var doesJanHaveFiveWks = moment().year(yr).weeksInYear() === 53;\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _5Wks); // Inserting Dates by forward calculating from the start date\n\n  var nxtDt = moment(stDt);\n\n  for (var moIdx = fstMoOfYr; moIdx < noOfMosInAYr + fstMoOfYr; moIdx++) {\n    !nrfCalYrs[yr] && (nrfCalYrs[yr] = {});\n    moIdx > 11 && !nrfCalYrs[yr + 1] && (nrfCalYrs[yr + 1] = {});\n    var momentMoIdx = moment().month(moIdx).month();\n    var moDts = [];\n\n    for (var nrfWks = 0; nrfWks < nrfWksPatternForAYr[momentMoIdx]; nrfWks++) {\n      for (var dayIdx = 0; dayIdx < noOfDaysInAWk; dayIdx++) {\n        if (dayIdx === 0) {\n          moDts[nrfWks] = [];\n        }\n\n        moDts[nrfWks].push(moment(nxtDt));\n        nxtDt = nxtDt.add(1, 'days');\n      }\n    }\n\n    moIdx < 12 ? nrfCalYrs[yr][momentMoIdx] = moDts : nrfCalYrs[yr + 1][momentMoIdx] = moDts;\n  } // Setting no of weeks for Jan back to default\n\n\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _4Wks);\n  return nrfCalYrs;\n}\n\nvar Calendar = function Calendar(props) {\n  var getCalendarCellStyle = function getCalendarCellStyle(dt, stDt, endDt) {\n    var className = 'calendar-date_default';\n\n    if (props.startDate && !props.endDate) {\n      dt.isSame(props.startDate) && (className = 'selected-date');\n      dt.isAfter(props.startDate) && dt.isSameOrBefore(props.mouseOveredDt) && (className = 'calendar-date_hovered');\n    } else if (props.startDate && props.endDate) {\n      (dt.isSame(props.startDate) || dt.isSame(props.endDate)) && (className = 'selected-date');\n      dt.isAfter(props.startDate) && dt.isBefore(props.endDate) && (className = 'calendar-date_hovered');\n      props.mouseOveredDt && (dt.isBefore(props.startDate) || dt.isAfter(props.endDate)) && props.mouseOveredDt.isBetween(moment(stDt).subtract(1, 'days'), moment(endDt).add(1, 'days')) && (className = 'calendar-date_default-hover');\n    } else {\n      props.mouseOveredDt && props.mouseOveredDt.isBetween(moment(stDt).subtract(1, 'days'), moment(endDt).add(1, 'days')) && (className = 'calendar-date_default-hover');\n    }\n\n    return className;\n  };\n\n  var getWeekNum = function getWeekNum(year, weekNum) {\n    var fiscalWeeks = props.fiscalCalendarDetails && props.fiscalCalendarDetails[year];\n    console.log(year, 'hhhhhh', weekNum, 'week', fiscalWeeks);\n    if (_.isEmpty(fiscalWeeks)) return null;\n    return fiscalWeeks[weekNum] && fiscalWeeks[weekNum].fw;\n  };\n\n  var getFiscalWeekArray = function getFiscalWeekArray(startDate, endDate) {\n    var newSDate = _.cloneDeep(startDate);\n\n    var newEDate = _.cloneDeep(startDate);\n\n    var weekNumList = [];\n\n    while (moment(newEDate).isBefore(endDate)) {\n      var fiscalWeekNum = props.daterangeOrWeek === 'date_range' ? getWeekNum(moment(newSDate).year(), moment(newSDate).week()) : moment(newSDate).week();\n      if (fiscalWeekNum === null) break;\n      weekNumList.push(fiscalWeekNum);\n      newEDate = moment(newSDate).add(6, 'd');\n      newSDate = moment(newSDate).add(7, 'd');\n    }\n\n    return weekNumList;\n  }; //reporting screen: for Monday to Sunday selection --- <  startDay = 0,endDay = 6;  >---\n  //other screens: for Thursday to Wednesday selection --- <  startDay = 3,endDay = 2;  >---\n\n\n  var startDay = props.calendarRange && props.calendarRange.day_start ? props.calendarRange.day_start : 0;\n  var endDay = props.calendarRange && props.calendarRange.day_end ? props.calendarRange.day_end : 6;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"t-a-c mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, props.month.format('MMM'), \" \", props.month.format('YYYY')), React.createElement(\"table\", {\n    className: \"m-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }), props.nrfCalDays && props.nrfCalDays[0] && _.map(props.nrfCalDays[0], function (day, idx) {\n    return React.createElement(\"th\", {\n      className: \"calendar-cell-size calendar-day\",\n      key: idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, day.format('dd'));\n  })), props.nrfCalDays && _.map(props.nrfCalDays, function (week, idx) {\n    return React.createElement(\"tr\", {\n      key: idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      className: \"calendar-cell-size calendar-date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, props.daterangeOrWeek === 'date_range' ? getWeekNum(props.nrfCalDays[idx][0].year(), props.nrfCalDays[idx][0].week()) : props.nrfCalDays[idx][0].week()), week.map(function (dt, idx) {\n      return React.createElement(\"td\", {\n        key: idx,\n        onClick: function onClick() {\n          if (!props.startDate) {\n            props.onClick(week[startDay]);\n          } else {\n            if (dt.isBefore(props.startDate)) {\n              props.onClick(week[startDay]);\n            } else {\n              var weekNumList = getFiscalWeekArray(props.startDate, week[endDay]);\n              props.onClick(week[endDay], weekNumList);\n            }\n          }\n        },\n        onMouseOver: function onMouseOver() {\n          if (props.startDate) {\n            if (dt.isSameOrAfter(props.startDate)) {\n              props.onMouseOver(week[endDay]);\n            } else {\n              props.onMouseOver(week[startDay]);\n            }\n          } else {\n            props.onMouseOver(week[startDay]);\n          }\n        },\n        className: \"calendar-cell-size \".concat(getCalendarCellStyle(dt, week[0], week[6]), \" calendar-date\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, dt.date());\n    }));\n  }))));\n};\n\nvar MultipleCalendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MultipleCalendar, _Component);\n\n  function MultipleCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, MultipleCalendar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MultipleCalendar).call(this, props));\n    _this.state = {\n      mouseOveredDt: null\n    };\n    return _this;\n  }\n\n  _createClass(MultipleCalendar, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, this.props.months.map(function (month, idx) {\n        return React.createElement(Calendar, {\n          key: idx,\n          month: month,\n          onClick: _this2.props.onClick,\n          onMouseOver: function onMouseOver(dt) {\n            _this2.setState({\n              mouseOveredDt: dt\n            });\n          },\n          startDate: _this2.props.startDate,\n          endDate: _this2.props.endDate,\n          mouseOveredDt: _this2.state.mouseOveredDt,\n          nrfCalDays: _this2.props.nrfCalYrs[month.year()] && _this2.props.nrfCalYrs[month.year()][month.month()],\n          fiscalCalendarDetails: _this2.props.fiscalCalendarDetails,\n          pathname: _this2.props.pathname,\n          calendarRange: _this2.props.calendarRange,\n          daterangeOrWeek: _this2.props.daterangeOrWeek,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        });\n      }));\n    }\n  }]);\n\n  return MultipleCalendar;\n}(Component);\n\nvar RetailCalendar =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(RetailCalendar, _Component2);\n\n  function RetailCalendar(props) {\n    var _this3;\n\n    _classCallCheck(this, RetailCalendar);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(RetailCalendar).call(this, props));\n\n    _this3.onPrevMoClick = function () {\n      var fstMo = _this3.state.dispMos[0];\n\n      if (fstMo.month() === fstMoOfYr) {\n        _this3.onPrevYrClick();\n      }\n\n      var sftdMosBkByOneMo = _this3.state.dispMos.map(function (month) {\n        return month.subtract(1, 'month');\n      });\n\n      _this3.setState({\n        dispMos: sftdMosBkByOneMo\n      });\n    };\n\n    _this3.onNxtMoClick = function () {\n      var dispMos = _this3.state.dispMos;\n      var lstMo = dispMos[dispMos.length - 1];\n      var lstMoOfYr = moment().month(fstMoOfYr - 1).month();\n\n      if (lstMo.month() === lstMoOfYr) {\n        _this3.onNxtYrClick();\n      }\n\n      var sftdMosFwdByOneMo = _this3.state.dispMos.map(function (month) {\n        return month.add(1, 'month');\n      });\n\n      _this3.setState({\n        dispMos: sftdMosFwdByOneMo\n      });\n    };\n\n    _this3.onPrevYrClick = function () {\n      var yr = _this3.state.financialYear;\n      var prevYr = yr - 1;\n      var nxtYr = yr + 1;\n      generateNrfCalYrs(prevYr, nrfCalYrs);\n\n      _this3.setState({\n        financialYear: prevYr\n      });\n\n      if (nrfCalYrs.hasOwnProperty(nxtYr)) delete nrfCalYrs[nxtYr];\n    };\n\n    _this3.onNxtYrClick = function () {\n      var yr = _this3.state.financialYear;\n      var prevYr = yr - 1;\n      var nxtYr = yr + 1;\n      generateNrfCalYrs(nxtYr, nrfCalYrs);\n\n      _this3.setState({\n        financialYear: nxtYr\n      });\n\n      if (nrfCalYrs.hasOwnProperty(prevYr)) delete nrfCalYrs[prevYr];\n    };\n\n    var curDt = props.startDate || moment();\n    var dispMosCnt = 2; //min:1, max:12\n\n    var width = {\n      width: \"\".concat(344 * dispMosCnt, \"px\")\n    };\n    var _dispMos = [];\n    generateNrfCalYrs(curDt.year(), nrfCalYrs);\n    if (curDt.month() === 11) generateNrfCalYrs(curDt.year() + 1, nrfCalYrs);\n\n    for (var i = 0; i < dispMosCnt; i++) {\n      _dispMos.push(moment(curDt).add(i, 'month'));\n    }\n\n    _this3.state = {\n      dispMos: _dispMos,\n      curDt: curDt,\n      financialYear: curDt.month() === 11 ? curDt.year() + 1 : curDt.year(),\n      width: width\n    };\n    return _this3;\n  }\n\n  _createClass(RetailCalendar, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"m-3\",\n        style: _objectSpread({}, this.state.width),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"arrow left-arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        onClick: this.onPrevMoClick,\n        className: \"dr-calendar-month-arrow fa fa-angle-left\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"arrow right-arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        onClick: this.onNxtMoClick,\n        className: \"dr-calendar-month-arrow fa fa-angle-right\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      })), React.createElement(MultipleCalendar, {\n        months: this.state.dispMos,\n        startDate: this.props.startDate,\n        endDate: this.props.endDate,\n        nrfCalYrs: nrfCalYrs,\n        onClick: function onClick(dt, weekNumList) {\n          if (dt.month() === 11) _this4.onNxtYrClick();\n\n          _this4.props.onClick(dt, weekNumList);\n        },\n        fiscalCalendarDetails: this.props.fiscalCalendarDetails,\n        pathname: this.props.location && this.props.location.pathname,\n        calendarRange: this.props.calendarRange,\n        daterangeOrWeek: this.props.daterangeOrWeek,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RetailCalendar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    fiscalCalendarDetails: state.fiscalCalendar.fiscalCalDetails,\n    daterangeOrWeek: state.filtersReducer.daterangeOrWeek\n  };\n};\n\nvar mapActionsToProps = {};\nexport default connect(mapStateToProps, mapActionsToProps)(withRouter(RetailCalendar));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/services/RetailCalendarDatePicker/NRFDatePicker.js"],"names":["React","Component","connect","withRouter","calendarConfig","moment","_","fstMoOfYr","days","nrfWksPatternForAYr","moJanIdx","_4Wks","_5Wks","nrfCalYrs","REPORTING","generateNrfCalYrs","yr","noOfDaysInAWk","length","noOfMosInAYr","stDt","year","week","startOf","doesJanHaveFiveWks","weeksInYear","nxtDt","moIdx","momentMoIdx","month","moDts","nrfWks","dayIdx","push","add","Calendar","props","getCalendarCellStyle","dt","endDt","className","startDate","endDate","isSame","isAfter","isSameOrBefore","mouseOveredDt","isBefore","isBetween","subtract","getWeekNum","weekNum","fiscalWeeks","fiscalCalendarDetails","console","log","isEmpty","fw","getFiscalWeekArray","newSDate","cloneDeep","newEDate","weekNumList","fiscalWeekNum","daterangeOrWeek","startDay","calendarRange","day_start","endDay","day_end","format","nrfCalDays","map","day","idx","onClick","isSameOrAfter","onMouseOver","date","MultipleCalendar","state","display","months","setState","pathname","RetailCalendar","onPrevMoClick","fstMo","dispMos","onPrevYrClick","sftdMosBkByOneMo","onNxtMoClick","lstMo","lstMoOfYr","onNxtYrClick","sftdMosFwdByOneMo","financialYear","prevYr","nxtYr","hasOwnProperty","curDt","dispMosCnt","width","i","location","mapStateToProps","ownProps","fiscalCalendar","fiscalCalDetails","filtersReducer","mapActionsToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { calendarConfig } from '../../config';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nconst { fstMoOfYr } = calendarConfig;\nconst days = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nconst nrfWksPatternForAYr = [4, 4, 5, 4, 4, 5, 4, 4, 5, 4, 4, 5];\nconst moJanIdx = 0;\nconst _4Wks = 4;\nconst _5Wks = 5;\nconst nrfCalYrs = {};\nconst REPORTING = '/vis/Markdown/reporting';\n\nfunction generateNrfCalYrs(yr, nrfCalYrs) {\n  const noOfDaysInAWk = days.length;\n  const noOfMosInAYr = nrfWksPatternForAYr.length;\n  const stDt = moment().year(yr).week(1).startOf('week');\n\n  const doesJanHaveFiveWks = moment().year(yr).weeksInYear() === 53;\n\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _5Wks);\n\n  // Inserting Dates by forward calculating from the start date\n  let nxtDt = moment(stDt);\n  for (let moIdx = fstMoOfYr; moIdx < noOfMosInAYr + fstMoOfYr; moIdx++) {\n    !nrfCalYrs[yr] && (nrfCalYrs[yr] = {});\n    moIdx > 11 && !nrfCalYrs[yr + 1] && (nrfCalYrs[yr + 1] = {});\n    const momentMoIdx = moment().month(moIdx).month();\n    const moDts = [];\n    for (let nrfWks = 0; nrfWks < nrfWksPatternForAYr[momentMoIdx]; nrfWks++) {\n      for (let dayIdx = 0; dayIdx < noOfDaysInAWk; dayIdx++) {\n        if (dayIdx === 0) {\n          moDts[nrfWks] = [];\n        }\n        moDts[nrfWks].push(moment(nxtDt));\n        nxtDt = nxtDt.add(1, 'days');\n      }\n    }\n    moIdx < 12 ? (nrfCalYrs[yr][momentMoIdx] = moDts) : (nrfCalYrs[yr + 1][momentMoIdx] = moDts);\n  }\n\n  // Setting no of weeks for Jan back to default\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _4Wks);\n  return nrfCalYrs;\n}\n\nconst Calendar = function (props) {\n  const getCalendarCellStyle = (dt, stDt, endDt) => {\n    let className = 'calendar-date_default';\n    if (props.startDate && !props.endDate) {\n      dt.isSame(props.startDate) && (className = 'selected-date');\n      dt.isAfter(props.startDate) &&\n        dt.isSameOrBefore(props.mouseOveredDt) &&\n        (className = 'calendar-date_hovered');\n    } else if (props.startDate && props.endDate) {\n      (dt.isSame(props.startDate) || dt.isSame(props.endDate)) && (className = 'selected-date');\n      dt.isAfter(props.startDate) &&\n        dt.isBefore(props.endDate) &&\n        (className = 'calendar-date_hovered');\n      props.mouseOveredDt &&\n        (dt.isBefore(props.startDate) || dt.isAfter(props.endDate)) &&\n        props.mouseOveredDt.isBetween(\n          moment(stDt).subtract(1, 'days'),\n          moment(endDt).add(1, 'days')\n        ) &&\n        (className = 'calendar-date_default-hover');\n    } else {\n      props.mouseOveredDt &&\n        props.mouseOveredDt.isBetween(\n          moment(stDt).subtract(1, 'days'),\n          moment(endDt).add(1, 'days')\n        ) &&\n        (className = 'calendar-date_default-hover');\n    }\n    return className;\n  };\n  const getWeekNum = (year, weekNum) => {\n    let fiscalWeeks = props.fiscalCalendarDetails && props.fiscalCalendarDetails[year];\n    console.log(year, 'hhhhhh', weekNum, 'week', fiscalWeeks);\n    if (_.isEmpty(fiscalWeeks)) return null;\n\n    return fiscalWeeks[weekNum] && fiscalWeeks[weekNum].fw;\n  };\n  const getFiscalWeekArray = (startDate, endDate) => {\n    let newSDate = _.cloneDeep(startDate);\n    let newEDate = _.cloneDeep(startDate);\n    let weekNumList = [];\n    while (moment(newEDate).isBefore(endDate)) {\n      let fiscalWeekNum =\n        props.daterangeOrWeek === 'date_range'\n          ? getWeekNum(moment(newSDate).year(), moment(newSDate).week())\n          : moment(newSDate).week();\n      if (fiscalWeekNum === null) break;\n      weekNumList.push(fiscalWeekNum);\n      newEDate = moment(newSDate).add(6, 'd');\n      newSDate = moment(newSDate).add(7, 'd');\n    }\n    return weekNumList;\n  };\n  //reporting screen: for Monday to Sunday selection --- <  startDay = 0,endDay = 6;  >---\n  //other screens: for Thursday to Wednesday selection --- <  startDay = 3,endDay = 2;  >---\n  let startDay =\n    props.calendarRange && props.calendarRange.day_start ? props.calendarRange.day_start : 0;\n  let endDay = props.calendarRange && props.calendarRange.day_end ? props.calendarRange.day_end : 6;\n  return (\n    <div>\n      <div className=\"t-a-c mt-2\">\n        {props.month.format('MMM')} {props.month.format('YYYY')}\n      </div>\n      <table className=\"m-3\">\n        <tbody>\n          <tr>\n            <th></th>\n            {props.nrfCalDays &&\n              props.nrfCalDays[0] &&\n              _.map(props.nrfCalDays[0], (day, idx) => (\n                <th className=\"calendar-cell-size calendar-day\" key={idx}>\n                  {day.format('dd')}\n                </th>\n              ))}\n          </tr>\n          {props.nrfCalDays &&\n            _.map(props.nrfCalDays, (week, idx) => (\n              <tr key={idx}>\n                <th className=\"calendar-cell-size calendar-date\">\n                  {props.daterangeOrWeek === 'date_range'\n                    ? getWeekNum(props.nrfCalDays[idx][0].year(), props.nrfCalDays[idx][0].week())\n                    : props.nrfCalDays[idx][0].week()}\n                </th>\n                {week.map((dt, idx) => {\n                  return (\n                    <td\n                      key={idx}\n                      onClick={() => {\n                        if (!props.startDate) {\n                          props.onClick(week[startDay]);\n                        } else {\n                          if (dt.isBefore(props.startDate)) {\n                            props.onClick(week[startDay]);\n                          } else {\n                            let weekNumList = getFiscalWeekArray(props.startDate, week[endDay]);\n                            props.onClick(week[endDay], weekNumList);\n                          }\n                        }\n                      }}\n                      onMouseOver={() => {\n                        if (props.startDate) {\n                          if (dt.isSameOrAfter(props.startDate)) {\n                            props.onMouseOver(week[endDay]);\n                          } else {\n                            props.onMouseOver(week[startDay]);\n                          }\n                        } else {\n                          props.onMouseOver(week[startDay]);\n                        }\n                      }}\n                      className={`calendar-cell-size ${getCalendarCellStyle(\n                        dt,\n                        week[0],\n                        week[6]\n                      )} calendar-date`}>\n                      {dt.date()}\n                    </td>\n                  );\n                })}\n              </tr>\n            ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nclass MultipleCalendar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mouseOveredDt: null,\n    };\n  }\n  render() {\n    return (\n      <div style={{ display: 'flex' }}>\n        {this.props.months.map((month, idx) => {\n          return (\n            <Calendar\n              key={idx}\n              month={month}\n              onClick={this.props.onClick}\n              onMouseOver={(dt) => {\n                this.setState({\n                  mouseOveredDt: dt,\n                });\n              }}\n              startDate={this.props.startDate}\n              endDate={this.props.endDate}\n              mouseOveredDt={this.state.mouseOveredDt}\n              nrfCalDays={\n                this.props.nrfCalYrs[month.year()] &&\n                this.props.nrfCalYrs[month.year()][month.month()]\n              }\n              fiscalCalendarDetails={this.props.fiscalCalendarDetails}\n              pathname={this.props.pathname}\n              calendarRange={this.props.calendarRange}\n              daterangeOrWeek={this.props.daterangeOrWeek}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nclass RetailCalendar extends Component {\n  constructor(props) {\n    super(props);\n    const curDt = props.startDate || moment();\n    const dispMosCnt = 2; //min:1, max:12\n    const width = { width: `${344 * dispMosCnt}px` };\n    let dispMos = [];\n    generateNrfCalYrs(curDt.year(), nrfCalYrs);\n    if (curDt.month() === 11) generateNrfCalYrs(curDt.year() + 1, nrfCalYrs);\n    for (let i = 0; i < dispMosCnt; i++) {\n      dispMos.push(moment(curDt).add(i, 'month'));\n    }\n    this.state = {\n      dispMos,\n      curDt,\n      financialYear: curDt.month() === 11 ? curDt.year() + 1 : curDt.year(),\n      width,\n    };\n  }\n\n  onPrevMoClick = () => {\n    const fstMo = this.state.dispMos[0];\n    if (fstMo.month() === fstMoOfYr) {\n      this.onPrevYrClick();\n    }\n    const sftdMosBkByOneMo = this.state.dispMos.map((month) => {\n      return month.subtract(1, 'month');\n    });\n    this.setState({ dispMos: sftdMosBkByOneMo });\n  };\n  onNxtMoClick = () => {\n    const { dispMos } = this.state;\n    const lstMo = dispMos[dispMos.length - 1];\n    const lstMoOfYr = moment()\n      .month(fstMoOfYr - 1)\n      .month();\n    if (lstMo.month() === lstMoOfYr) {\n      this.onNxtYrClick();\n    }\n    const sftdMosFwdByOneMo = this.state.dispMos.map((month) => {\n      return month.add(1, 'month');\n    });\n    this.setState({ dispMos: sftdMosFwdByOneMo });\n  };\n  onPrevYrClick = () => {\n    const { financialYear: yr } = this.state;\n    const prevYr = yr - 1;\n    const nxtYr = yr + 1;\n    generateNrfCalYrs(prevYr, nrfCalYrs);\n    this.setState({ financialYear: prevYr });\n    if (nrfCalYrs.hasOwnProperty(nxtYr)) delete nrfCalYrs[nxtYr];\n  };\n  onNxtYrClick = () => {\n    const { financialYear: yr } = this.state;\n    const prevYr = yr - 1;\n    const nxtYr = yr + 1;\n    generateNrfCalYrs(nxtYr, nrfCalYrs);\n    this.setState({ financialYear: nxtYr });\n    if (nrfCalYrs.hasOwnProperty(prevYr)) delete nrfCalYrs[prevYr];\n  };\n  render() {\n    return (\n      <div className=\"m-3\" style={{ ...this.state.width }}>\n        <div className=\"arrow left-arrow\">\n          <i\n            onClick={this.onPrevMoClick}\n            className=\"dr-calendar-month-arrow fa fa-angle-left\"\n            aria-hidden=\"true\"></i>\n        </div>\n        <div className=\"arrow right-arrow\">\n          <i\n            onClick={this.onNxtMoClick}\n            className=\"dr-calendar-month-arrow fa fa-angle-right\"\n            aria-hidden=\"true\"></i>\n        </div>\n        <MultipleCalendar\n          months={this.state.dispMos}\n          startDate={this.props.startDate}\n          endDate={this.props.endDate}\n          nrfCalYrs={nrfCalYrs}\n          onClick={(dt, weekNumList) => {\n            if (dt.month() === 11) this.onNxtYrClick();\n            this.props.onClick(dt, weekNumList);\n          }}\n          fiscalCalendarDetails={this.props.fiscalCalendarDetails}\n          pathname={this.props.location && this.props.location.pathname}\n          calendarRange={this.props.calendarRange}\n          daterangeOrWeek={this.props.daterangeOrWeek}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  fiscalCalendarDetails: state.fiscalCalendar.fiscalCalDetails,\n  daterangeOrWeek: state.filtersReducer.daterangeOrWeek,\n});\n\nconst mapActionsToProps = {};\n\nexport default connect(mapStateToProps, mapActionsToProps)(withRouter(RetailCalendar));\n"]},"metadata":{},"sourceType":"module"}