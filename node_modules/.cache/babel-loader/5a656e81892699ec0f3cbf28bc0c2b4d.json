{"ast":null,"code":"import _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _assertThisInitialized from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/container/PlannedPromoPipeline.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\"; //import PromoCalendarActuals from \"./PromoCalendarContent\";\n\nimport LoadingOverlay from \"react-loading-overlay\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as action from '../actions/promo';\nimport { AgGridReact } from \"ag-grid-react\";\nimport { withRouter, Link } from 'react-router-dom';\nimport _ from \"underscore\";\nimport \"../components/Content/Promotions/PromoCalendar/promotionstyling.css\";\nimport Select from \"react-select\";\nimport './PlannedPromoPipeline.css';\nimport client from '../apolloClient';\nimport { promos } from '../apolloClient/query';\nimport CustomModal from '../components/Modal/CustomModal';\nimport gql from 'graphql-tag';\nimport { deletePromo, changePromoStatus } from '../apolloClient/mutation';\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Axios from \"axios\";\n\nfunction getParamValue(paramName) {\n  if (!window.location.href.includes('?')) {\n    return;\n  }\n\n  var url = window.location.href.split('?')[1];\n  var val = null;\n  var paramsArray = url.split('&');\n  paramsArray.forEach(function (item) {\n    if (item.split('=')[0] === paramName) {\n      val = item.split('=')[1];\n      return;\n    }\n  });\n  return val;\n} // create your cellRenderer as a React component\n\n\nvar NameCellRenderer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NameCellRenderer, _React$Component);\n\n  function NameCellRenderer(props) {\n    _classCallCheck(this, NameCellRenderer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NameCellRenderer).call(this, props));\n  }\n\n  _createClass(NameCellRenderer, [{\n    key: \"render\",\n    value: function render() {\n      // put in render logic\n      var className = \"perfm-good\";\n\n      if (this.props.value == 'TOXIC' || this.props.value == 'INSIGNIFICANT') {\n        className = \"perfm-bad\";\n      }\n\n      if (this.props.value == 'AVERAGE') {\n        className = \"perfm-avg\";\n      }\n\n      return React.createElement(\"div\", {\n        className: \"perfm \" + className,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, this.props.value);\n    }\n  }]);\n\n  return NameCellRenderer;\n}(React.Component);\n\nvar ModalCellRenderer =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(ModalCellRenderer, _React$Component2);\n\n  function ModalCellRenderer(props) {\n    _classCallCheck(this, ModalCellRenderer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ModalCellRenderer).call(this, props));\n  }\n\n  _createClass(ModalCellRenderer, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      // put in render logic\n      return React.createElement(\"span\", {\n        style: {\n          fontSize: \"1.3rem\",\n          cursor: \"pointer\",\n          color: \"#44677b\"\n        },\n        onClick: function onClick() {\n          return _this.props.agGridReact.props.handleTableOpClick(_this.props.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-info-circle\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ModalCellRenderer;\n}(React.Component);\n\nvar ModalCellRenderer2 =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(ModalCellRenderer2, _React$Component3);\n\n  function ModalCellRenderer2(props) {\n    _classCallCheck(this, ModalCellRenderer2);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ModalCellRenderer2).call(this, props));\n  }\n\n  _createClass(ModalCellRenderer2, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // put in render logic\n      return React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"iconBtnPipeline\",\n        onClick: function onClick() {\n          return _this2.props.agGridReact.props.handleTableOpClick(_this2.props.value);\n        },\n        style: {\n          cursor: \"pointer\",\n          color: '#44667a',\n          padding: '3px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-info-circle iconPipeline\",\n        \"aria-hidden\": \"true\",\n        style: {\n          fontSize: \"1.2rem\"\n        },\n        title: \"Promotion info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(Link, {\n        to: {\n          pathname: '/vis/create-promo/',\n          state: {\n            id: this.props.value,\n            page: this.props.agGridReact.props.page\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          fontSize: \"1.3rem\",\n          cursor: \"pointer\",\n          color: '#44667a'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-plus-circle\",\n        \"aria-hidden\": \"true\",\n        title: \"Edit promotion\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return ModalCellRenderer2;\n}(React.Component);\n\nvar PlannedPromoPipeline =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PlannedPromoPipeline, _Component);\n\n  function PlannedPromoPipeline(props) {\n    var _this3;\n\n    _classCallCheck(this, PlannedPromoPipeline);\n\n    var sentSKU = getParamValue('sku');\n    var sentSub = getParamValue('subCategory');\n    if (sentSKU) sentSKU = sentSKU.replace('%20', ' ');\n    if (sentSub) sentSub = sentSub.replace('%20', ' ');\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(PlannedPromoPipeline).call(this, props));\n\n    _this3.handleTableOpClick = function (val) {\n      var selectedOptionArr = _this3.state.promosList.filter(function (item) {\n        return parseFloat(item.id) === parseFloat(val);\n      });\n\n      if (selectedOptionArr.length > 0) {\n        _this3.setState({\n          selectedOption: selectedOptionArr[0]\n        });\n      }\n\n      _this3.openModal();\n    };\n\n    _this3.openModal = function () {\n      _this3.setState({\n        modalVisible: true\n      });\n    };\n\n    _this3.closeModal = function () {\n      _this3.setState({\n        modalVisible: false\n      });\n    };\n\n    _this3.handleSelectChange = function (e) {\n      _this3.setState({\n        loader: true,\n        selectedYear: e.currentTarget.value\n      });\n\n      _this3.props.onSubmit(\"Month\");\n\n      _this3.onYearChange();\n    };\n\n    _this3.reloadData = function () {\n      //page pipeline\n      var status = \"APPROVED\"; //page historical\n\n      if (_this3.props.page == 3) status = \"COMPLETED\"; //page finalize\n\n      if (_this3.props.page == 2) status = \"PENDING\";\n\n      _this3.setState({\n        loader: true\n      });\n\n      client.query({\n        query: promos,\n        variables: {\n          endDate: '2019-12-30',\n          startDate: '2018-08-01',\n          status: status\n        }\n      }).then(function (data) {\n        var promoObjArr = [];\n\n        if (data.data && data.data.promos && data.data.promos.rows.length > 0) {\n          var promoDataArr = data.data.promos.rows;\n\n          for (var i = 0; i < promoDataArr.length; i++) {\n            var promoData = promoDataArr[i];\n            var promoObj = promoData;\n            promoObj[\"id\"] = promoData.id ? promoData.id : 1;\n            promoObj[\"event\"] = promoData.campaign && promoData.campaign.name ? promoData.campaign.name : \"Biggest Oneday\";\n            promoObj[\"promo\"] = promoData.label ? promoData.label : \"765 ONDS 50% of\";\n            promoObj[\"fob\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].hierarchy && promoData.hierarchies[0].hierarchy.hierarchyLevel1 ? promoData.hierarchies[0].hierarchy.hierarchyLevel1 : \"WOMENS\";\n            promoObj[\"dept\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].hierarchy && promoData.hierarchies[0].hierarchy.hierarchyLevel2 ? promoData.hierarchies[0].hierarchy.hierarchyLevel2 : \"214-Average FL\";\n            promoObj[\"margin\"] = 0;\n            promoObj[\"sales\"] = 0;\n            promoObj[\"units\"] = 0;\n            promoObj[\"marginlift\"] = 0;\n            promoObj[\"unitlift\"] = 0;\n            promoObj[\"incrementalSales\"] = 0;\n\n            if (promoData.hierarchies.length) {\n              promoData.hierarchies.forEach(function (hierarchy) {\n                promoObj[\"margin\"] += hierarchy.actual && hierarchy.actual.baselineMargin ? hierarchy.actual.baselineMargin : hierarchy.simulation.baselineMargin;\n                promoObj[\"sales\"] += hierarchy.actual && hierarchy.actual.baselineSales ? hierarchy.actual.baselineSales : hierarchy.simulation.baselineSales;\n                promoObj[\"units\"] += hierarchy.actual && hierarchy.actual.baselineUnits ? hierarchy.actual.baselineUnits : hierarchy.simulation.baselineUnits;\n                promoObj[\"marginlift\"] += hierarchy.actual && hierarchy.actual.directIncrementalMargin ? hierarchy.actual.directIncrementalMargin : hierarchy.simulation.directIncrementalMargin;\n                promoObj[\"unitlift\"] += hierarchy.actual && hierarchy.actual.directIncrementalUnits ? hierarchy.actual.directIncrementalUnits : hierarchy.simulation.directIncrementalUnits;\n                promoObj[\"incrementalSales\"] += hierarchy.actual && hierarchy.actual.directIncrementalSales ? hierarchy.actual.directIncrementalSales : hierarchy.simulation.directIncrementalSales;\n              });\n            }\n\n            promoObj[\"performance\"] = promoData.simulationPerformance ? promoData.simulationPerformance : \"Good\"; //for waterfall\n\n            promoObj[\"baselineMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.baselineMargin ? promoData.hierarchies[0].actual.baselineMargin : promoData.hierarchies[0].simulation.baselineMargin;\n            promoObj[\"cannibalisationMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.cannibalizationMargin ? promoData.hierarchies[0].actual.cannibalizationMargin : promoData.hierarchies[0].simulation.cannibalizationMargin;\n            promoObj[\"incrementalMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.directIncrementalMargin ? promoData.hierarchies[0].actual.directIncrementalMargin : promoData.hierarchies[0].simulation.directIncrementalMargin;\n            promoObj[\"affinityMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.haloMargin ? promoData.hierarchies[0].actual.haloMargin : promoData.hierarchies[0].simulation.haloMargin;\n            promoObj[\"totalMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.totalMargin ? promoData.hierarchies[0].actual.totalMargin : promoData.hierarchies[0].simulation.totalMargin;\n            promoObjArr.push(promoObj);\n          }\n        }\n\n        _this3.setState({\n          loader: false,\n          promosList: promoObjArr,\n          selectedCategory: null,\n          selectedDepartment: null,\n          selectedSKU: null,\n          selectedSubCategory: null\n        });\n      }).catch(function (err) {});\n    };\n\n    _this3.getFilteredHierarchy = function (hierarchies, level, stateLevel) {\n      if (hierarchies.length && hierarchies[0].hierarchy && hierarchies[0].hierarchy[level]) {\n        if (hierarchies[0].hierarchy[level] === _this3.state[stateLevel].value) {\n          return hierarchies[0].hierarchy[level];\n        } else {\n          return _this3.state[stateLevel].value;\n        }\n      } else {\n        return null;\n      }\n    };\n\n    _this3.onGridReady = function (params) {\n      _this3.gridApi = params.api;\n      _this3.gridColumnApi = params.columnApi;\n\n      if (_this3.props.autoSizeCol) {\n        params.api.sizeColumnsToFit();\n      }\n    };\n\n    _this3.deleteRows = function () {\n      var rowCount = _this3.selrow;\n\n      for (var i = 0; i < rowCount.length; i++) {\n        var id = rowCount[i]['data']['id'];\n\n        _this3.props.updateRecommendPromo({\n          id: id\n        });\n\n        client.mutate({\n          mutation: deletePromo,\n          variables: {\n            id: id\n          }\n        }).then(function (data) {\n          // this.reloadData()\n          var promoObjArr = _this3.state.promosList;\n          promoObjArr = promoObjArr.filter(function (item) {\n            return item.id !== id;\n          });\n\n          _this3.debouncedError();\n\n          _this3.setState({\n            promosList: promoObjArr\n          });\n        }).catch(function (err) {\n          console.log('err', err);\n        });\n      }\n    };\n\n    _this3.finalizeRows = function () {\n      var rowCount = _this3.selrow;\n\n      for (var i = 0; i < rowCount.length; i++) {\n        var id = rowCount[i]['data']['id'];\n        client.mutate({\n          mutation: changePromoStatus,\n          variables: {\n            id: id,\n            status: 'APPROVED',\n            comment: 'APPROVED'\n          }\n        }).then(function (data) {\n          // this.reloadData()\n          var promoObjArr = _this3.state.promosList;\n          promoObjArr = promoObjArr.filter(function (item) {\n            return item.id !== id;\n          });\n\n          _this3.debouncedError2();\n\n          _this3.setState({\n            promosList: promoObjArr\n          });\n        }).catch(function (err) {\n          console.log('err', err);\n        });\n      }\n    };\n\n    _this3.emptyValueFormatter = function (value) {\n      if (_this3.props.page && _this3.props.page == 2 || _this3.props.page == 3) {\n        if (value.value) {\n          var tempVal = value.value;\n          tempVal = tempVal.toString().replace('%', \"\");\n          tempVal = tempVal.toString().replace(',', \"\");\n          tempVal = tempVal.toString().replace('$', \"\");\n          var toSting = Math.round(tempVal);\n\n          if (parseInt(tempVal) > 0) {\n            return toSting.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n          } else {\n            var splitAvalue = Math.abs(toSting);\n            return \"-\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \"\" // \"(\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \")\"\n            ;\n          }\n        } else {\n          if (value.value == 0) {\n            return 0;\n          } else {\n            return \"-\";\n          }\n        }\n      }\n\n      if (value.value) {\n        console.log('values', value.value);\n        var tempVal = value.value;\n        tempVal = tempVal.toString().replace('%', \"\");\n        tempVal = tempVal.toString().replace(',', \"\");\n        tempVal = tempVal.toString().replace('$', \"\");\n        var toSting = Math.round(tempVal);\n\n        if (parseInt(tempVal) > 0) {\n          return toSting.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        } else {\n          var splitAvalue = Math.abs(toSting);\n          return \"-\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \"\" // \"(\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \")\"\n          ;\n        }\n      } else {\n        if (value.value == 0) {\n          return 0;\n        } else {\n          return \"-\";\n        }\n      }\n    };\n\n    _this3.selrow = [];\n    _this3.state = {\n      promosList: [],\n      modalVisible: false,\n      rowSelection: \"multiple\",\n      selectedOption: {\n        baselineMargin: 0,\n        incrementalMargin: 0,\n        affinityMargin: 0,\n        cannibalisationMargin: 0,\n        totalMargin: 0\n      },\n      selectedDepartment: null,\n      selectedCategory: null,\n      selectedSKU: sentSKU ? {\n        value: sentSKU,\n        label: sentSKU\n      } : null,\n      selectedSubCategory: sentSub ? {\n        value: sentSub,\n        label: sentSub\n      } : null,\n      loader: false // if(getParamValue('subCategory')){\n      //   console.log('momo2',getParamValue('subCategory'))\n      //   let val = getParamValue('subCategory')\n      //   let obj = {\n      //     value:val,label:val\n      //   }\n      //   this.setState({\n      //     selectedSubCategory:obj\n      //   },()=>{\n      //     console.log(this.state.selectedSubCategory,' is pre selected')\n      //   })\n      // }\n\n    };\n\n    _this3.props.getFilterData();\n\n    if (sentSKU || sentSub) {\n      _this3.filterData();\n    }\n\n    _this3.onDropdownchange = _this3.onDropdownchange.bind(_assertThisInitialized(_assertThisInitialized(_this3)));\n    _this3.deleteMsg = \"Delete Successful!\";\n    _this3.debouncedError = _.debounce(function () {\n      toast.info(this.deleteMsg, {\n        containerId: \"TOP_RIGHT_TOAST\",\n        className: \"toasterCss\"\n      });\n    }, 3000, {\n      maxWait: 4000\n    });\n    _this3.finalizeMsg = \"Finalize Successful!\";\n    _this3.debouncedError2 = _.debounce(function () {\n      toast.info(this.finalizeMsg, {\n        containerId: \"TOP_RIGHT_TOAST\",\n        className: \"toasterCss\"\n      });\n    }, 3000, {\n      maxWait: 4000\n    });\n    return _this3;\n  }\n\n  _createClass(PlannedPromoPipeline, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this4 = this;\n\n      console.log('this props is  **** ', this.props.page); //page pipeline\n\n      var status = \"APPROVED\";\n      var startDate = '2018-08-01';\n      var endDate = '2019-12-30'; //page historical\n\n      if (this.props.page == 3) {\n        startDate = '2018-08-01';\n        endDate = '2019-08-30';\n        status = \"COMPLETED\";\n      } //page finalize\n\n\n      if (this.props.page == 2) {\n        status = \"PENDING\";\n        startDate = '2019-08-01';\n        endDate = '2019-12-30';\n      } // this.setState({\n      //   loader: true,\n      //   // promosList: promoObjArr\n      // })\n\n\n      if (getParamValue('sku') || getParamValue('subCategory')) {\n        var variables = {\n          endDate: endDate,\n          startDate: startDate,\n          status: status,\n          hierarchyLevel3: getParamValue('subCategory'),\n          hierarchyLevel4: getParamValue('sku')\n        };\n      } else {\n        var variables = {\n          endDate: endDate,\n          startDate: startDate,\n          status: status\n        };\n      }\n\n      client.query({\n        query: promos,\n        variables: variables\n      }).then(function (data) {\n        var promoObjArr = [];\n\n        if (data.data && data.data.promos && data.data.promos.rows.length > 0) {\n          var promoDataArr = data.data.promos.rows;\n\n          for (var i = 0; i < promoDataArr.length; i++) {\n            var promoData = promoDataArr[i];\n            var promoObj = promoData;\n            promoObj[\"id\"] = promoData.id ? promoData.id : 1;\n            promoObj[\"event\"] = promoData.campaign && promoData.campaign.name ? promoData.campaign.name : \"Biggest Oneday\";\n            promoObj[\"promo\"] = promoData.label ? promoData.label : \"765 ONDS 50% of\";\n            promoObj[\"fob\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].hierarchy && promoData.hierarchies[0].hierarchy.hierarchyLevel1 ? promoData.hierarchies[0].hierarchy.hierarchyLevel1 : \"WOMENS\";\n            promoObj[\"dept\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].hierarchy && promoData.hierarchies[0].hierarchy.hierarchyLevel2 ? promoData.hierarchies[0].hierarchy.hierarchyLevel2 : \"214-Average FL\";\n            promoObj[\"margin\"] = 0;\n            promoObj[\"sales\"] = 0;\n            promoObj[\"units\"] = 0;\n            promoObj[\"marginlift\"] = 0;\n            promoObj[\"unitlift\"] = 0;\n            promoObj[\"incrementalSales\"] = 0;\n\n            if (promoData.hierarchies.length) {\n              promoData.hierarchies.forEach(function (hierarchy) {\n                console.log('hiererchies', hierarchy);\n                promoObj[\"margin\"] += hierarchy.actual && hierarchy.actual.baselineMargin ? hierarchy.actual.baselineMargin : hierarchy.simulation.baselineMargin;\n                promoObj[\"sales\"] += hierarchy.actual && hierarchy.actual.baselineSales ? hierarchy.actual.baselineSales : hierarchy.simulation.baselineSales;\n                promoObj[\"units\"] += hierarchy.actual && hierarchy.actual.baselineUnits ? hierarchy.actual.baselineUnits : hierarchy.simulation.baselineUnits;\n                promoObj[\"marginlift\"] += hierarchy.actual && hierarchy.actual.directIncrementalMargin ? hierarchy.actual.directIncrementalMargin : hierarchy.simulation.directIncrementalMargin;\n                promoObj[\"unitlift\"] += hierarchy.actual && hierarchy.actual.directIncrementalUnits ? hierarchy.actual.directIncrementalUnits : hierarchy.simulation.directIncrementalUnits;\n                promoObj[\"incrementalSales\"] += hierarchy.actual && hierarchy.actual.directIncrementalSales ? hierarchy.actual.directIncrementalSales : hierarchy.simulation.directIncrementalSales;\n              });\n              console.log('coming here', promoData.hierarchies.length, promoObj[\"margin\"], promoObj[\"sales\"], promoObj[\"units\"]);\n            }\n\n            promoObj[\"performance\"] = promoData.simulationPerformance ? promoData.simulationPerformance : \"Good\"; //for waterfall\n\n            promoObj[\"baselineMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.baselineMargin ? promoData.hierarchies[0].actual.baselineMargin : promoData.hierarchies[0].simulation.baselineMargin;\n            promoObj[\"cannibalisationMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.cannibalizationMargin ? promoData.hierarchies[0].actual.cannibalizationMargin : promoData.hierarchies[0].simulation.cannibalizationMargin;\n            promoObj[\"incrementalMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.directIncrementalMargin ? promoData.hierarchies[0].actual.directIncrementalMargin : promoData.hierarchies[0].simulation.directIncrementalMargin;\n            promoObj[\"affinityMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.haloMargin ? promoData.hierarchies[0].actual.haloMargin : promoData.hierarchies[0].simulation.haloMargin;\n            promoObj[\"totalMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.totalMargin ? promoData.hierarchies[0].actual.totalMargin : promoData.hierarchies[0].simulation.totalMargin;\n            promoObjArr.push(promoObj);\n          }\n        }\n\n        _this4.setState({\n          loader: false,\n          promosList: promoObjArr\n        });\n      }).catch(function (err) {});\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"onRefresh\",\n    value: function onRefresh() {\n      this.reloadData();\n    }\n  }, {\n    key: \"filterData\",\n    value: function filterData() {\n      var _this5 = this;\n\n      var department = this.state.selectedDepartment ? this.state.selectedDepartment.value : null;\n      var category = this.state.selectedCategory ? this.state.selectedCategory.value : null;\n      var sku = this.state.selectedSKU ? this.state.selectedSKU.value : null;\n      var subCategory = this.state.selectedSubCategory ? this.state.selectedSubCategory.value : null;\n      var queryArray = [];\n      var queryArray1 = [];\n      var queryArray2 = [];\n      var queryArray3 = [];\n      var queryArray4 = [];\n\n      if (department) {\n        queryArray.push('department=' + department);\n        queryArray1.push(department);\n      }\n\n      if (category) {\n        queryArray.push('category=' + category);\n        queryArray2.push(category);\n      }\n\n      if (sku) {\n        queryArray.push('sku=' + sku);\n        queryArray4.push(sku);\n      }\n\n      if (subCategory) {\n        queryArray.push('subCategory=' + subCategory);\n        queryArray3.push(subCategory);\n      }\n\n      if (queryArray.length > 0) {\n        //page pipeline\n        var status = \"APPROVED\"; //page historical\n\n        if (this.props.page == 3) status = \"COMPLETED\"; //page finalize\n\n        if (this.props.page == 2) status = \"PENDING\";\n        this.setState({\n          loader: true\n        });\n        client.query({\n          query: promos,\n          variables: {\n            endDate: '2019-12-30',\n            startDate: '2018-08-01',\n            status: status,\n            hierarchyLevel1: queryArray1,\n            hierarchyLevel2: queryArray2,\n            hierarchyLevel3: queryArray3,\n            hierarchyLevel4: queryArray4\n          }\n        }).then(function (data) {\n          var promoObjArr = [];\n\n          if (data.data && data.data.promos && data.data.promos.rows.length > 0) {\n            var promoDataArr = data.data.promos.rows;\n\n            for (var i = 0; i < promoDataArr.length; i++) {\n              var promoData = promoDataArr[i];\n              var promoObj = promoData;\n              promoObj[\"id\"] = promoData.id ? promoData.id : 1;\n              promoObj[\"event\"] = promoData.campaign && promoData.campaign.name ? promoData.campaign.name : \"Biggest Oneday\";\n              promoObj[\"promo\"] = promoData.label ? promoData.label : \"765 ONDS 50% of\";\n              promoObj[\"fob\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].hierarchy && promoData.hierarchies[0].hierarchy.hierarchyLevel1 ? promoData.hierarchies[0].hierarchy.hierarchyLevel1 : \"WOMENS\";\n              promoObj[\"dept\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].hierarchy && promoData.hierarchies[0].hierarchy.hierarchyLevel2 ? promoData.hierarchies[0].hierarchy.hierarchyLevel2 : \"214-Average FL\";\n              promoObj[\"margin\"] = 0;\n              promoObj[\"sales\"] = 0;\n              promoObj[\"units\"] = 0;\n              promoObj[\"marginlift\"] = 0;\n              promoObj[\"unitlift\"] = 0;\n              promoObj[\"incrementalSales\"] = 0;\n\n              if (promoData.hierarchies.length) {\n                promoData.hierarchies.forEach(function (hierarchy) {\n                  promoObj[\"margin\"] += hierarchy.actual && hierarchy.actual.baselineMargin ? hierarchy.actual.baselineMargin : hierarchy.simulation.baselineMargin;\n                  promoObj[\"sales\"] += hierarchy.actual && hierarchy.actual.baselineSales ? hierarchy.actual.baselineSales : hierarchy.simulation.baselineSales;\n                  promoObj[\"units\"] += hierarchy.actual && hierarchy.actual.baselineUnits ? hierarchy.actual.baselineUnits : hierarchy.simulation.baselineUnits;\n                  promoObj[\"marginlift\"] += hierarchy.actual && hierarchy.actual.directIncrementalMargin ? hierarchy.actual.directIncrementalMargin : hierarchy.simulation.directIncrementalMargin;\n                  promoObj[\"unitlift\"] += hierarchy.actual && hierarchy.actual.directIncrementalUnits ? hierarchy.actual.directIncrementalUnits : hierarchy.simulation.directIncrementalUnits;\n                  promoObj[\"incrementalSales\"] += hierarchy.actual && hierarchy.actual.directIncrementalSales ? hierarchy.actual.directIncrementalSales : hierarchy.simulation.directIncrementalSales;\n                });\n              }\n\n              promoObj[\"performance\"] = promoData.simulationPerformance ? promoData.simulationPerformance : \"Good\"; //for waterfall\n\n              promoObj[\"baselineMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.baselineMargin ? promoData.hierarchies[0].actual.baselineMargin : promoData.hierarchies[0].simulation.baselineMargin;\n              promoObj[\"cannibalisationMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.cannibalizationMargin ? promoData.hierarchies[0].actual.cannibalizationMargin : promoData.hierarchies[0].simulation.cannibalizationMargin;\n              promoObj[\"incrementalMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.directIncrementalMargin ? promoData.hierarchies[0].actual.directIncrementalMargin : promoData.hierarchies[0].simulation.directIncrementalMargin;\n              promoObj[\"affinityMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.haloMargin ? promoData.hierarchies[0].actual.haloMargin : promoData.hierarchies[0].simulation.haloMargin;\n              promoObj[\"totalMargin\"] = promoData.hierarchies.length > 0 && promoData.hierarchies[0].actual && promoData.hierarchies[0].actual.totalMargin ? promoData.hierarchies[0].actual.totalMargin : promoData.hierarchies[0].simulation.totalMargin;\n              promoObjArr.push(promoObj);\n            }\n          }\n\n          _this5.setState({\n            loader: false,\n            promosList: promoObjArr\n          });\n        }).catch(function (err) {}); // this.props.getPromoData('?'+queryArray.join('&'))\n      } else {// this.props.getPromoData() \n        }\n    } // onGridReady = params => {\n    //   this.gridApi = params.api;\n    //   this.gridColumnApi = params.columnApi;\n    //   this.gridColumnApi.autoSizeAllColumns();\n    // };\n\n  }, {\n    key: \"onSelectionChanged\",\n    value: function onSelectionChanged(event) {\n      var rowCount = event.api.getSelectedNodes();\n      this.selrow = rowCount; // for(var i=0;i<rowCount.length;i++){\n      //   console.log('selrow',rowCount[i]);\n      // }\n      // window.alert(\"selection changed, \" + rowCount + \" rows selected\");\n    }\n  }, {\n    key: \"onDropdownchange\",\n    value: function onDropdownchange(tag, value) {\n      if (tag === 'department') {\n        this.setState({\n          selectedDepartment: value\n        });\n      }\n\n      if (tag === 'category') {\n        this.setState({\n          selectedCategory: value\n        });\n      }\n\n      if (tag === 'subCategory') {\n        this.setState({\n          selectedSubCategory: value\n        });\n      }\n\n      if (tag === 'sku') {\n        this.setState({\n          selectedSKU: value\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var modalCellRenderer = ModalCellRenderer;\n\n      if (this.props.page === 2 || this.props.page === 3) {\n        modalCellRenderer = ModalCellRenderer2;\n      }\n\n      var pipelineDataNew = {\n        'header': [{\n          headerName: \"Select\",\n          field: \"Select\",\n          checkboxSelection: true,\n          headerCheckboxSelection: true,\n          filter: false,\n          width: 40\n        }, {\n          headerName: \"Event\",\n          field: \"event\"\n        }, {\n          headerName: \"Promotion\",\n          field: \"promo\",\n          width: 300\n        }, {\n          headerName: \"Department\",\n          field: \"fob\"\n        }, {\n          headerName: \"Sub Department\",\n          field: \"dept\"\n        }, // {\n        //   headerName: \"FOB\", field: \"fob\"\n        // }, \n        // {\n        //   headerName: \"Department\", field: \"dept\"\n        // },\n        {\n          headerName: \"Baseline Margin($)\",\n          field: \"margin\",\n          valueFormatter: this.emptyValueFormatter\n        }, {\n          headerName: \"Baseline Sales($)\",\n          field: \"sales\",\n          valueFormatter: this.emptyValueFormatter\n        }, {\n          headerName: \"Baseline Units\",\n          field: \"units\",\n          valueFormatter: this.emptyValueFormatter\n        }, {\n          headerName: \"Incremental Margin($)\",\n          field: \"marginlift\",\n          valueFormatter: this.emptyValueFormatter\n        }, {\n          headerName: \"Unit lift\",\n          field: \"unitlift\",\n          valueFormatter: this.emptyValueFormatter\n        }, {\n          headerName: \"Incremental Sales($)\",\n          field: \"incrementalSales\",\n          valueFormatter: this.emptyValueFormatter\n        }, {\n          headerName: \"Performance\",\n          field: \"performance\",\n          cellRendererFramework: NameCellRenderer,\n          width: 150\n        }, {\n          headerName: \"Details\",\n          field: \"id\",\n          cellRendererFramework: modalCellRenderer,\n          pinned: 'right',\n          width: 80\n        }],\n        'data': []\n      };\n      var custGroupArray = [],\n          businessDescArray = [],\n          shopArray = [],\n          skuArray = [];\n\n      if (this.props.summaryCumulativeFilters.data) {\n        this.props.summaryCumulativeFilters.data.h1.map(function (filterData) {\n          custGroupArray.push({\n            value: filterData,\n            label: filterData\n          });\n        });\n        this.props.summaryCumulativeFilters.data.h2.map(function (filterData) {\n          businessDescArray.push({\n            value: filterData,\n            label: filterData\n          });\n        });\n        this.props.summaryCumulativeFilters.data.h3.map(function (filterData) {\n          shopArray.push({\n            value: filterData,\n            label: filterData\n          });\n        });\n        this.props.summaryCumulativeFilters.data.h4.map(function (filterData) {\n          skuArray.push({\n            value: filterData,\n            label: filterData\n          });\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 940\n        },\n        __self: this\n      }, React.createElement(CustomModal, {\n        showModal: this.state.modalVisible,\n        openModal: this.openModal,\n        closeModal: this.closeModal,\n        currentPromo: this.state.selectedOption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 941\n        },\n        __self: this\n      }), React.createElement(ToastContainer, {\n        enableMultiContainer: true,\n        containerId: \"TOP_RIGHT_TOAST\",\n        position: toast.POSITION.TOP_RIGHT,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 946\n        },\n        __self: this\n      }), React.createElement(LoadingOverlay, {\n        active: this.state.loader,\n        spinner: true,\n        text: \"Loading...\",\n        styles: {\n          overlay: function overlay(base) {\n            return _objectSpread({}, base, {\n              background: \"rgba(255, 255, 255, 0.97)\",\n              borderRadius: \"40px\"\n            });\n          },\n          spinner: function spinner(base) {\n            return _objectSpread({}, base, {\n              width: \"50px\",\n              \"& svg circle\": {\n                stroke: \"#44677b\"\n              }\n            });\n          },\n          content: function content(base) {\n            return _objectSpread({}, base, {\n              color: \"#44677b\"\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 951\n        },\n        __self: this\n      }, !this.state.showPromotionMain ? React.createElement(\"div\", {\n        className: \"calendarContainer\",\n        id: \"main-calendar-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 975\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"promo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 976\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card CalendarMain promoCalendarDiv1\",\n        id: \"promocalendar-maincontainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 977\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"promoHeading mb-1 color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 981\n        },\n        __self: this\n      }, this.props.page == 2 ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 984\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"planned-promo-text \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 984\n        },\n        __self: this\n      }, \"Promotion Planning /\"), \"\\xA0Finalize Promotion\") : this.props.page == 3 ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 988\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"planned-promo-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 988\n        },\n        __self: this\n      }, \"Create Promotion /\"), \"\\xA0From Historical\") : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 991\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"planned-promo-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 991\n        },\n        __self: this\n      }, \"Promotion Planning /\"), \"\\xA0 Promotion Pipeline\")), React.createElement(\"hr\", {\n        style: {\n          marginTop: \"8px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 997\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row promopipelineDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 998\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8 SelectRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 999\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1000\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1001\n        },\n        __self: this\n      }, React.createElement(Select, {\n        id: \"customerGroupSelect\",\n        placeholder: \"Department\",\n        options: custGroupArray,\n        onChange: function onChange(e) {\n          return _this6.onDropdownchange('department', e);\n        },\n        value: this.state.selectedDepartment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1002\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1012\n        },\n        __self: this\n      }, React.createElement(Select, {\n        id: \"businessDescSelect\",\n        placeholder: \"Sub Department\",\n        options: businessDescArray,\n        onChange: function onChange(e) {\n          return _this6.onDropdownchange('category', e);\n        },\n        value: this.state.selectedCategory,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1013\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1023\n        },\n        __self: this\n      }, React.createElement(Select, {\n        id: \"shopSelect\",\n        placeholder: \"Category\",\n        options: shopArray,\n        onChange: function onChange(e) {\n          return _this6.onDropdownchange('subCategory', e);\n        },\n        value: this.state.selectedSubCategory,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1024\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1034\n        },\n        __self: this\n      }, React.createElement(Select, {\n        id: \"shopSelect\",\n        placeholder: \"SKU/SKU Group\",\n        options: skuArray,\n        onChange: function onChange(e) {\n          return _this6.onDropdownchange('sku', e);\n        },\n        value: this.state.selectedSKU,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1035\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"col-md-4 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1047\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary filterBtn\",\n        onClick: function onClick() {\n          return _this6.filterData();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1048\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1050\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1051\n        },\n        __self: this\n      }), \"\\xA0 Filter\")), React.createElement(\"button\", {\n        className: \"btn btn-primary resetButton\",\n        onClick: function onClick() {\n          return _this6.onRefresh();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1054\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1056\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-repeat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1057\n        },\n        __self: this\n      }), \"\\xA0 Reset\")))), React.createElement(\"hr\", {\n        className: \"dotted-line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1062\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"\",\n        style: {\n          padding: \"5px 7px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1063\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"promolist-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1064\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"pipelineLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1065\n        },\n        __self: this\n      }, \"Promotion List\")), React.createElement(\"button\", {\n        className: \"btn btn-primary iconbutton download-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1067\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1068\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-download\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1069\n        },\n        __self: this\n      }))), this.props.page == 2 ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1076\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this6.finalizeRows();\n        },\n        className: \"pull-right btn btn-secondary \",\n        style: {\n          marginLeft: '10px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1077\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1078\n        },\n        __self: this\n      }, \"Finalize\")), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this6.deleteRows();\n        },\n        className: \"pull-right btn btn-secondary \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1082\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1083\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-trash\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1084\n        },\n        __self: this\n      })), \"\\xA0\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1086\n        },\n        __self: this\n      }, \"Delete\"))) : this.props.page == 3 ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1093\n        },\n        __self: this\n      }) : React.createElement(\"button\", {\n        className: \"pull-right btn btn-secondary \",\n        style: {\n          display: 'none'\n        },\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1095\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1096\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-trash\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1097\n        },\n        __self: this\n      })), \"\\xA0\", React.createElement(\"span\", {\n        onClick: this.deleteRows.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1099\n        },\n        __self: this\n      }, \"Delete\"))), React.createElement(\"div\", {\n        className: \"pipelineGrid\",\n        style: {\n          padding: \"0px 15px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"myGridForPipeline\",\n        style: {\n          // height: \"calc(100vh - 10px) !important\",\n          height: '300px',\n          width: \"100%\"\n        },\n        className: \"ag-theme-balham\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1109\n        },\n        __self: this\n      }, React.createElement(AgGridReact // floatingFilter={true}\n      // suppressFilterButton={true}\n      // defaultColDef={this.state.defaultColDef}\n      , {\n        columnDefs: pipelineDataNew.header,\n        rowData: this.state.promosList ? this.state.promosList : [] // overlayNoRowsTemplate={this.state.overlayNoRowsTemplate}\n        // pagination={true}\n        ,\n        onGridReady: this.onGridReady,\n        handleTableOpClick: this.handleTableOpClick // rowClassRules={this.state.rowClassRules}\n        // frameworkComponents={this.state.frameworkComponents}\n        // context={this.state.context}\n        // rowClass={pipelineRowClass}\n        // onCellClicked={event => this.editAdgroup(event)}\n        ,\n        rowSelection: this.state.rowSelection // suppressRowClickSelection={true}\n        ,\n        onSelectionChanged: this.onSelectionChanged.bind(this),\n        page: this.props.page ? this.props.page : 1 // onModelUpdated={this.modelUpdated}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1118\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1145\n        },\n        __self: this\n      })) : {}));\n    }\n  }]);\n\n  return PlannedPromoPipeline;\n}(Component);\n\nvar mapActionToProps = {\n  getFilterData: action.getPromoFilters,\n  updateRecommendPromo: action.updateRecommendPromo\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    summaryCumulativeFilters: state.filterData\n  };\n};\n\nexport default connect(mapStateToProps, mapActionToProps)(withRouter(PlannedPromoPipeline));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/container/PlannedPromoPipeline.js"],"names":["React","Component","connect","LoadingOverlay","action","AgGridReact","withRouter","Link","_","Select","client","promos","CustomModal","gql","deletePromo","changePromoStatus","ToastContainer","toast","Axios","getParamValue","paramName","window","location","href","includes","url","split","val","paramsArray","forEach","item","NameCellRenderer","props","className","value","ModalCellRenderer","fontSize","cursor","color","agGridReact","handleTableOpClick","ModalCellRenderer2","display","padding","pathname","state","id","page","PlannedPromoPipeline","sentSKU","sentSub","replace","selectedOptionArr","promosList","filter","parseFloat","length","setState","selectedOption","openModal","modalVisible","closeModal","handleSelectChange","e","loader","selectedYear","currentTarget","onSubmit","onYearChange","reloadData","status","query","variables","endDate","startDate","then","data","promoObjArr","rows","promoDataArr","i","promoData","promoObj","campaign","name","label","hierarchies","hierarchy","hierarchyLevel1","hierarchyLevel2","actual","baselineMargin","simulation","baselineSales","baselineUnits","directIncrementalMargin","directIncrementalUnits","directIncrementalSales","simulationPerformance","cannibalizationMargin","haloMargin","totalMargin","push","selectedCategory","selectedDepartment","selectedSKU","selectedSubCategory","catch","err","getFilteredHierarchy","level","stateLevel","onGridReady","params","gridApi","api","gridColumnApi","columnApi","autoSizeCol","sizeColumnsToFit","deleteRows","rowCount","selrow","updateRecommendPromo","mutate","mutation","debouncedError","console","log","finalizeRows","comment","debouncedError2","emptyValueFormatter","tempVal","toString","toSting","Math","round","parseInt","splitAvalue","abs","rowSelection","incrementalMargin","affinityMargin","cannibalisationMargin","getFilterData","filterData","onDropdownchange","bind","deleteMsg","debounce","info","containerId","maxWait","finalizeMsg","hierarchyLevel3","hierarchyLevel4","department","category","sku","subCategory","queryArray","queryArray1","queryArray2","queryArray3","queryArray4","event","getSelectedNodes","tag","modalCellRenderer","pipelineDataNew","headerName","field","checkboxSelection","headerCheckboxSelection","width","valueFormatter","cellRendererFramework","pinned","custGroupArray","businessDescArray","shopArray","skuArray","summaryCumulativeFilters","h1","map","h2","h3","h4","POSITION","TOP_RIGHT","overlay","base","background","borderRadius","spinner","stroke","content","showPromotionMain","marginTop","onRefresh","marginLeft","height","header","onSelectionChanged","mapActionToProps","getPromoFilters","mapStateToProps"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB,C,CACA;;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,OAAO,4CAAP;AACA,OAAO,KAAKC,MAAZ,MAAwB,kBAAxB;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,kBAAjC;AAEA,OAAOC,CAAP,MAAc,YAAd;AACA,OAAO,qEAAP;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAO,4BAAP;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,WAAT,EAAsBC,iBAAtB,QAA+C,0BAA/C;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,aAAT,CAAuBC,SAAvB,EAAiC;AAC/B,MAAG,CAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAjB,CAAuBC,QAAvB,CAAgC,GAAhC,CAAL,EAA2C;AACzC;AACD;;AACD,MAAIC,GAAG,GAAIJ,MAAM,CAACC,QAAP,CAAgBC,IAAjB,CAAuBG,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,CAAV;AACA,MAAIC,GAAG,GAAC,IAAR;AACA,MAAIC,WAAW,GAAGH,GAAG,CAACC,KAAJ,CAAU,GAAV,CAAlB;AACAE,EAAAA,WAAW,CAACC,OAAZ,CAAoB,UAACC,IAAD,EAAQ;AAC1B,QAAGA,IAAI,CAACJ,KAAL,CAAW,GAAX,EAAgB,CAAhB,MAAqBN,SAAxB,EAAkC;AAChCO,MAAAA,GAAG,GAAGG,IAAI,CAACJ,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAN;AACA;AACD;AACF,GALD;AAMA,SAAOC,GAAP;AACD,C,CACD;;;IACMI,gB;;;;;AACJ,4BAAYC,KAAZ,EAAmB;AAAA;;AAAA,yFACXA,KADW;AAElB;;;;6BACQ;AACP;AACA,UAAIC,SAAS,GAAG,YAAhB;;AACA,UAAG,KAAKD,KAAL,CAAWE,KAAX,IAAoB,OAApB,IAA+B,KAAKF,KAAL,CAAWE,KAAX,IAAoB,eAAtD,EAAsE;AACpED,QAAAA,SAAS,GAAG,WAAZ;AACD;;AACD,UAAG,KAAKD,KAAL,CAAWE,KAAX,IAAoB,SAAvB,EAAiC;AAC/BD,QAAAA,SAAS,GAAG,WAAZ;AACD;;AACD,aACE;AAAK,QAAA,SAAS,EAAE,WAASA,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqC,KAAKD,KAAL,CAAWE,KAAhD,CADF;AAGD;;;;EAhB4BlC,KAAK,CAACC,S;;IAkB/BkC,iB;;;;;AACJ,6BAAYH,KAAZ,EAAmB;AAAA;;AAAA,0FACXA,KADW;AAElB;;;;6BACQ;AAAA;;AACP;AACA,aACE;AAAM,QAAA,KAAK,EAAE;AAAEI,UAAAA,QAAQ,EAAE,QAAZ;AAAsBC,UAAAA,MAAM,EAAE,SAA9B;AAAyCC,UAAAA,KAAK,EAAC;AAA/C,SAAb;AAAyE,QAAA,OAAO,EAAE;AAAA,iBAAM,KAAI,CAACN,KAAL,CAAWO,WAAX,CAAuBP,KAAvB,CAA6BQ,kBAA7B,CAAgD,KAAI,CAACR,KAAL,CAAWE,KAA3D,CAAN;AAAA,SAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,mBAAT;AAA6B,uBAAY,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAKD;;;;EAX6BlC,KAAK,CAACC,S;;IAahCwC,kB;;;;;AACJ,8BAAYT,KAAZ,EAAmB;AAAA;;AAAA,2FACXA,KADW;AAElB;;;;6BACQ;AAAA;;AACP;AACA,aACE;AAAK,QAAA,KAAK,EAAE;AAAEU,UAAAA,OAAO,EAAE;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,SAAS,EAAC,iBAAlB;AACC,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACV,KAAL,CAAWO,WAAX,CAAuBP,KAAvB,CAA6BQ,kBAA7B,CAAgD,MAAI,CAACR,KAAL,CAAWE,KAA3D,CAAN;AAAA,SADV;AAEC,QAAA,KAAK,EAAE;AAAEG,UAAAA,MAAM,EAAC,SAAT;AAAmBC,UAAAA,KAAK,EAAC,SAAzB;AAAoCK,UAAAA,OAAO,EAAC;AAA5C,SAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE;AAAG,QAAA,KAAK,EAAC,gCAAT;AACA,uBAAY,MADZ;AACmB,QAAA,KAAK,EAAE;AAAKP,UAAAA,QAAQ,EAAE;AAAf,SAD1B;AACoD,QAAA,KAAK,EAAC,gBAD1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADF,EAQI,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE;AAACQ,UAAAA,QAAQ,EAAE,oBAAX;AAAiCC,UAAAA,KAAK,EAAC;AAAEC,YAAAA,EAAE,EAAE,KAAKd,KAAL,CAAWE,KAAjB;AAAwBa,YAAAA,IAAI,EAAE,KAAKf,KAAL,CAAWO,WAAX,CAAuBP,KAAvB,CAA6Be;AAA3D;AAAvC,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE;AAAK,QAAA,KAAK,EAAE;AAAKX,UAAAA,QAAQ,EAAE,QAAf;AAAwBC,UAAAA,MAAM,EAAC,SAA/B;AAAyCC,UAAAA,KAAK,EAAC;AAA/C,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,mBAAT;AAA6B,uBAAY,MAAzC;AAAgD,QAAA,KAAK,EAAC,gBAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFF,CARJ,CADF;AAiBD;;;;EAvB8BtC,KAAK,CAACC,S;;IAyBhC+C,oB;;;;;AACL,gCAAYhB,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,QAAIiB,OAAO,GAAG9B,aAAa,CAAC,KAAD,CAA3B;AACA,QAAI+B,OAAO,GAAG/B,aAAa,CAAC,aAAD,CAA3B;AACA,QAAG8B,OAAH,EACEA,OAAO,GAACA,OAAO,CAACE,OAAR,CAAgB,KAAhB,EAAsB,GAAtB,CAAR;AACF,QAAGD,OAAH,EACEA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,KAAhB,EAAsB,GAAtB,CAAV;AACF,+FAAMnB,KAAN;;AAPiB,WAmEnBQ,kBAnEmB,GAmEE,UAACb,GAAD,EAAS;AAC5B,UAAIyB,iBAAiB,GAAG,OAAKP,KAAL,CAAWQ,UAAX,CAAsBC,MAAtB,CAA6B,UAACxB,IAAD;AAAA,eAAUyB,UAAU,CAACzB,IAAI,CAACgB,EAAN,CAAV,KAAwBS,UAAU,CAAC5B,GAAD,CAA5C;AAAA,OAA7B,CAAxB;;AACA,UAAIyB,iBAAiB,CAACI,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,eAAKC,QAAL,CAAc;AAAEC,UAAAA,cAAc,EAAEN,iBAAiB,CAAC,CAAD;AAAnC,SAAd;AACD;;AACD,aAAKO,SAAL;AACD,KAzEkB;;AAAA,WA2EnBA,SA3EmB,GA2EP,YAAM;AAChB,aAAKF,QAAL,CAAc;AAAEG,QAAAA,YAAY,EAAE;AAAhB,OAAd;AACD,KA7EkB;;AAAA,WA+EnBC,UA/EmB,GA+EN,YAAM;AACjB,aAAKJ,QAAL,CAAc;AAAEG,QAAAA,YAAY,EAAE;AAAhB,OAAd;AACD,KAjFkB;;AAAA,WAgQnBE,kBAhQmB,GAgQE,UAAAC,CAAC,EAAI;AACxB,aAAKN,QAAL,CAAc;AAAEO,QAAAA,MAAM,EAAE,IAAV;AAAgBC,QAAAA,YAAY,EAAEF,CAAC,CAACG,aAAF,CAAgBhC;AAA9C,OAAd;;AACA,aAAKF,KAAL,CAAWmC,QAAX,CAAoB,OAApB;;AACA,aAAKC,YAAL;AACD,KApQkB;;AAAA,WAwQnBC,UAxQmB,GAwQN,YAAM;AACjB;AACA,UAAIC,MAAM,GAAG,UAAb,CAFiB,CAGjB;;AACA,UAAI,OAAKtC,KAAL,CAAWe,IAAX,IAAmB,CAAvB,EACEuB,MAAM,GAAG,WAAT,CALe,CAMjB;;AACA,UAAI,OAAKtC,KAAL,CAAWe,IAAX,IAAmB,CAAvB,EACEuB,MAAM,GAAG,SAAT;;AACA,aAAKb,QAAL,CAAc;AACZO,QAAAA,MAAM,EAAE;AADI,OAAd;;AAGFtD,MAAAA,MAAM,CACH6D,KADH,CACS;AACLA,QAAAA,KAAK,EAAE5D,MADF;AAEL6D,QAAAA,SAAS,EAAE;AACTC,UAAAA,OAAO,EAAE,YADA;AAETC,UAAAA,SAAS,EAAE,YAFF;AAGTJ,UAAAA,MAAM,EAAEA;AAHC;AAFN,OADT,EASGK,IATH,CASQ,UAAAC,IAAI,EAAI;AACZ,YAAIC,WAAW,GAAG,EAAlB;;AACA,YAAID,IAAI,CAACA,IAAL,IAAaA,IAAI,CAACA,IAAL,CAAUjE,MAAvB,IAAiCiE,IAAI,CAACA,IAAL,CAAUjE,MAAV,CAAiBmE,IAAjB,CAAsBtB,MAAtB,GAA+B,CAApE,EAAuE;AACrE,cAAIuB,YAAY,GAAGH,IAAI,CAACA,IAAL,CAAUjE,MAAV,CAAiBmE,IAApC;;AACA,eAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,YAAY,CAACvB,MAAjC,EAAyCwB,CAAC,EAA1C,EAA8C;AAC5C,gBAAIC,SAAS,GAAGF,YAAY,CAACC,CAAD,CAA5B;AACA,gBAAIE,QAAQ,GAAGD,SAAf;AACAC,YAAAA,QAAQ,CAAC,IAAD,CAAR,GAAiBD,SAAS,CAACnC,EAAV,GAAemC,SAAS,CAACnC,EAAzB,GAA8B,CAA/C;AACAoC,YAAAA,QAAQ,CAAC,OAAD,CAAR,GACED,SAAS,CAACE,QAAV,IAAsBF,SAAS,CAACE,QAAV,CAAmBC,IAAzC,GACIH,SAAS,CAACE,QAAV,CAAmBC,IADvB,GAEI,gBAHN;AAIAF,YAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoBD,SAAS,CAACI,KAAV,GAChBJ,SAAS,CAACI,KADM,GAEhB,iBAFJ;AAGAH,YAAAA,QAAQ,CAAC,KAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACAyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SADzB,IAEAN,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCC,eAFnC,GAGIP,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCC,eAHvC,GAII,QALN;AAOAN,YAAAA,QAAQ,CAAC,MAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACAyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SADzB,IAEAN,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCE,eAFnC,GAGIR,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCE,eAHvC,GAII,gBALN;AAOIP,YAAAA,QAAQ,CAAC,QAAD,CAAR,GAAqB,CAArB;AACAA,YAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,CAApB;AACAA,YAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,CAApB;AACAA,YAAAA,QAAQ,CAAC,YAAD,CAAR,GAA0B,CAA1B;AACAA,YAAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,CAAvB;AACAA,YAAAA,QAAQ,CAAC,kBAAD,CAAR,GAA+B,CAA/B;;AACA,gBAAGD,SAAS,CAACK,WAAV,CAAsB9B,MAAzB,EAAgC;AAE9ByB,cAAAA,SAAS,CAACK,WAAV,CAAsBzD,OAAtB,CAA8B,UAAC0D,SAAD,EAAe;AAC3CL,gBAAAA,QAAQ,CAAC,QAAD,CAAR,IAAwBK,SAAS,CAACG,MAAV,IAChBH,SAAS,CAACG,MAAV,CAAiBC,cADH,GAEZJ,SAAS,CAACG,MAAV,CAAiBC,cAFL,GAGZJ,SAAS,CAACK,UAAV,CAAqBD,cAH/B;AAMAT,gBAAAA,QAAQ,CAAC,OAAD,CAAR,IAAuBK,SAAS,CAACG,MAAV,IACnBH,SAAS,CAACG,MAAV,CAAiBG,aADA,GAEfN,SAAS,CAACG,MAAV,CAAiBG,aAFF,GAGfN,SAAS,CAACK,UAAV,CAAqBC,aAH3B;AAKAX,gBAAAA,QAAQ,CAAC,OAAD,CAAR,IAAuBK,SAAS,CAACG,MAAV,IACnBH,SAAS,CAACG,MAAV,CAAiBI,aADA,GAEfP,SAAS,CAACG,MAAV,CAAiBI,aAFF,GAGfP,SAAS,CAACK,UAAV,CAAqBE,aAH3B;AAKIZ,gBAAAA,QAAQ,CAAC,YAAD,CAAR,IACEK,SAAS,CAACG,MAAV,IACAH,SAAS,CAACG,MAAV,CAAiBK,uBADlB,GAEGR,SAAS,CAACG,MAAV,CAAiBK,uBAFpB,GAGGR,SAAS,CAACK,UAAV,CAAqBG,uBAJzB;AAMFb,gBAAAA,QAAQ,CAAC,UAAD,CAAR,IACEK,SAAS,CAACG,MAAV,IACEH,SAAS,CAACG,MAAV,CAAiBM,sBADpB,GAEKT,SAAS,CAACG,MAAV,CAAiBM,sBAFtB,GAGKT,SAAS,CAACK,UAAV,CAAqBI,sBAJ3B;AAMId,gBAAAA,QAAQ,CAAC,kBAAD,CAAR,IACDK,SAAS,CAACG,MAAV,IACCH,SAAS,CAACG,MAAV,CAAiBO,sBADnB,GAEIV,SAAS,CAACG,MAAV,CAAiBO,sBAFrB,GAGIV,SAAS,CAACK,UAAV,CAAqBK,sBAJvB;AAMP,eAnCD;AAoCD;;AACLf,YAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0BD,SAAS,CAACiB,qBAAV,GACtBjB,SAAS,CAACiB,qBADY,GAEtB,MAFJ,CAtE4C,CAyE5C;;AACAhB,YAAAA,QAAQ,CAAC,gBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCC,cAFlC,GAGIV,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCC,cAHpC,GAIIV,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCD,cAL1C;AAMAT,YAAAA,QAAQ,CAAC,uBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCS,qBAFlC,GAGIlB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCS,qBAHpC,GAIIlB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCO,qBAL1C;AAMAjB,YAAAA,QAAQ,CAAC,mBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACEyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACAT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCK,uBAFlC,GAGId,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCK,uBAHpC,GAIId,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCG,uBAL1C;AAMAb,YAAAA,QAAQ,CAAC,gBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCU,UAFlC,GAGInB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCU,UAHpC,GAIInB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCQ,UAL1C;AAMAlB,YAAAA,QAAQ,CAAC,aAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCW,WAFlC,GAGIpB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCW,WAHpC,GAIIpB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCS,WAL1C;AAOAxB,YAAAA,WAAW,CAACyB,IAAZ,CAAiBpB,QAAjB;AACD;AACF;;AACD,eAAKzB,QAAL,CAAc;AACZO,UAAAA,MAAM,EAAE,KADI;AAEZX,UAAAA,UAAU,EAAEwB,WAFA;AAGZ0B,UAAAA,gBAAgB,EAAE,IAHN;AAIZC,UAAAA,kBAAkB,EAAE,IAJR;AAKZC,UAAAA,WAAW,EAAE,IALD;AAMZC,UAAAA,mBAAmB,EAAE;AANT,SAAd;AAQD,OAjIH,EAkIGC,KAlIH,CAkIS,UAAAC,GAAG,EAAI,CACb,CAnIH;AAoID,KAxZkB;;AAAA,WAyZnBC,oBAzZmB,GAyZI,UAACvB,WAAD,EAAcwB,KAAd,EAAqBC,UAArB,EAAoC;AACzD,UAAGzB,WAAW,CAAC9B,MAAZ,IAAsB8B,WAAW,CAAC,CAAD,CAAX,CAAeC,SAArC,IAAkDD,WAAW,CAAC,CAAD,CAAX,CAAeC,SAAf,CAAyBuB,KAAzB,CAArD,EAAsF;AACpF,YAAGxB,WAAW,CAAC,CAAD,CAAX,CAAeC,SAAf,CAAyBuB,KAAzB,MAAoC,OAAKjE,KAAL,CAAWkE,UAAX,EAAuB7E,KAA9D,EAAqE;AACnE,iBAAOoD,WAAW,CAAC,CAAD,CAAX,CAAeC,SAAf,CAAyBuB,KAAzB,CAAP;AACD,SAFD,MAEO;AACL,iBAAO,OAAKjE,KAAL,CAAWkE,UAAX,EAAuB7E,KAA9B;AACD;AACF,OAND,MAMO;AACL,eAAO,IAAP;AACD;AACF,KAnakB;;AAAA,WA4lBnB8E,WA5lBmB,GA4lBL,UAAAC,MAAM,EAAI;AACtB,aAAKC,OAAL,GAAeD,MAAM,CAACE,GAAtB;AACA,aAAKC,aAAL,GAAqBH,MAAM,CAACI,SAA5B;;AACA,UAAI,OAAKrF,KAAL,CAAWsF,WAAf,EAA4B;AAC1BL,QAAAA,MAAM,CAACE,GAAP,CAAWI,gBAAX;AACD;AACF,KAlmBkB;;AAAA,WA4mBnBC,UA5mBmB,GA4mBN,YAAM;AACjB,UAAIC,QAAQ,GAAG,OAAKC,MAApB;;AACA,WAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,QAAQ,CAACjE,MAA7B,EAAqCwB,CAAC,EAAtC,EAA0C;AACxC,YAAIlC,EAAE,GAAG2E,QAAQ,CAACzC,CAAD,CAAR,CAAY,MAAZ,EAAoB,IAApB,CAAT;;AACA,eAAKhD,KAAL,CAAW2F,oBAAX,CAAgC;AAAC7E,UAAAA,EAAE,EAACA;AAAJ,SAAhC;;AACApC,QAAAA,MAAM,CACHkH,MADH,CACU;AACNC,UAAAA,QAAQ,EAAE/G,WADJ;AAEN0D,UAAAA,SAAS,EAAE;AACT1B,YAAAA,EAAE,EAAFA;AADS;AAFL,SADV,EAOG6B,IAPH,CAOQ,UAAAC,IAAI,EAAI;AACZ;AACA,cAAIC,WAAW,GAAG,OAAKhC,KAAL,CAAWQ,UAA7B;AACAwB,UAAAA,WAAW,GAAGA,WAAW,CAACvB,MAAZ,CAAmB,UAAAxB,IAAI;AAAA,mBAAIA,IAAI,CAACgB,EAAL,KAAYA,EAAhB;AAAA,WAAvB,CAAd;;AACA,iBAAKgF,cAAL;;AACA,iBAAKrE,QAAL,CAAc;AACZJ,YAAAA,UAAU,EAAEwB;AADA,WAAd;AAID,SAhBH,EAiBG8B,KAjBH,CAiBS,UAAAC,GAAG,EAAI;AACZmB,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBpB,GAAnB;AACD,SAnBH;AAoBD;AACF,KAtoBkB;;AAAA,WAuoBnBqB,YAvoBmB,GAuoBJ,YAAM;AACnB,UAAIR,QAAQ,GAAG,OAAKC,MAApB;;AACA,WAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyC,QAAQ,CAACjE,MAA7B,EAAqCwB,CAAC,EAAtC,EAA0C;AACxC,YAAIlC,EAAE,GAAG2E,QAAQ,CAACzC,CAAD,CAAR,CAAY,MAAZ,EAAoB,IAApB,CAAT;AACAtE,QAAAA,MAAM,CACHkH,MADH,CACU;AACNC,UAAAA,QAAQ,EAAE9G,iBADJ;AAENyD,UAAAA,SAAS,EAAE;AACT1B,YAAAA,EAAE,EAAFA,EADS;AACLwB,YAAAA,MAAM,EAAE,UADH;AACe4D,YAAAA,OAAO,EAAE;AADxB;AAFL,SADV,EAOGvD,IAPH,CAOQ,UAAAC,IAAI,EAAI;AACZ;AACA,cAAIC,WAAW,GAAG,OAAKhC,KAAL,CAAWQ,UAA7B;AACAwB,UAAAA,WAAW,GAAGA,WAAW,CAACvB,MAAZ,CAAmB,UAAAxB,IAAI;AAAA,mBAAIA,IAAI,CAACgB,EAAL,KAAYA,EAAhB;AAAA,WAAvB,CAAd;;AACA,iBAAKqF,eAAL;;AACA,iBAAK1E,QAAL,CAAc;AACZJ,YAAAA,UAAU,EAAEwB;AADA,WAAd;AAGD,SAfH,EAgBG8B,KAhBH,CAgBS,UAAAC,GAAG,EAAI;AACZmB,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBpB,GAAnB;AACD,SAlBH;AAmBD;AACF,KA/pBkB;;AAAA,WAwrBnBwB,mBAxrBmB,GAwrBG,UAAClG,KAAD,EAAW;AAC/B,UAAG,OAAKF,KAAL,CAAWe,IAAX,IAAmB,OAAKf,KAAL,CAAWe,IAAX,IAAmB,CAAtC,IAA2C,OAAKf,KAAL,CAAWe,IAAX,IAAmB,CAAjE,EAAmE;AACjE,YAAIb,KAAK,CAACA,KAAV,EAAiB;AACf,cAAImG,OAAO,GAAGnG,KAAK,CAACA,KAApB;AACAmG,UAAAA,OAAO,GAAGA,OAAO,CAACC,QAAR,GAAmBnF,OAAnB,CAA2B,GAA3B,EAAgC,EAAhC,CAAV;AACAkF,UAAAA,OAAO,GAAGA,OAAO,CAACC,QAAR,GAAmBnF,OAAnB,CAA2B,GAA3B,EAAgC,EAAhC,CAAV;AACAkF,UAAAA,OAAO,GAAGA,OAAO,CAACC,QAAR,GAAmBnF,OAAnB,CAA2B,GAA3B,EAAgC,EAAhC,CAAV;AAEA,cAAIoF,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAd;;AACA,cAAIK,QAAQ,CAACL,OAAD,CAAR,GAAoB,CAAxB,EAA2B;AACzB,mBAAOE,OAAO,CAACD,QAAR,GAAmBnF,OAAnB,CAA2B,uBAA3B,EAAoD,GAApD,CAAP;AACD,WAFD,MAEO;AACL,gBAAIwF,WAAW,GAAGH,IAAI,CAACI,GAAL,CAASL,OAAT,CAAlB;AACA,mBAAQ,MAAMI,WAAW,CAACL,QAAZ,GAAuBnF,OAAvB,CAA+B,uBAA/B,EAAwD,GAAxD,CAAN,GAAqE,EAA7E,CACE;AADF;AAGD;AACF,SAfD,MAgBI;AACF,cAAIjB,KAAK,CAACA,KAAN,IAAe,CAAnB,EAAsB;AACpB,mBAAO,CAAP;AACD,WAFD,MAEO;AACL,mBAAO,GAAP;AACD;AACF;AACF;;AACD,UAAIA,KAAK,CAACA,KAAV,EAAiB;AACf6F,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqB9F,KAAK,CAACA,KAA3B;AAEA,YAAImG,OAAO,GAAGnG,KAAK,CAACA,KAApB;AACAmG,QAAAA,OAAO,GAAGA,OAAO,CAACC,QAAR,GAAmBnF,OAAnB,CAA2B,GAA3B,EAAgC,EAAhC,CAAV;AACAkF,QAAAA,OAAO,GAAGA,OAAO,CAACC,QAAR,GAAmBnF,OAAnB,CAA2B,GAA3B,EAAgC,EAAhC,CAAV;AACAkF,QAAAA,OAAO,GAAGA,OAAO,CAACC,QAAR,GAAmBnF,OAAnB,CAA2B,GAA3B,EAAgC,EAAhC,CAAV;AACA,YAAIoF,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWJ,OAAX,CAAd;;AAEA,YAAIK,QAAQ,CAACL,OAAD,CAAR,GAAoB,CAAxB,EAA2B;AACzB,iBAAOE,OAAO,CAACD,QAAR,GAAmBnF,OAAnB,CAA2B,uBAA3B,EAAoD,GAApD,CAAP;AACD,SAFD,MAEO;AACL,cAAIwF,WAAW,GAAGH,IAAI,CAACI,GAAL,CAASL,OAAT,CAAlB;AACA,iBAAQ,MAAMI,WAAW,CAACL,QAAZ,GAAuBnF,OAAvB,CAA+B,uBAA/B,EAAwD,GAAxD,CAAN,GAAqE,EAA7E,CACE;AADF;AAGD;AACF,OAjBD,MAiBO;AACL,YAAIjB,KAAK,CAACA,KAAN,IAAe,CAAnB,EAAsB;AACpB,iBAAO,CAAP;AACD,SAFD,MAEO;AACL,iBAAO,GAAP;AACD;AACF;AACF,KA1uBkB;;AAQjB,WAAKwF,MAAL,GAAc,EAAd;AACA,WAAK7E,KAAL,GAAa;AACXQ,MAAAA,UAAU,EAAE,EADD;AAEXO,MAAAA,YAAY,EAAE,KAFH;AAGXiF,MAAAA,YAAY,EAAE,UAHH;AAIXnF,MAAAA,cAAc,EAAE;AACdiC,QAAAA,cAAc,EAAE,CADF;AAEdmD,QAAAA,iBAAiB,EAAE,CAFL;AAGdC,QAAAA,cAAc,EAAE,CAHF;AAIdC,QAAAA,qBAAqB,EAAE,CAJT;AAKd3C,QAAAA,WAAW,EAAE;AALC,OAJL;AAWXG,MAAAA,kBAAkB,EAAE,IAXT;AAYXD,MAAAA,gBAAgB,EAAE,IAZP;AAaXE,MAAAA,WAAW,EAAExD,OAAO,GAAC;AAACf,QAAAA,KAAK,EAACe,OAAP;AAAeoC,QAAAA,KAAK,EAACpC;AAArB,OAAD,GAA+B,IAbxC;AAcXyD,MAAAA,mBAAmB,EAAExD,OAAO,GAAE;AAAChB,QAAAA,KAAK,EAACgB,OAAP;AAAemC,QAAAA,KAAK,EAACnC;AAArB,OAAF,GAAkC,IAdnD;AAeXc,MAAAA,MAAM,EAAC,KAfI,CAkBb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA7Ba,KAAb;;AA8BA,WAAKhC,KAAL,CAAWiH,aAAX;;AACA,QAAGhG,OAAO,IAAIC,OAAd,EAAsB;AACpB,aAAKgG,UAAL;AACD;;AACD,WAAKC,gBAAL,GAAwB,OAAKA,gBAAL,CAAsBC,IAAtB,wDAAxB;AACA,WAAKC,SAAL,GAAiB,oBAAjB;AACA,WAAKvB,cAAL,GAAsBtH,CAAC,CAAC8I,QAAF,CACpB,YAAW;AACTrI,MAAAA,KAAK,CAACsI,IAAN,CAAW,KAAKF,SAAhB,EAA2B;AACzBG,QAAAA,WAAW,EAAE,iBADY;AAEzBvH,QAAAA,SAAS,EAAE;AAFc,OAA3B;AAID,KANmB,EAOpB,IAPoB,EAQpB;AAAEwH,MAAAA,OAAO,EAAE;AAAX,KARoB,CAAtB;AAUA,WAAKC,WAAL,GAAmB,sBAAnB;AACA,WAAKvB,eAAL,GAAuB3H,CAAC,CAAC8I,QAAF,CACrB,YAAW;AACTrI,MAAAA,KAAK,CAACsI,IAAN,CAAW,KAAKG,WAAhB,EAA6B;AAC3BF,QAAAA,WAAW,EAAE,iBADc;AAE3BvH,QAAAA,SAAS,EAAE;AAFgB,OAA7B;AAID,KANoB,EAOrB,IAPqB,EAQrB;AAAEwH,MAAAA,OAAO,EAAE;AAAX,KARqB,CAAvB;AAxDiB;AAkElB;;;;yCAiBoB;AAAA;;AACnB1B,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAmC,KAAKhG,KAAL,CAAWe,IAA9C,EADmB,CAEnB;;AACA,UAAIuB,MAAM,GAAG,UAAb;AACA,UAAII,SAAS,GAAG,YAAhB;AACA,UAAID,OAAO,GAAG,YAAd,CALmB,CAMnB;;AACA,UAAI,KAAKzC,KAAL,CAAWe,IAAX,IAAmB,CAAvB,EAAyB;AACvB2B,QAAAA,SAAS,GAAG,YAAZ;AACAD,QAAAA,OAAO,GAAG,YAAV;AACAH,QAAAA,MAAM,GAAG,WAAT;AAAsB,OAVL,CAWnB;;;AACA,UAAI,KAAKtC,KAAL,CAAWe,IAAX,IAAmB,CAAvB,EAAyB;AACvBuB,QAAAA,MAAM,GAAG,SAAT;AACAI,QAAAA,SAAS,GAAG,YAAZ;AACAD,QAAAA,OAAO,GAAG,YAAV;AAAuB,OAfN,CAgBjB;AACA;AACA;AACA;;;AACA,UAAGtD,aAAa,CAAC,KAAD,CAAb,IAAwBA,aAAa,CAAC,aAAD,CAAxC,EAAwD;AACtD,YAAIqD,SAAS,GAAC;AACZC,UAAAA,OAAO,EAAPA,OADY;AAEZC,UAAAA,SAAS,EAATA,SAFY;AAGZJ,UAAAA,MAAM,EAAEA,MAHI;AAIZqF,UAAAA,eAAe,EAAExI,aAAa,CAAC,aAAD,CAJlB;AAKZyI,UAAAA,eAAe,EAAEzI,aAAa,CAAC,KAAD;AALlB,SAAd;AAOD,OARD,MASI;AACF,YAAIqD,SAAS,GAAC;AACZC,UAAAA,OAAO,EAAPA,OADY;AAEZC,UAAAA,SAAS,EAATA,SAFY;AAGZJ,UAAAA,MAAM,EAAEA;AAHI,SAAd;AAKD;;AACH5D,MAAAA,MAAM,CACH6D,KADH,CACS;AACLA,QAAAA,KAAK,EAAE5D,MADF;AAEL6D,QAAAA,SAAS,EAAEA;AAFN,OADT,EAKGG,IALH,CAKQ,UAAAC,IAAI,EAAI;AACZ,YAAIC,WAAW,GAAG,EAAlB;;AACA,YAAID,IAAI,CAACA,IAAL,IAAaA,IAAI,CAACA,IAAL,CAAUjE,MAAvB,IAAiCiE,IAAI,CAACA,IAAL,CAAUjE,MAAV,CAAiBmE,IAAjB,CAAsBtB,MAAtB,GAA+B,CAApE,EAAuE;AACrE,cAAIuB,YAAY,GAAGH,IAAI,CAACA,IAAL,CAAUjE,MAAV,CAAiBmE,IAApC;;AACA,eAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,YAAY,CAACvB,MAAjC,EAAyCwB,CAAC,EAA1C,EAA8C;AAC5C,gBAAIC,SAAS,GAAGF,YAAY,CAACC,CAAD,CAA5B;AACA,gBAAIE,QAAQ,GAAGD,SAAf;AACAC,YAAAA,QAAQ,CAAC,IAAD,CAAR,GAAiBD,SAAS,CAACnC,EAAV,GAAemC,SAAS,CAACnC,EAAzB,GAA8B,CAA/C;AACAoC,YAAAA,QAAQ,CAAC,OAAD,CAAR,GACED,SAAS,CAACE,QAAV,IAAsBF,SAAS,CAACE,QAAV,CAAmBC,IAAzC,GACIH,SAAS,CAACE,QAAV,CAAmBC,IADvB,GAEI,gBAHN;AAIAF,YAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoBD,SAAS,CAACI,KAAV,GAChBJ,SAAS,CAACI,KADM,GAEhB,iBAFJ;AAGAH,YAAAA,QAAQ,CAAC,KAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACAyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SADzB,IAEAN,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCC,eAFnC,GAGIP,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCC,eAHvC,GAII,QALN;AAOAN,YAAAA,QAAQ,CAAC,MAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACAyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SADzB,IAEAN,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCE,eAFnC,GAGIR,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCE,eAHvC,GAII,gBALN;AAOIP,YAAAA,QAAQ,CAAC,QAAD,CAAR,GAAqB,CAArB;AACAA,YAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,CAApB;AACAA,YAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,CAApB;AACAA,YAAAA,QAAQ,CAAC,YAAD,CAAR,GAA0B,CAA1B;AACAA,YAAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,CAAvB;AACAA,YAAAA,QAAQ,CAAC,kBAAD,CAAR,GAA+B,CAA/B;;AACA,gBAAGD,SAAS,CAACK,WAAV,CAAsB9B,MAAzB,EAAgC;AAE9ByB,cAAAA,SAAS,CAACK,WAAV,CAAsBzD,OAAtB,CAA8B,UAAC0D,SAAD,EAAe;AAC3CwC,gBAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BzC,SAA1B;AAEAL,gBAAAA,QAAQ,CAAC,QAAD,CAAR,IAAwBK,SAAS,CAACG,MAAV,IAChBH,SAAS,CAACG,MAAV,CAAiBC,cADH,GAEZJ,SAAS,CAACG,MAAV,CAAiBC,cAFL,GAGZJ,SAAS,CAACK,UAAV,CAAqBD,cAH/B;AAKAT,gBAAAA,QAAQ,CAAC,OAAD,CAAR,IAAuBK,SAAS,CAACG,MAAV,IACnBH,SAAS,CAACG,MAAV,CAAiBG,aADA,GAEfN,SAAS,CAACG,MAAV,CAAiBG,aAFF,GAGfN,SAAS,CAACK,UAAV,CAAqBC,aAH3B;AAKAX,gBAAAA,QAAQ,CAAC,OAAD,CAAR,IAAuBK,SAAS,CAACG,MAAV,IACnBH,SAAS,CAACG,MAAV,CAAiBI,aADA,GAEfP,SAAS,CAACG,MAAV,CAAiBI,aAFF,GAGfP,SAAS,CAACK,UAAV,CAAqBE,aAH3B;AAOIZ,gBAAAA,QAAQ,CAAC,YAAD,CAAR,IACEK,SAAS,CAACG,MAAV,IACAH,SAAS,CAACG,MAAV,CAAiBK,uBADlB,GAEGR,SAAS,CAACG,MAAV,CAAiBK,uBAFpB,GAGGR,SAAS,CAACK,UAAV,CAAqBG,uBAJzB;AAMFb,gBAAAA,QAAQ,CAAC,UAAD,CAAR,IACEK,SAAS,CAACG,MAAV,IACEH,SAAS,CAACG,MAAV,CAAiBM,sBADpB,GAEKT,SAAS,CAACG,MAAV,CAAiBM,sBAFtB,GAGKT,SAAS,CAACK,UAAV,CAAqBI,sBAJ3B;AAMId,gBAAAA,QAAQ,CAAC,kBAAD,CAAR,IACDK,SAAS,CAACG,MAAV,IACCH,SAAS,CAACG,MAAV,CAAiBO,sBADnB,GAEIV,SAAS,CAACG,MAAV,CAAiBO,sBAFrB,GAGIV,SAAS,CAACK,UAAV,CAAqBK,sBAJvB;AAMP,eAtCD;AAwCA8B,cAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0B/C,SAAS,CAACK,WAAV,CAAsB9B,MAAhD,EAAuD0B,QAAQ,CAAC,QAAD,CAA/D,EAA0EA,QAAQ,CAAC,OAAD,CAAlF,EAA4FA,QAAQ,CAAC,OAAD,CAApG;AAED;;AAILA,YAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0BD,SAAS,CAACiB,qBAAV,GACtBjB,SAAS,CAACiB,qBADY,GAEtB,MAFJ,CA/E4C,CAkF5C;;AACAhB,YAAAA,QAAQ,CAAC,gBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCC,cAFlC,GAGIV,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCC,cAHpC,GAIIV,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCD,cAL1C;AAMAT,YAAAA,QAAQ,CAAC,uBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACEyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACAT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCS,qBAFlC,GAGIlB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCS,qBAHpC,GAIIlB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCO,qBAL1C;AAMAjB,YAAAA,QAAQ,CAAC,mBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACEyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACAT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCK,uBAFlC,GAGId,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCK,uBAHpC,GAIId,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCG,uBAL1C;AAMAb,YAAAA,QAAQ,CAAC,gBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCU,UAFlC,GAGInB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCU,UAHpC,GAIInB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCQ,UAL1C;AAMAlB,YAAAA,QAAQ,CAAC,aAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCW,WAFlC,GAGIpB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCW,WAHpC,GAIIpB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCS,WAL1C;AAOAxB,YAAAA,WAAW,CAACyB,IAAZ,CAAiBpB,QAAjB;AACD;AACF;;AACD,QAAA,MAAI,CAACzB,QAAL,CAAc;AACZO,UAAAA,MAAM,EAAE,KADI;AAEZX,UAAAA,UAAU,EAAEwB;AAFA,SAAd;AAID,OAlIH,EAmIG8B,KAnIH,CAmIS,UAAAC,GAAG,EAAI,CACb,CApIH;AAqID;;;wCACmB,CACnB;;;gCAOW;AACV,WAAKvC,UAAL;AACD;;;iCA6JY;AAAA;;AACX,UAAIwF,UAAU,GAAI,KAAKhH,KAAL,CAAW2D,kBAAZ,GAAkC,KAAK3D,KAAL,CAAW2D,kBAAX,CAA8BtE,KAAhE,GAAwE,IAAzF;AACA,UAAI4H,QAAQ,GAAI,KAAKjH,KAAL,CAAW0D,gBAAZ,GAAgC,KAAK1D,KAAL,CAAW0D,gBAAX,CAA4BrE,KAA5D,GAAoE,IAAnF;AACA,UAAI6H,GAAG,GAAI,KAAKlH,KAAL,CAAW4D,WAAZ,GAA2B,KAAK5D,KAAL,CAAW4D,WAAX,CAAuBvE,KAAlD,GAA0D,IAApE;AACA,UAAI8H,WAAW,GAAI,KAAKnH,KAAL,CAAW6D,mBAAZ,GAAmC,KAAK7D,KAAL,CAAW6D,mBAAX,CAA+BxE,KAAlE,GAA0E,IAA5F;AACA,UAAI+H,UAAU,GAAG,EAAjB;AACA,UAAIC,WAAW,GAAG,EAAlB;AACA,UAAIC,WAAW,GAAG,EAAlB;AACA,UAAIC,WAAW,GAAG,EAAlB;AACA,UAAIC,WAAW,GAAG,EAAlB;;AACA,UAAIR,UAAJ,EAAgB;AACdI,QAAAA,UAAU,CAAC3D,IAAX,CAAgB,gBAAgBuD,UAAhC;AACAK,QAAAA,WAAW,CAAC5D,IAAZ,CAAiBuD,UAAjB;AACD;;AACD,UAAIC,QAAJ,EAAc;AACZG,QAAAA,UAAU,CAAC3D,IAAX,CAAgB,cAAcwD,QAA9B;AACAK,QAAAA,WAAW,CAAC7D,IAAZ,CAAiBwD,QAAjB;AACD;;AACD,UAAIC,GAAJ,EAAS;AACPE,QAAAA,UAAU,CAAC3D,IAAX,CAAgB,SAASyD,GAAzB;AACAM,QAAAA,WAAW,CAAC/D,IAAZ,CAAiByD,GAAjB;AACD;;AACD,UAAIC,WAAJ,EAAiB;AACfC,QAAAA,UAAU,CAAC3D,IAAX,CAAgB,iBAAiB0D,WAAjC;AACAI,QAAAA,WAAW,CAAC9D,IAAZ,CAAiB0D,WAAjB;AACD;;AACD,UAAIC,UAAU,CAACzG,MAAX,GAAoB,CAAxB,EAA2B;AACzB;AACA,YAAIc,MAAM,GAAG,UAAb,CAFyB,CAGzB;;AACA,YAAI,KAAKtC,KAAL,CAAWe,IAAX,IAAmB,CAAvB,EACEuB,MAAM,GAAG,WAAT,CALuB,CAMzB;;AACA,YAAI,KAAKtC,KAAL,CAAWe,IAAX,IAAmB,CAAvB,EACEuB,MAAM,GAAG,SAAT;AACA,aAAKb,QAAL,CAAc;AACZO,UAAAA,MAAM,EAAE;AADI,SAAd;AAGFtD,QAAAA,MAAM,CACH6D,KADH,CACS;AACLA,UAAAA,KAAK,EAAE5D,MADF;AAEL6D,UAAAA,SAAS,EAAE;AACTC,YAAAA,OAAO,EAAE,YADA;AAETC,YAAAA,SAAS,EAAE,YAFF;AAGTJ,YAAAA,MAAM,EAAEA,MAHC;AAITkB,YAAAA,eAAe,EAAE0E,WAJR;AAKTzE,YAAAA,eAAe,EAAE0E,WALR;AAMTR,YAAAA,eAAe,EAAES,WANR;AAOTR,YAAAA,eAAe,EAAES;AAPR;AAFN,SADT,EAaG1F,IAbH,CAaQ,UAAAC,IAAI,EAAI;AACZ,cAAIC,WAAW,GAAG,EAAlB;;AACA,cAAID,IAAI,CAACA,IAAL,IAAaA,IAAI,CAACA,IAAL,CAAUjE,MAAvB,IAAiCiE,IAAI,CAACA,IAAL,CAAUjE,MAAV,CAAiBmE,IAAjB,CAAsBtB,MAAtB,GAA+B,CAApE,EAAuE;AACrE,gBAAIuB,YAAY,GAAGH,IAAI,CAACA,IAAL,CAAUjE,MAAV,CAAiBmE,IAApC;;AACA,iBAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,YAAY,CAACvB,MAAjC,EAAyCwB,CAAC,EAA1C,EAA8C;AAC5C,kBAAIC,SAAS,GAAGF,YAAY,CAACC,CAAD,CAA5B;AACA,kBAAIE,QAAQ,GAAGD,SAAf;AACAC,cAAAA,QAAQ,CAAC,IAAD,CAAR,GAAiBD,SAAS,CAACnC,EAAV,GAAemC,SAAS,CAACnC,EAAzB,GAA8B,CAA/C;AACFoC,cAAAA,QAAQ,CAAC,OAAD,CAAR,GACED,SAAS,CAACE,QAAV,IAAsBF,SAAS,CAACE,QAAV,CAAmBC,IAAzC,GACIH,SAAS,CAACE,QAAV,CAAmBC,IADvB,GAEI,gBAHN;AAIAF,cAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoBD,SAAS,CAACI,KAAV,GAChBJ,SAAS,CAACI,KADM,GAEhB,iBAFJ;AAGAH,cAAAA,QAAQ,CAAC,KAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACAyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SADzB,IAEAN,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCC,eAFnC,GAGIP,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCC,eAHvC,GAII,QALN;AAOAN,cAAAA,QAAQ,CAAC,MAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACAyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SADzB,IAEAN,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCE,eAFnC,GAGIR,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBC,SAAzB,CAAmCE,eAHvC,GAII,gBALN;AAOIP,cAAAA,QAAQ,CAAC,QAAD,CAAR,GAAqB,CAArB;AACAA,cAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,CAApB;AACAA,cAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,CAApB;AACAA,cAAAA,QAAQ,CAAC,YAAD,CAAR,GAA0B,CAA1B;AACAA,cAAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,CAAvB;AACAA,cAAAA,QAAQ,CAAC,kBAAD,CAAR,GAA+B,CAA/B;;AACA,kBAAGD,SAAS,CAACK,WAAV,CAAsB9B,MAAzB,EAAgC;AAE9ByB,gBAAAA,SAAS,CAACK,WAAV,CAAsBzD,OAAtB,CAA8B,UAAC0D,SAAD,EAAe;AAC3CL,kBAAAA,QAAQ,CAAC,QAAD,CAAR,IAAwBK,SAAS,CAACG,MAAV,IAChBH,SAAS,CAACG,MAAV,CAAiBC,cADH,GAEZJ,SAAS,CAACG,MAAV,CAAiBC,cAFL,GAGZJ,SAAS,CAACK,UAAV,CAAqBD,cAH/B;AAMAT,kBAAAA,QAAQ,CAAC,OAAD,CAAR,IAAuBK,SAAS,CAACG,MAAV,IACnBH,SAAS,CAACG,MAAV,CAAiBG,aADA,GAEfN,SAAS,CAACG,MAAV,CAAiBG,aAFF,GAGfN,SAAS,CAACK,UAAV,CAAqBC,aAH3B;AAKAX,kBAAAA,QAAQ,CAAC,OAAD,CAAR,IAAuBK,SAAS,CAACG,MAAV,IACnBH,SAAS,CAACG,MAAV,CAAiBI,aADA,GAEfP,SAAS,CAACG,MAAV,CAAiBI,aAFF,GAGfP,SAAS,CAACK,UAAV,CAAqBE,aAH3B;AAKIZ,kBAAAA,QAAQ,CAAC,YAAD,CAAR,IACEK,SAAS,CAACG,MAAV,IACAH,SAAS,CAACG,MAAV,CAAiBK,uBADlB,GAEGR,SAAS,CAACG,MAAV,CAAiBK,uBAFpB,GAGGR,SAAS,CAACK,UAAV,CAAqBG,uBAJzB;AAMFb,kBAAAA,QAAQ,CAAC,UAAD,CAAR,IACEK,SAAS,CAACG,MAAV,IACEH,SAAS,CAACG,MAAV,CAAiBM,sBADpB,GAEKT,SAAS,CAACG,MAAV,CAAiBM,sBAFtB,GAGKT,SAAS,CAACK,UAAV,CAAqBI,sBAJ3B;AAMId,kBAAAA,QAAQ,CAAC,kBAAD,CAAR,IACDK,SAAS,CAACG,MAAV,IACCH,SAAS,CAACG,MAAV,CAAiBO,sBADnB,GAEIV,SAAS,CAACG,MAAV,CAAiBO,sBAFrB,GAGIV,SAAS,CAACK,UAAV,CAAqBK,sBAJvB;AAMP,iBAnCD;AAoCD;;AAELf,cAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0BD,SAAS,CAACiB,qBAAV,GACtBjB,SAAS,CAACiB,qBADY,GAEtB,MAFJ,CAvE8C,CA0E9C;;AACAhB,cAAAA,QAAQ,CAAC,gBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCC,cAFlC,GAGIV,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCC,cAHpC,GAIIV,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCD,cAL1C;AAMAT,cAAAA,QAAQ,CAAC,uBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCS,qBAFlC,GAGIlB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCS,qBAHpC,GAIIlB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCO,qBAL1C;AAMAjB,cAAAA,QAAQ,CAAC,mBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACEyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACAT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCK,uBAFlC,GAGId,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCK,uBAHpC,GAIId,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCG,uBAL1C;AAMAb,cAAAA,QAAQ,CAAC,gBAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCU,UAFlC,GAGInB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCU,UAHpC,GAIInB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCQ,UAL1C;AAMAlB,cAAAA,QAAQ,CAAC,aAAD,CAAR,GACED,SAAS,CAACK,WAAV,CAAsB9B,MAAtB,GAA+B,CAA/B,IACCyB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,IACCT,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCW,WAFlC,GAGIpB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBI,MAAzB,CAAgCW,WAHpC,GAIIpB,SAAS,CAACK,WAAV,CAAsB,CAAtB,EAAyBM,UAAzB,CAAoCS,WAL1C;AAOExB,cAAAA,WAAW,CAACyB,IAAZ,CAAiBpB,QAAjB;AACD;AACF;;AACD,UAAA,MAAI,CAACzB,QAAL,CAAc;AACZO,YAAAA,MAAM,EAAE,KADI;AAEZX,YAAAA,UAAU,EAAEwB;AAFA,WAAd;AAID,SAlIH,EAmIG8B,KAnIH,CAmIS,UAAAC,GAAG,EAAI,CACb,CApIH,EAZyB,CAiJzB;AAED,OAnJD,MAoJK,CACH;AACD;AAEF,K,CACD;AACA;AACA;AACA;AACA;;;;uCAQmB0D,K,EAAO;AACxB,UAAI7C,QAAQ,GAAG6C,KAAK,CAACnD,GAAN,CAAUoD,gBAAV,EAAf;AACA,WAAK7C,MAAL,GAAcD,QAAd,CAFwB,CAGxB;AACA;AACA;AACA;AACD;;;qCAsDgB+C,G,EAAKtI,K,EAAO;AAC3B,UAAIsI,GAAG,KAAK,YAAZ,EAA0B;AACxB,aAAK/G,QAAL,CAAc;AACZ+C,UAAAA,kBAAkB,EAAEtE;AADR,SAAd;AAGD;;AACD,UAAIsI,GAAG,KAAK,UAAZ,EAAwB;AACtB,aAAK/G,QAAL,CAAc;AACZ8C,UAAAA,gBAAgB,EAAErE;AADN,SAAd;AAGD;;AAED,UAAIsI,GAAG,KAAK,aAAZ,EAA2B;AACzB,aAAK/G,QAAL,CAAc;AACZiD,UAAAA,mBAAmB,EAAExE;AADT,SAAd;AAGD;;AAED,UAAIsI,GAAG,KAAK,KAAZ,EAAmB;AACjB,aAAK/G,QAAL,CAAc;AACZgD,UAAAA,WAAW,EAAEvE;AADD,SAAd;AAGD;AACF;;;6BAoDQ;AAAA;;AACP,UAAIuI,iBAAiB,GAAGtI,iBAAxB;;AACA,UAAI,KAAKH,KAAL,CAAWe,IAAX,KAAoB,CAApB,IAAyB,KAAKf,KAAL,CAAWe,IAAX,KAAoB,CAAjD,EAAoD;AAClD0H,QAAAA,iBAAiB,GAAGhI,kBAApB;AACD;;AACD,UAAIiI,eAAe,GAAG;AACpB,kBAAU,CACR;AACEC,UAAAA,UAAU,EAAE,QADd;AAEEC,UAAAA,KAAK,EAAE,QAFT;AAGEC,UAAAA,iBAAiB,EAAE,IAHrB;AAIEC,UAAAA,uBAAuB,EAAE,IAJ3B;AAKExH,UAAAA,MAAM,EAAE,KALV;AAMEyH,UAAAA,KAAK,EAAE;AANT,SADQ,EASR;AACEJ,UAAAA,UAAU,EAAE,OADd;AACuBC,UAAAA,KAAK,EAAE;AAD9B,SATQ,EAWL;AACDD,UAAAA,UAAU,EAAE,WADX;AACwBC,UAAAA,KAAK,EAAE,OAD/B;AACwCG,UAAAA,KAAK,EAAC;AAD9C,SAXK,EAcR;AACEJ,UAAAA,UAAU,EAAE,YADd;AAC4BC,UAAAA,KAAK,EAAE;AADnC,SAdQ,EAiBR;AACED,UAAAA,UAAU,EAAE,gBADd;AACgCC,UAAAA,KAAK,EAAE;AADvC,SAjBQ,EAoBR;AACA;AACA;AACA;AACA;AACA;AACA;AACED,UAAAA,UAAU,EAAE,oBADd;AACoCC,UAAAA,KAAK,EAAE,QAD3C;AACqDI,UAAAA,cAAc,EAAE,KAAK5C;AAD1E,SA1BQ,EA6BR;AACEuC,UAAAA,UAAU,EAAE,mBADd;AACmCC,UAAAA,KAAK,EAAE,OAD1C;AACmDI,UAAAA,cAAc,EAAE,KAAK5C;AADxE,SA7BQ,EAgCR;AACEuC,UAAAA,UAAU,EAAE,gBADd;AACgCC,UAAAA,KAAK,EAAE,OADvC;AACgDI,UAAAA,cAAc,EAAE,KAAK5C;AADrE,SAhCQ,EAmCR;AACEuC,UAAAA,UAAU,EAAE,uBADd;AACuCC,UAAAA,KAAK,EAAE,YAD9C;AAC4DI,UAAAA,cAAc,EAAE,KAAK5C;AADjF,SAnCQ,EAsCR;AACEuC,UAAAA,UAAU,EAAE,WADd;AAC2BC,UAAAA,KAAK,EAAE,UADlC;AAC8CI,UAAAA,cAAc,EAAE,KAAK5C;AADnE,SAtCQ,EAyCR;AACEuC,UAAAA,UAAU,EAAE,sBADd;AAEEC,UAAAA,KAAK,EAAE,kBAFT;AAGII,UAAAA,cAAc,EAAE,KAAK5C;AAHzB,SAzCQ,EA8CR;AACEuC,UAAAA,UAAU,EAAE,aADd;AAC6BC,UAAAA,KAAK,EAAE,aADpC;AAEEK,UAAAA,qBAAqB,EAAElJ,gBAFzB;AAGEgJ,UAAAA,KAAK,EAAE;AAHT,SA9CQ,EAmDR;AACEJ,UAAAA,UAAU,EAAE,SADd;AACyBC,UAAAA,KAAK,EAAE,IADhC;AAEEK,UAAAA,qBAAqB,EAAER,iBAFzB;AAGES,UAAAA,MAAM,EAAE,OAHV;AAIEH,UAAAA,KAAK,EAAE;AAJT,SAnDQ,CADU;AA0DpB,gBAAQ;AA1DY,OAAtB;AA4DA,UAAII,cAAc,GAAG,EAArB;AAAA,UAAyBC,iBAAiB,GAAG,EAA7C;AAAA,UAAiDC,SAAS,GAAG,EAA7D;AAAA,UAAiEC,QAAQ,GAAG,EAA5E;;AACA,UAAI,KAAKtJ,KAAL,CAAWuJ,wBAAX,CAAoC3G,IAAxC,EAA8C;AAC5C,aAAK5C,KAAL,CAAWuJ,wBAAX,CAAoC3G,IAApC,CAAyC4G,EAAzC,CAA4CC,GAA5C,CAAgD,UAAAvC,UAAU,EAAI;AAE5DiC,UAAAA,cAAc,CAAC7E,IAAf,CAAoB;AAClBpE,YAAAA,KAAK,EAAEgH,UADW;AAElB7D,YAAAA,KAAK,EAAE6D;AAFW,WAApB;AAID,SAND;AAQA,aAAKlH,KAAL,CAAWuJ,wBAAX,CAAoC3G,IAApC,CAAyC8G,EAAzC,CAA4CD,GAA5C,CAAgD,UAAAvC,UAAU,EAAI;AAC5DkC,UAAAA,iBAAiB,CAAC9E,IAAlB,CAAuB;AACrBpE,YAAAA,KAAK,EAAEgH,UADc;AAErB7D,YAAAA,KAAK,EAAE6D;AAFc,WAAvB;AAID,SALD;AAOA,aAAKlH,KAAL,CAAWuJ,wBAAX,CAAoC3G,IAApC,CAAyC+G,EAAzC,CAA4CF,GAA5C,CAAgD,UAAAvC,UAAU,EAAI;AAC5DmC,UAAAA,SAAS,CAAC/E,IAAV,CAAe;AACbpE,YAAAA,KAAK,EAAEgH,UADM;AAEb7D,YAAAA,KAAK,EAAE6D;AAFM,WAAf;AAID,SALD;AAOA,aAAKlH,KAAL,CAAWuJ,wBAAX,CAAoC3G,IAApC,CAAyCgH,EAAzC,CAA4CH,GAA5C,CAAgD,UAAAvC,UAAU,EAAI;AAC5DoC,UAAAA,QAAQ,CAAChF,IAAT,CAAc;AACZpE,YAAAA,KAAK,EAAEgH,UADK;AAEZ7D,YAAAA,KAAK,EAAE6D;AAFK,WAAd;AAID,SALD;AAMD;;AACD,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,SAAS,EAAE,KAAKrG,KAAL,CAAWe,YAAnC;AACE,QAAA,SAAS,EAAE,KAAKD,SADlB;AAEE,QAAA,UAAU,EAAE,KAAKE,UAFnB;AAGE,QAAA,YAAY,EAAE,KAAKhB,KAAL,CAAWa,cAH3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAME,oBAAC,cAAD;AACI,QAAA,oBAAoB,MADxB;AAEI,QAAA,WAAW,EAAE,iBAFjB;AAGI,QAAA,QAAQ,EAAEzC,KAAK,CAAC4K,QAAN,CAAeC,SAH7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,EAWE,oBAAC,cAAD;AACE,QAAA,MAAM,EAAE,KAAKjJ,KAAL,CAAWmB,MADrB;AAEE,QAAA,OAAO,MAFT;AAGE,QAAA,IAAI,EAAC,YAHP;AAIE,QAAA,MAAM,EAAE;AACN+H,UAAAA,OAAO,EAAE,iBAAAC,IAAI;AAAA,qCACRA,IADQ;AAEXC,cAAAA,UAAU,EAAE,2BAFD;AAGXC,cAAAA,YAAY,EAAE;AAHH;AAAA,WADP;AAMNC,UAAAA,OAAO,EAAE,iBAAAH,IAAI;AAAA,qCACRA,IADQ;AAEXjB,cAAAA,KAAK,EAAE,MAFI;AAGX,8BAAgB;AACdqB,gBAAAA,MAAM,EAAE;AADM;AAHL;AAAA,WANP;AAaNC,UAAAA,OAAO,EAAE,iBAAAL,IAAI;AAAA,qCACRA,IADQ;AAEX1J,cAAAA,KAAK,EAAE;AAFI;AAAA;AAbP,SAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAuBG,CAAC,KAAKO,KAAL,CAAWyJ,iBAAZ,GACC;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAmC,QAAA,EAAE,EAAC,yBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,SAAS,EAAC,qCADZ;AAEE,QAAA,EAAE,EAAC,6BAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE;AAAI,QAAA,SAAS,EAAC,8BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEG,KAAKtK,KAAL,CAAWe,IAAX,IAAmB,CAAnB,GACC,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgB;AAAM,QAAA,SAAS,EAAC,qBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAhB,2BADD,GAIG,KAAKf,KAAL,CAAWe,IAAX,IAAmB,CAAnB,GACA,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgB;AAAM,QAAA,SAAS,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAhB,wBADA,GAIE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgB;AAAM,QAAA,SAAS,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAhB,4BAVR,CAJF,EAoBE;AAAI,QAAA,KAAK,EAAE;AAACwJ,UAAAA,SAAS,EAAC;AAAX,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QApBF,EAqBE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,EAAE,EAAC,qBADL;AAEE,QAAA,WAAW,EAAC,YAFd;AAGE,QAAA,OAAO,EAAEpB,cAHX;AAIE,QAAA,QAAQ,EAAE,kBAAApH,CAAC;AAAA,iBACT,MAAI,CAACoF,gBAAL,CAAsB,YAAtB,EAAoCpF,CAApC,CADS;AAAA,SAJb;AAOE,QAAA,KAAK,EAAE,KAAKlB,KAAL,CAAW2D,kBAPpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAYE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,EAAE,EAAC,oBADL;AAEE,QAAA,WAAW,EAAC,gBAFd;AAGE,QAAA,OAAO,EAAE4E,iBAHX;AAIE,QAAA,QAAQ,EAAE,kBAAArH,CAAC;AAAA,iBACT,MAAI,CAACoF,gBAAL,CAAsB,UAAtB,EAAkCpF,CAAlC,CADS;AAAA,SAJb;AAOE,QAAA,KAAK,EAAE,KAAKlB,KAAL,CAAW0D,gBAPpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAZF,EAuBE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,EAAE,EAAC,YADL;AAEE,QAAA,WAAW,EAAC,UAFd;AAGE,QAAA,OAAO,EAAE8E,SAHX;AAIE,QAAA,QAAQ,EAAE,kBAAAtH,CAAC;AAAA,iBACT,MAAI,CAACoF,gBAAL,CAAsB,aAAtB,EAAqCpF,CAArC,CADS;AAAA,SAJb;AAOE,QAAA,KAAK,EAAE,KAAKlB,KAAL,CAAW6D,mBAPpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAvBF,EAkCE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AACE,QAAA,EAAE,EAAC,YADL;AAEE,QAAA,WAAW,EAAC,eAFd;AAGE,QAAA,OAAO,EAAE4E,QAHX;AAIE,QAAA,QAAQ,EAAE,kBAAAvH,CAAC;AAAA,iBACT,MAAI,CAACoF,gBAAL,CAAsB,KAAtB,EAA6BpF,CAA7B,CADS;AAAA,SAJb;AAOE,QAAA,KAAK,EAAE,KAAKlB,KAAL,CAAW4D,WAPpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAlCF,CADF,CADF,EAiDE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,SAAS,EAAC,2BAAlB;AACE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACyC,UAAL,EAAN;AAAA,SADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,cAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,gBAFF,CADF,EAOE;AAAQ,QAAA,SAAS,EAAC,6BAAlB;AACE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACsD,SAAL,EAAN;AAAA,SADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,cAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAFF,CAPF,CAjDF,CArBF,EAqFE;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QArFF,EAsFE;AAAK,QAAA,SAAS,EAAC,EAAf;AAAkB,QAAA,KAAK,EAAE;AAAE7J,UAAAA,OAAO,EAAE;AAAX,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,SAAS,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,CADF,EAIE;AAAQ,QAAA,SAAS,EAAC,yCAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,gBAAT;AAA0B,uBAAY,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CAJF,EAYG,KAAKX,KAAL,CAAWe,IAAX,IAAmB,CAAnB,GACC,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAI,MAAI,CAACkF,YAAL,EAAJ;AAAA,SAAjB;AAA0C,QAAA,SAAS,EAAC,+BAApD;AAAoF,QAAA,KAAK,EAAE;AAAEwE,UAAAA,UAAU,EAAE;AAAd,SAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,EAME;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAI,MAAI,CAACjF,UAAL,EAAJ;AAAA,SAAjB;AAAwC,QAAA,SAAS,EAAC,+BAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,aAAT;AAAuB,uBAAY,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,UAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,CANF,CADD,GAiBG,KAAKxF,KAAL,CAAWe,IAAX,IAAmB,CAAnB,GACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,GAGA;AAAQ,QAAA,SAAS,EAAC,+BAAlB;AAAkD,QAAA,KAAK,EAAE;AAACL,UAAAA,OAAO,EAAC;AAAT,SAAzD;AAA2E,QAAA,QAAQ,MAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAC,aAAT;AAAuB,uBAAY,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,UAII;AAAM,QAAA,OAAO,EAAE,KAAK8E,UAAL,CAAgB4B,IAAhB,CAAqB,IAArB,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,CAhCN,CAtFF,EAmIE;AAAK,QAAA,SAAS,EAAC,cAAf;AAA8B,QAAA,KAAK,EAAE;AAACzG,UAAAA,OAAO,EAAC;AAAT,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,EAAE,EAAC,mBADL;AAEE,QAAA,KAAK,EAAE;AACL;AACA+J,UAAAA,MAAM,EAAE,OAFH;AAGL3B,UAAAA,KAAK,EAAE;AAHF,SAFT;AAOE,QAAA,SAAS,EAAC,iBAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SASE,oBAAC,WAAD,CACE;AACA;AACA;AAHF;AAIE,QAAA,UAAU,EAAEL,eAAe,CAACiC,MAJ9B;AAKE,QAAA,OAAO,EACL,KAAK9J,KAAL,CAAWQ,UAAX,GAAwB,KAAKR,KAAL,CAAWQ,UAAnC,GAAgD,EANpD,CAQE;AACA;AATF;AAUE,QAAA,WAAW,EAAE,KAAK2D,WAVpB;AAWE,QAAA,kBAAkB,EAAE,KAAKxE,kBAX3B,CAYE;AACA;AACA;AACA;AACA;AAhBF;AAiBE,QAAA,YAAY,EAAE,KAAKK,KAAL,CAAWgG,YAjB3B,CAkBE;AAlBF;AAmBE,QAAA,kBAAkB,EAAE,KAAK+D,kBAAL,CAAwBxD,IAAxB,CAA6B,IAA7B,CAnBtB;AAoBE,QAAA,IAAI,EAAE,KAAKpH,KAAL,CAAWe,IAAX,GAAkB,KAAKf,KAAL,CAAWe,IAA7B,GAAoC,CApB5C,CAqBA;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATF,CADF,CAnIF,CADF,CADF,EA0KE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA1KF,CADD,GA+KG,EAtMN,CAXF,CADF;AAwND;;;;EApiCiC9C,S;;AAsiCpC,IAAM4M,gBAAgB,GAAG;AACvB5D,EAAAA,aAAa,EAAE7I,MAAM,CAAC0M,eADC;AAEvBnF,EAAAA,oBAAoB,EAACvH,MAAM,CAACuH;AAFL,CAAzB;;AAKA,IAAMoF,eAAe,GAAG,SAAlBA,eAAkB,CAAAlK,KAAK;AAAA,SAAK;AAChC0I,IAAAA,wBAAwB,EAAE1I,KAAK,CAACqG;AADA,GAAL;AAAA,CAA7B;;AAIA,eAAehJ,OAAO,CAAC6M,eAAD,EAAkBF,gBAAlB,CAAP,CAA2CvM,UAAU,CAAC0C,oBAAD,CAArD,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n//import PromoCalendarActuals from \"./PromoCalendarContent\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as action from '../actions/promo'\nimport { AgGridReact } from \"ag-grid-react\";\nimport { withRouter, Link } from 'react-router-dom'\n\nimport _ from \"underscore\";\nimport \"../components/Content/Promotions/PromoCalendar/promotionstyling.css\";\nimport Select from \"react-select\";\nimport './PlannedPromoPipeline.css';\nimport client from '../apolloClient'\nimport { promos } from '../apolloClient/query'\nimport CustomModal from '../components/Modal/CustomModal'\nimport gql from 'graphql-tag'\nimport { deletePromo, changePromoStatus } from '../apolloClient/mutation'\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Axios from \"axios\";\n\nfunction getParamValue(paramName){\n  if(!((window.location.href).includes('?'))){\n    return \n  }\n  var url = (window.location.href).split('?')[1]\n  var val=null;\n  var paramsArray = url.split('&')\n  paramsArray.forEach((item)=>{\n    if(item.split('=')[0]===paramName){\n      val = item.split('=')[1]\n      return \n    }\n  })\n  return val\n}\n// create your cellRenderer as a React component\nclass NameCellRenderer extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    // put in render logic\n    var className = \"perfm-good\";\n    if(this.props.value == 'TOXIC' || this.props.value == 'INSIGNIFICANT'){\n      className = \"perfm-bad\";\n    }\n    if(this.props.value == 'AVERAGE'){\n      className = \"perfm-avg\";\n    }\n    return (\n      <div className={\"perfm \"+className}>{this.props.value}</div>\n    );\n  }\n}\nclass ModalCellRenderer extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    // put in render logic\n    return (\n      <span style={{ fontSize: \"1.3rem\", cursor: \"pointer\", color:\"#44677b\" }} onClick={() => this.props.agGridReact.props.handleTableOpClick(this.props.value)}>\n        <i class=\"fa fa-info-circle\" aria-hidden=\"true\" />\n      </span>\n    );\n  }\n}\nclass ModalCellRenderer2 extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    // put in render logic\n    return (\n      <div style={{ display: 'flex' }}>\n        <button className=\"iconBtnPipeline\"\n         onClick={() => this.props.agGridReact.props.handleTableOpClick(this.props.value)} \n         style={{ cursor:\"pointer\",color:'#44667a', padding:'3px'}} \n         >\n          <i class=\"fa fa-info-circle iconPipeline\" \n          aria-hidden=\"true\" style={{    fontSize: \"1.2rem\"}} title=\"Promotion info\"/>\n        </button>\n          <Link to={{pathname: '/vis/create-promo/', state:{ id: this.props.value, page: this.props.agGridReact.props.page }}}>\n            {/* <div style={{    fontSize: \"1.3rem\",cursor:\"pointer\",color:'#44667a'}} onClick={() => this.props.agGridReact.props.handleTableCreateClick(this.props.value)}> */}\n            <div style={{    fontSize: \"1.3rem\",cursor:\"pointer\",color:'#44667a'}} >\n              <i class=\"fa fa-plus-circle\" aria-hidden=\"true\" title=\"Edit promotion\"/>\n            </div>\n          </Link>\n        </div>\n      );\n  }\n}\n class PlannedPromoPipeline extends Component {\n  constructor(props) {\n    var sentSKU = getParamValue('sku')\n    var sentSub = getParamValue('subCategory')\n    if(sentSKU)\n      sentSKU=sentSKU.replace('%20',' ')\n    if(sentSub)\n      sentSub = sentSub.replace('%20',' ')\n    super(props);\n    this.selrow = [];\n    this.state = {\n      promosList: [],\n      modalVisible: false,\n      rowSelection: \"multiple\",\n      selectedOption: {\n        baselineMargin: 0,\n        incrementalMargin: 0,\n        affinityMargin: 0,\n        cannibalisationMargin: 0,\n        totalMargin: 0\n      },\n      selectedDepartment: null,\n      selectedCategory: null,\n      selectedSKU: sentSKU?{value:sentSKU,label:sentSKU}:null,\n      selectedSubCategory: sentSub? {value:sentSub,label:sentSub} : null,\n      loader:false\n    }\n\n    // if(getParamValue('subCategory')){\n    //   console.log('momo2',getParamValue('subCategory'))\n    //   let val = getParamValue('subCategory')\n    //   let obj = {\n    //     value:val,label:val\n    //   }\n    //   this.setState({\n    //     selectedSubCategory:obj\n    //   },()=>{\n    //     console.log(this.state.selectedSubCategory,' is pre selected')\n    //   })\n    // }\n    this.props.getFilterData();\n    if(sentSKU || sentSub){\n      this.filterData()\n    }\n    this.onDropdownchange = this.onDropdownchange.bind(this)\n    this.deleteMsg = \"Delete Successful!\";\n    this.debouncedError = _.debounce(\n      function() {\n        toast.info(this.deleteMsg, {\n          containerId: \"TOP_RIGHT_TOAST\",\n          className: \"toasterCss\"\n        });\n      },\n      3000,\n      { maxWait: 4000 }\n    );\n    this.finalizeMsg = \"Finalize Successful!\";\n    this.debouncedError2 = _.debounce(\n      function() {\n        toast.info(this.finalizeMsg, {\n          containerId: \"TOP_RIGHT_TOAST\",\n          className: \"toasterCss\"\n        });\n      },\n      3000,\n      { maxWait: 4000 }\n    );\n  }\n  handleTableOpClick = (val) => {\n    var selectedOptionArr = this.state.promosList.filter((item) => parseFloat(item.id) === parseFloat(val))\n    if (selectedOptionArr.length > 0) {\n      this.setState({ selectedOption: selectedOptionArr[0] })\n    }\n    this.openModal();\n  }\n  \n  openModal = () => {\n    this.setState({ modalVisible: true });\n  }\n\n  closeModal = () => {\n    this.setState({ modalVisible: false });\n  }\n\n  componentWillMount() {\n    console.log('this props is  **** ',this.props.page)\n    //page pipeline\n    var status = \"APPROVED\";\n    let startDate = '2018-08-01'\n    let endDate = '2019-12-30'\n    //page historical\n    if (this.props.page == 3){\n      startDate = '2018-08-01'\n      endDate = '2019-08-30'\n      status = \"COMPLETED\";}\n    //page finalize\n    if (this.props.page == 2){\n      status = \"PENDING\";\n      startDate = '2019-08-01'\n      endDate = '2019-12-30'}\n      // this.setState({\n      //   loader: true,\n      //   // promosList: promoObjArr\n      // })\n      if(getParamValue('sku') || getParamValue('subCategory')){\n        var variables={\n          endDate ,\n          startDate ,\n          status: status,\n          hierarchyLevel3: getParamValue('subCategory'),\n          hierarchyLevel4: getParamValue('sku')\n        }\n      }\n      else{\n        var variables={\n          endDate ,\n          startDate ,\n          status: status\n        }\n      }\n    client\n      .query({\n        query: promos,\n        variables: variables\n      })\n      .then(data => {\n        var promoObjArr = [];\n        if (data.data && data.data.promos && data.data.promos.rows.length > 0) {\n          var promoDataArr = data.data.promos.rows;\n          for (var i = 0; i < promoDataArr.length; i++) {\n            var promoData = promoDataArr[i];\n            var promoObj = promoData;\n            promoObj[\"id\"] = promoData.id ? promoData.id : 1;\n            promoObj[\"event\"] =\n              promoData.campaign && promoData.campaign.name\n                ? promoData.campaign.name\n                : \"Biggest Oneday\";\n            promoObj[\"promo\"] = promoData.label\n              ? promoData.label\n              : \"765 ONDS 50% of\";\n            promoObj[\"fob\"] =\n              promoData.hierarchies.length > 0 &&\n              promoData.hierarchies[0].hierarchy &&\n              promoData.hierarchies[0].hierarchy.hierarchyLevel1\n                ? promoData.hierarchies[0].hierarchy.hierarchyLevel1\n                : \"WOMENS\";\n                \n            promoObj[\"dept\"] =\n              promoData.hierarchies.length > 0 &&\n              promoData.hierarchies[0].hierarchy &&\n              promoData.hierarchies[0].hierarchy.hierarchyLevel2\n                ? promoData.hierarchies[0].hierarchy.hierarchyLevel2\n                : \"214-Average FL\";\n                \n                promoObj[\"margin\"] = 0\n                promoObj[\"sales\"] = 0\n                promoObj[\"units\"] = 0\n                promoObj[\"marginlift\"]  = 0\n                promoObj[\"unitlift\"] = 0\n                promoObj[\"incrementalSales\"] = 0\n                if(promoData.hierarchies.length){\n\n                  promoData.hierarchies.forEach((hierarchy) => {\n                    console.log('hiererchies',hierarchy);\n                    \n                    promoObj[\"margin\"] += ((hierarchy.actual &&\n                            hierarchy.actual.baselineMargin))\n                            ? hierarchy.actual.baselineMargin\n                            : hierarchy.simulation.baselineMargin;\n\n                    promoObj[\"sales\"] += ((hierarchy.actual &&\n                        hierarchy.actual.baselineSales))\n                        ? hierarchy.actual.baselineSales\n                        : hierarchy.simulation.baselineSales;\n\n                    promoObj[\"units\"] += ((hierarchy.actual &&\n                        hierarchy.actual.baselineUnits))\n                        ? hierarchy.actual.baselineUnits\n                        : hierarchy.simulation.baselineUnits;\n\n\n\n                        promoObj[\"marginlift\"] +=\n                         (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalMargin)\n                          ? hierarchy.actual.directIncrementalMargin\n                          : hierarchy.simulation.directIncrementalMargin;\n          \n                      promoObj[\"unitlift\"] +=\n                       (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalUnits)\n                          ? hierarchy.actual.directIncrementalUnits\n                          : hierarchy.simulation.directIncrementalUnits;\n          \n                          promoObj[\"incrementalSales\"] +=\n                        (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalSales)\n                          ? hierarchy.actual.directIncrementalSales\n                          : hierarchy.simulation.directIncrementalSales;\n\n                  })\n\n                  console.log('coming here',promoData.hierarchies.length,promoObj[\"margin\"],promoObj[\"sales\"],promoObj[\"units\"]);\n                  \n                }\n\n            \n\n            promoObj[\"performance\"] = promoData.simulationPerformance\n              ? promoData.simulationPerformance\n              : \"Good\";\n            //for waterfall\n            promoObj[\"baselineMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.baselineMargin)\n                ? promoData.hierarchies[0].actual.baselineMargin\n                : promoData.hierarchies[0].simulation.baselineMargin;\n            promoObj[\"cannibalisationMargin\"] =\n              promoData.hierarchies.length > 0 &&\n               (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.cannibalizationMargin)\n                ? promoData.hierarchies[0].actual.cannibalizationMargin\n                : promoData.hierarchies[0].simulation.cannibalizationMargin;\n            promoObj[\"incrementalMargin\"] =\n              promoData.hierarchies.length > 0 &&\n               (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.directIncrementalMargin)\n                ? promoData.hierarchies[0].actual.directIncrementalMargin\n                : promoData.hierarchies[0].simulation.directIncrementalMargin;\n            promoObj[\"affinityMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.haloMargin)\n                ? promoData.hierarchies[0].actual.haloMargin\n                : promoData.hierarchies[0].simulation.haloMargin;\n            promoObj[\"totalMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.totalMargin)\n                ? promoData.hierarchies[0].actual.totalMargin\n                : promoData.hierarchies[0].simulation.totalMargin;\n\n            promoObjArr.push(promoObj);\n          }\n        }\n        this.setState({\n          loader: false,\n          promosList: promoObjArr\n        })\n      })\n      .catch(err => {\n      })\n  }\n  componentDidMount() {\n  }\n\n  handleSelectChange = e => {\n    this.setState({ loader: true, selectedYear: e.currentTarget.value });\n    this.props.onSubmit(\"Month\");\n    this.onYearChange();\n  };\n  onRefresh() {\n    this.reloadData();\n  }\n  reloadData = () => {\n    //page pipeline\n    var status = \"APPROVED\";\n    //page historical\n    if (this.props.page == 3)\n      status = \"COMPLETED\";\n    //page finalize\n    if (this.props.page == 2)\n      status = \"PENDING\";\n      this.setState({\n        loader: true,\n      })\n    client\n      .query({\n        query: promos,\n        variables: {\n          endDate: '2019-12-30',\n          startDate: '2018-08-01',\n          status: status,\n        }\n      })\n      .then(data => {\n        var promoObjArr = [];\n        if (data.data && data.data.promos && data.data.promos.rows.length > 0) {\n          var promoDataArr = data.data.promos.rows;\n          for (var i = 0; i < promoDataArr.length; i++) {\n            var promoData = promoDataArr[i];\n            var promoObj = promoData;\n            promoObj[\"id\"] = promoData.id ? promoData.id : 1;\n            promoObj[\"event\"] =\n              promoData.campaign && promoData.campaign.name\n                ? promoData.campaign.name\n                : \"Biggest Oneday\";\n            promoObj[\"promo\"] = promoData.label\n              ? promoData.label\n              : \"765 ONDS 50% of\";\n            promoObj[\"fob\"] =\n              promoData.hierarchies.length > 0 &&\n              promoData.hierarchies[0].hierarchy &&\n              promoData.hierarchies[0].hierarchy.hierarchyLevel1\n                ? promoData.hierarchies[0].hierarchy.hierarchyLevel1\n                : \"WOMENS\";\n                \n            promoObj[\"dept\"] =\n              promoData.hierarchies.length > 0 &&\n              promoData.hierarchies[0].hierarchy &&\n              promoData.hierarchies[0].hierarchy.hierarchyLevel2\n                ? promoData.hierarchies[0].hierarchy.hierarchyLevel2\n                : \"214-Average FL\";\n                \n                promoObj[\"margin\"] = 0\n                promoObj[\"sales\"] = 0\n                promoObj[\"units\"] = 0\n                promoObj[\"marginlift\"]  = 0\n                promoObj[\"unitlift\"] = 0\n                promoObj[\"incrementalSales\"] = 0\n                if(promoData.hierarchies.length){\n\n                  promoData.hierarchies.forEach((hierarchy) => {\n                    promoObj[\"margin\"] += ((hierarchy.actual &&\n                            hierarchy.actual.baselineMargin))\n                            ? hierarchy.actual.baselineMargin\n                            : hierarchy.simulation.baselineMargin;\n\n\n                    promoObj[\"sales\"] += ((hierarchy.actual &&\n                        hierarchy.actual.baselineSales))\n                        ? hierarchy.actual.baselineSales\n                        : hierarchy.simulation.baselineSales;\n\n                    promoObj[\"units\"] += ((hierarchy.actual &&\n                        hierarchy.actual.baselineUnits))\n                        ? hierarchy.actual.baselineUnits\n                        : hierarchy.simulation.baselineUnits;\n\n                        promoObj[\"marginlift\"] +=\n                         (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalMargin)\n                          ? hierarchy.actual.directIncrementalMargin\n                          : hierarchy.simulation.directIncrementalMargin;\n          \n                      promoObj[\"unitlift\"] +=\n                       (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalUnits)\n                          ? hierarchy.actual.directIncrementalUnits\n                          : hierarchy.simulation.directIncrementalUnits;\n          \n                          promoObj[\"incrementalSales\"] +=\n                        (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalSales)\n                          ? hierarchy.actual.directIncrementalSales\n                          : hierarchy.simulation.directIncrementalSales;\n    \n                  })\n                }\n            promoObj[\"performance\"] = promoData.simulationPerformance\n              ? promoData.simulationPerformance\n              : \"Good\";\n            //for waterfall\n            promoObj[\"baselineMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.baselineMargin)\n                ? promoData.hierarchies[0].actual.baselineMargin\n                : promoData.hierarchies[0].simulation.baselineMargin;\n            promoObj[\"cannibalisationMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.cannibalizationMargin)\n                ? promoData.hierarchies[0].actual.cannibalizationMargin\n                : promoData.hierarchies[0].simulation.cannibalizationMargin;\n            promoObj[\"incrementalMargin\"] =\n              promoData.hierarchies.length > 0 &&\n               (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.directIncrementalMargin)\n                ? promoData.hierarchies[0].actual.directIncrementalMargin\n                : promoData.hierarchies[0].simulation.directIncrementalMargin;\n            promoObj[\"affinityMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.haloMargin)\n                ? promoData.hierarchies[0].actual.haloMargin\n                : promoData.hierarchies[0].simulation.haloMargin;\n            promoObj[\"totalMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.totalMargin)\n                ? promoData.hierarchies[0].actual.totalMargin\n                : promoData.hierarchies[0].simulation.totalMargin;\n\n            promoObjArr.push(promoObj);\n          }\n        }\n        this.setState({\n          loader: false,\n          promosList: promoObjArr,\n          selectedCategory: null,\n          selectedDepartment: null,\n          selectedSKU: null,\n          selectedSubCategory: null\n        })\n      })\n      .catch(err => {\n      })\n  }\n  getFilteredHierarchy = (hierarchies, level, stateLevel) => {\n    if(hierarchies.length && hierarchies[0].hierarchy && hierarchies[0].hierarchy[level]) {\n      if(hierarchies[0].hierarchy[level] === this.state[stateLevel].value) {\n        return hierarchies[0].hierarchy[level]\n      } else {\n        return this.state[stateLevel].value\n      }\n    } else {\n      return null\n    }\n  }\n  filterData() {\n    var department = (this.state.selectedDepartment) ? this.state.selectedDepartment.value : null;\n    var category = (this.state.selectedCategory) ? this.state.selectedCategory.value : null;\n    var sku = (this.state.selectedSKU) ? this.state.selectedSKU.value : null;\n    var subCategory = (this.state.selectedSubCategory) ? this.state.selectedSubCategory.value : null;\n    var queryArray = []\n    var queryArray1 = []\n    var queryArray2 = []\n    var queryArray3 = []\n    var queryArray4 = []\n    if (department) {\n      queryArray.push('department=' + department)\n      queryArray1.push(department)\n    }\n    if (category) {\n      queryArray.push('category=' + category)\n      queryArray2.push(category)\n    }\n    if (sku) {\n      queryArray.push('sku=' + sku)\n      queryArray4.push(sku)\n    }\n    if (subCategory) {\n      queryArray.push('subCategory=' + subCategory)\n      queryArray3.push(subCategory)\n    }\n    if (queryArray.length > 0) {\n      //page pipeline\n      var status = \"APPROVED\";\n      //page historical\n      if (this.props.page == 3)\n        status = \"COMPLETED\";\n      //page finalize\n      if (this.props.page == 2)\n        status = \"PENDING\";\n        this.setState({\n          loader: true,\n        })\n      client\n        .query({\n          query: promos,\n          variables: {\n            endDate: '2019-12-30',\n            startDate: '2018-08-01',\n            status: status,\n            hierarchyLevel1: queryArray1,\n            hierarchyLevel2: queryArray2,\n            hierarchyLevel3: queryArray3,\n            hierarchyLevel4: queryArray4\n          }\n        })\n        .then(data => {\n          var promoObjArr = [];\n          if (data.data && data.data.promos && data.data.promos.rows.length > 0) {\n            var promoDataArr = data.data.promos.rows;\n            for (var i = 0; i < promoDataArr.length; i++) {\n              var promoData = promoDataArr[i];\n              var promoObj = promoData;\n              promoObj[\"id\"] = promoData.id ? promoData.id : 1;\n            promoObj[\"event\"] =\n              promoData.campaign && promoData.campaign.name\n                ? promoData.campaign.name\n                : \"Biggest Oneday\";\n            promoObj[\"promo\"] = promoData.label\n              ? promoData.label\n              : \"765 ONDS 50% of\";\n            promoObj[\"fob\"] =\n              promoData.hierarchies.length > 0 &&\n              promoData.hierarchies[0].hierarchy &&\n              promoData.hierarchies[0].hierarchy.hierarchyLevel1\n                ? promoData.hierarchies[0].hierarchy.hierarchyLevel1\n                : \"WOMENS\";\n                \n            promoObj[\"dept\"] =\n              promoData.hierarchies.length > 0 &&\n              promoData.hierarchies[0].hierarchy &&\n              promoData.hierarchies[0].hierarchy.hierarchyLevel2\n                ? promoData.hierarchies[0].hierarchy.hierarchyLevel2\n                : \"214-Average FL\";\n                \n                promoObj[\"margin\"] = 0\n                promoObj[\"sales\"] = 0\n                promoObj[\"units\"] = 0\n                promoObj[\"marginlift\"]  = 0\n                promoObj[\"unitlift\"] = 0\n                promoObj[\"incrementalSales\"] = 0\n                if(promoData.hierarchies.length){\n\n                  promoData.hierarchies.forEach((hierarchy) => {\n                    promoObj[\"margin\"] += ((hierarchy.actual &&\n                            hierarchy.actual.baselineMargin))\n                            ? hierarchy.actual.baselineMargin\n                            : hierarchy.simulation.baselineMargin;\n\n\n                    promoObj[\"sales\"] += ((hierarchy.actual &&\n                        hierarchy.actual.baselineSales))\n                        ? hierarchy.actual.baselineSales\n                        : hierarchy.simulation.baselineSales;\n\n                    promoObj[\"units\"] += ((hierarchy.actual &&\n                        hierarchy.actual.baselineUnits))\n                        ? hierarchy.actual.baselineUnits\n                        : hierarchy.simulation.baselineUnits;\n\n                        promoObj[\"marginlift\"] +=\n                         (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalMargin)\n                          ? hierarchy.actual.directIncrementalMargin\n                          : hierarchy.simulation.directIncrementalMargin;\n          \n                      promoObj[\"unitlift\"] +=\n                       (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalUnits)\n                          ? hierarchy.actual.directIncrementalUnits\n                          : hierarchy.simulation.directIncrementalUnits;\n          \n                          promoObj[\"incrementalSales\"] +=\n                        (hierarchy.actual &&\n                          hierarchy.actual.directIncrementalSales)\n                          ? hierarchy.actual.directIncrementalSales\n                          : hierarchy.simulation.directIncrementalSales;\n    \n                  })\n                }\n\n            promoObj[\"performance\"] = promoData.simulationPerformance\n              ? promoData.simulationPerformance\n              : \"Good\";\n            //for waterfall\n            promoObj[\"baselineMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.baselineMargin)\n                ? promoData.hierarchies[0].actual.baselineMargin\n                : promoData.hierarchies[0].simulation.baselineMargin;\n            promoObj[\"cannibalisationMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.cannibalizationMargin)\n                ? promoData.hierarchies[0].actual.cannibalizationMargin\n                : promoData.hierarchies[0].simulation.cannibalizationMargin;\n            promoObj[\"incrementalMargin\"] =\n              promoData.hierarchies.length > 0 &&\n               (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.directIncrementalMargin)\n                ? promoData.hierarchies[0].actual.directIncrementalMargin\n                : promoData.hierarchies[0].simulation.directIncrementalMargin;\n            promoObj[\"affinityMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.haloMargin)\n                ? promoData.hierarchies[0].actual.haloMargin\n                : promoData.hierarchies[0].simulation.haloMargin;\n            promoObj[\"totalMargin\"] =\n              promoData.hierarchies.length > 0 &&\n              (promoData.hierarchies[0].actual &&\n                promoData.hierarchies[0].actual.totalMargin)\n                ? promoData.hierarchies[0].actual.totalMargin\n                : promoData.hierarchies[0].simulation.totalMargin;\n\n              promoObjArr.push(promoObj);\n            }\n          }\n          this.setState({\n            loader: false,\n            promosList: promoObjArr\n          })\n        })\n        .catch(err => {\n        })\n      // this.props.getPromoData('?'+queryArray.join('&'))\n\n    }\n    else {\n      // this.props.getPromoData() \n    }\n\n  }\n  // onGridReady = params => {\n  //   this.gridApi = params.api;\n  //   this.gridColumnApi = params.columnApi;\n  //   this.gridColumnApi.autoSizeAllColumns();\n  // };\n  onGridReady = params => {\n    this.gridApi = params.api;\n    this.gridColumnApi = params.columnApi;\n    if (this.props.autoSizeCol) {\n      params.api.sizeColumnsToFit();\n    }\n  };\n  onSelectionChanged(event) {\n    var rowCount = event.api.getSelectedNodes();\n    this.selrow = rowCount;\n    // for(var i=0;i<rowCount.length;i++){\n    //   console.log('selrow',rowCount[i]);\n    // }\n    // window.alert(\"selection changed, \" + rowCount + \" rows selected\");\n  }\n\n  deleteRows = () => {\n    var rowCount = this.selrow;\n    for (var i = 0; i < rowCount.length; i++) {\n      var id = rowCount[i]['data']['id'];\n      this.props.updateRecommendPromo({id:id})\n      client\n        .mutate({\n          mutation: deletePromo,\n          variables: {\n            id\n          }\n        })\n        .then(data => {\n          // this.reloadData()\n          var promoObjArr = this.state.promosList;\n          promoObjArr = promoObjArr.filter(item => item.id !== id)\n          this.debouncedError();\n          this.setState({\n            promosList: promoObjArr,\n          })\n          \n        })\n        .catch(err => {\n          console.log('err', err);\n        })\n    }\n  }\n  finalizeRows = () => {\n    var rowCount = this.selrow;\n    for (var i = 0; i < rowCount.length; i++) {\n      var id = rowCount[i]['data']['id'];\n      client\n        .mutate({\n          mutation: changePromoStatus,\n          variables: {\n            id, status: 'APPROVED', comment: 'APPROVED'\n          }\n        })\n        .then(data => {\n          // this.reloadData()\n          var promoObjArr = this.state.promosList;\n          promoObjArr = promoObjArr.filter(item => item.id !== id)\n          this.debouncedError2();\n          this.setState({\n            promosList: promoObjArr,\n          })\n        })\n        .catch(err => {\n          console.log('err', err);\n        })\n    }\n  }\n  onDropdownchange(tag, value) {\n    if (tag === 'department') {\n      this.setState({\n        selectedDepartment: value\n      })\n    }\n    if (tag === 'category') {\n      this.setState({\n        selectedCategory: value\n      })\n    }\n\n    if (tag === 'subCategory') {\n      this.setState({\n        selectedSubCategory: value\n      })\n    }\n\n    if (tag === 'sku') {\n      this.setState({\n        selectedSKU: value\n      })\n    }\n  }\n  emptyValueFormatter = (value) => {\n    if(this.props.page && this.props.page == 2 || this.props.page == 3){\n      if (value.value) {\n        var tempVal = value.value;\n        tempVal = tempVal.toString().replace('%', \"\")\n        tempVal = tempVal.toString().replace(',', \"\")\n        tempVal = tempVal.toString().replace('$', \"\")\n        \n        var toSting = Math.round(tempVal);\n        if (parseInt(tempVal) > 0) {\n          return toSting.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        } else {\n          var splitAvalue = Math.abs(toSting);\n          return (\"-\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \"\"\n            // \"(\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \")\"\n          );\n        }\n      }\n      else{\n        if (value.value == 0) {\n          return 0;\n        } else {\n          return \"-\";\n        }\n      }\n    }\n    if (value.value) {\n      console.log('values',value.value);\n      \n      var tempVal = value.value;\n      tempVal = tempVal.toString().replace('%', \"\")\n      tempVal = tempVal.toString().replace(',', \"\")\n      tempVal = tempVal.toString().replace('$', \"\")\n      var toSting = Math.round(tempVal);\n\n      if (parseInt(tempVal) > 0) {\n        return toSting.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        var splitAvalue = Math.abs(toSting);\n        return (\"-\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \"\"\n          // \"(\" + splitAvalue.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \")\"\n        );\n      }\n    } else {\n      if (value.value == 0) {\n        return 0;\n      } else {\n        return \"-\";\n      }\n    }\n  }\n  render() {\n    var modalCellRenderer = ModalCellRenderer;\n    if (this.props.page === 2 || this.props.page === 3) {\n      modalCellRenderer = ModalCellRenderer2;\n    }\n    var pipelineDataNew = {\n      'header': [\n        {\n          headerName: \"Select\",\n          field: \"Select\",\n          checkboxSelection: true,\n          headerCheckboxSelection: true,\n          filter: false,\n          width: 40,\n        },\n        {\n          headerName: \"Event\", field: \"event\"\n        }, {\n          headerName: \"Promotion\", field: \"promo\", width:300\n        }, \n        {\n          headerName: \"Department\", field: \"fob\"\n        }, \n        {\n          headerName: \"Sub Department\", field: \"dept\"\n        },\n        // {\n        //   headerName: \"FOB\", field: \"fob\"\n        // }, \n        // {\n        //   headerName: \"Department\", field: \"dept\"\n        // },\n        {\n          headerName: \"Baseline Margin($)\", field: \"margin\", valueFormatter: this.emptyValueFormatter\n        },\n        {\n          headerName: \"Baseline Sales($)\", field: \"sales\", valueFormatter: this.emptyValueFormatter\n        },\n        {\n          headerName: \"Baseline Units\", field: \"units\", valueFormatter: this.emptyValueFormatter\n        },\n        {\n          headerName: \"Incremental Margin($)\", field: \"marginlift\", valueFormatter: this.emptyValueFormatter\n        },\n        {\n          headerName: \"Unit lift\", field: \"unitlift\", valueFormatter: this.emptyValueFormatter\n        },\n        {\n          headerName: \"Incremental Sales($)\",\n          field: \"incrementalSales\"\n          , valueFormatter: this.emptyValueFormatter\n        },\n        {\n          headerName: \"Performance\", field: \"performance\",\n          cellRendererFramework: NameCellRenderer,\n          width: 150,\n        },\n        {\n          headerName: \"Details\", field: \"id\",\n          cellRendererFramework: modalCellRenderer,\n          pinned: 'right',\n          width: 80,\n        }],\n      'data': []\n    };\n    let custGroupArray = [], businessDescArray = [], shopArray = [], skuArray = [];\n    if (this.props.summaryCumulativeFilters.data) {\n      this.props.summaryCumulativeFilters.data.h1.map(filterData => {\n\n        custGroupArray.push({\n          value: filterData,\n          label: filterData\n        });\n      });\n\n      this.props.summaryCumulativeFilters.data.h2.map(filterData => {\n        businessDescArray.push({\n          value: filterData,\n          label: filterData\n        });\n      });\n\n      this.props.summaryCumulativeFilters.data.h3.map(filterData => {\n        shopArray.push({\n          value: filterData,\n          label: filterData\n        });\n      });\n\n      this.props.summaryCumulativeFilters.data.h4.map(filterData => {\n        skuArray.push({\n          value: filterData,\n          label: filterData\n        });\n      });\n    }\n    return (\n      <div>\n        <CustomModal showModal={this.state.modalVisible}\n          openModal={this.openModal}\n          closeModal={this.closeModal}\n          currentPromo={this.state.selectedOption}\n        />\n        <ToastContainer\n            enableMultiContainer\n            containerId={\"TOP_RIGHT_TOAST\"}\n            position={toast.POSITION.TOP_RIGHT}\n          />\n        <LoadingOverlay\n          active={this.state.loader}\n          spinner\n          text=\"Loading...\"\n          styles={{\n            overlay: base => ({\n              ...base,\n              background: \"rgba(255, 255, 255, 0.97)\",\n              borderRadius: \"40px\"\n            }),\n            spinner: base => ({\n              ...base,\n              width: \"50px\",\n              \"& svg circle\": {\n                stroke: \"#44677b\"\n              }\n            }),\n            content: base => ({\n              ...base,\n              color: \"#44677b\"\n            })\n          }}\n        >\n          {!this.state.showPromotionMain ? (\n            <div className=\"calendarContainer\" id=\"main-calendar-container\">\n              <div className=\"promo\">\n                <div\n                  className=\"card CalendarMain promoCalendarDiv1\"\n                  id=\"promocalendar-maincontainer\"\n                >\n                  <h4 className=\"promoHeading mb-1 color-blue\">\n\n                    {this.props.page == 2 ?\n                      <React.Fragment><span className=\"planned-promo-text \" >\n                        Promotion Planning /\n                    </span>&nbsp;Finalize Promotion</React.Fragment>\n                      : this.props.page == 3 ?\n                        <React.Fragment><span className=\"planned-promo-text\">\n                          Create Promotion /\n                    </span>&nbsp;From Historical</React.Fragment>\n                        : <React.Fragment><span className=\"planned-promo-text\">\n                          Promotion Planning /\n                    </span>&nbsp; Promotion Pipeline</React.Fragment>\n                    }\n\n                  </h4>\n                  <hr style={{marginTop:\"8px\"}}/>\n                  <div className=\"row promopipelineDiv\" >\n                    <div className=\"col-md-8 SelectRow\">\n                      <div className=\"row\">\n                        <div className=\"col-md-3\">\n                          <Select\n                            id=\"customerGroupSelect\"\n                            placeholder=\"Department\"\n                            options={custGroupArray}\n                            onChange={e =>\n                              this.onDropdownchange('department', e)\n                            }\n                            value={this.state.selectedDepartment}\n                          />\n                        </div>\n                        <div className=\"col-md-3\">\n                          <Select\n                            id=\"businessDescSelect\"\n                            placeholder=\"Sub Department\"\n                            options={businessDescArray}\n                            onChange={e =>\n                              this.onDropdownchange('category', e)\n                            }\n                            value={this.state.selectedCategory}\n                          />\n                        </div>\n                        <div className=\"col-md-3\">\n                          <Select\n                            id=\"shopSelect\"\n                            placeholder=\"Category\"\n                            options={shopArray}\n                            onChange={e =>\n                              this.onDropdownchange('subCategory', e)\n                            }\n                            value={this.state.selectedSubCategory}\n                          />\n                        </div>\n                        <div className=\"col-md-3\">\n                          <Select\n                            id=\"shopSelect\"\n                            placeholder=\"SKU/SKU Group\"\n                            options={skuArray}\n                            onChange={e =>\n                              this.onDropdownchange('sku', e)\n                            }\n                            value={this.state.selectedSKU}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"col-md-4 text-center\">\n                      <button className=\"btn btn-primary filterBtn\"\n                        onClick={() => this.filterData()}>\n                        <span>\n                          <i class=\"fa fa-filter\" />&nbsp; Filter\n                            </span>\n                      </button>\n                      <button className=\"btn btn-primary resetButton\"\n                        onClick={() => this.onRefresh()}  >\n                        <span>\n                          <i class=\"fa fa-repeat\"></i>&nbsp; Reset\n                            </span>\n                      </button>\n                    </div>\n                  </div>\n                  <hr className=\"dotted-line\"/>\n                  <div className='' style={{ padding: \"5px 7px\" }}>\n                    <div className=\"promolist-header\">\n                      <label className=\"pipelineLabel\">Promotion List</label>\n                    </div>\n                    <button className=\"btn btn-primary iconbutton download-btn\">\n                      <span>\n                        <i class=\"fa fa-download\" aria-hidden=\"true\" />\n                      </span>\n                    </button>\n\n\n\n                    {this.props.page == 2 ?\n                      <React.Fragment>\n                        <button onClick={()=>this.finalizeRows()} className=\"pull-right btn btn-secondary \" style={{ marginLeft: '10px' }}>\n                          <span>\n                            Finalize\n                          </span>\n                        </button>\n                        <button onClick={()=>this.deleteRows()} className=\"pull-right btn btn-secondary \" >\n                          <span>\n                            <i class=\"fa fa-trash\" aria-hidden=\"true\" />\n                          </span>&nbsp;\n                            <span >\n                            Delete\n                            </span>\n                        </button>\n                      </React.Fragment>\n\n                      : this.props.page == 3 ?\n                        <span></span>\n                        :\n                        <button className=\"pull-right btn btn-secondary \" style={{display:'none'}} disabled>\n                          <span>\n                            <i class=\"fa fa-trash\" aria-hidden=\"true\" />\n                          </span>&nbsp;\n                            <span onClick={this.deleteRows.bind(this)}>\n                            Delete\n                            </span>\n                        </button>\n\n                    }\n\n\n                  </div>\n                  <div className=\"pipelineGrid\" style={{padding:\"0px 15px\"}}>\n                    <div\n                      id=\"myGridForPipeline\"\n                      style={{\n                        // height: \"calc(100vh - 10px) !important\",\n                        height: '300px',\n                        width: \"100%\"\n                      }}\n                      className=\"ag-theme-balham\"\n                    >\n                      <AgGridReact\n                        // floatingFilter={true}\n                        // suppressFilterButton={true}\n                        // defaultColDef={this.state.defaultColDef}\n                        columnDefs={pipelineDataNew.header}\n                        rowData={\n                          this.state.promosList ? this.state.promosList : []\n                        }\n                        // overlayNoRowsTemplate={this.state.overlayNoRowsTemplate}\n                        // pagination={true}\n                        onGridReady={this.onGridReady}\n                        handleTableOpClick={this.handleTableOpClick}\n                        // rowClassRules={this.state.rowClassRules}\n                        // frameworkComponents={this.state.frameworkComponents}\n                        // context={this.state.context}\n                        // rowClass={pipelineRowClass}\n                        // onCellClicked={event => this.editAdgroup(event)}\n                        rowSelection={this.state.rowSelection}\n                        // suppressRowClickSelection={true}\n                        onSelectionChanged={this.onSelectionChanged.bind(this)}\n                        page={this.props.page ? this.props.page : 1}\n                      // onModelUpdated={this.modelUpdated}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div>\n              </div>\n            </div>\n          ) : (\n              {\n              }\n            )}\n        </LoadingOverlay>\n      </div>\n    );\n  }\n}\nconst mapActionToProps = {\n  getFilterData: action.getPromoFilters,\n  updateRecommendPromo:action.updateRecommendPromo\n}\n\nconst mapStateToProps = state => ({\n  summaryCumulativeFilters: state.filterData\n\n});\nexport default connect(mapStateToProps, mapActionToProps)(withRouter(PlannedPromoPipeline));"]},"metadata":{},"sourceType":"module"}