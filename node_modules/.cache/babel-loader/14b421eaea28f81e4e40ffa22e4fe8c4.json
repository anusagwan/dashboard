{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/Summary/Summary.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Filters from '../../services/filters';\nimport './summaryStyle.css';\nimport styled from 'styled-components';\nimport LoadingOverlay from '../../utils/Loader';\nimport NoData from '../noTableData';\nimport SummaryAction from '../../actions/summaryAction';\nimport { aggColDef, binToWeekColDef, weekToBinColDef, detailedColDef } from './aggColdef';\nimport _ from 'lodash';\nimport DataTable from '../../services/reactTable';\nimport ColumnSelection from '../columnSelection';\nimport moment from 'moment';\nimport card1Image from '../../images/card1Image.png';\nimport card2Image from '../../images/card2Image.png';\nimport card3Image from '../../images/card3Image.png';\nimport card4Image from '../../images/card4Image.png';\nimport Switch from '../../services/toggleSwitch';\nimport CardComponent from '../../services/cardComponent/cardComponent';\n\nvar Summary =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Summary, _Component);\n\n  function Summary() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Summary);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Summary)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      switchedPlans: false,\n      //default aggregated view\n      textStr: 'Please select filters to show Markdown plans',\n      // firstCardText: 'KPIs to be decided',\n      firstCardFirstValue: '12%',\n      firstCardSecondValue: '24%',\n      secondCardFirstValue: '16%',\n      secondCardSecondValue: '20%',\n      thirdCardFirstValue: '6%',\n      thirdCardSecondValue: '10%',\n      fourthCardFirstValue: '345',\n      fourthCardSecondValue: '3,457',\n      cardWeekText: 'LW',\n      cardMonthText: 'TW',\n      cardTotalText: 'Total',\n      selectedItems: [{\n        label: 'Margin %',\n        value: 'margin_perc',\n        //for subcomponents\n        overall: 'overall_margin_perc',\n        //for main table(agg-parent)\n        detailed: 'week_level_margin_perc' //for detailed table\n\n      }],\n      columnOptions: [{\n        label: 'Margin %',\n        value: 'margin_perc',\n        overall: 'overall_margin_perc',\n        detailed: 'week_level_margin_perc'\n      }, {\n        label: 'Margin $',\n        value: 'margin$',\n        overall: 'overall_margin$',\n        detailed: 'week_level_margin'\n      }, {\n        label: 'AUM $',\n        value: 'aum',\n        overall: 'overall_aum',\n        detailed: 'week_level_aum'\n      }, {\n        label: 'Revenue $',\n        value: 'revenue$',\n        overall: 'overall_revenue$',\n        detailed: 'week_level_revenue'\n      }, {\n        label: 'PVH Planned units',\n        value: 'pvh_units',\n        overall: 'overall_pvh_units',\n        detailed: 'week_level_pvh_units'\n      }, {\n        label: 'Markdown units',\n        value: 'markdown_units',\n        overall: 'overall_markdown_units',\n        detailed: 'week_level_markdown_units'\n      }, {\n        label: 'AUR $',\n        value: 'aur',\n        overall: 'overall_aur',\n        detailed: 'week_level_aur'\n      }],\n      selLabels: ['Margin', 'Sales'],\n      columns: [],\n      aggColDef: [],\n      weekToBinColDef: [],\n      binToWeekColDef: [],\n      selectedRows: [],\n      tableData: [],\n      showKPIS: false,\n      expandedRowDetails: [],\n      pageNum: 1\n    };\n\n    _this.findStatusColor = function (status, color) {\n      switch (status) {\n        case 'high':\n          return color.high;\n\n        case 'medium':\n          return color.medium;\n\n        case 'low':\n          return color.low;\n\n        default:\n          break;\n      }\n    };\n\n    _this.bgmCol = function (cellInfo) {\n      if (cellInfo.column.id === 'md_status') var status = cellInfo.row.original.md_status;\n      var bgCol = {\n        high: '#F8E8E8',\n        medium: '#FCF3D1',\n        low: '#E8F8F5'\n      };\n      return _this.findStatusColor(status, bgCol);\n    };\n\n    _this.txtCol = function (cellInfo) {\n      if (cellInfo.column.id === 'md_status') var status = cellInfo.row.original.md_status;\n      var txtCol = {\n        high: '#D38485',\n        medium: '#F0C53A',\n        low: '#66CFBA'\n      };\n      return _this.findStatusColor(status, txtCol);\n    };\n\n    _this.metricHandler = function (columns, selOptions, val) {\n      // val=detailed for detailed table, val=overall for agg-parent col and val=value for subcomponent cols\n      var headers = _.cloneDeep(columns);\n\n      _.remove(headers, function (item) {\n        return item.metric || item.hideColumn;\n      }); //removing metric:true and hideColumn: true cols\n\n\n      _.forEach(selOptions, function (item) {\n        var newTableCols = _.filter(headers, function (a) {\n          return a.accessor === item[val];\n        });\n\n        var found = _.find(columns, {\n          accessor: item[val]\n        });\n\n        if (newTableCols.length == 0) {\n          var spliceAt = headers.length - 0; //modify here if the new col needs to be added at a specific index\n\n          headers.splice(spliceAt, 0, found);\n        }\n      });\n\n      return headers;\n    };\n\n    _this.onHandleSelect = function (selOptions) {\n      var headers, weekToBinHeader, binToWeekHeader;\n\n      if (_this.state.switchedPlans) {\n        //detailed table case\n        headers = _this.metricHandler(detailedColDef, selOptions, 'detailed');\n\n        _this.setState({\n          columns: headers,\n          selectedItems: selOptions\n        });\n      } else {\n        //agg-table case: needs to update 3 coldefs,\n        //imported coldefs already has all of the required columns,\n        //we are just filtering out needed cols(filtering is done in metricHandler method)\n        headers = _this.metricHandler(aggColDef, selOptions, 'overall');\n        weekToBinHeader = _this.metricHandler(weekToBinColDef, selOptions, 'value');\n        binToWeekHeader = _this.metricHandler(binToWeekColDef, selOptions, 'value');\n\n        _this.setState({\n          aggColDef: headers,\n          weekToBinColDef: weekToBinHeader,\n          binToWeekColDef: binToWeekHeader,\n          selectedItems: selOptions\n        });\n      }\n    };\n\n    _this.isSwitchedPaln = function (val) {\n      if (val && !_.isEmpty(_this.state.reqObj) && _.isEmpty(_this.props.detailedSummary)) _this.props.getSummaryDetails(_this.state.reqObj);\n\n      _this.setState({\n        switchedPlans: val,\n        columns: _.filter(detailedColDef, function (item) {\n          return !item.hideColumn;\n        }),\n        aggColDef: _.filter(aggColDef, function (item) {\n          return !item.hideColumn;\n        }),\n        weekToBinColDef: _.filter(weekToBinColDef, function (item) {\n          return !item.hideColumn;\n        }),\n        binToWeekColDef: _.filter(binToWeekColDef, function (item) {\n          return !item.hideColumn;\n        }),\n        selectedItems: [{\n          label: 'Margin %',\n          value: 'margin_perc',\n          overall: 'overall_margin_perc',\n          detailed: 'week_level_margin_perc'\n        }]\n      });\n    };\n\n    _this.onFilter = function (_ref) {\n      var filters = _ref.filters;\n      var payload = {\n        filters: {\n          hierarchy1: filters.hierarchy1,\n          hierarchy2: filters.hierarchy2,\n          hierarchy3: filters.hierarchy3,\n          hierarchy4: filters.hierarchy4,\n          hierarchy5: filters.hierarchy5,\n          season: _this.props.selectedSeason,\n          clearance: _this.props.selectedClearance,\n          matrix: _this.props.selectedMatrix,\n          exclusion_list: _this.props.selectedExclusionList,\n          style_color: _this.props.selectedStyleColor,\n          country: _this.props.selectedCountry,\n          store_cluster: _this.props.selectedStoreCluster,\n          store: _this.props.selectedStore,\n          channel: _this.props.selectedChannel,\n          customStyleGroup: _this.props.selectedCustomStyleGroup,\n          customStoreGroup: _this.props.selectedCustomStoreGroup\n        },\n        startDate: moment(_this.props.startDate).format('YYYY-MM-DD'),\n        endDate: moment(_this.props.endDate).format('YYYY-MM-DD'),\n        week: _this.props.weeks,\n        page_num: 1,\n        page_count: 5\n      };\n      if (_this.props.selectedChannel[0] === 'Web') payload.filters['ecom_flag'] = [1];\n      if (_this.props.selectedChannel[0] === 'Outlet') payload.filters['retail_flag'] = [1];\n\n      _this.getSummary(payload);\n\n      _this.props.getKPIdata(payload);\n\n      _this.setState({\n        showKPIS: true,\n        reqObj: payload,\n        pageNum: 2\n      });\n    };\n\n    _this.roundOffDigits = function (val) {\n      return parseFloat(val).toFixed(2);\n    };\n\n    _this.roundOffNumber = function (val) {\n      if (!val) {\n        return _this.roundOffDigits(0);\n      }\n\n      if (!isNaN(val)) {\n        return _this.roundOffDigits(val);\n      }\n\n      if (isNaN(val) && /%/g.test(val)) {\n        var splittedValue = val.split('%');\n        return \"\".concat(_this.roundOffDigits(splittedValue), \"%\");\n      }\n\n      return val;\n    };\n\n    _this.getSummary =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(payload) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.props.getSummaryAggregated(payload).then(function (resp) {\n                  _this.setState({\n                    columns: _.filter(detailedColDef, function (item) {\n                      return !item.hideColumn;\n                    }),\n                    aggColDef: _.filter(aggColDef, function (item) {\n                      return !item.hideColumn;\n                    }),\n                    weekToBinColDef: _.filter(weekToBinColDef, function (item) {\n                      return !item.hideColumn;\n                    }),\n                    binToWeekColDef: _.filter(binToWeekColDef, function (item) {\n                      return !item.hideColumn;\n                    })\n                  });\n                });\n\n              case 2:\n                return _context.abrupt(\"return\", true);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.renderRowSubComponent = function (_ref3) {\n      var row = _ref3.row;\n      var expandedRowDetails = _this.state.expandedRowDetails; //contains all the expanded rows details\n\n      var foundLevel = _.filter(expandedRowDetails, {\n        //check if this row is expanded\n        markdown_id: row.original.markdown_id\n      });\n\n      var data = [];\n      if (!foundLevel[0]) return; //if not expanded then return\n\n      if (foundLevel[0] && foundLevel[0].level === 'week_to_bin') {\n        //if row is expanded on week_to_bin level, directly take the data from row\n        var newData = _.cloneDeep(row.original.week_level_data);\n\n        if (!newData) return;\n\n        _.map(newData, function (item) {\n          item.subRows = item.bin_level_data; //changing bin_level_data key into subRows, to acquire Expandable feature from reatc-table\n\n          delete item.bin_level_data;\n          return item;\n        });\n\n        data = newData;\n      }\n\n      if (foundLevel[0] && foundLevel[0].level === 'bin_to_week') {\n        //if row is expanded on bin_to_week level, then find row data using markdown_id from the reducer aggregatedSummary\n        var _newData = _.find(_this.props.aggregatedSummary.bin_to_week_agg_data, {\n          markdown_id: row.original.markdown_id\n        });\n\n        if (!_newData) return;\n        _newData = _.cloneDeep(_newData);\n\n        _.map(_newData.bin_level_data, function (item) {\n          item.subRows = item.week_level_data; //changing name to subRows to get Expandable feature from react-table\n\n          delete item.week_level_data;\n        });\n\n        data = _newData.bin_level_data;\n      }\n\n      var columns = foundLevel[0] && foundLevel[0].level === 'week_to_bin' && row.original.week_level_data ? _this.state.weekToBinColDef : foundLevel[0] && foundLevel[0].level === 'bin_to_week' ? _this.state.binToWeekColDef : []; //selecting colfdef according to the level user has choosen\n\n      return React.createElement(\"div\", {\n        className: \"child-table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(DataTable, {\n        columns: columns,\n        data: data,\n        isHeaderHidden: true,\n        isChildComp: true //true for only subComponents, added to make some styling changes\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }));\n    };\n\n    _this.expandedRowDetailsHandler = function (row, level) {\n      //called whenever user clicks on a \">\" icon in the cell\n      //this is to track expanded row details, and on which level its expanded(week to bin/bin to week)\n      var expandedRowDetails = _this.state.expandedRowDetails;\n\n      if (_.find(expandedRowDetails, {\n        markdown_id: row.markdown_id\n      })) {\n        _.remove(expandedRowDetails, {\n          markdown_id: row.markdown_id\n        });\n      } else {\n        expandedRowDetails.push({\n          markdown_id: row.markdown_id,\n          level: level\n        });\n      }\n\n      _this.setState({\n        expandedRowDetails: expandedRowDetails\n      });\n    };\n\n    _this.nextPageHandler =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var payload;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              payload = _.cloneDeep(_this.state.reqObj);\n              payload.page_num = _this.state.pageNum;\n\n              _this.setState({\n                pageNum: _this.state.pageNum + 1\n              });\n\n              _context2.next = 5;\n              return _this.getSummary(payload);\n\n            case 5:\n              return _context2.abrupt(\"return\", true);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _this;\n  }\n\n  _createClass(Summary, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.onResetSummaryTable();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var imageArray = [card1Image, card2Image, card3Image, card4Image, card1Image, card2Image, card3Image, card4Image, card1Image, card2Image];\n      var cardStyle = ['card-border1', 'card-border2', 'card-border3', 'card-border4', 'card-border1', 'card-border2', 'card-border3', 'card-border4', 'card-border1', 'card-border2'];\n      return React.createElement(LoadingOverlay, {\n        loader: this.props.getOverlayLoaderState,\n        spinner: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"createMd pl-2 pr-2 summary-comp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card CalendarMain promoCalendarDiv1 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"font-size-14  pad-10 markdown-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, \"MarkSmart /\", React.createElement(\"span\", {\n        className: \"font-bold color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, \"Summary\"))), React.createElement(\"hr\", {\n        className: \"mb-2\",\n        style: {\n          marginTop: '-4px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"filterCol mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(Filters, {\n        onReset: function onReset(e) {\n          _this2.setState({\n            textStr: 'Please select filters to show Markdown plans',\n            showKPIS: false\n          });\n\n          _this2.props.onResetFinalizeTable(e);\n        },\n        hierarchy: this.state.filters,\n        onFilter: this.onFilter,\n        dateRange: true,\n        filtersOptions: [{\n          type: 'country',\n          isMandatory: true,\n          isMultiple: false\n        }, {\n          type: 'channel',\n          isMandatory: true,\n          isMultiple: false\n        }, {\n          type: 'storeCluster',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'customStoreGroup',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'store',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'hierarchy1',\n          isMandatory: true,\n          isMultiple: false,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy2',\n          isMandatory: true,\n          isMultiple: false,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy3',\n          isMandatory: true,\n          isMultiple: false,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy4',\n          isMandatory: true,\n          isMultiple: false,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy5',\n          isMandatory: true,\n          isMultiple: false,\n          isHierarchy: true\n        }, {\n          type: 'season',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'matrix',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'exclusionList',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'clearance',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'customStyleGroup',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'styleColor',\n          isMandatory: false,\n          isMultiple: true\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }))), this.props.summaryKPIData && this.state.showKPIS ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453\n        },\n        __self: this\n      }, this.props.summaryKPIData.KPIS && this.props.summaryKPIData.KPIS.total && Array.isArray(Object.keys(this.props.summaryKPIData.KPIS.total)) && Object.keys(this.props.summaryKPIData.KPIS.total).map(function (key, index) {\n        return (// <div className=\"col-md-3 col-sm-3 col-xs-6 p-2\">\n          React.createElement(\"div\", {\n            className: \"cardContainerstyle\",\n            style: {\n              marginTop: '10px'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 460\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 461\n            },\n            __self: this\n          }, React.createElement(CardComponent, {\n            cardImage: imageArray[index] //item.type && item.type.charAt(0).toUpperCase() + item.type.slice(1);\n            //cardText={key && key.charAt(0).toUpperCase() + key.slice(1)}\n            ,\n            cardText: _this2.props.summaryKPIData.columnMapping && _this2.props.summaryKPIData.columnMapping[key],\n            cardValue: _this2.props.summaryKPIData.KPIS.lw && _this2.roundOffNumber(_this2.props.summaryKPIData.KPIS.lw[key]),\n            cardValueSecond: _this2.props.summaryKPIData.KPIS.tw && _this2.roundOffNumber(_this2.props.summaryKPIData.KPIS.tw[key]),\n            cardValueThird: _this2.props.summaryKPIData.KPIS.total && _this2.roundOffNumber(_this2.props.summaryKPIData.KPIS.total[key]),\n            cardWeekText: _this2.state.cardWeekText,\n            cardMonthText: _this2.state.cardMonthText,\n            cardTotalText: _this2.state.cardTotalText,\n            cardStyles: {\n              cardClass: cardStyle[index],\n              cardValue: 'card1-value',\n              //cardImg: summaryKPIData.cardStyleImg,\n              cardValueSecond: 'card-value-second',\n              cardSubHeading: 'card-subHeading'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 462\n            },\n            __self: this\n          })))\n        );\n      })) : null, !_.isEmpty(this.props.detailedSummary) || !_.isEmpty(this.props.aggregatedSummary) ? React.createElement(\"div\", {\n        className: \"card pt-3 px-3 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499\n        },\n        __self: this\n      }, React.createElement(ColSelBtn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500\n        },\n        __self: this\n      }, (this.state.switchedPlans && !_.isEmpty(this.state.columns) || !this.state.switchedPlans && !_.isEmpty(this.state.aggColDef)) && React.createElement(ColumnSelection, {\n        onHandleSelect: this.onHandleSelect,\n        columnOptions: this.state.columnOptions,\n        selectedItems: this.state.selectedItems,\n        selLabels: this.state.selLabels,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"switchCss\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        checked: this.state.switchedPlans,\n        onSwitchHandler: this.isSwitchedPaln,\n        leftLabel: \"Aggregated\",\n        rightLabel: \"Detailed\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          padding: '1rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        disabled: true //onClick={this.sendForApprove}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519\n        },\n        __self: this\n      }, \"Push for selected weeks\"), \"\\xA0\", React.createElement(\"button\", {\n        disabled: true,\n        className: \"btn btn-primary\" //onClick={this.sendForReject}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }, \"Continue with current discount\"))), this.state.switchedPlans ? React.createElement(DataTable, {\n        columns: this.state.columns,\n        isSort: true,\n        data: this.props.detailedSummary,\n        updateMyData: this.updateMyData,\n        isPagination: true,\n        rowsPerPage: 5,\n        getCellProps: function getCellProps(cellInfo) {\n          return {\n            style: {\n              backgroundColor: _this2.bgmCol(cellInfo),\n              color: _this2.txtCol(cellInfo),\n              margin: '4px 4px',\n              borderRadius: '2px'\n            }\n          };\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537\n        },\n        __self: this\n      }) : React.createElement(DataTable, {\n        columns: this.state.aggColDef,\n        isSort: true,\n        data: this.props.aggregatedSummary.week_to_bin_agg_data,\n        updateMyData: this.updateMyData,\n        isPagination: true,\n        rowsPerPage: 5,\n        renderRowSubComponent: this.renderRowSubComponent,\n        nextPageHandler: this.nextPageHandler,\n        getCellProps: function getCellProps(cellInfo) {\n          return {\n            style: {\n              backgroundColor: _this2.bgmCol(cellInfo),\n              color: _this2.txtCol(cellInfo),\n              margin: '4px 4px',\n              borderRadius: '2px'\n            },\n            onClick: function onClick() {\n              //added to track on which cell user has clicked\n              if (cellInfo.column.id === 'expander') //expander is Date Range cell\n                _this2.expandedRowDetailsHandler(cellInfo.row.original, 'week_to_bin');else if (cellInfo.column.id === 'expander1') //expander1 is Bins cell\n                _this2.expandedRowDetailsHandler(cellInfo.row.original, 'bin_to_week');\n            }\n          };\n        },\n        RowCheck: function RowCheck(_ref5) {\n          var row = _ref5.row,\n              column = _ref5.column;\n          if (!(column.id === 'expander' || column.id === 'expander1')) return; //disables sibling cell within a row, when a particular row is expanded\n\n          var foundLevel = _.filter(_this2.state.expandedRowDetails, {\n            markdown_id: row.original.markdown_id\n          });\n\n          if (!foundLevel[0]) return;\n          return foundLevel[0].level === 'week_to_bin' && column.id === 'expander1' || foundLevel[0].level === 'bin_to_week' && column.id === 'expander' ? 'tdtd disable-summary-cell' : null;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554\n        },\n        __self: this\n      })) : React.createElement(NoData, {\n        description: this.state.textStr,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Summary;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    finalizeMarkdownData: store.draftStatusReducer.markdowns,\n    getOverlayLoaderState: store.loaderReducer.overlayLoaderState,\n    getOverlayLoaderText: store.loaderReducer.loaderText,\n    getColumnHeaders: store.draftStatusReducer.columnHeaders,\n    getMetricOptions: store.finalizeReducer.metricOptions,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n    selectedSeason: store.filtersReducer.selectedSeason,\n    selectedClearance: store.filtersReducer.selectedClearance,\n    selectedMatrix: store.filtersReducer.selectedMatrix,\n    selectedExclusionList: store.filtersReducer.selectedExclusionList,\n    selectedStyleColor: store.filtersReducer.selectedStyleColor,\n    selectedCountry: store.filtersReducer.selectedCountry,\n    selectedStoreCluster: store.filtersReducer.selectedStoreCluster,\n    selectedStore: store.filtersReducer.selectedStore,\n    selectedChannel: store.filtersReducer.selectedChannel,\n    summaryKPIData: store.summaryMDReducer.summaryKPIData,\n    detailedSummary: store.summaryMDReducer.detailedSummary,\n    aggregatedSummary: store.summaryMDReducer.aggregatedSummary\n  };\n};\n\nvar mapActionToProps = {\n  getSummaryDetails: SummaryAction.getSummaryDetails,\n  getSummaryAggregated: SummaryAction.getSummaryAggregated,\n  onResetSummaryTable: SummaryAction.onResetSummaryTable,\n  getKPIdata: SummaryAction.getKPIdata\n};\nexport default connect(mapStateToProps, mapActionToProps)(withRouter(Summary));\nvar ColSelBtn = styled.div(_templateObject());","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/Summary/Summary.js"],"names":["React","Component","connect","withRouter","Filters","styled","LoadingOverlay","NoData","SummaryAction","aggColDef","binToWeekColDef","weekToBinColDef","detailedColDef","_","DataTable","ColumnSelection","moment","card1Image","card2Image","card3Image","card4Image","Switch","CardComponent","Summary","state","switchedPlans","textStr","firstCardFirstValue","firstCardSecondValue","secondCardFirstValue","secondCardSecondValue","thirdCardFirstValue","thirdCardSecondValue","fourthCardFirstValue","fourthCardSecondValue","cardWeekText","cardMonthText","cardTotalText","selectedItems","label","value","overall","detailed","columnOptions","selLabels","columns","selectedRows","tableData","showKPIS","expandedRowDetails","pageNum","findStatusColor","status","color","high","medium","low","bgmCol","cellInfo","column","id","row","original","md_status","bgCol","txtCol","metricHandler","selOptions","val","headers","cloneDeep","remove","item","metric","hideColumn","forEach","newTableCols","filter","a","accessor","found","find","length","spliceAt","splice","onHandleSelect","weekToBinHeader","binToWeekHeader","setState","isSwitchedPaln","isEmpty","reqObj","props","detailedSummary","getSummaryDetails","onFilter","filters","payload","hierarchy1","hierarchy2","hierarchy3","hierarchy4","hierarchy5","season","selectedSeason","clearance","selectedClearance","matrix","selectedMatrix","exclusion_list","selectedExclusionList","style_color","selectedStyleColor","country","selectedCountry","store_cluster","selectedStoreCluster","store","selectedStore","channel","selectedChannel","customStyleGroup","selectedCustomStyleGroup","customStoreGroup","selectedCustomStoreGroup","startDate","format","endDate","week","weeks","page_num","page_count","getSummary","getKPIdata","roundOffDigits","parseFloat","toFixed","roundOffNumber","isNaN","test","splittedValue","split","getSummaryAggregated","then","resp","renderRowSubComponent","foundLevel","markdown_id","data","level","newData","week_level_data","map","subRows","bin_level_data","aggregatedSummary","bin_to_week_agg_data","expandedRowDetailsHandler","push","nextPageHandler","onResetSummaryTable","imageArray","cardStyle","getOverlayLoaderState","marginTop","e","onResetFinalizeTable","type","isMandatory","isMultiple","isHierarchy","summaryKPIData","KPIS","total","Array","isArray","Object","keys","key","index","columnMapping","lw","tw","cardClass","cardValue","cardValueSecond","cardSubHeading","padding","updateMyData","style","backgroundColor","margin","borderRadius","week_to_bin_agg_data","onClick","mapStateToProps","finalizeMarkdownData","draftStatusReducer","markdowns","loaderReducer","overlayLoaderState","getOverlayLoaderText","loaderText","getColumnHeaders","columnHeaders","getMetricOptions","finalizeReducer","metricOptions","selectedHierarchy1","filtersReducer","selectedHierarchy2","selectedHierarchy3","selectedHierarchy4","selectedHierarchy5","summaryMDReducer","mapActionToProps","ColSelBtn","div"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport Filters from '../../services/filters';\nimport './summaryStyle.css';\nimport styled from 'styled-components';\nimport LoadingOverlay from '../../utils/Loader';\nimport NoData from '../noTableData';\nimport SummaryAction from '../../actions/summaryAction';\nimport { aggColDef, binToWeekColDef, weekToBinColDef, detailedColDef } from './aggColdef';\nimport _ from 'lodash';\nimport DataTable from '../../services/reactTable';\nimport ColumnSelection from '../columnSelection';\nimport moment from 'moment';\nimport card1Image from '../../images/card1Image.png';\nimport card2Image from '../../images/card2Image.png';\nimport card3Image from '../../images/card3Image.png';\nimport card4Image from '../../images/card4Image.png';\nimport Switch from '../../services/toggleSwitch';\nimport CardComponent from '../../services/cardComponent/cardComponent';\n\nclass Summary extends Component {\n  state = {\n    switchedPlans: false, //default aggregated view\n    textStr: 'Please select filters to show Markdown plans',\n    // firstCardText: 'KPIs to be decided',\n    firstCardFirstValue: '12%',\n    firstCardSecondValue: '24%',\n    secondCardFirstValue: '16%',\n    secondCardSecondValue: '20%',\n    thirdCardFirstValue: '6%',\n    thirdCardSecondValue: '10%',\n    fourthCardFirstValue: '345',\n    fourthCardSecondValue: '3,457',\n    cardWeekText: 'LW',\n    cardMonthText: 'TW',\n    cardTotalText: 'Total',\n    selectedItems: [\n      {\n        label: 'Margin %',\n        value: 'margin_perc', //for subcomponents\n        overall: 'overall_margin_perc', //for main table(agg-parent)\n        detailed: 'week_level_margin_perc', //for detailed table\n      },\n    ],\n    columnOptions: [\n      {\n        label: 'Margin %',\n        value: 'margin_perc',\n        overall: 'overall_margin_perc',\n        detailed: 'week_level_margin_perc',\n      },\n      {\n        label: 'Margin $',\n        value: 'margin$',\n        overall: 'overall_margin$',\n        detailed: 'week_level_margin',\n      },\n      {\n        label: 'AUM $',\n        value: 'aum',\n        overall: 'overall_aum',\n        detailed: 'week_level_aum',\n      },\n      {\n        label: 'Revenue $',\n        value: 'revenue$',\n        overall: 'overall_revenue$',\n        detailed: 'week_level_revenue',\n      },\n      {\n        label: 'PVH Planned units',\n        value: 'pvh_units',\n        overall: 'overall_pvh_units',\n        detailed: 'week_level_pvh_units',\n      },\n      {\n        label: 'Markdown units',\n        value: 'markdown_units',\n        overall: 'overall_markdown_units',\n        detailed: 'week_level_markdown_units',\n      },\n      {\n        label: 'AUR $',\n        value: 'aur',\n        overall: 'overall_aur',\n        detailed: 'week_level_aur',\n      },\n    ],\n    selLabels: ['Margin', 'Sales'],\n    columns: [],\n    aggColDef: [],\n    weekToBinColDef: [],\n    binToWeekColDef: [],\n    selectedRows: [],\n    tableData: [],\n    showKPIS: false,\n    expandedRowDetails: [],\n    pageNum: 1,\n  };\n\n  componentWillUnmount() {\n    this.props.onResetSummaryTable();\n  }\n  findStatusColor = (status, color) => {\n    switch (status) {\n      case 'high':\n        return color.high;\n      case 'medium':\n        return color.medium;\n      case 'low':\n        return color.low;\n      default:\n        break;\n    }\n  };\n\n  bgmCol = (cellInfo) => {\n    if (cellInfo.column.id === 'md_status') var status = cellInfo.row.original.md_status;\n    let bgCol = {\n      high: '#F8E8E8',\n      medium: '#FCF3D1',\n      low: '#E8F8F5',\n    };\n    return this.findStatusColor(status, bgCol);\n  };\n  txtCol = (cellInfo) => {\n    if (cellInfo.column.id === 'md_status') var status = cellInfo.row.original.md_status;\n    let txtCol = {\n      high: '#D38485',\n      medium: '#F0C53A',\n      low: '#66CFBA',\n    };\n    return this.findStatusColor(status, txtCol);\n  };\n  metricHandler = (columns, selOptions, val) => {\n    // val=detailed for detailed table, val=overall for agg-parent col and val=value for subcomponent cols\n    let headers = _.cloneDeep(columns);\n    _.remove(headers, (item) => item.metric || item.hideColumn); //removing metric:true and hideColumn: true cols\n    _.forEach(selOptions, (item) => {\n      let newTableCols = _.filter(headers, (a) => {\n        return a.accessor === item[val];\n      });\n      let found = _.find(columns, { accessor: item[val] });\n      if (newTableCols.length == 0) {\n        let spliceAt = headers.length - 0; //modify here if the new col needs to be added at a specific index\n        headers.splice(spliceAt, 0, found);\n      }\n    });\n\n    return headers;\n  };\n  onHandleSelect = (selOptions) => {\n    let headers, weekToBinHeader, binToWeekHeader;\n    if (this.state.switchedPlans) {\n      //detailed table case\n      headers = this.metricHandler(detailedColDef, selOptions, 'detailed');\n      this.setState({\n        columns: headers,\n        selectedItems: selOptions,\n      });\n    } else {\n      //agg-table case: needs to update 3 coldefs,\n      //imported coldefs already has all of the required columns,\n      //we are just filtering out needed cols(filtering is done in metricHandler method)\n      headers = this.metricHandler(aggColDef, selOptions, 'overall');\n      weekToBinHeader = this.metricHandler(weekToBinColDef, selOptions, 'value');\n      binToWeekHeader = this.metricHandler(binToWeekColDef, selOptions, 'value');\n\n      this.setState({\n        aggColDef: headers,\n        weekToBinColDef: weekToBinHeader,\n        binToWeekColDef: binToWeekHeader,\n        selectedItems: selOptions,\n      });\n    }\n  };\n\n  isSwitchedPaln = (val) => {\n    if (val && !_.isEmpty(this.state.reqObj) && _.isEmpty(this.props.detailedSummary))\n      this.props.getSummaryDetails(this.state.reqObj);\n    this.setState({\n      switchedPlans: val,\n      columns: _.filter(detailedColDef, (item) => !item.hideColumn),\n      aggColDef: _.filter(aggColDef, (item) => !item.hideColumn),\n      weekToBinColDef: _.filter(weekToBinColDef, (item) => !item.hideColumn),\n      binToWeekColDef: _.filter(binToWeekColDef, (item) => !item.hideColumn),\n      selectedItems: [\n        {\n          label: 'Margin %',\n          value: 'margin_perc',\n          overall: 'overall_margin_perc',\n          detailed: 'week_level_margin_perc',\n        },\n      ],\n    });\n  };\n  onFilter = ({ filters }) => {\n    let payload = {\n      filters: {\n        hierarchy1: filters.hierarchy1,\n        hierarchy2: filters.hierarchy2,\n        hierarchy3: filters.hierarchy3,\n        hierarchy4: filters.hierarchy4,\n        hierarchy5: filters.hierarchy5,\n        season: this.props.selectedSeason,\n        clearance: this.props.selectedClearance,\n        matrix: this.props.selectedMatrix,\n        exclusion_list: this.props.selectedExclusionList,\n        style_color: this.props.selectedStyleColor,\n        country: this.props.selectedCountry,\n        store_cluster: this.props.selectedStoreCluster,\n        store: this.props.selectedStore,\n        channel: this.props.selectedChannel,\n        customStyleGroup: this.props.selectedCustomStyleGroup,\n        customStoreGroup: this.props.selectedCustomStoreGroup,\n      },\n      startDate: moment(this.props.startDate).format('YYYY-MM-DD'),\n      endDate: moment(this.props.endDate).format('YYYY-MM-DD'),\n      week: this.props.weeks,\n      page_num: 1,\n      page_count: 5,\n    };\n    if (this.props.selectedChannel[0] === 'Web') payload.filters['ecom_flag'] = [1];\n    if (this.props.selectedChannel[0] === 'Outlet') payload.filters['retail_flag'] = [1];\n\n    this.getSummary(payload);\n    this.props.getKPIdata(payload);\n    this.setState({ showKPIS: true, reqObj: payload, pageNum: 2 });\n  };\n  roundOffDigits = (val) => {\n    return parseFloat(val).toFixed(2);\n  };\n  roundOffNumber = (val) => {\n    if (!val) {\n      return this.roundOffDigits(0);\n    }\n    if (!isNaN(val)) {\n      return this.roundOffDigits(val);\n    }\n    if (isNaN(val) && /%/g.test(val)) {\n      const splittedValue = val.split('%');\n      return `${this.roundOffDigits(splittedValue)}%`;\n    }\n    return val;\n  };\n\n  getSummary = async (payload) => {\n    await this.props.getSummaryAggregated(payload).then((resp) => {\n      this.setState({\n        columns: _.filter(detailedColDef, (item) => !item.hideColumn),\n        aggColDef: _.filter(aggColDef, (item) => !item.hideColumn),\n        weekToBinColDef: _.filter(weekToBinColDef, (item) => !item.hideColumn),\n        binToWeekColDef: _.filter(binToWeekColDef, (item) => !item.hideColumn),\n      });\n    });\n    return true;\n  };\n  renderRowSubComponent = ({ row }) => {\n    let { expandedRowDetails } = this.state; //contains all the expanded rows details\n    let foundLevel = _.filter(expandedRowDetails, {\n      //check if this row is expanded\n      markdown_id: row.original.markdown_id,\n    });\n    let data = [];\n    if (!foundLevel[0]) return; //if not expanded then return\n\n    if (foundLevel[0] && foundLevel[0].level === 'week_to_bin') {\n      //if row is expanded on week_to_bin level, directly take the data from row\n      let newData = _.cloneDeep(row.original.week_level_data);\n      if (!newData) return;\n      _.map(newData, (item) => {\n        item.subRows = item.bin_level_data; //changing bin_level_data key into subRows, to acquire Expandable feature from reatc-table\n        delete item.bin_level_data;\n        return item;\n      });\n      data = newData;\n    }\n    if (foundLevel[0] && foundLevel[0].level === 'bin_to_week') {\n      //if row is expanded on bin_to_week level, then find row data using markdown_id from the reducer aggregatedSummary\n      let newData = _.find(this.props.aggregatedSummary.bin_to_week_agg_data, {\n        markdown_id: row.original.markdown_id,\n      });\n      if (!newData) return;\n      newData = _.cloneDeep(newData);\n      _.map(newData.bin_level_data, (item) => {\n        item.subRows = item.week_level_data; //changing name to subRows to get Expandable feature from react-table\n        delete item.week_level_data;\n      });\n\n      data = newData.bin_level_data;\n    }\n    let columns =\n      foundLevel[0] && foundLevel[0].level === 'week_to_bin' && row.original.week_level_data\n        ? this.state.weekToBinColDef\n        : foundLevel[0] && foundLevel[0].level === 'bin_to_week'\n        ? this.state.binToWeekColDef\n        : []; //selecting colfdef according to the level user has choosen\n    return (\n      <div className=\"child-table\">\n        <DataTable\n          columns={columns}\n          data={data}\n          isHeaderHidden={true}\n          isChildComp={true} //true for only subComponents, added to make some styling changes\n        />\n      </div>\n    );\n  };\n  expandedRowDetailsHandler = (row, level) => {\n    //called whenever user clicks on a \">\" icon in the cell\n    //this is to track expanded row details, and on which level its expanded(week to bin/bin to week)\n    let { expandedRowDetails } = this.state;\n    if (_.find(expandedRowDetails, { markdown_id: row.markdown_id })) {\n      _.remove(expandedRowDetails, { markdown_id: row.markdown_id });\n    } else {\n      expandedRowDetails.push({\n        markdown_id: row.markdown_id,\n        level,\n      });\n    }\n    this.setState({ expandedRowDetails });\n  };\n  nextPageHandler = async () => {\n    let payload = _.cloneDeep(this.state.reqObj);\n    payload.page_num = this.state.pageNum;\n    this.setState({ pageNum: this.state.pageNum + 1 });\n    await this.getSummary(payload);\n    return true;\n  };\n  render() {\n    const imageArray = [\n      card1Image,\n      card2Image,\n      card3Image,\n      card4Image,\n      card1Image,\n      card2Image,\n      card3Image,\n      card4Image,\n      card1Image,\n      card2Image,\n    ];\n    const cardStyle = [\n      'card-border1',\n      'card-border2',\n      'card-border3',\n      'card-border4',\n      'card-border1',\n      'card-border2',\n      'card-border3',\n      'card-border4',\n      'card-border1',\n      'card-border2',\n    ];\n\n    return (\n      <LoadingOverlay loader={this.props.getOverlayLoaderState} spinner>\n        <div className=\"createMd pl-2 pr-2 summary-comp\">\n          <div className=\"card CalendarMain promoCalendarDiv1 mt-3\">\n            <div>\n              <h4 className=\"font-size-14  pad-10 markdown-heading\">\n                MarkSmart /<span className=\"font-bold color-blue\">Summary</span>\n              </h4>\n            </div>\n            <hr\n              className=\"mb-2\"\n              style={{\n                marginTop: '-4px',\n              }}\n            />\n            <div className=\"filterCol mb-4\">\n              <Filters\n                onReset={(e) => {\n                  this.setState({\n                    textStr: 'Please select filters to show Markdown plans',\n                    showKPIS: false,\n                  });\n                  this.props.onResetFinalizeTable(e);\n                }}\n                hierarchy={this.state.filters}\n                onFilter={this.onFilter}\n                dateRange\n                filtersOptions={[\n                  { type: 'country', isMandatory: true, isMultiple: false },\n                  { type: 'channel', isMandatory: true, isMultiple: false },\n                  { type: 'storeCluster', isMandatory: false, isMultiple: true },\n                  { type: 'customStoreGroup', isMandatory: false, isMultiple: true },\n                  { type: 'store', isMandatory: false, isMultiple: true },\n                  {\n                    type: 'hierarchy1',\n                    isMandatory: true,\n                    isMultiple: false,\n                    isHierarchy: true,\n                  },\n                  {\n                    type: 'hierarchy2',\n                    isMandatory: true,\n                    isMultiple: false,\n                    isHierarchy: true,\n                  },\n                  {\n                    type: 'hierarchy3',\n                    isMandatory: true,\n                    isMultiple: false,\n                    isHierarchy: true,\n                  },\n                  {\n                    type: 'hierarchy4',\n                    isMandatory: true,\n                    isMultiple: false,\n                    isHierarchy: true,\n                  },\n                  {\n                    type: 'hierarchy5',\n                    isMandatory: true,\n                    isMultiple: false,\n                    isHierarchy: true,\n                  },\n                  { type: 'season', isMandatory: false, isMultiple: true },\n                  { type: 'matrix', isMandatory: false, isMultiple: true },\n                  { type: 'exclusionList', isMandatory: false, isMultiple: true },\n                  { type: 'clearance', isMandatory: false, isMultiple: true },\n                  { type: 'customStyleGroup', isMandatory: false, isMultiple: true },\n                  { type: 'styleColor', isMandatory: false, isMultiple: true },\n                ]}\n              />\n            </div>\n          </div>\n          {/* <div className=\"row\" style={{ marginTop: '15px' }}>\n            {this.props.summaryKPIData.map((summaryKPIData) => (\n              <div className=\"col-md-3 col-sm-3 col-xs-6 p-2\">\n                <CardComponent\n                  cardImage={summaryKPIData.cardImage}\n                  cardText={this.state.firstCardText}\n                  cardValue={summaryKPIData.cardValue}\n                  cardValueSecond={summaryKPIData.cardValueSecond}\n                  cardWeekText={this.state.cardWeekText}\n                  cardMonthText={this.state.cardMonthText}\n                  cardStyles={{\n                    cardClass: summaryKPIData.cardStyleClass,\n                    cardValue: 'card1-value',\n                    cardImg: summaryKPIData.cardStyleImg,\n                    cardValueSecond: 'card-value-second',\n                    cardSubHeading: 'card-subHeading',\n                  }}\n                />\n              </div>\n            ))}\n          </div> */}\n          {/* <div className=\"row\" style={{ marginTop: '15px' }}> */}\n          {this.props.summaryKPIData && this.state.showKPIS ? (\n            <div>\n              {this.props.summaryKPIData.KPIS &&\n                this.props.summaryKPIData.KPIS.total &&\n                Array.isArray(Object.keys(this.props.summaryKPIData.KPIS.total)) &&\n                Object.keys(this.props.summaryKPIData.KPIS.total).map((key, index) => (\n                  // <div className=\"col-md-3 col-sm-3 col-xs-6 p-2\">\n\n                  <div className=\"cardContainerstyle\" style={{ marginTop: '10px' }}>\n                    <div>\n                      <CardComponent\n                        cardImage={imageArray[index]}\n                        //item.type && item.type.charAt(0).toUpperCase() + item.type.slice(1);\n                        //cardText={key && key.charAt(0).toUpperCase() + key.slice(1)}\n                        cardText={\n                          this.props.summaryKPIData.columnMapping &&\n                          this.props.summaryKPIData.columnMapping[key]\n                        }\n                        cardValue={\n                          this.props.summaryKPIData.KPIS.lw &&\n                          this.roundOffNumber(this.props.summaryKPIData.KPIS.lw[key])\n                        }\n                        cardValueSecond={\n                          this.props.summaryKPIData.KPIS.tw &&\n                          this.roundOffNumber(this.props.summaryKPIData.KPIS.tw[key])\n                        }\n                        cardValueThird={\n                          this.props.summaryKPIData.KPIS.total &&\n                          this.roundOffNumber(this.props.summaryKPIData.KPIS.total[key])\n                        }\n                        cardWeekText={this.state.cardWeekText}\n                        cardMonthText={this.state.cardMonthText}\n                        cardTotalText={this.state.cardTotalText}\n                        cardStyles={{\n                          cardClass: cardStyle[index],\n                          cardValue: 'card1-value',\n                          //cardImg: summaryKPIData.cardStyleImg,\n                          cardValueSecond: 'card-value-second',\n                          cardSubHeading: 'card-subHeading',\n                        }}\n                      />\n                    </div>\n                  </div>\n                ))}\n            </div>\n          ) : null}\n          {!_.isEmpty(this.props.detailedSummary) || !_.isEmpty(this.props.aggregatedSummary) ? (\n            <div className=\"card pt-3 px-3 mt-3\">\n              <ColSelBtn>\n                {((this.state.switchedPlans && !_.isEmpty(this.state.columns)) ||\n                  (!this.state.switchedPlans && !_.isEmpty(this.state.aggColDef))) && (\n                  <ColumnSelection\n                    onHandleSelect={this.onHandleSelect}\n                    columnOptions={this.state.columnOptions}\n                    selectedItems={this.state.selectedItems}\n                    selLabels={this.state.selLabels}\n                  />\n                )}\n                <div className=\"switchCss\">\n                  <Switch\n                    checked={this.state.switchedPlans}\n                    onSwitchHandler={this.isSwitchedPaln}\n                    leftLabel=\"Aggregated\"\n                    rightLabel=\"Detailed\"\n                  />\n                </div>\n                <div style={{ padding: '1rem' }}>\n                  <button\n                    className=\"btn btn-primary\"\n                    disabled={true}\n                    //onClick={this.sendForApprove}\n                  >\n                    Push for selected weeks\n                  </button>\n                  &nbsp;\n                  <button\n                    disabled={true}\n                    className=\"btn btn-primary\"\n                    //onClick={this.sendForReject}\n                  >\n                    Continue with current discount\n                  </button>\n                </div>\n              </ColSelBtn>\n              {this.state.switchedPlans ? (\n                <DataTable\n                  columns={this.state.columns}\n                  isSort={true}\n                  data={this.props.detailedSummary}\n                  updateMyData={this.updateMyData}\n                  isPagination={true}\n                  rowsPerPage={5}\n                  getCellProps={(cellInfo) => ({\n                    style: {\n                      backgroundColor: this.bgmCol(cellInfo),\n                      color: this.txtCol(cellInfo),\n                      margin: '4px 4px',\n                      borderRadius: '2px',\n                    },\n                  })}\n                />\n              ) : (\n                <DataTable\n                  columns={this.state.aggColDef}\n                  isSort={true}\n                  data={this.props.aggregatedSummary.week_to_bin_agg_data}\n                  updateMyData={this.updateMyData}\n                  isPagination={true}\n                  rowsPerPage={5}\n                  renderRowSubComponent={this.renderRowSubComponent}\n                  nextPageHandler={this.nextPageHandler}\n                  getCellProps={(cellInfo) => ({\n                    style: {\n                      backgroundColor: this.bgmCol(cellInfo),\n                      color: this.txtCol(cellInfo),\n                      margin: '4px 4px',\n                      borderRadius: '2px',\n                    },\n                    onClick: () => {\n                      //added to track on which cell user has clicked\n                      if (cellInfo.column.id === 'expander')\n                        //expander is Date Range cell\n                        this.expandedRowDetailsHandler(cellInfo.row.original, 'week_to_bin');\n                      else if (cellInfo.column.id === 'expander1')\n                        //expander1 is Bins cell\n                        this.expandedRowDetailsHandler(cellInfo.row.original, 'bin_to_week');\n                    },\n                  })}\n                  RowCheck={({ row, column }) => {\n                    if (!(column.id === 'expander' || column.id === 'expander1')) return;\n                    //disables sibling cell within a row, when a particular row is expanded\n                    let foundLevel = _.filter(this.state.expandedRowDetails, {\n                      markdown_id: row.original.markdown_id,\n                    });\n                    if (!foundLevel[0]) return;\n\n                    return (foundLevel[0].level === 'week_to_bin' && column.id === 'expander1') ||\n                      (foundLevel[0].level === 'bin_to_week' && column.id === 'expander')\n                      ? 'tdtd disable-summary-cell'\n                      : null;\n                  }}\n                />\n              )}\n            </div>\n          ) : (\n            <NoData description={this.state.textStr} />\n          )}\n        </div>\n      </LoadingOverlay>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => {\n  return {\n    finalizeMarkdownData: store.draftStatusReducer.markdowns,\n    getOverlayLoaderState: store.loaderReducer.overlayLoaderState,\n    getOverlayLoaderText: store.loaderReducer.loaderText,\n    getColumnHeaders: store.draftStatusReducer.columnHeaders,\n    getMetricOptions: store.finalizeReducer.metricOptions,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n\n    selectedSeason: store.filtersReducer.selectedSeason,\n    selectedClearance: store.filtersReducer.selectedClearance,\n    selectedMatrix: store.filtersReducer.selectedMatrix,\n    selectedExclusionList: store.filtersReducer.selectedExclusionList,\n    selectedStyleColor: store.filtersReducer.selectedStyleColor,\n    selectedCountry: store.filtersReducer.selectedCountry,\n    selectedStoreCluster: store.filtersReducer.selectedStoreCluster,\n    selectedStore: store.filtersReducer.selectedStore,\n    selectedChannel: store.filtersReducer.selectedChannel,\n\n    summaryKPIData: store.summaryMDReducer.summaryKPIData,\n    detailedSummary: store.summaryMDReducer.detailedSummary,\n    aggregatedSummary: store.summaryMDReducer.aggregatedSummary,\n  };\n};\n\nconst mapActionToProps = {\n  getSummaryDetails: SummaryAction.getSummaryDetails,\n  getSummaryAggregated: SummaryAction.getSummaryAggregated,\n  onResetSummaryTable: SummaryAction.onResetSummaryTable,\n  getKPIdata: SummaryAction.getKPIdata,\n};\nexport default connect(mapStateToProps, mapActionToProps)(withRouter(Summary));\nconst ColSelBtn = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`;\n"]},"metadata":{},"sourceType":"module"}