{"ast":null,"code":"import _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/PricingModule/Component/InternalFactorAnalysis.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport RadioRiceRevision from \"./radioPriceRevision\";\nimport LineChart from \"../sharedComponents/charts/LineChartPriceRev\";\nimport ScatterChart from \"../sharedComponents/charts/ScatterChart\";\nimport { getPricingFilter as _getPricingFilter, getPricingFactorData as _getPricingFactorData } from \"../Actions/PricingAction\";\nimport _ from \"lodash\";\nexport var InternalFactor =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InternalFactor, _Component);\n\n  function InternalFactor(props) {\n    var _this;\n\n    _classCallCheck(this, InternalFactor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InternalFactor).call(this, props));\n\n    _this.subFilterCallback = function (dataFromSubFilter, name) {\n      console.log(\"internal callback\", dataFromSubFilter, name);\n\n      _this.setState({\n        selectedRegion: dataFromSubFilter,\n        selectedRadio: name\n      });\n    };\n\n    _this.state = {\n      priceData: [],\n      quantityData: [],\n      timePeriodData: [],\n      selectedRegion: null,\n      selectedRadio: null\n    };\n    return _this;\n  }\n\n  _createClass(InternalFactor, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var factorDataArray = [];\n      var graphDataArray = [];\n\n      if (this.props.factorData !== null && this.props.factorData.data) {\n        Object.keys(this.props.factorData.data).map(function (items) {\n          factorDataArray.push(_this2.props.factorData.data[items]);\n        });\n      }\n\n      var factorData = this.props.factorData;\n      var overAllArray = factorData !== null && factorData.data ? factorData.data['overall'] : [];\n      var regionArray = factorData !== null && factorData.data ? factorData.data['region'] : [];\n      var storeArray = factorData !== null && factorData.data ? factorData.data['store'] : [];\n      var demandElasticity = factorData !== null && factorData.data ? factorData.data['demand_elasticity'] : [];\n      var priceArr = overAllArray && overAllArray.map(function (item) {\n        return item.price;\n      });\n      var quantityArray = overAllArray && overAllArray.map(function (item) {\n        return item.qty;\n      });\n      var monthnumArray = overAllArray && overAllArray.map(function (item) {\n        return item.month_no;\n      });\n      var priceQuantity11 = demandElasticity && demandElasticity.map(function (item) {\n        return {\n          x: item.price,\n          y: item.qty\n        };\n      });\n      console.log(\"asdasdas\", factorDataArray[0], overAllArray, priceQuantity11);\n\n      var groupedDataRegion = regionArray && _.groupBy(regionArray, \"region_desc\");\n\n      var groupedDataStore = storeArray && _.groupBy(storeArray, \"store_group_desc\");\n\n      var regionName,\n          storeName = [];\n\n      if (groupedDataRegion && groupedDataStore) {\n        regionName = [];\n        Object.keys(groupedDataRegion).forEach(function (item) {\n          regionName.push({\n            label: item,\n            value: item,\n            key: groupedDataRegion[item][0].key\n          });\n        });\n        storeName = [];\n        Object.keys(groupedDataStore).forEach(function (item) {\n          storeName.push({\n            label: item,\n            value: item,\n            key: groupedDataStore[item][0].key\n          });\n        });\n      }\n\n      if (this.state.selectedRegion && this.state.selectedRadio) {\n        var activeRadio = this.state.selectedRadio === \"region\" ? groupedDataRegion : groupedDataStore;\n        var activeValue = this.state.selectedRegion.value;\n        console.log(\"grpDataa\", activeValue, activeRadio);\n        graphDataArray = activeRadio[activeValue];\n        priceArr = graphDataArray && graphDataArray.map(function (item) {\n          return item.price;\n        });\n        quantityArray = graphDataArray && graphDataArray.map(function (item) {\n          return item.qty;\n        }); // monthnumArray =\n        //   graphDataArray && graphDataArray.map(item => item.month_no);\n\n        monthnumArray = monthnumArray && monthnumArray.length ? monthnumArray.sort(function (item_a, item_b) {\n          return item_a.month_no - item_b.month_no;\n        }) : monthnumArray;\n      }\n\n      var lineData1 = {\n        labels: priceArr || [],\n        datasets: [{\n          label: \"Quantity\",\n          data: quantityArray || [],\n          borderWidth: 1,\n          borderColor: \"#44677b\",\n          backgroundColor: \"rgb(246, 229, 234,0.6)\",\n          pointBackgroundColor: \"#44677b\"\n        }]\n      };\n      var scatterData = priceQuantity11;\n      var lineData2 = {\n        labels: monthnumArray || [],\n        datasets: [{\n          label: \"Price\",\n          data: quantityArray || [],\n          borderWidth: 1,\n          borderColor: \"#44677b\",\n          backgroundColor: \"rgb(246, 229, 234,0.6)\",\n          pointBackgroundColor: \"#44677b\"\n        }]\n      };\n      var lineData3 = {\n        labels: monthnumArray || [],\n        datasets: [{\n          label: \"Price\",\n          data: priceArr && priceArr.sort() || [],\n          borderWidth: 1,\n          borderColor: \"#44677b\",\n          backgroundColor: \"rgb(246, 229, 234,0.6)\",\n          pointBackgroundColor: \"#44677b\"\n        }]\n      }; // console.log(\"pricearr\",priceArr.sort());\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(RadioRiceRevision, {\n        regionName: regionName,\n        storeName: storeName,\n        nameOne: \"pricerevOverall\",\n        nameTwo: \"pricerevRegion\",\n        nameThree: \"pricerevStore\",\n        callbackFromInternalFactor: this.subFilterCallback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"font-size-14 font-bold color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Demand Elasticity\"), React.createElement(\"div\", {\n        className: \"blue-backgr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(ScatterChart, {\n        data1: scatterData || [],\n        yLabelName: \"Quantity\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"font-size-14 font-bold color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Demand Variation Overtime\"), React.createElement(\"div\", {\n        className: \"blue-backgr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: lineData2,\n        yLabelName: \"Demand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"font-size-14 font-bold color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Price Variation Overtime\"), React.createElement(\"div\", {\n        className: \"blue-backgr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: lineData3,\n        yLabelName: \"Price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      })))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return InternalFactor;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    priceFilterData: store.priceReducer.priceFilterData,\n    factorData: store.priceReducer.factorData\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getPricingFilter: function getPricingFilter(payload) {\n      return dispatch(_getPricingFilter(payload));\n    },\n    getPricingFactorData: function getPricingFactorData(payload) {\n      return dispatch(_getPricingFactorData(payload));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(InternalFactor));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/PricingModule/Component/InternalFactorAnalysis.js"],"names":["React","Component","connect","withRouter","RadioRiceRevision","LineChart","ScatterChart","getPricingFilter","getPricingFactorData","_","InternalFactor","props","subFilterCallback","dataFromSubFilter","name","console","log","setState","selectedRegion","selectedRadio","state","priceData","quantityData","timePeriodData","factorDataArray","graphDataArray","factorData","data","Object","keys","map","items","push","overAllArray","regionArray","storeArray","demandElasticity","priceArr","item","price","quantityArray","qty","monthnumArray","month_no","priceQuantity11","x","y","groupedDataRegion","groupBy","groupedDataStore","regionName","storeName","forEach","label","value","key","activeRadio","activeValue","length","sort","item_a","item_b","lineData1","labels","datasets","borderWidth","borderColor","backgroundColor","pointBackgroundColor","scatterData","lineData2","lineData3","mapStateToProps","store","priceFilterData","priceReducer","mapDispatchToProps","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport RadioRiceRevision from \"./radioPriceRevision\";\nimport LineChart from \"../sharedComponents/charts/LineChartPriceRev\";\nimport ScatterChart  from \"../sharedComponents/charts/ScatterChart\";\n\nimport {\n  getPricingFilter,\n  getPricingFactorData\n} from \"../Actions/PricingAction\";\nimport _ from \"lodash\";\n\nexport class InternalFactor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      priceData: [],\n      quantityData: [],\n      timePeriodData: [],\n      selectedRegion: null,\n      selectedRadio: null\n    };\n  }\n  \n  subFilterCallback = (dataFromSubFilter, name) => {\n    console.log(\"internal callback\",dataFromSubFilter, name)\n    this.setState({\n      selectedRegion: dataFromSubFilter,\n      selectedRadio: name\n    });\n  };\n  render() {\n    let factorDataArray = [];\n    let graphDataArray = [];\n    if (this.props.factorData !==null && this.props.factorData.data) {\n      Object.keys(this.props.factorData.data).map(items => {\n        factorDataArray.push(this.props.factorData.data[items]);\n      });\n    }\n    let {factorData} = this.props;\n\n    let overAllArray =  (factorData !==null && factorData.data) ? factorData.data['overall'] : [];\n    let regionArray =  (factorData !==null && factorData.data) ? factorData.data['region'] : [];\n    let storeArray =  (factorData !==null && factorData.data) ? factorData.data['store'] : [];\n    let demandElasticity = (factorData !==null && factorData.data) ? factorData.data['demand_elasticity'] : [];\n\n    let priceArr = overAllArray && overAllArray.map(item => item.price);\n    let quantityArray = overAllArray && overAllArray.map(item => item.qty);\n    let monthnumArray = overAllArray && overAllArray.map(item => item.month_no);\n\n    let priceQuantity11 = demandElasticity && demandElasticity.map(item =>   ({x:item.price, y: item.qty}) );\nconsole.log(\"asdasdas\", factorDataArray[0], overAllArray,priceQuantity11)\n    \n    var groupedDataRegion =\n      regionArray && _.groupBy(regionArray, \"region_desc\");\n    var groupedDataStore =\n      storeArray && _.groupBy(storeArray, \"store_group_desc\");\n\n    let regionName,\n      storeName = [];\n    if (groupedDataRegion && groupedDataStore) {\n      regionName = [];\n      Object.keys(groupedDataRegion).forEach(item => {\n        regionName.push({\n          label: item,\n          value: item,\n          key: groupedDataRegion[item][0].key\n        });\n      });\n      storeName = [];\n      Object.keys(groupedDataStore).forEach(item => {\n        storeName.push({\n          label: item,\n          value: item,\n          key: groupedDataStore[item][0].key\n        });\n      });\n    }\n\n    if (this.state.selectedRegion && this.state.selectedRadio) {\n      let activeRadio =\n        this.state.selectedRadio === \"region\"\n          ? groupedDataRegion\n          : groupedDataStore;\n      let activeValue = this.state.selectedRegion.value;\n      console.log(\"grpDataa\", activeValue, activeRadio);\n      graphDataArray = activeRadio[activeValue];\n      priceArr = graphDataArray && graphDataArray.map(item => item.price);\n      quantityArray = graphDataArray && graphDataArray.map(item => item.qty);\n      // monthnumArray =\n      //   graphDataArray && graphDataArray.map(item => item.month_no);\n      monthnumArray = monthnumArray && monthnumArray.length  ? \n      monthnumArray.sort((item_a,item_b) => item_a.month_no - item_b.month_no) : monthnumArray;\n    }\n\n    const lineData1 = {\n      labels: priceArr || [],\n      datasets: [\n        {\n          label: \"Quantity\",\n          data: quantityArray || [],\n          borderWidth: 1,\n          borderColor: \"#44677b\",\n          backgroundColor: \"rgb(246, 229, 234,0.6)\",\n          pointBackgroundColor: \"#44677b\"\n        }\n      ]\n    };\n    const scatterData = priceQuantity11\n\n    const lineData2 = {\n      labels: monthnumArray || [],\n      datasets: [\n        {\n          label: \"Price\",\n          data: quantityArray || [],\n          borderWidth: 1,\n          borderColor: \"#44677b\",\n          backgroundColor: \"rgb(246, 229, 234,0.6)\",\n          pointBackgroundColor: \"#44677b\"\n        }\n      ]\n    };\n    const lineData3 = {\n      labels: monthnumArray || [],\n      datasets: [\n        {\n          label: \"Price\",\n          data: (priceArr && priceArr.sort() )|| [],\n          borderWidth: 1,\n          borderColor: \"#44677b\",\n          backgroundColor: \"rgb(246, 229, 234,0.6)\",\n          pointBackgroundColor: \"#44677b\"\n        }\n      ]\n    };\n  // console.log(\"pricearr\",priceArr.sort());\n    \n    return (\n      <div>\n        <RadioRiceRevision\n          regionName={regionName}\n          storeName={storeName}\n          nameOne=\"pricerevOverall\"\n          nameTwo=\"pricerevRegion\"\n          nameThree=\"pricerevStore\"\n          callbackFromInternalFactor={this.subFilterCallback}\n        />\n\n        <div className=\"row\">\n          <div className=\"col-md-4\">\n            <p className=\"font-size-14 font-bold color-blue\">\n              Demand Elasticity\n              {/* {JSON.stringify(scatterData)} */}\n            </p>\n            <div className=\"blue-backgr\">\n               <ScatterChart data1={scatterData || []} yLabelName=\"Quantity\" />\n              {/* <p className=\"line-label1\">Price</p> */}\n            </div>\n          </div>\n          <div className=\"col-md-4\">\n            <p className=\"font-size-14 font-bold color-blue\">\n              Demand Variation Overtime\n            </p>\n            <div className=\"blue-backgr\">\n              <LineChart data={lineData2} yLabelName=\"Demand\" />\n              {/* <p className=\"line-label1\">Time Period</p> */}\n            </div>\n          </div>\n          <div className=\"col-md-4\">\n            <p className=\"font-size-14 font-bold color-blue\">\n              Price Variation Overtime\n            </p>\n            <div className=\"blue-backgr\">\n              <LineChart data={lineData3} yLabelName=\"Price\" />\n              {/* <p className=\"line-label1\">Time Period</p> */}\n            </div>\n          </div>\n        </div>\n        <hr />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = store => {\n  return {\n    priceFilterData: store.priceReducer.priceFilterData,\n    factorData: store.priceReducer.factorData\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getPricingFilter: payload => dispatch(getPricingFilter(payload)),\n    getPricingFactorData: payload => dispatch(getPricingFactorData(payload))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(InternalFactor));\n"]},"metadata":{},"sourceType":"module"}