{"ast":null,"code":"import _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/CalenderMarkdown/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Calendar from '../../lib/Calendar';\nimport RetailCalendarDatePicker from '../../services/RetailCalendarDatePicker';\nimport CalendarWrapper from '../Content/Promotions/PromoCalendar/CalendarWrapper';\nimport { withRouter } from 'react-router-dom';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport moment from 'moment';\nimport { isEqual } from 'lodash';\nimport PageLoader from '../../utils/Loader';\nimport { markdownCalendarDatePlot as _markdownCalendarDatePlot, markdownCalendarData as _markdownCalendarData, markdownCalendarGraphData as _markdownCalendarGraphData } from '../Content/Promotions/PromoCalendar/calendarAction';\nimport AddSkuFilter from '../createMarkdown/AddSkuFilter';\nimport { getAllFilters as _getAllFilters } from '../../actions/markDownCommonActions';\nimport { getGlobalPromoPerMarkdown as _getGlobalPromoPerMarkdown } from '../../actions/markdown_global_promo';\nimport _ from 'underscore';\nimport AlertDanger from '../../utils/AlertMessage/alertDanger';\nimport { Element, scroller } from 'react-scroll';\nimport MarkdownPart from './detailedMarkdown';\nimport GlobalPromosmark from './GlobalPromosMarkdown';\nexport var PromoCalendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PromoCalendar, _Component);\n\n  function PromoCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, PromoCalendar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PromoCalendar).call(this, props));\n\n    _this.getCalendarWrapper = function (val) {\n      _this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n      var _this$props = _this.props,\n          calendarStrucure = _this$props.calendarStrucure,\n          markdownCalendarData = _this$props.markdownCalendarData;\n      var _this$state = _this.state,\n          fiscal_monthnum = _this$state.fiscal_monthnum,\n          selectedYear = _this$state.selectedYear,\n          fiscal_quarter = _this$state.fiscal_quarter,\n          filterCategory = _this$state.filterCategory,\n          filterSubCategory = _this$state.filterSubCategory,\n          filterClass = _this$state.filterClass,\n          filterSubClass = _this$state.filterSubClass,\n          filterBrand = _this$state.filterBrand;\n      var calendarWrapperArr = [],\n          start_date = null,\n          end_date;\n      var startDate = _this.calendarData && _this.calendarData.startDate,\n          endDate = _this.calendarData && _this.calendarData.endDate;\n\n      if (calendarStrucure !== undefined || calendarStrucure !== null && calendarStrucure.plot_data && calendarStrucure.plot_data.length) {\n        var fiscal_week_52_patch = false;\n        var curr_date = moment(new Date()).format('YYYY-MM-DD');\n        var temp_fiscal_week = 0;\n        var temp_fiscal_monthnum = 0;\n        calendarStrucure.plot_data.forEach(function (ele) {\n          //fetching fiscal week and fiscal month\n          if (ele.start_date <= curr_date && ele.end_date >= curr_date && fiscal_monthnum === ele.fiscal_monthnum && (fiscal_monthnum < 12 && new Date(ele.start_date).getFullYear() + 1 === selectedYear || fiscal_monthnum === 12 && new Date(ele.start_date).getFullYear() === selectedYear)) {\n            temp_fiscal_week = Number(ele.fiscal_week);\n            temp_fiscal_monthnum = Number(ele.fiscal_monthnum);\n          }\n        }); //for month level view\n\n        if (val === 'Month') {\n          calendarStrucure.plot_data.forEach(function (ele) {\n            //checking for fiscal week which is belong to 2 diff. month\n            if (temp_fiscal_week !== 0 && Number(ele.fiscal_week) === temp_fiscal_week && Number(ele.fiscal_monthnum) !== fiscal_monthnum && fiscal_monthnum - temp_fiscal_monthnum === 1) {\n              calendarWrapperArr.push(ele);\n            } //for checking fiscal week which belonging to fiscal month\n\n\n            if (Number(ele.fiscal_monthnum) === fiscal_monthnum && (fiscal_monthnum < 12 && new Date(ele.start_date).getFullYear() + 1 === selectedYear || fiscal_monthnum < 12 && new Date(ele.start_date).getFullYear() + 2 === selectedYear || fiscal_monthnum === 12 && new Date(ele.start_date).getFullYear() === selectedYear)) {\n              // debugger\n              calendarWrapperArr.push(ele);\n            }\n          });\n        } else {\n          //view for quater\n          var tempArr = calendarStrucure.plot_data;\n\n          for (var index = 0; index < tempArr.length; index++) {\n            //for checking quater 1 starting from last week of year\n            if (tempArr[index].fiscal_quarter === 1 && tempArr[index].fiscal_week === 52) {\n              fiscal_week_52_patch = true;\n            } //for cheking quaters\n\n\n            if (Number(tempArr[index].fiscal_quarter) === fiscal_quarter && (new Date(tempArr[index].start_date).getFullYear() + 1 === selectedYear || new Date(tempArr[index].start_date).getFullYear() === selectedYear)) {\n              //for margin single day week to previous week which is having same fiscal week\n              if (index < tempArr.length - 1 && tempArr[index].fiscal_week === tempArr[index + 1].fiscal_week) {\n                tempArr[index].end_date = tempArr[index + 1].end_date;\n                calendarWrapperArr.push(tempArr[index]);\n                index++;\n              } else {\n                calendarWrapperArr.push(tempArr[index]);\n              }\n            }\n          }\n        }\n\n        if (startDate && startDate !== 'null') {\n          markdownCalendarData({\n            start_date: startDate,\n            end_date: endDate,\n            sku: '',\n            category: filterCategory,\n            subcategory: filterSubCategory,\n            classname: filterClass,\n            subclass: filterSubClass,\n            brand: filterBrand\n          });\n          localStorage.setItem('calendarData', JSON.stringify({\n            startDate: null,\n            endDate: null,\n            fiscalMonth: null // quarter: null\n\n          }));\n\n          if (_this.state.selectedView === 'Quarter') {\n            localStorage.setItem('calendarData', JSON.stringify({\n              quarter: null\n            }));\n          }\n        } else {\n          start_date = calendarWrapperArr && calendarWrapperArr[0] ? calendarWrapperArr[0].start_date : null;\n\n          if (fiscal_week_52_patch === true) {\n            end_date = calendarWrapperArr && calendarWrapperArr.length ? calendarWrapperArr[calendarWrapperArr.length - 2].end_date : null;\n          } else {\n            end_date = calendarWrapperArr && calendarWrapperArr.length ? calendarWrapperArr[calendarWrapperArr.length - 1].end_date : null;\n          }\n\n          markdownCalendarData({\n            start_date: start_date,\n            end_date: end_date,\n            sku: '',\n            category: filterCategory,\n            subcategory: filterSubCategory,\n            classname: filterClass,\n            subclass: filterSubClass,\n            brand: filterBrand\n          });\n        } // }\n\n      }\n\n      _this.setState(function (state) {\n        return _objectSpread({}, state, {\n          calendarWrapperArr: calendarWrapperArr,\n          historyStartDate: start_date,\n          historyEndDate: end_date,\n          histortFiscalMonth: state.fiscal_monthnum,\n          historyQuarter: state.fiscal_quarter\n        });\n      }, function () {\n        //reload page and set the local storage\n        window.onbeforeunload = function (e) {\n          if (e.currentTarget.performance.navigation.type === e.currentTarget.performance.navigation.TYPE_RELOAD) {\n            localStorage.setItem('calendarData', JSON.stringify({\n              startDate: start_date,\n              endDate: end_date,\n              fiscalMonth: _this.state.histortFiscalMonth\n            }));\n\n            if (_this.state.selectedView === 'Quarter') {\n              localStorage.setItem('calendarData', JSON.stringify({\n                quarter: _this.state.historyQuarter\n              }));\n            }\n          }\n        };\n      });\n    };\n\n    _this.toggleMonthQuarter = function (val) {\n      if (_this.state.selectedView !== val) {\n        _this.setState({\n          selectedView: val,\n          loader: true\n        });\n\n        _this.getCalendarWrapper(val);\n      }\n    };\n\n    _this.navCallBack = function (payload) {\n      _this.setState(payload);\n    };\n\n    _this.onFilterClick = function (data) {\n      _this.props.markdownCalendarData({\n        start_date: _this.state.historyStartDate,\n        end_date: _this.state.historyEndDate,\n        sku: '',\n        category: data.SelectedCategory ? data.SelectedCategory.value : '',\n        subcategory: data.SelectedSubCategory ? data.SelectedSubCategory.value : '',\n        classname: data.SelectedClass ? data.SelectedClass.value : '',\n        subclass: data.SelectedSubClass ? data.SelectedSubClass.value : '',\n        brand: data.SelectedBrand ? data.SelectedBrand.value : ''\n      });\n\n      _this.setState({\n        filterCategory: data.SelectedCategory ? data.SelectedCategory.value : '',\n        filterSubCategory: data.SelectedSubCategory ? data.SelectedSubCategory.value : '',\n        filterClass: data.SelectedClass ? data.SelectedClass.value : '',\n        filterSubClass: data.SelectedSubClass ? data.SelectedSubClass.value : '',\n        filterBrand: data.SelectedBrand ? data.SelectedBrand.value : ''\n      });\n    };\n\n    _this.showMarkdown = function (val) {\n      _this.setState({\n        // loader: true,\n        skuList: val.sku_ids,\n        markdownId: val.mrk_id,\n        // loader: true,\n        markdownStartDate: val.start_date,\n        markdownEndDate: val.end_date,\n        markdownName: val.name,\n        selectedMarkDownSku: val.sku_ids[0],\n        showGraph: !_this.state.showGraph\n      });\n\n      _this.props.markdownCalendarGraphData({\n        mrk_id: val.mrk_id,\n        sku_ids: val.sku_ids[0]\n      });\n\n      scroller.scrollTo('showPromotionTag', {\n        duration: 800,\n        delay: 0,\n        smooth: 'easeInOutQuart'\n      });\n    };\n\n    _this.promoButtonClick = function (val) {\n      _this.setState({\n        markdownId: val.mrk_id,\n        markdownStartDate: val.start_date,\n        markdownEndDate: val.end_date,\n        markdownName: val.name // loader:true\n\n      });\n\n      var markdownid = val.mrk_id;\n\n      _this.props.getGlobalPromoPerMarkdown(markdownid);\n    };\n\n    _this.call_edit_adgroup = function (data) {\n      _this.props.history.push(\"/createpromotion?copyCampaign=true&campaignId=\".concat(data.campaignId, \"&adgroupIds=\").concat(data.adgroupId, \"&promoIds=\").concat(data.promoId));\n    };\n\n    _this.onDropdownSkuchange = function (val) {\n      var skuvalue = val.value;\n      var markdownID = _this.state.markdownId;\n\n      _this.setState({\n        selectedMarkDownSku: skuvalue\n      });\n\n      _this.props.markdownCalendarGraphData({\n        mrk_id: markdownID,\n        sku_ids: skuvalue\n      });\n    };\n\n    _this.promoDetailsHandler = function (active) {\n      _this.setState({\n        showPromoDetailTable: active,\n        generateCadenceError: true\n      });\n    };\n\n    _this.onCalEventClick = function (event) {\n      console.log(event.title);\n    };\n\n    var matchQueryTimeSamp = document.location.search.match(/timeMonth=([^&]*)/i);\n    var momentObj = matchQueryTimeSamp ? moment(matchQueryTimeSamp[1]) : null;\n    var checkMatchQueryTimeSapm = matchQueryTimeSamp && matchQueryTimeSamp.length && matchQueryTimeSamp[1];\n    _this.state = {\n      loader: false,\n      showPromotionMain: false,\n      showPromotionMainWithValues: false,\n      startDate: checkMatchQueryTimeSapm ? momentObj.toDate() : new Date(),\n      selectedYear: checkMatchQueryTimeSapm ? momentObj.year() : new Date().getFullYear(),\n      selectedMonth: 'Sep',\n      selectedView: 'Month',\n      fiscal_monthnum: checkMatchQueryTimeSapm ? momentObj.month() : Number(new Date().getMonth()),\n      fiscal_quarter: checkMatchQueryTimeSapm ? momentObj.format('Q') : 1,\n      calendarWrapperArr: [],\n      calendarWrapperArr1: [],\n      historyStartDate: 'null',\n      historyEndDate: 'null',\n      historyQuarter: 'null',\n      histortFiscalMonth: 'null',\n      //moment(matchQueryTimeSt[1]).toDate()\n      calendarDataArr: [],\n      initialLoadFlag: true,\n      selectedDate: checkMatchQueryTimeSapm ? momentObj.toDate() : null,\n      selectedDepartment: null,\n      selectedCategory: null,\n      selectedSKU: null,\n      selectedSubCategory: null,\n      skuList: null,\n      markdownId: null,\n      markdownStartDate: null,\n      markdownEndDate: null,\n      markdownName: null,\n      selectedMarkDownSku: {},\n      showGraph: false,\n      markdownlinkShow: 1,\n      //filter states\n      filterCategory: null,\n      filterSubCategory: null,\n      filterClass: null,\n      filterSubClass: null,\n      filterBrand: null,\n      showPromoDetailTable: false,\n      generateCadenceError: false,\n      showToggleContinious: false,\n      stDt: null,\n      enDt: null\n    };\n    _this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n    return _this;\n  }\n\n  _createClass(PromoCalendar, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        loader: true\n      });\n      this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n      var markdownCalendarDatePlot = this.props.markdownCalendarDatePlot;\n      var startDate = this.calendarData && this.calendarData.startDate,\n          Quarter = this.calendarData && this.calendarData.quarter;\n      var matchQueryTimeSt = document.location.search.match(/timeMonth=([^&]*)/i);\n      var momentObjSt = matchQueryTimeSt ? moment(matchQueryTimeSt[1]) : null;\n\n      if (matchQueryTimeSt && matchQueryTimeSt.length && matchQueryTimeSt[1]) {\n        var _year = momentObjSt.year() + 1;\n\n        var selectedDate = momentObjSt.toDate();\n        var yearMonth = momentObjSt.format('YYYY-MMM');\n        var month = momentObjSt.month() + 1;\n        var Quater = momentObjSt.format('Q');\n        this.setState({\n          fiscal_quarter: Quater,\n          selectedDate: selectedDate,\n          fiscal_monthnum: month,\n          selectedYear: _year,\n          selectedMonth: yearMonth.slice(5, 8)\n        });\n      }\n\n      var date = startDate && startDate !== 'null' ? startDate : new Date();\n      var year = new Date(date).getMonth() !== 0 ? new Date(date).getFullYear() + 1 : new Date(date).getFullYear(),\n          fiscalDate = new Date(date).getMonth() !== 0 ? new Date(moment(date).add(1, 'years')) : new Date(date);\n      this.setState({\n        selectedYear: year,\n        selectedDate: fiscalDate\n      });\n\n      if (Quarter) {\n        this.setState({\n          selectedView: 'Quarter'\n        });\n      }\n\n      markdownCalendarDatePlot({\n        fiscal_year: year\n      }); // if (startDate && startDate !== null) {\n      //   let year =\n      //     new Date(startDate).getMonth() !== 0\n      //       ? new Date(startDate).getFullYear() + 1\n      //       : new Date(startDate).getFullYear();\n      //   if (Quarter && Quarter !== null) {\n      //     this.setState({\n      //       selectedView: \"Quarter\"\n      //     });\n      //   }\n      //   this.setState({\n      //     selectedYear: year,\n      //     selectedDate: new Date(startDate)\n      //   });\n      //   markdownCalendarDatePlot({\n      //     fiscal_year: year\n      //   });\n      // } else {\n      //   markdownCalendarDatePlot({\n      //     fiscal_year: this.state.selectedYear\n      //   });\n      // }\n    } //72 lines\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(oldProps, oldState) {\n      this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n      var _this$state2 = this.state,\n          initialLoadFlag = _this$state2.initialLoadFlag,\n          selectedView = _this$state2.selectedView,\n          fiscal_quarter = _this$state2.fiscal_quarter,\n          fiscal_monthnum = _this$state2.fiscal_monthnum,\n          selectedYear = _this$state2.selectedYear;\n      var _this$props2 = this.props,\n          calendarStrucure = _this$props2.calendarStrucure,\n          calendarDataPerYear = _this$props2.calendarDataPerYear,\n          markdownCalendarDatePlot = _this$props2.markdownCalendarDatePlot;\n      var Quarter = this.calendarData && this.calendarData.quarter,\n          fiscalMonth1 = this.calendarData && this.calendarData.fiscalMonth,\n          fiscalMonth = 0,\n          Month = new Date().getMonth();\n      fiscalMonth = Month === 0 ? 1 : Math.ceil(Month / 3); //calling for 1st load from local storage\n\n      if (oldProps.calendarStrucure !== calendarStrucure && initialLoadFlag) {\n        var tempMonth = fiscalMonth1 && fiscalMonth1 !== 'null' ? fiscalMonth1 : new Date().getMonth();\n        var fiscalQuarter = Quarter && Quarter !== 'null' ? Quarter : fiscalMonth;\n        this.setState({\n          fiscal_monthnum: tempMonth === 0 ? 12 : tempMonth,\n          fiscal_quarter: fiscalQuarter,\n          initialLoadFlag: false\n        });\n        this.getCalendarWrapper(selectedView);\n      }\n\n      if (!isEqual(oldProps.calendarStrucure, calendarStrucure) && !initialLoadFlag) {\n        // this.setState({ fiscal_monthnum: 1, fiscal_quarter: 1 });\n        this.getCalendarWrapper(selectedView);\n      } ///\n\n\n      if (oldProps.calendarDataPerYear !== calendarDataPerYear) {\n        /*------------------weekly navigation enable/disable function------------------ */\n\n        /*-------------------------setting Calendar Data--------------------------*/\n        this.setState({\n          calendarDataArr: calendarDataPerYear,\n          loader: false\n        });\n      } ///\n      // debugger\n\n\n      if (oldState.fiscal_monthnum !== fiscal_monthnum || fiscal_quarter && oldState.fiscal_quarter !== fiscal_quarter) {\n        // debugger\n        if (oldState.selectedYear !== selectedYear) {\n          markdownCalendarDatePlot({\n            fiscal_year: selectedYear\n          });\n        } else {\n          this.getCalendarWrapper(selectedView);\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      localStorage.setItem('calendarData', JSON.stringify({\n        startDate: this.state.historyStartDate,\n        endDate: this.state.historyEndDate,\n        fiscalMonth: this.state.histortFiscalMonth\n      }));\n\n      if (this.state.selectedView === 'Quarter') {\n        localStorage.setItem('calendarData', JSON.stringify({\n          quarter: this.state.historyQuarter\n        }));\n      }\n    } //170 --- 141 lines\n\n  }, {\n    key: \"onDropdownchange\",\n    value: function onDropdownchange(tag, value) {\n      if (tag === 'department') {\n        this.setState({\n          selectedDepartment: value\n        });\n      }\n\n      if (tag === 'category') {\n        this.setState({\n          selectedCategory: value\n        });\n      }\n\n      if (tag === 'subCategory') {\n        this.setState({\n          selectedSubCategory: value\n        });\n      }\n\n      if (tag === 'sku') {\n        this.setState({\n          selectedSKU: value\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var generateCadenceError = !!this.state.showPromoDetailTable && this.props.promoDataForMarkdown.length == 0;\n      var custGroupArray = [],\n          businessDescArray = [],\n          shopArray = [],\n          skuArray = [],\n          brandArray = [];\n\n      if (this.props.markdownFilter && this.props.markdownFilter.data) {\n        this.props.markdownFilter.data.category.map(function (filterData) {\n          custGroupArray.push({\n            value: filterData.id,\n            label: filterData.category\n          });\n        });\n        this.props.markdownFilter.data.category.map(function (filterData) {\n          businessDescArray.push({\n            value: filterData.id,\n            label: filterData.category\n          });\n        });\n        this.props.markdownFilter.data.subCategory.map(function (filterData) {\n          shopArray.push({\n            value: filterData.id,\n            label: filterData.subcategory\n          });\n        });\n        this.props.markdownFilter.data.skuGroup.map(function (filterData) {\n          skuArray.push({\n            value: filterData.id,\n            label: filterData.sku_group\n          });\n        });\n        this.props.markdownFilter.data.brand.map(function (filterData) {\n          brandArray.push({\n            value: filterData.id,\n            label: filterData.class\n          });\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 616\n        },\n        __self: this\n      }, React.createElement(PageLoader, {\n        loader: this.props.loader || this.state.loader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617\n        },\n        __self: this\n      }, !this.state.showPromotionMain ? React.createElement(\"div\", {\n        className: \"calendarContainer\",\n        id: \"main-calendar-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"promo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card CalendarMain promoCalendarDiv1\",\n        id: \"promocalendar-maincontainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"promoCal-brdcrm mb-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624\n        },\n        __self: this\n      }, \"Markdown Optimization / \", React.createElement(\"span\", {\n        className: \"font-bold color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 625\n        },\n        __self: this\n      }, \"Calendar\")), React.createElement(\"hr\", {\n        className: \"mb-2\",\n        style: {\n          marginTop: '-3px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row promocal-subdiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629\n        },\n        __self: this\n      }, React.createElement(AddSkuFilter, {\n        subClassID: this.props.subClassID,\n        brandID: this.props.brandID,\n        onFilterClick: this.onFilterClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        className: \"dotted-line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646\n        },\n        __self: this\n      }), React.createElement(Calendar, {\n        onCalEventClick: this.onCalEventClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 647\n        },\n        __self: this\n      }))), React.createElement(Element, {\n        name: \"showPromotionTag\",\n        className: \"element\",\n        style: {\n          marginTop: '2%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 651\n        },\n        __self: this\n      }, this.props.calendarGraphData && !this.state.showPromoDetailTable && React.createElement(MarkdownPart, {\n        selectedCadenceSet: this.props.calendarGraphData,\n        markdownName: this.state.markdownName,\n        markdownStartDate: this.state.markdownStartDate,\n        markdownEndDate: this.state.markdownEndDate,\n        markdownId: this.state.markdownId,\n        skuList: this.state.skuList,\n        selectedSku: this.state.selectedMarkDownSku,\n        onChangeSku: this.onDropdownSkuchange,\n        showGraph: this.state.showGraph,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 653\n        },\n        __self: this\n      })), React.createElement(Element, {\n        name: \"showPromotionTag\",\n        className: \"element\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 667\n        },\n        __self: this\n      }, this.props.promoDataForMarkdown && this.props.promoDataForMarkdown.length > 0 && this.state.showPromoDetailTable && React.createElement(GlobalPromosmark, {\n        markdownName: this.state.markdownName,\n        markdownStartDate: this.state.markdownStartDate,\n        markdownEndDate: this.state.markdownEndDate,\n        markdownId: this.state.markdownId,\n        promoData: this.props.promoDataForMarkdown,\n        loader: this.state.loader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"alertDivs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 681\n        },\n        __self: this\n      }, this.state.generateCadenceError && generateCadenceError && !this.props.loader && this.props.promoDataForMarkdown.length === 0 && React.createElement(AlertDanger, {\n        message: \"No Data Found\",\n        show: function () {\n          setTimeout(function () {\n            _this2.setState({\n              generateCadenceError: false\n            });\n          }, 5000);\n          return _this2.state.generateCadenceError;\n        }(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 686\n        },\n        __self: this\n      }))) : {}));\n    }\n  }]);\n\n  return PromoCalendar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    view: state.calendar.view,\n    calendarStrucure: state.calendar.markdownCalendarPlotData,\n    calendarDataPerYear: state.calendar.markdownCalendarData,\n    loader: state.markdown.loader,\n    validationLoader: state,\n    // summaryCumulativeFilters: state,\n    markdownFilter: state.markDownFilter.data,\n    calendarGraphData: state.calendar.markdownCalendarGraphData,\n    // markdownFilter: state.markDownFilter,\n    promoDataForMarkdown: state.globalPromos.globalPromoPerMarkDownData\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    markdownCalendarDatePlot: function markdownCalendarDatePlot(val) {\n      return dispatch(_markdownCalendarDatePlot(val));\n    },\n    markdownCalendarData: function markdownCalendarData(val) {\n      return dispatch(_markdownCalendarData(val));\n    },\n    markdownCalendarGraphData: function markdownCalendarGraphData(val) {\n      return dispatch(_markdownCalendarGraphData(val));\n    },\n    getAllFilters: function getAllFilters(val) {\n      return dispatch(_getAllFilters(val));\n    },\n    getGlobalPromoPerMarkdown: function getGlobalPromoPerMarkdown(payload) {\n      return dispatch(_getGlobalPromoPerMarkdown(payload));\n    } // getFilterData: val => dispatch(getFilterData(val))\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(PromoCalendar));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/CalenderMarkdown/index.js"],"names":["React","Component","connect","Calendar","RetailCalendarDatePicker","CalendarWrapper","withRouter","moment","isEqual","PageLoader","markdownCalendarDatePlot","markdownCalendarData","markdownCalendarGraphData","AddSkuFilter","getAllFilters","getGlobalPromoPerMarkdown","_","AlertDanger","Element","scroller","MarkdownPart","GlobalPromosmark","PromoCalendar","props","getCalendarWrapper","val","calendarData","JSON","parse","localStorage","getItem","calendarStrucure","state","fiscal_monthnum","selectedYear","fiscal_quarter","filterCategory","filterSubCategory","filterClass","filterSubClass","filterBrand","calendarWrapperArr","start_date","end_date","startDate","endDate","undefined","plot_data","length","fiscal_week_52_patch","curr_date","Date","format","temp_fiscal_week","temp_fiscal_monthnum","forEach","ele","getFullYear","Number","fiscal_week","push","tempArr","index","sku","category","subcategory","classname","subclass","brand","setItem","stringify","fiscalMonth","selectedView","quarter","setState","historyStartDate","historyEndDate","histortFiscalMonth","historyQuarter","window","onbeforeunload","e","currentTarget","performance","navigation","type","TYPE_RELOAD","toggleMonthQuarter","loader","navCallBack","payload","onFilterClick","data","SelectedCategory","value","SelectedSubCategory","SelectedClass","SelectedSubClass","SelectedBrand","showMarkdown","skuList","sku_ids","markdownId","mrk_id","markdownStartDate","markdownEndDate","markdownName","name","selectedMarkDownSku","showGraph","scrollTo","duration","delay","smooth","promoButtonClick","markdownid","call_edit_adgroup","history","campaignId","adgroupId","promoId","onDropdownSkuchange","skuvalue","markdownID","promoDetailsHandler","active","showPromoDetailTable","generateCadenceError","onCalEventClick","event","console","log","title","matchQueryTimeSamp","document","location","search","match","momentObj","checkMatchQueryTimeSapm","showPromotionMain","showPromotionMainWithValues","toDate","year","selectedMonth","month","getMonth","calendarWrapperArr1","calendarDataArr","initialLoadFlag","selectedDate","selectedDepartment","selectedCategory","selectedSKU","selectedSubCategory","markdownlinkShow","showToggleContinious","stDt","enDt","Quarter","matchQueryTimeSt","momentObjSt","yearMonth","Quater","slice","date","fiscalDate","add","fiscal_year","oldProps","oldState","calendarDataPerYear","fiscalMonth1","Month","Math","ceil","tempMonth","fiscalQuarter","tag","promoDataForMarkdown","custGroupArray","businessDescArray","shopArray","skuArray","brandArray","markdownFilter","map","filterData","id","label","subCategory","skuGroup","sku_group","class","marginTop","subClassID","brandID","calendarGraphData","setTimeout","mapStateToProps","view","calendar","markdownCalendarPlotData","markdown","validationLoader","markDownFilter","globalPromos","globalPromoPerMarkDownData","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Calendar from '../../lib/Calendar';\nimport RetailCalendarDatePicker from '../../services/RetailCalendarDatePicker';\n\nimport CalendarWrapper from '../Content/Promotions/PromoCalendar/CalendarWrapper';\nimport { withRouter } from 'react-router-dom';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport moment from 'moment';\nimport { isEqual } from 'lodash';\nimport PageLoader from '../../utils/Loader';\nimport {\n  markdownCalendarDatePlot,\n  markdownCalendarData,\n  markdownCalendarGraphData,\n} from '../Content/Promotions/PromoCalendar/calendarAction';\nimport AddSkuFilter from '../createMarkdown/AddSkuFilter';\nimport { getAllFilters } from '../../actions/markDownCommonActions';\nimport { getGlobalPromoPerMarkdown } from '../../actions/markdown_global_promo';\nimport _ from 'underscore';\n\nimport AlertDanger from '../../utils/AlertMessage/alertDanger';\n\nimport { Element, scroller } from 'react-scroll';\n\nimport MarkdownPart from './detailedMarkdown';\n\nimport GlobalPromosmark from './GlobalPromosMarkdown';\n\nexport class PromoCalendar extends Component {\n  calendarData;\n\n  constructor(props) {\n    super(props);\n    let matchQueryTimeSamp = document.location.search.match(/timeMonth=([^&]*)/i);\n    let momentObj = matchQueryTimeSamp ? moment(matchQueryTimeSamp[1]) : null;\n    let checkMatchQueryTimeSapm =\n      matchQueryTimeSamp && matchQueryTimeSamp.length && matchQueryTimeSamp[1];\n\n    this.state = {\n      loader: false,\n      showPromotionMain: false,\n      showPromotionMainWithValues: false,\n      startDate: checkMatchQueryTimeSapm ? momentObj.toDate() : new Date(),\n      selectedYear: checkMatchQueryTimeSapm ? momentObj.year() : new Date().getFullYear(),\n      selectedMonth: 'Sep',\n      selectedView: 'Month',\n      fiscal_monthnum: checkMatchQueryTimeSapm ? momentObj.month() : Number(new Date().getMonth()),\n      fiscal_quarter: checkMatchQueryTimeSapm ? momentObj.format('Q') : 1,\n      calendarWrapperArr: [],\n      calendarWrapperArr1: [],\n\n      historyStartDate: 'null',\n      historyEndDate: 'null',\n      historyQuarter: 'null',\n      histortFiscalMonth: 'null',\n      //moment(matchQueryTimeSt[1]).toDate()\n      calendarDataArr: [],\n      initialLoadFlag: true,\n      selectedDate: checkMatchQueryTimeSapm ? momentObj.toDate() : null,\n\n      selectedDepartment: null,\n      selectedCategory: null,\n      selectedSKU: null,\n      selectedSubCategory: null,\n      skuList: null,\n      markdownId: null,\n      markdownStartDate: null,\n      markdownEndDate: null,\n      markdownName: null,\n      selectedMarkDownSku: {},\n      showGraph: false,\n      markdownlinkShow: 1,\n      //filter states\n      filterCategory: null,\n      filterSubCategory: null,\n      filterClass: null,\n      filterSubClass: null,\n      filterBrand: null,\n      showPromoDetailTable: false,\n      generateCadenceError: false,\n      showToggleContinious: false,\n      stDt: null,\n      enDt: null,\n    };\n\n    this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n  }\n  componentWillMount() {\n    this.setState({ loader: true });\n    this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n    let { markdownCalendarDatePlot } = this.props;\n    let startDate = this.calendarData && this.calendarData.startDate,\n      Quarter = this.calendarData && this.calendarData.quarter;\n\n    let matchQueryTimeSt = document.location.search.match(/timeMonth=([^&]*)/i);\n\n    let momentObjSt = matchQueryTimeSt ? moment(matchQueryTimeSt[1]) : null;\n\n    if (matchQueryTimeSt && matchQueryTimeSt.length && matchQueryTimeSt[1]) {\n      let year = momentObjSt.year() + 1;\n      let selectedDate = momentObjSt.toDate();\n      let yearMonth = momentObjSt.format('YYYY-MMM');\n      let month = momentObjSt.month() + 1;\n      let Quater = momentObjSt.format('Q');\n      this.setState({\n        fiscal_quarter: Quater,\n        selectedDate: selectedDate,\n        fiscal_monthnum: month,\n        selectedYear: year,\n        selectedMonth: yearMonth.slice(5, 8),\n      });\n    }\n\n    let date = startDate && startDate !== 'null' ? startDate : new Date();\n    let year =\n        new Date(date).getMonth() !== 0\n          ? new Date(date).getFullYear() + 1\n          : new Date(date).getFullYear(),\n      fiscalDate =\n        new Date(date).getMonth() !== 0 ? new Date(moment(date).add(1, 'years')) : new Date(date);\n\n    this.setState({\n      selectedYear: year,\n      selectedDate: fiscalDate,\n    });\n    if (Quarter) {\n      this.setState({\n        selectedView: 'Quarter',\n      });\n    }\n\n    markdownCalendarDatePlot({\n      fiscal_year: year,\n    });\n\n    // if (startDate && startDate !== null) {\n    //   let year =\n    //     new Date(startDate).getMonth() !== 0\n    //       ? new Date(startDate).getFullYear() + 1\n    //       : new Date(startDate).getFullYear();\n\n    //   if (Quarter && Quarter !== null) {\n    //     this.setState({\n    //       selectedView: \"Quarter\"\n    //     });\n    //   }\n    //   this.setState({\n    //     selectedYear: year,\n    //     selectedDate: new Date(startDate)\n    //   });\n    //   markdownCalendarDatePlot({\n    //     fiscal_year: year\n    //   });\n    // } else {\n\n    //   markdownCalendarDatePlot({\n    //     fiscal_year: this.state.selectedYear\n    //   });\n    // }\n  }\n  //72 lines\n  componentDidUpdate(oldProps, oldState) {\n    this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n    let {\n      initialLoadFlag,\n      selectedView,\n      fiscal_quarter,\n      fiscal_monthnum,\n      selectedYear,\n    } = this.state;\n    let { calendarStrucure, calendarDataPerYear, markdownCalendarDatePlot } = this.props;\n\n    let Quarter = this.calendarData && this.calendarData.quarter,\n      fiscalMonth1 = this.calendarData && this.calendarData.fiscalMonth,\n      fiscalMonth = 0,\n      Month = new Date().getMonth();\n\n    fiscalMonth = Month === 0 ? 1 : Math.ceil(Month / 3);\n\n    //calling for 1st load from local storage\n    if (oldProps.calendarStrucure !== calendarStrucure && initialLoadFlag) {\n      let tempMonth =\n        fiscalMonth1 && fiscalMonth1 !== 'null' ? fiscalMonth1 : new Date().getMonth();\n\n      let fiscalQuarter = Quarter && Quarter !== 'null' ? Quarter : fiscalMonth;\n      this.setState({\n        fiscal_monthnum: tempMonth === 0 ? 12 : tempMonth,\n        fiscal_quarter: fiscalQuarter,\n        initialLoadFlag: false,\n      });\n\n      this.getCalendarWrapper(selectedView);\n    }\n    if (!isEqual(oldProps.calendarStrucure, calendarStrucure) && !initialLoadFlag) {\n      // this.setState({ fiscal_monthnum: 1, fiscal_quarter: 1 });\n\n      this.getCalendarWrapper(selectedView);\n    }\n\n    ///\n    if (oldProps.calendarDataPerYear !== calendarDataPerYear) {\n      /*------------------weekly navigation enable/disable function------------------ */\n\n      /*-------------------------setting Calendar Data--------------------------*/\n      this.setState({\n        calendarDataArr: calendarDataPerYear,\n        loader: false,\n      });\n    }\n\n    ///\n\n    // debugger\n    if (\n      oldState.fiscal_monthnum !== fiscal_monthnum ||\n      (fiscal_quarter && oldState.fiscal_quarter !== fiscal_quarter)\n    ) {\n      // debugger\n      if (oldState.selectedYear !== selectedYear) {\n        markdownCalendarDatePlot({\n          fiscal_year: selectedYear,\n        });\n      } else {\n        this.getCalendarWrapper(selectedView);\n      }\n    }\n  }\n  componentWillUnmount() {\n    localStorage.setItem(\n      'calendarData',\n      JSON.stringify({\n        startDate: this.state.historyStartDate,\n        endDate: this.state.historyEndDate,\n        fiscalMonth: this.state.histortFiscalMonth,\n      })\n    );\n\n    if (this.state.selectedView === 'Quarter') {\n      localStorage.setItem(\n        'calendarData',\n        JSON.stringify({\n          quarter: this.state.historyQuarter,\n        })\n      );\n    }\n  }\n  //170 --- 141 lines\n  getCalendarWrapper = (val) => {\n    this.calendarData = JSON.parse(localStorage.getItem('calendarData'));\n    let { calendarStrucure, markdownCalendarData } = this.props;\n    let {\n      fiscal_monthnum,\n      selectedYear,\n      fiscal_quarter,\n      filterCategory,\n      filterSubCategory,\n      filterClass,\n      filterSubClass,\n      filterBrand,\n    } = this.state;\n\n    let calendarWrapperArr = [],\n      start_date = null,\n      end_date;\n\n    let startDate = this.calendarData && this.calendarData.startDate,\n      endDate = this.calendarData && this.calendarData.endDate;\n\n    if (\n      calendarStrucure !== undefined ||\n      (calendarStrucure !== null && calendarStrucure.plot_data && calendarStrucure.plot_data.length)\n    ) {\n      var fiscal_week_52_patch = false;\n      var curr_date = moment(new Date()).format('YYYY-MM-DD');\n      var temp_fiscal_week = 0;\n      var temp_fiscal_monthnum = 0;\n      calendarStrucure.plot_data.forEach((ele) => {\n        //fetching fiscal week and fiscal month\n        if (\n          ele.start_date <= curr_date &&\n          ele.end_date >= curr_date &&\n          fiscal_monthnum === ele.fiscal_monthnum &&\n          ((fiscal_monthnum < 12 && new Date(ele.start_date).getFullYear() + 1 === selectedYear) ||\n            (fiscal_monthnum === 12 && new Date(ele.start_date).getFullYear() === selectedYear))\n        ) {\n          temp_fiscal_week = Number(ele.fiscal_week);\n          temp_fiscal_monthnum = Number(ele.fiscal_monthnum);\n        }\n      });\n      //for month level view\n      if (val === 'Month') {\n        calendarStrucure.plot_data.forEach((ele) => {\n          //checking for fiscal week which is belong to 2 diff. month\n          if (\n            temp_fiscal_week !== 0 &&\n            Number(ele.fiscal_week) === temp_fiscal_week &&\n            Number(ele.fiscal_monthnum) !== fiscal_monthnum &&\n            fiscal_monthnum - temp_fiscal_monthnum === 1\n          ) {\n            calendarWrapperArr.push(ele);\n          }\n          //for checking fiscal week which belonging to fiscal month\n          if (\n            Number(ele.fiscal_monthnum) === fiscal_monthnum &&\n            ((fiscal_monthnum < 12 &&\n              new Date(ele.start_date).getFullYear() + 1 === selectedYear) ||\n              (fiscal_monthnum < 12 &&\n                new Date(ele.start_date).getFullYear() + 2 === selectedYear) ||\n              (fiscal_monthnum === 12 && new Date(ele.start_date).getFullYear() === selectedYear))\n          ) {\n            // debugger\n\n            calendarWrapperArr.push(ele);\n          }\n        });\n      } else {\n        //view for quater\n        let tempArr = calendarStrucure.plot_data;\n        for (let index = 0; index < tempArr.length; index++) {\n          //for checking quater 1 starting from last week of year\n          if (tempArr[index].fiscal_quarter === 1 && tempArr[index].fiscal_week === 52) {\n            fiscal_week_52_patch = true;\n          }\n          //for cheking quaters\n          if (\n            Number(tempArr[index].fiscal_quarter) === fiscal_quarter &&\n            (new Date(tempArr[index].start_date).getFullYear() + 1 === selectedYear ||\n              new Date(tempArr[index].start_date).getFullYear() === selectedYear)\n          ) {\n            //for margin single day week to previous week which is having same fiscal week\n            if (\n              index < tempArr.length - 1 &&\n              tempArr[index].fiscal_week === tempArr[index + 1].fiscal_week\n            ) {\n              tempArr[index].end_date = tempArr[index + 1].end_date;\n              calendarWrapperArr.push(tempArr[index]);\n              index++;\n            } else {\n              calendarWrapperArr.push(tempArr[index]);\n            }\n          }\n        }\n      }\n      if (startDate && startDate !== 'null') {\n        markdownCalendarData({\n          start_date: startDate,\n          end_date: endDate,\n          sku: '',\n          category: filterCategory,\n          subcategory: filterSubCategory,\n          classname: filterClass,\n          subclass: filterSubClass,\n          brand: filterBrand,\n        });\n        localStorage.setItem(\n          'calendarData',\n          JSON.stringify({\n            startDate: null,\n            endDate: null,\n            fiscalMonth: null,\n            // quarter: null\n          })\n        );\n        if (this.state.selectedView === 'Quarter') {\n          localStorage.setItem(\n            'calendarData',\n            JSON.stringify({\n              quarter: null,\n            })\n          );\n        }\n      } else {\n        start_date =\n          calendarWrapperArr && calendarWrapperArr[0] ? calendarWrapperArr[0].start_date : null;\n\n        if (fiscal_week_52_patch === true) {\n          end_date =\n            calendarWrapperArr && calendarWrapperArr.length\n              ? calendarWrapperArr[calendarWrapperArr.length - 2].end_date\n              : null;\n        } else {\n          end_date =\n            calendarWrapperArr && calendarWrapperArr.length\n              ? calendarWrapperArr[calendarWrapperArr.length - 1].end_date\n              : null;\n        }\n        markdownCalendarData({\n          start_date: start_date,\n          end_date: end_date,\n          sku: '',\n          category: filterCategory,\n          subcategory: filterSubCategory,\n          classname: filterClass,\n          subclass: filterSubClass,\n          brand: filterBrand,\n        });\n      }\n      // }\n    }\n\n    this.setState(\n      (state) => {\n        return {\n          ...state,\n          calendarWrapperArr,\n          historyStartDate: start_date,\n          historyEndDate: end_date,\n          histortFiscalMonth: state.fiscal_monthnum,\n          historyQuarter: state.fiscal_quarter,\n        };\n      },\n      () => {\n        //reload page and set the local storage\n\n        window.onbeforeunload = (e) => {\n          if (\n            e.currentTarget.performance.navigation.type ===\n            e.currentTarget.performance.navigation.TYPE_RELOAD\n          ) {\n            localStorage.setItem(\n              'calendarData',\n              JSON.stringify({\n                startDate: start_date,\n                endDate: end_date,\n                fiscalMonth: this.state.histortFiscalMonth,\n              })\n            );\n            if (this.state.selectedView === 'Quarter') {\n              localStorage.setItem(\n                'calendarData',\n                JSON.stringify({\n                  quarter: this.state.historyQuarter,\n                })\n              );\n            }\n          }\n        };\n      }\n    );\n  };\n\n  toggleMonthQuarter = (val) => {\n    if (this.state.selectedView !== val) {\n      this.setState({ selectedView: val, loader: true });\n\n      this.getCalendarWrapper(val);\n    }\n  };\n\n  navCallBack = (payload) => {\n    this.setState(payload);\n  };\n\n  onFilterClick = (data) => {\n    this.props.markdownCalendarData({\n      start_date: this.state.historyStartDate,\n      end_date: this.state.historyEndDate,\n      sku: '',\n      category: data.SelectedCategory ? data.SelectedCategory.value : '',\n      subcategory: data.SelectedSubCategory ? data.SelectedSubCategory.value : '',\n      classname: data.SelectedClass ? data.SelectedClass.value : '',\n      subclass: data.SelectedSubClass ? data.SelectedSubClass.value : '',\n      brand: data.SelectedBrand ? data.SelectedBrand.value : '',\n    });\n\n    this.setState({\n      filterCategory: data.SelectedCategory ? data.SelectedCategory.value : '',\n      filterSubCategory: data.SelectedSubCategory ? data.SelectedSubCategory.value : '',\n      filterClass: data.SelectedClass ? data.SelectedClass.value : '',\n      filterSubClass: data.SelectedSubClass ? data.SelectedSubClass.value : '',\n      filterBrand: data.SelectedBrand ? data.SelectedBrand.value : '',\n    });\n  };\n\n  showMarkdown = (val) => {\n    this.setState({\n      // loader: true,\n      skuList: val.sku_ids,\n      markdownId: val.mrk_id,\n      // loader: true,\n      markdownStartDate: val.start_date,\n      markdownEndDate: val.end_date,\n      markdownName: val.name,\n      selectedMarkDownSku: val.sku_ids[0],\n      showGraph: !this.state.showGraph,\n    });\n\n    this.props.markdownCalendarGraphData({\n      mrk_id: val.mrk_id,\n      sku_ids: val.sku_ids[0],\n    });\n\n    scroller.scrollTo('showPromotionTag', {\n      duration: 800,\n      delay: 0,\n      smooth: 'easeInOutQuart',\n    });\n  };\n\n  promoButtonClick = (val) => {\n    this.setState({\n      markdownId: val.mrk_id,\n      markdownStartDate: val.start_date,\n      markdownEndDate: val.end_date,\n      markdownName: val.name,\n      // loader:true\n    });\n    let markdownid = val.mrk_id;\n    this.props.getGlobalPromoPerMarkdown(markdownid);\n  };\n\n  call_edit_adgroup = (data) => {\n    this.props.history.push(\n      `/createpromotion?copyCampaign=true&campaignId=${data.campaignId}&adgroupIds=${data.adgroupId}&promoIds=${data.promoId}`\n    );\n  };\n\n  onDropdownchange(tag, value) {\n    if (tag === 'department') {\n      this.setState({\n        selectedDepartment: value,\n      });\n    }\n    if (tag === 'category') {\n      this.setState({\n        selectedCategory: value,\n      });\n    }\n\n    if (tag === 'subCategory') {\n      this.setState({\n        selectedSubCategory: value,\n      });\n    }\n\n    if (tag === 'sku') {\n      this.setState({\n        selectedSKU: value,\n      });\n    }\n  }\n\n  onDropdownSkuchange = (val) => {\n    let skuvalue = val.value;\n    let markdownID = this.state.markdownId;\n\n    this.setState({\n      selectedMarkDownSku: skuvalue,\n    });\n\n    this.props.markdownCalendarGraphData({\n      mrk_id: markdownID,\n      sku_ids: skuvalue,\n    });\n  };\n\n  promoDetailsHandler = (active) => {\n    this.setState({\n      showPromoDetailTable: active,\n      generateCadenceError: true,\n    });\n  };\n\n  onCalEventClick = (event) => {\n    console.log(event.title);\n  };\n\n  render() {\n    let generateCadenceError =\n      !!this.state.showPromoDetailTable && this.props.promoDataForMarkdown.length == 0;\n\n    let custGroupArray = [],\n      businessDescArray = [],\n      shopArray = [],\n      skuArray = [],\n      brandArray = [];\n    if (this.props.markdownFilter && this.props.markdownFilter.data) {\n      this.props.markdownFilter.data.category.map((filterData) => {\n        custGroupArray.push({\n          value: filterData.id,\n          label: filterData.category,\n        });\n      });\n\n      this.props.markdownFilter.data.category.map((filterData) => {\n        businessDescArray.push({\n          value: filterData.id,\n          label: filterData.category,\n        });\n      });\n\n      this.props.markdownFilter.data.subCategory.map((filterData) => {\n        shopArray.push({\n          value: filterData.id,\n          label: filterData.subcategory,\n        });\n      });\n\n      this.props.markdownFilter.data.skuGroup.map((filterData) => {\n        skuArray.push({\n          value: filterData.id,\n          label: filterData.sku_group,\n        });\n      });\n\n      this.props.markdownFilter.data.brand.map((filterData) => {\n        brandArray.push({\n          value: filterData.id,\n          label: filterData.class,\n        });\n      });\n    }\n\n    return (\n      <div>\n        <PageLoader loader={this.props.loader || this.state.loader}>\n          {!this.state.showPromotionMain ? (\n            <div className=\"calendarContainer\" id=\"main-calendar-container\">\n              <div className=\"promo\">\n                <div\n                  className=\"card CalendarMain promoCalendarDiv1\"\n                  id=\"promocalendar-maincontainer\">\n                  <h4 className=\"promoCal-brdcrm mb-10\">\n                    Markdown Optimization / <span className=\"font-bold color-blue\">Calendar</span>\n                  </h4>\n                  <hr className=\"mb-2\" style={{ marginTop: '-3px' }} />\n                  <div className=\"row promocal-subdiv\">\n                    <div className=\"col-md-12\">\n                      <AddSkuFilter\n                        subClassID={this.props.subClassID}\n                        brandID={this.props.brandID}\n                        onFilterClick={this.onFilterClick}\n                      />\n                    </div>\n                  </div>\n                  {/* <RetailCalendarDatePicker\n                    startDateId=\"your_unique_start_date_id_rp\"\n                    endDateId=\"your_unique_end_date_id_rp\"\n                    startDate={this.state.stDt}\n                    endDate={this.state.enDt}\n                    onDatesChange={({ startDate, endDate }) => {\n                      this.setState({ stDt: startDate, enDt: endDate });\n                    }}\n                  /> */}\n                  <hr className=\"dotted-line\" />\n                  <Calendar onCalEventClick={this.onCalEventClick} />\n                </div>\n              </div>\n\n              <Element name=\"showPromotionTag\" className=\"element\" style={{ marginTop: '2%' }}>\n                {this.props.calendarGraphData && !this.state.showPromoDetailTable && (\n                  <MarkdownPart\n                    selectedCadenceSet={this.props.calendarGraphData}\n                    markdownName={this.state.markdownName}\n                    markdownStartDate={this.state.markdownStartDate}\n                    markdownEndDate={this.state.markdownEndDate}\n                    markdownId={this.state.markdownId}\n                    skuList={this.state.skuList}\n                    selectedSku={this.state.selectedMarkDownSku}\n                    onChangeSku={this.onDropdownSkuchange}\n                    showGraph={this.state.showGraph}\n                  />\n                )}\n              </Element>\n\n              <Element name=\"showPromotionTag\" className=\"element\">\n                {this.props.promoDataForMarkdown &&\n                  this.props.promoDataForMarkdown.length > 0 &&\n                  this.state.showPromoDetailTable && (\n                    <GlobalPromosmark\n                      markdownName={this.state.markdownName}\n                      markdownStartDate={this.state.markdownStartDate}\n                      markdownEndDate={this.state.markdownEndDate}\n                      markdownId={this.state.markdownId}\n                      promoData={this.props.promoDataForMarkdown}\n                      loader={this.state.loader}\n                    />\n                  )}\n              </Element>\n              <div className=\"alertDivs\">\n                {this.state.generateCadenceError &&\n                  generateCadenceError &&\n                  !this.props.loader &&\n                  this.props.promoDataForMarkdown.length === 0 && (\n                    <AlertDanger\n                      message=\"No Data Found\"\n                      show={(() => {\n                        setTimeout(() => {\n                          this.setState({\n                            generateCadenceError: false,\n                          });\n                        }, 5000);\n                        return this.state.generateCadenceError;\n                      })()}\n                    />\n                  )}\n              </div>\n            </div>\n          ) : (\n            {}\n          )}\n        </PageLoader>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    view: state.calendar.view,\n    calendarStrucure: state.calendar.markdownCalendarPlotData,\n    calendarDataPerYear: state.calendar.markdownCalendarData,\n    loader: state.markdown.loader,\n    validationLoader: state,\n    // summaryCumulativeFilters: state,\n    markdownFilter: state.markDownFilter.data,\n    calendarGraphData: state.calendar.markdownCalendarGraphData,\n    // markdownFilter: state.markDownFilter,\n    promoDataForMarkdown: state.globalPromos.globalPromoPerMarkDownData,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    markdownCalendarDatePlot: (val) => dispatch(markdownCalendarDatePlot(val)),\n    markdownCalendarData: (val) => dispatch(markdownCalendarData(val)),\n    markdownCalendarGraphData: (val) => dispatch(markdownCalendarGraphData(val)),\n    getAllFilters: (val) => dispatch(getAllFilters(val)),\n    getGlobalPromoPerMarkdown: (payload) => dispatch(getGlobalPromoPerMarkdown(payload)),\n\n    // getFilterData: val => dispatch(getFilterData(val))\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(PromoCalendar));\n"]},"metadata":{},"sourceType":"module"}