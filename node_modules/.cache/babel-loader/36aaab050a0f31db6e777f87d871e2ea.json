{"ast":null,"code":"import _defineProperty from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/services/filters/index.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { labels, validations, filterType } from './config';\nimport Select from '../select';\nimport './index.css';\nimport { connect } from 'react-redux';\nimport DateRangePicker from '../RetailCalendarDatePicker';\nimport FilterActions from '../../actions/filtersAction';\nimport { toast } from 'react-toastify';\nimport _ from 'lodash';\n\nvar Filters =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Filters, _Component);\n\n  function Filters(props) {\n    var _this;\n\n    _classCallCheck(this, Filters);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Filters).call(this, props));\n\n    _this.onHierarchyOneSelection = function (val) {\n      console.log('aaaaaaaaaaaaaaa', val);\n\n      var hierarchyClone = _.cloneDeep(_this.props.filtersOptions);\n\n      var valiadtion = validations[val[0].label];\n\n      var findIndex = function findIndex(index, key) {\n        return _.findIndex(hierarchyClone, {\n          type: \"\".concat(valiadtion[key][index])\n        });\n      }; //finding index num for swap case from validations\n\n\n      if (valiadtion && !_.isEmpty(valiadtion.swap)) {\n        //swaping filters\n        var a = findIndex(0, 'swap'),\n            b = findIndex(1, 'swap');\n        var temp = hierarchyClone[a];\n        hierarchyClone[a] = hierarchyClone[b];\n        hierarchyClone[b] = temp;\n      }\n\n      if (valiadtion && !_.isEmpty(valiadtion.remove)) {\n        //remove filters case\n        _.map(valiadtion.remove, function (item, i) {\n          _.remove(hierarchyClone, function (itm, index) {\n            return index === findIndex(i, 'remove');\n          });\n        });\n      }\n\n      _this.setState({\n        hierarchy: hierarchyClone\n      });\n\n      return hierarchyClone;\n    };\n\n    _this.setSelectionHandler =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(val, actionName, name) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(name === 'customStoreGroup')) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return _this.props.setSelectedCustomStoreGroup(val.map(function (v) {\n                  return v.value;\n                }));\n\n              case 3:\n                return _context.abrupt(\"return\");\n\n              case 4:\n                if (!(name === 'customStyleGroup')) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _this.props.setSelectedCustomGroup(val.map(function (v) {\n                  return v.value;\n                }), 'name');\n\n                _context.next = 8;\n                return _this.props.setSelectedCustomGroup(val.map(function (v) {\n                  return v.id;\n                }), 'id');\n\n              case 8:\n                return _context.abrupt(\"return\");\n\n              case 9:\n                _context.next = 11;\n                return _this.props[actionName](val.map(function (e) {\n                  return e.label;\n                }));\n\n              case 11:\n                return _context.abrupt(\"return\");\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2, _x3) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.getHierarchyOptions =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(val, filterIndex, currFilterName, isHierarchyPrev, nextFilterName, isHierarchyNext) {\n        var hierarchy, nameCapitalized, resetHierachies;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                !Array.isArray(val) && (val = [val]);\n                hierarchy = _.cloneDeep(_this.state.hierarchy);\n\n                if (!(currFilterName === 'hierarchy1')) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                _context3.next = 5;\n                return _this.onHierarchyOneSelection(val);\n\n              case 5:\n                hierarchy = _context3.sent;\n\n              case 6:\n                if (_.findIndex(hierarchy, {\n                  type: 'hierarchy1'\n                }) > filterIndex) {\n                  _this.setState({\n                    hierarchy: _this.props.filtersOptions\n                  }); //reset filters that are removed or swapped when filters that comes before H1 are set\n\n                }\n\n                nameCapitalized = currFilterName && currFilterName.charAt(0).toUpperCase() + currFilterName.slice(1); //capitalizing the name to match action/reducer name\n\n                resetHierachies = {};\n\n                _.map(hierarchy, function (item, index) {\n                  if (index > filterIndex) {\n                    resetHierachies[item.type] = null; //all fiters value, which comes after selected filter becomes null(reset)\n                  }\n                });\n\n                _this.setState(_objectSpread(_defineProperty({}, currFilterName, val), resetHierachies),\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee2() {\n                  var actionName, req;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          actionName = isHierarchyPrev ? \"setSelected\".concat(nameCapitalized) : \"setSelectedExtraFil\".concat(nameCapitalized);\n                          _context2.next = 3;\n                          return _this.setSelectionHandler(val, actionName, currFilterName);\n\n                        case 3:\n                          //handles setSelected action calls\n                          req = {};\n\n                          _.map(hierarchy, function (item, index) {\n                            if (index <= filterIndex) {\n                              var _nameCapitalized = item.type && item.type.charAt(0).toUpperCase() + item.type.slice(1); //capitalizing the name to match action/reducer name\n                              // if (_.isEmpty(this.props[`selected${nameCapitalized}`])) return; //uncomment if u want empty filters removed\n\n\n                              var filterName = item.type === 'storeCluster' ? 'store_cluster' : item.type === 'exclusionList' ? 'exclusion_list' : item.type === 'styleColor' ? 'style_color' : item.type;\n                              req[filterName] = _this.props[\"selected\".concat(_nameCapitalized)]; //this goes as filters req obj in api calls\n                            }\n                          });\n\n                          _this.setState({\n                            filters: _objectSpread({}, req)\n                          });\n\n                        case 6:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                })));\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x4, _x5, _x6, _x7, _x8, _x9) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.setDrop = function (val) {\n      var req = {};\n      var selItems = val.map(function (item) {\n        return item.label;\n      });\n      req['drop'] = selItems;\n\n      _this.setState({\n        filters: _objectSpread({}, req),\n        drops: val\n      }, function () {\n        _this.props.setSelectedDrops(val.map(function (v) {\n          return v.value;\n        }));\n      });\n    };\n\n    _this.actionCallHandler = function (func, isHierarchyNext, nextFilterName, req) {\n      console.log('filterName console actionCallHandler', nextFilterName); // let typeName = isHierarchyNext\n      //   ? nextFilterName.toUpperCase()\n      //   : labels[nextFilterName].toUpperCase();\n      // if (nextFilterName === 'store') typeName = 'STORE_CODE';\n\n      var typeName = filterType[nextFilterName];\n      var reqObj = {\n        filters: req,\n        allowInactiveProducts: _this.props.allowInactiveProducts || false\n      };\n      if (isHierarchyNext) reqObj.hierarchyType = typeName;\n      if (!isHierarchyNext) reqObj.filterType = typeName;\n\n      if (nextFilterName === 'customStyleGroup') {\n        var _req = {\n          filters: reqObj.filters,\n          disable_empty_flag: _this.props.disable_empty_flag && !_this.props.isEdit ? _this.props.disable_empty_flag : false\n        };\n        reqObj = _req;\n        func = \"fetchStyleGroups\";\n      }\n\n      if (nextFilterName === 'customStoreGroup') {\n        reqObj = {};\n        func = \"getCustomStores\";\n      }\n\n      _this.props[func](reqObj);\n    };\n\n    _this.filterOnFocusHandler = function (filterIndex, filterName, isHierarchy) {\n      var options = _this.props[filterName];\n      if (filterName && options && !options.callApi && !_.isEmpty(_this.props[filterName]) || !_this.validateFilters(filterIndex)) //if filter options already exists or if all of the mandatory filters that comes before this filter is not selected , return\n        return;\n\n      if (filterName === 'channel') {\n        _this.props.getExtraFilterChannel();\n\n        return;\n      }\n\n      var func = isHierarchy ? \"getHierarchyOptions\" : \"getExtraFiltersOptions\";\n      var req = {};\n\n      _.map(_this.state.hierarchy, function (item, index) {\n        if (index < filterIndex) {\n          var nameCapitalized = item.type && item.type.charAt(0).toUpperCase() + item.type.slice(1); //capitalizing the name to match action/reducer name\n\n          var selected = _this.props[\"selected\".concat(nameCapitalized)]; // if (_.isEmpty(selected)) return; //uncomment if u want empty filters removed\n\n\n          var _filterName = item.type === 'storeCluster' ? 'store_cluster' : item.type === 'exclusionList' ? 'exclusion_list' : item.type === 'styleColor' ? 'style_color' : item.type;\n\n          req[_filterName] = selected; //this goes as filters req obj in api calls\n\n          if (item.type === 'channel' && selected[0] === 'Web') req['ecom_flag'] = [1];\n          if (item.type === 'channel' && selected[0] === 'Outlet') req['retail_flag'] = [1];\n        }\n      });\n\n      if (filterName && _this.props[func]) {\n        //&& Object.keys(req).length\n        _this.actionCallHandler(func, isHierarchy, filterName, req); //calles next filters action, to get it's options\n\n      }\n    };\n\n    _this.setCustomStyleGroup = function (val) {\n      // let val = [item];\n      var selItems = val.map(function (item) {\n        return item.label;\n      }); // req['stores'] = selItems;\n\n      var newFilters = _objectSpread({}, _this.state.filters, {\n        customStyleGroup: selItems\n      });\n\n      _this.setState({\n        filters: newFilters,\n        customStyleGroup: val\n      }, function () {\n        // this.props.setSelectedCustomGroup(val.map((v) => v.id));\n        _this.props.setSelectedCustomGroup(val.map(function (v) {\n          return v.value;\n        }), 'name');\n\n        _this.props.setSelectedCustomGroup(val.map(function (v) {\n          return v.id;\n        }), 'id');\n      });\n    };\n\n    _this.setCustomStores = function (val) {\n      var selItems = val.map(function (item) {\n        return item.label;\n      });\n\n      var newFilters = _objectSpread({}, _this.state.filters, {\n        customStoreGroup: selItems\n      });\n\n      _this.setState({\n        filters: newFilters,\n        customStoreGroup: val\n      }, function () {\n        _this.props.setSelectedCustomStoreGroup(val.map(function (v) {\n          return v.value;\n        }));\n      });\n    };\n\n    _this.reset = function () {\n      _this.props.onReset && _this.props.onReset();\n\n      _this.setState({\n        startDate: null,\n        endDate: null,\n        country: null,\n        channel: null,\n        storeCluster: null,\n        customStoreGroup: null,\n        store: null,\n        hierarchy1: null,\n        hierarchy2: null,\n        hierarchy3: null,\n        hierarchy4: null,\n        hierarchy5: null,\n        season: null,\n        matrix: null,\n        exclusionList: null,\n        clearance: null,\n        customStyleGroup: null,\n        styleColor: null,\n        hierarchy: _this.props.filtersOptions,\n        filters: {}\n      }, function () {\n        if (_this.props.from !== 'draft/status') _this.props.resetFilters(); ////////// handling reset issues rising bcs of tabs, only reset this component state, not reducer\n      });\n    };\n\n    _this.onDatesChange = function (_ref4) {\n      var startDate = _ref4.startDate,\n          endDate = _ref4.endDate;\n\n      _this.setState({\n        startDate: startDate,\n        endDate: endDate\n      }, function () {\n        var weeks = [];\n\n        if (endDate) {\n          for (var i = startDate.clone(); i <= endDate; i = i.add(7, 'd')) {\n            weeks.push(i.week());\n          }\n        }\n\n        _this.props.setDateRange({\n          startDate: startDate && startDate.format('YYYY-MM-DD'),\n          endDate: endDate && endDate.format('YYYY-MM-DD'),\n          weeks: weeks\n        });\n      });\n    };\n\n    _this.validateFilters = function (filterIndex, dateRange) {\n      var hierarchy = _this.state.hierarchy;\n\n      for (var i = 0; i < filterIndex; i++) {\n        var type = hierarchy[i] && hierarchy[i].type;\n        var nameCapitalized = type && type.charAt(0).toUpperCase() + type.slice(1); //capitalizing the name to match action/reducer name\n\n        if (hierarchy[i] && hierarchy[i].isMandatory && _.isEmpty(_this.props[\"selected\".concat(nameCapitalized)])) {\n          return false;\n        }\n      }\n\n      if (dateRange && (_.isEmpty(_this.state.startDate) || _.isEmpty(_this.state.endDate))) return false;\n      return true;\n    };\n\n    _this.onFilterHandler = function () {\n      if (!_this.validateFilters(_this.state.hierarchy.length, _this.props.dateRange)) {\n        toast.error(\"Please select mandatory filters\", {\n          autoClose: 15000,\n          hideProgressBar: true\n        });\n        return;\n      }\n\n      _this.props.onFilter({\n        filters: _this.state.filters,\n        startDate: _this.state.startDate,\n        endDate: _this.state.endDate,\n        customStyleGroup: _this.state.customStyleGroup\n      });\n    };\n\n    _this.state = {\n      filters: {},\n      startDate: null,\n      endDate: null,\n      hierarchy: [],\n      hierarchy1: props.retainFilters && props.selectedHierarchy1 ? props.selectedHierarchy1.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      hierarchy2: props.retainFilters && props.selectedHierarchy2 ? props.selectedHierarchy2.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      hierarchy3: props.retainFilters && props.selectedHierarchy3 ? props.selectedHierarchy3.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      hierarchy4: props.retainFilters && props.selectedHierarchy4 ? props.selectedHierarchy4.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      hierarchy5: props.retainFilters && props.selectedHierarchy5 ? props.selectedHierarchy5.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      hierarchy6: props.retainFilters && props.selectedHierarchy6 ? props.selectedHierarchy6.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      hierarchy7: props.retainFilters && props.selectedHierarchy7 ? props.selectedHierarchy7.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      hierarchy8: props.retainFilters && props.selectedHierarchy8 && props.location.state ? props.location.state && props.location.state.styles.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : props.retainFilters && props.selectedHierarchy8 && _this.props.styleGroupEdit ? props.selectedHierarchy8.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      customStyleGroup: props.retainFilters && props.selectedCustomStyleGroup ? props.selectedCustomStyleGroup.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      stores: props.retainFilters && props.selectedStores ? props.selectedStores.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      season: props.retainFilters && props.selectedSeason ? props.selectedSeason.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      clearance: props.retainFilters && props.selectedClearance ? props.selectedClearance.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      matrix: props.retainFilters && props.selectedMatrix ? props.selectedMatrix.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      exclusionList: props.retainFilters && props.selectedExclusionList ? props.selectedExclusionList.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      styleColor: props.retainFilters && props.selectedStyleColor && props.location.state && props.location.state.styles ? props.location.state.styles.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : props.retainFilters && props.selectedStyleColor ? props.selectedStyleColor.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      country: props.retainFilters && props.selectedCountry ? props.selectedCountry.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      storeCluster: props.retainFilters && props.selectedStoreCluster ? props.selectedStoreCluster.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      store: props.retainFilters && props.selectedStore ? props.selectedStore.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      channel: props.retainFilters && props.selectedChannel ? props.selectedChannel.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null,\n      customStoreGroup: props.retainFilters && props.selectedCustomStoreGroup ? props.selectedCustomStoreGroup.map(function (e) {\n        return {\n          value: e,\n          label: e\n        };\n      }) : null\n    }; // +  !props.retainFilters && props.resetFilters();\n    // !props.isEdit &&\n    //   props.getHierarchyOptions({\n    //     filters: {},\n    //     hierarchyType: 'HIERARCHY1',\n    //     allowInactiveProducts: this.props.allowInactiveProducts || false,\n    //   });\n\n    props.getExtraFiltersOptions({\n      filters: {},\n      filterType: 'COUNTRY',\n      allowInactiveProducts: _this.props.allowInactiveProducts || false\n    });\n\n    if (props.retainFilters && props.location.state) {\n      props.setSelectedExtraFilStyleColor(props.location.state.styles, true);\n      props.setSelectedStores(_this.state.stores.map(function (e) {\n        return e.label;\n      }));\n    }\n\n    props.getCustomStores().then(function (res) {\n      if (_this.props.isEdit && _this.props.editPlanDetails[0] && !_.isEmpty(_this.props.editPlanDetails[0] && _this.props.editPlanDetails[0].request_obj)) {\n        var customStoreGroup = _this.props.editPlanDetails[0] && _this.props.editPlanDetails[0].request_obj && _this.props.editPlanDetails[0].request_obj.filters && _this.props.editPlanDetails[0].request_obj.filters.customStoreGroup;\n        var selectedCustomStore = [];\n\n        _.map(res, function (item) {\n          if (customStoreGroup && customStoreGroup.includes(item.value)) {\n            selectedCustomStore.push(item);\n          }\n        });\n\n        _this.setCustomStores(selectedCustomStore);\n      }\n    }); // props.fetchStyleGroups({\n    //   disable_empty_flag: false,\n    //   filters: {},\n    // });\n    // if (props.retainFilters && props.location.state) {\n    // props.setSelectedHierarchy7(props.location.state.styles, 'reporting');\n    // props.setSelectedStores(this.state.stores.map((e) => e.label));\n    // }\n\n    props.setRetainFilters(false);\n    return _this;\n  }\n\n  _createClass(Filters, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(this.props.retainFilters, 'this.props.retainFilters', this.props.selectedHierarchy1);\n\n      if (this.props.retainFilters && !_.isEmpty(this.props.selectedHierarchy1)) {\n        var val = [{\n          label: this.props.selectedHierarchy1[0],\n          value: this.props.selectedHierarchy1[0]\n        }];\n        this.onHierarchyOneSelection(val);\n        return;\n      }\n\n      this.setState({\n        hierarchy: this.props.filtersOptions\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.filterReset) {\n        this.props.filterResetHandler(false);\n        this.reset(); // reset filters from configFilters\n      }\n\n      if (this.props.fromNotification && _.isEmpty(this.state.hierarchy1) && !_.isEmpty(this.props.cadenceInput) && !_.isEmpty(this.props.cadenceInput.filters)) {\n        var filters = this.props.cadenceInput.filters;\n        this.props.presetFilters(filters, true); //2nd argument to set a flag to call options api\n\n        this.onHierarchyOneSelection([{\n          label: filters.hierarchy1[0],\n          value: filters.hierarchy1[0]\n        }]);\n        this.setState({\n          country: _.map(filters.country, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          channel: _.map(filters.channel, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          storeCluster: _.map(filters.storeCluster, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          // customStoreGroup: _.map(filters.customStoreGroup, (item) => ({ value: item, label: item })),\n          store: _.map(filters.store, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy1: _.map(filters.hierarchy1, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy2: _.map(filters.hierarchy2, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy3: _.map(filters.hierarchy3, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy4: _.map(filters.hierarchy4, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy5: _.map(filters.hierarchy5, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          season: _.map(filters.season, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          matrix: _.map(filters.matrix, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          exclusionList: _.map(filters.exclusionList, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          clearance: _.map(filters.clearance, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          customStyleGroup: _.map(filters.customStyleGroup, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          styleColor: _.map(filters.styleColor, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          })\n        });\n\n        if (!_.isEmpty(this.props.customStoreGroup)) {\n          var selectedCustomStore = [];\n\n          _.map(this.props.customStoreGroup, function (item) {\n            if (filters.customStoreGroup && filters.customStoreGroup.includes(item.value)) {\n              selectedCustomStore.push(item);\n            }\n          });\n\n          this.setState({\n            customStoreGroup: selectedCustomStore\n          });\n          this.setCustomStores(selectedCustomStore);\n        }\n\n        if (!_.isEmpty(this.props.customStyleGroup)) {\n          var selectedCustomStyle = [];\n\n          _.map(this.props.customStyleGroup, function (item) {\n            if (filters.customStyleGroup && typeof filters.customStyleGroup[0] === 'string' && filters.customStyleGroup.includes(item.value)) {\n              selectedCustomStyle.push(item);\n              return;\n            }\n\n            if (filters.customStyleGroup && filters.customStyleGroup.includes(item.id)) {\n              selectedCustomStyle.push(item);\n            }\n          });\n\n          this.setState({\n            customStyleGroup: selectedCustomStyle\n          });\n          this.setCustomStyleGroup(selectedCustomStyle);\n        }\n      }\n\n      if (this.props.isEdit && _.isEmpty(this.state.hierarchy1) && this.props.editPlanDetails[0] && !_.isEmpty(this.props.editPlanDetails[0] && this.props.editPlanDetails[0].request_obj)) {\n        var _this$props$editPlanD = this.props.editPlanDetails[0].request_obj.filters,\n            country = _this$props$editPlanD.country,\n            clearance = _this$props$editPlanD.clearance,\n            matrix = _this$props$editPlanD.matrix,\n            exclusionList = _this$props$editPlanD.exclusionList,\n            styleColor = _this$props$editPlanD.styleColor,\n            storeCluster = _this$props$editPlanD.storeCluster,\n            store = _this$props$editPlanD.store,\n            channel = _this$props$editPlanD.channel,\n            customStyleGroup = _this$props$editPlanD.customStyleGroup,\n            customStoreGroup = _this$props$editPlanD.customStoreGroup,\n            season = _this$props$editPlanD.season,\n            hierarchy1 = _this$props$editPlanD.hierarchy1,\n            hierarchy2 = _this$props$editPlanD.hierarchy2,\n            hierarchy3 = _this$props$editPlanD.hierarchy3,\n            hierarchy4 = _this$props$editPlanD.hierarchy4,\n            hierarchy5 = _this$props$editPlanD.hierarchy5;\n        var customStyleName = this.props.editPlanDetails[0] && this.props.editPlanDetails[0].request_obj && this.props.editPlanDetails[0].request_obj.customStyleName; // this.props.presetFilters([\n        //   country,\n        //   channel,\n        //   storeCluster,\n        //   customStoreGroup,\n        //   store,\n        //   hierarchy1,\n        //   hierarchy2,\n        //   hierarchy3,\n        //   hierarchy4,\n        //   hierarchy5,\n        //   season,\n        //   matrix,\n        //   exclusionList,\n        //   clearance,\n        //   customStyleGroup,\n        //   styleColor,\n        // ]);\n\n        this.props.presetFilters(this.props.editPlanDetails[0].request_obj.filters);\n        this.setState({\n          country: _.map(country, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          channel: _.map(channel, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          storeCluster: _.map(storeCluster, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          customStoreGroup: _.map(customStoreGroup, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          store: _.map(store, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy1: _.map(hierarchy1, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy2: _.map(hierarchy2, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy3: _.map(hierarchy3, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy4: _.map(hierarchy4, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          hierarchy5: _.map(hierarchy5, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          season: _.map(season, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          matrix: _.map(matrix, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          exclusionList: _.map(exclusionList, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          clearance: _.map(clearance, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          customStyleGroup: _.map(customStyleGroup, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          }),\n          styleColor: _.map(styleColor, function (item) {\n            return {\n              value: item,\n              label: item\n            };\n          })\n        });\n      } // if (\n      //   this.props.from !== 'styleConfig' &&\n      //   this.props.from !== 'styleGroupConfig' &&\n      //   !_.isEmpty(this.props.selectedHierarchy8) &&\n      //   !_.isEqual(prevProps.selectedHierarchy8, this.props.selectedHierarchy8)\n      // ) {\n      //   let req = {\n      //     filters: {\n      //       hierarchy1: this.props.selectedHierarchy1,\n      //       hierarchy2: this.props.selectedHierarchy2,\n      //       hierarchy3: this.props.selectedHierarchy3,\n      //       hierarchy4: this.props.selectedHierarchy4,\n      //       hierarchy5: this.props.selectedHierarchy5,\n      //       // hierarchy6: this.props.selectedHierarchy6,\n      //       // hierarchy7: this.props.selectedHierarchy7,\n      //       // hierarchy8: this.props.selectedHierarchy8,\n      //     },\n      //     disable_empty_flag:\n      //       this.props.disable_empty_flag && !this.props.isEdit\n      //         ? this.props.disable_empty_flag\n      //         : false,\n      //   };\n      //   this.props.fetchStyleGroups(req);\n      // }\n\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.props.isEdit ? 'row d-flex ml-4 mr-4 edit-markdown-filters' : ' d-flex row ml-4 mr-4',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 672\n        },\n        __self: this\n      }, this.state.hierarchy && this.state.hierarchy.map(function (filter, i) {\n        return labels[filter.type] && React.createElement(\"div\", {\n          className: \"col-md-2 \",\n          key: filter.type,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 682\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"mb-1 mt-3\",\n          style: {\n            whiteSpace: 'nowrap'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 683\n          },\n          __self: this\n        }, labels[filter.type], filter.isMandatory ? React.createElement(\"span\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 685\n          },\n          __self: this\n        }, \" * \") : null), React.createElement(Select, {\n          name: filter.type,\n          options: _this2.props[filter.type],\n          onFocus: function onFocus(e) {\n            return _this2.filterOnFocusHandler(i, filter.type, filter.isHierarchy);\n          },\n          onChange: function onChange(option) {\n            return _this2.getHierarchyOptions(option, i, filter.type, filter.isHierarchy, _this2.state.hierarchy[i + 1] && _this2.state.hierarchy[i + 1].type, _this2.state.hierarchy[i + 1] && _this2.state.hierarchy[i + 1].isHierarchy);\n          },\n          value: _this2.state[filter.type],\n          isMulti: filter.isMultiple,\n          isDisabled: i === 0 && _this2.props.styleGroupEdit || i === 2 && _this2.props.storeClusterDisable || i === 3 && _this2.props.storeClusterDisable || i === 4 && _this2.props.storeClusterDisable ? true : false // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n          ,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 687\n          },\n          __self: this\n        }));\n      }), this.props.dateRange && React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 752\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"mb-1 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 753\n        },\n        __self: this\n      }, \"Date range \", React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 754\n        },\n        __self: this\n      }, \" * \")), React.createElement(DateRangePicker, {\n        startDate: this.state.startDate,\n        startDateId: \"startDate_11\",\n        endDate: this.state.endDate,\n        endDateId: \"endDate_11\",\n        onDatesChange: this.onDatesChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 756\n        },\n        __self: this\n      })), !this.props.hidefilterButton && React.createElement(\"div\", {\n        className: !this.props.dateRange && !this.props.hideCustomStores ? 'col-md-2 mt-5 px-0' //'col-md-3 mt-4  ml-auto text-right'\n        : 'col-md-3 mt-5',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 766\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        disabled: this.props.isEdit,\n        onClick: this.onFilterHandler,\n        className: !this.props.dateRange && !this.props.hideCustomStores ? 'col-md-5 btn btn-primary btn-filter ml-2' : 'col-md-4 btn btn-primary btn-filter',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 772\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 780\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 781\n        },\n        __self: this\n      }), \"\\xA0 Filter\")), React.createElement(\"button\", {\n        disabled: this.props.isEdit || this.props.styleGroupEdit,\n        className: !this.props.dateRange && !this.props.hideCustomStores ? ' col-md-5 btn btn-primary btn-filter btn-filter-reset ml-3' : 'col-md-4 offset-1 btn btn-primary btn-filter btn-filter-reset',\n        onClick: this.reset,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 784\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 792\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-repeat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 793\n        },\n        __self: this\n      }), \"\\xA0 Reset\")))));\n    }\n  }]);\n\n  return Filters;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    drops: store.filtersReducer.drops,\n    selectedDrops: store.filtersReducer.selectedDrops,\n    hierarchy1: store.filtersReducer.hierarchy1,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    hierarchy2: store.filtersReducer.hierarchy2,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    hierarchy3: store.filtersReducer.hierarchy3,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    hierarchy4: store.filtersReducer.hierarchy4,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    hierarchy5: store.filtersReducer.hierarchy5,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    hierarchy6: store.filtersReducer.hierarchy6,\n    selectedHierarchy6: store.filtersReducer.selectedHierarchy6,\n    hierarchy7: store.filtersReducer.hierarchy7,\n    selectedHierarchy7: store.filtersReducer.selectedHierarchy7,\n    hierarchy8: store.filtersReducer.hierarchy8,\n    selectedHierarchy8: store.filtersReducer.selectedHierarchy8,\n    stores: store.filtersReducer.stores,\n    customStoreGroup: store.filtersReducer.customStoreGroup,\n    customStyleGroup: store.filtersReducer.customStyleGroup,\n    selectedStores: store.filtersReducer.selectedStores,\n    selectedCustomStyleGroup: store.filtersReducer.selectedCustomStyleGroup,\n    selectedCustomStoreGroup: store.filtersReducer.selectedCustomStoreGroup,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n    retainFilters: store.filtersReducer.retainFilters,\n    editPlanDetails: store.manuallyCreateMdData.editPlanDetails,\n    season: store.filtersReducer.season,\n    selectedSeason: store.filtersReducer.selectedSeason,\n    clearance: store.filtersReducer.clearance,\n    selectedClearance: store.filtersReducer.selectedClearance,\n    matrix: store.filtersReducer.matrix,\n    selectedMatrix: store.filtersReducer.selectedMatrix,\n    exclusionList: store.filtersReducer.exclusionList,\n    selectedExclusionList: store.filtersReducer.selectedExclusionList,\n    styleColor: store.filtersReducer.styleColor,\n    selectedStyleColor: store.filtersReducer.selectedStyleColor,\n    country: store.filtersReducer.country,\n    selectedCountry: store.filtersReducer.selectedCountry,\n    storeCluster: store.filtersReducer.storeCluster,\n    selectedStoreCluster: store.filtersReducer.selectedStoreCluster,\n    store: store.filtersReducer.store,\n    selectedStore: store.filtersReducer.selectedStore,\n    channel: store.filtersReducer.channel,\n    selectedChannel: store.filtersReducer.selectedChannel,\n    cadenceInput: store.manuallyCreateMdData.cadenceInput\n  };\n};\n\nvar mapDispatchToProps = {\n  getHierarchyOptions: FilterActions.getHierarchyOptions,\n  getExtraFiltersOptions: FilterActions.getExtraFiltersOptions,\n  getStores: FilterActions.getStores,\n  getCustomStores: FilterActions.getCustomStores,\n  setSelectedDrops: FilterActions.setSelectedDrops,\n  setSelectedHierarchy1: FilterActions.setSelectedHierarchy1,\n  setSelectedHierarchy2: FilterActions.setSelectedHierarchy2,\n  setSelectedHierarchy3: FilterActions.setSelectedHierarchy3,\n  setSelectedHierarchy4: FilterActions.setSelectedHierarchy4,\n  setSelectedHierarchy5: FilterActions.setSelectedHierarchy5,\n  setSelectedHierarchy6: FilterActions.setSelectedHierarchy6,\n  setSelectedHierarchy7: FilterActions.setSelectedHierarchy7,\n  setSelectedHierarchy8: FilterActions.setSelectedHierarchy8,\n  setSelectedStores: FilterActions.setSelectedStores,\n  setSelectedCustomGroup: FilterActions.setSelectedCustomGroup,\n  setSelectedCustomStoreGroup: FilterActions.setSelectedCustomStoreGroup,\n  setDateRange: FilterActions.setDateRange,\n  resetFilters: FilterActions.resetFilters,\n  setRetainFilters: FilterActions.setRetainFilters,\n  presetFilters: FilterActions.presetFilters,\n  getExtraFilterChannel: FilterActions.getExtraFilterChannel,\n  setSelectedExtraFilSeason: FilterActions.setSelectedExtraFilSeason,\n  setSelectedExtraFilMatrix: FilterActions.setSelectedExtraFilMatrix,\n  setSelectedExtraFilExclusionList: FilterActions.setSelectedExtraFilExclusionList,\n  setSelectedExtraFilClearance: FilterActions.setSelectedExtraFilClearance,\n  setSelectedExtraFilStyleColor: FilterActions.setSelectedExtraFilStyleColor,\n  setSelectedExtraFilCountry: FilterActions.setSelectedExtraFilCountry,\n  setSelectedExtraFilStoreCluster: FilterActions.setSelectedExtraFilStoreCluster,\n  setSelectedExtraFilChannel: FilterActions.setSelectedExtraFilChannel,\n  setSelectedExtraFilStore: FilterActions.setSelectedExtraFilStore,\n  fetchStyleGroups: FilterActions.fetchStyleGroups\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Filters));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/services/filters/index.js"],"names":["React","Component","withRouter","labels","validations","filterType","Select","connect","DateRangePicker","FilterActions","toast","_","Filters","props","onHierarchyOneSelection","val","console","log","hierarchyClone","cloneDeep","filtersOptions","valiadtion","label","findIndex","index","key","type","isEmpty","swap","a","b","temp","remove","map","item","i","itm","setState","hierarchy","setSelectionHandler","actionName","name","setSelectedCustomStoreGroup","v","value","setSelectedCustomGroup","id","e","getHierarchyOptions","filterIndex","currFilterName","isHierarchyPrev","nextFilterName","isHierarchyNext","Array","isArray","state","nameCapitalized","charAt","toUpperCase","slice","resetHierachies","req","filterName","filters","setDrop","selItems","drops","setSelectedDrops","actionCallHandler","func","typeName","reqObj","allowInactiveProducts","hierarchyType","disable_empty_flag","isEdit","filterOnFocusHandler","isHierarchy","options","callApi","validateFilters","getExtraFilterChannel","selected","setCustomStyleGroup","newFilters","customStyleGroup","setCustomStores","customStoreGroup","reset","onReset","startDate","endDate","country","channel","storeCluster","store","hierarchy1","hierarchy2","hierarchy3","hierarchy4","hierarchy5","season","matrix","exclusionList","clearance","styleColor","from","resetFilters","onDatesChange","weeks","clone","add","push","week","setDateRange","format","dateRange","isMandatory","onFilterHandler","length","error","autoClose","hideProgressBar","onFilter","retainFilters","selectedHierarchy1","selectedHierarchy2","selectedHierarchy3","selectedHierarchy4","selectedHierarchy5","hierarchy6","selectedHierarchy6","hierarchy7","selectedHierarchy7","hierarchy8","selectedHierarchy8","location","styles","styleGroupEdit","selectedCustomStyleGroup","stores","selectedStores","selectedSeason","selectedClearance","selectedMatrix","selectedExclusionList","selectedStyleColor","selectedCountry","selectedStoreCluster","selectedStore","selectedChannel","selectedCustomStoreGroup","getExtraFiltersOptions","setSelectedExtraFilStyleColor","setSelectedStores","getCustomStores","then","res","editPlanDetails","request_obj","selectedCustomStore","includes","setRetainFilters","prevProps","prevState","filterReset","filterResetHandler","fromNotification","cadenceInput","presetFilters","selectedCustomStyle","customStyleName","filter","whiteSpace","color","option","isMultiple","storeClusterDisable","hidefilterButton","hideCustomStores","mapStateToProps","filtersReducer","selectedDrops","manuallyCreateMdData","mapDispatchToProps","getStores","setSelectedHierarchy1","setSelectedHierarchy2","setSelectedHierarchy3","setSelectedHierarchy4","setSelectedHierarchy5","setSelectedHierarchy6","setSelectedHierarchy7","setSelectedHierarchy8","setSelectedExtraFilSeason","setSelectedExtraFilMatrix","setSelectedExtraFilExclusionList","setSelectedExtraFilClearance","setSelectedExtraFilCountry","setSelectedExtraFilStoreCluster","setSelectedExtraFilChannel","setSelectedExtraFilStore","fetchStyleGroups"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { labels, validations, filterType } from './config';\nimport Select from '../select';\nimport './index.css';\nimport { connect } from 'react-redux';\nimport DateRangePicker from '../RetailCalendarDatePicker';\nimport FilterActions from '../../actions/filtersAction';\nimport { toast } from 'react-toastify';\nimport _ from 'lodash';\n\nclass Filters extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filters: {},\n      startDate: null,\n      endDate: null,\n      hierarchy: [],\n      hierarchy1:\n        props.retainFilters && props.selectedHierarchy1\n          ? props.selectedHierarchy1.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      hierarchy2:\n        props.retainFilters && props.selectedHierarchy2\n          ? props.selectedHierarchy2.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      hierarchy3:\n        props.retainFilters && props.selectedHierarchy3\n          ? props.selectedHierarchy3.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      hierarchy4:\n        props.retainFilters && props.selectedHierarchy4\n          ? props.selectedHierarchy4.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      hierarchy5:\n        props.retainFilters && props.selectedHierarchy5\n          ? props.selectedHierarchy5.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      hierarchy6:\n        props.retainFilters && props.selectedHierarchy6\n          ? props.selectedHierarchy6.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      hierarchy7:\n        props.retainFilters && props.selectedHierarchy7\n          ? props.selectedHierarchy7.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      hierarchy8:\n        props.retainFilters && props.selectedHierarchy8 && props.location.state\n          ? props.location.state &&\n            props.location.state.styles.map((e) => {\n              return { value: e, label: e };\n            })\n          : props.retainFilters && props.selectedHierarchy8 && this.props.styleGroupEdit\n          ? props.selectedHierarchy8.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      customStyleGroup:\n        props.retainFilters && props.selectedCustomStyleGroup\n          ? props.selectedCustomStyleGroup.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      stores:\n        props.retainFilters && props.selectedStores\n          ? props.selectedStores.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      season:\n        props.retainFilters && props.selectedSeason\n          ? props.selectedSeason.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      clearance:\n        props.retainFilters && props.selectedClearance\n          ? props.selectedClearance.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      matrix:\n        props.retainFilters && props.selectedMatrix\n          ? props.selectedMatrix.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      exclusionList:\n        props.retainFilters && props.selectedExclusionList\n          ? props.selectedExclusionList.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      styleColor:\n        props.retainFilters &&\n        props.selectedStyleColor &&\n        props.location.state &&\n        props.location.state.styles\n          ? props.location.state.styles.map((e) => {\n              return { value: e, label: e };\n            })\n          : props.retainFilters && props.selectedStyleColor\n          ? props.selectedStyleColor.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      country:\n        props.retainFilters && props.selectedCountry\n          ? props.selectedCountry.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      storeCluster:\n        props.retainFilters && props.selectedStoreCluster\n          ? props.selectedStoreCluster.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      store:\n        props.retainFilters && props.selectedStore\n          ? props.selectedStore.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      channel:\n        props.retainFilters && props.selectedChannel\n          ? props.selectedChannel.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n      customStoreGroup:\n        props.retainFilters && props.selectedCustomStoreGroup\n          ? props.selectedCustomStoreGroup.map((e) => {\n              return { value: e, label: e };\n            })\n          : null,\n    };\n    // +  !props.retainFilters && props.resetFilters();\n    // !props.isEdit &&\n    //   props.getHierarchyOptions({\n    //     filters: {},\n    //     hierarchyType: 'HIERARCHY1',\n    //     allowInactiveProducts: this.props.allowInactiveProducts || false,\n    //   });\n    props.getExtraFiltersOptions({\n      filters: {},\n      filterType: 'COUNTRY',\n      allowInactiveProducts: this.props.allowInactiveProducts || false,\n    });\n    if (props.retainFilters && props.location.state) {\n      props.setSelectedExtraFilStyleColor(props.location.state.styles, true);\n      props.setSelectedStores(this.state.stores.map((e) => e.label));\n    }\n    props.getCustomStores().then((res) => {\n      if (\n        this.props.isEdit &&\n        this.props.editPlanDetails[0] &&\n        !_.isEmpty(this.props.editPlanDetails[0] && this.props.editPlanDetails[0].request_obj)\n      ) {\n        let customStoreGroup =\n          this.props.editPlanDetails[0] &&\n          this.props.editPlanDetails[0].request_obj &&\n          this.props.editPlanDetails[0].request_obj.filters &&\n          this.props.editPlanDetails[0].request_obj.filters.customStoreGroup;\n        let selectedCustomStore = [];\n        _.map(res, (item) => {\n          if (customStoreGroup && customStoreGroup.includes(item.value)) {\n            selectedCustomStore.push(item);\n          }\n        });\n        this.setCustomStores(selectedCustomStore);\n      }\n    });\n\n    // props.fetchStyleGroups({\n    //   disable_empty_flag: false,\n    //   filters: {},\n    // });\n\n    // if (props.retainFilters && props.location.state) {\n    // props.setSelectedHierarchy7(props.location.state.styles, 'reporting');\n    // props.setSelectedStores(this.state.stores.map((e) => e.label));\n    // }\n    props.setRetainFilters(false);\n  }\n  componentDidMount() {\n    console.log(\n      this.props.retainFilters,\n      'this.props.retainFilters',\n      this.props.selectedHierarchy1\n    );\n    if (this.props.retainFilters && !_.isEmpty(this.props.selectedHierarchy1)) {\n      let val = [\n        {\n          label: this.props.selectedHierarchy1[0],\n          value: this.props.selectedHierarchy1[0],\n        },\n      ];\n      this.onHierarchyOneSelection(val);\n      return;\n    }\n    this.setState({ hierarchy: this.props.filtersOptions });\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.filterReset) {\n      this.props.filterResetHandler(false);\n      this.reset(); // reset filters from configFilters\n    }\n    if (\n      this.props.fromNotification &&\n      _.isEmpty(this.state.hierarchy1) &&\n      !_.isEmpty(this.props.cadenceInput) &&\n      !_.isEmpty(this.props.cadenceInput.filters)\n    ) {\n      let filters = this.props.cadenceInput.filters;\n\n      this.props.presetFilters(filters, true); //2nd argument to set a flag to call options api\n\n      this.onHierarchyOneSelection([\n        { label: filters.hierarchy1[0], value: filters.hierarchy1[0] },\n      ]);\n      this.setState({\n        country: _.map(filters.country, (item) => ({ value: item, label: item })),\n        channel: _.map(filters.channel, (item) => ({ value: item, label: item })),\n        storeCluster: _.map(filters.storeCluster, (item) => ({ value: item, label: item })),\n        // customStoreGroup: _.map(filters.customStoreGroup, (item) => ({ value: item, label: item })),\n        store: _.map(filters.store, (item) => ({ value: item, label: item })),\n        hierarchy1: _.map(filters.hierarchy1, (item) => ({ value: item, label: item })),\n        hierarchy2: _.map(filters.hierarchy2, (item) => ({ value: item, label: item })),\n        hierarchy3: _.map(filters.hierarchy3, (item) => ({ value: item, label: item })),\n        hierarchy4: _.map(filters.hierarchy4, (item) => ({ value: item, label: item })),\n        hierarchy5: _.map(filters.hierarchy5, (item) => ({ value: item, label: item })),\n        season: _.map(filters.season, (item) => ({ value: item, label: item })),\n        matrix: _.map(filters.matrix, (item) => ({ value: item, label: item })),\n        exclusionList: _.map(filters.exclusionList, (item) => ({ value: item, label: item })),\n        clearance: _.map(filters.clearance, (item) => ({ value: item, label: item })),\n        customStyleGroup: _.map(filters.customStyleGroup, (item) => ({ value: item, label: item })),\n        styleColor: _.map(filters.styleColor, (item) => ({ value: item, label: item })),\n      });\n      if (!_.isEmpty(this.props.customStoreGroup)) {\n        let selectedCustomStore = [];\n        _.map(this.props.customStoreGroup, (item) => {\n          if (filters.customStoreGroup && filters.customStoreGroup.includes(item.value)) {\n            selectedCustomStore.push(item);\n          }\n        });\n        this.setState({\n          customStoreGroup: selectedCustomStore,\n        });\n        this.setCustomStores(selectedCustomStore);\n      }\n      if (!_.isEmpty(this.props.customStyleGroup)) {\n        let selectedCustomStyle = [];\n        _.map(this.props.customStyleGroup, (item) => {\n          if (\n            filters.customStyleGroup &&\n            typeof filters.customStyleGroup[0] === 'string' &&\n            filters.customStyleGroup.includes(item.value)\n          ) {\n            selectedCustomStyle.push(item);\n            return;\n          }\n          if (filters.customStyleGroup && filters.customStyleGroup.includes(item.id)) {\n            selectedCustomStyle.push(item);\n          }\n        });\n        this.setState({\n          customStyleGroup: selectedCustomStyle,\n        });\n        this.setCustomStyleGroup(selectedCustomStyle);\n      }\n    }\n    if (\n      this.props.isEdit &&\n      _.isEmpty(this.state.hierarchy1) &&\n      this.props.editPlanDetails[0] &&\n      !_.isEmpty(this.props.editPlanDetails[0] && this.props.editPlanDetails[0].request_obj)\n    ) {\n      let {\n        country,\n        clearance,\n        matrix,\n        exclusionList,\n        styleColor,\n        storeCluster,\n        store,\n        channel,\n        customStyleGroup,\n        customStoreGroup,\n        season,\n        hierarchy1,\n        hierarchy2,\n        hierarchy3,\n        hierarchy4,\n        hierarchy5,\n      } = this.props.editPlanDetails[0].request_obj.filters;\n\n      let customStyleName =\n        this.props.editPlanDetails[0] &&\n        this.props.editPlanDetails[0].request_obj &&\n        this.props.editPlanDetails[0].request_obj.customStyleName;\n\n      // this.props.presetFilters([\n      //   country,\n      //   channel,\n      //   storeCluster,\n      //   customStoreGroup,\n      //   store,\n      //   hierarchy1,\n      //   hierarchy2,\n      //   hierarchy3,\n      //   hierarchy4,\n      //   hierarchy5,\n      //   season,\n      //   matrix,\n      //   exclusionList,\n      //   clearance,\n      //   customStyleGroup,\n      //   styleColor,\n      // ]);\n      this.props.presetFilters(this.props.editPlanDetails[0].request_obj.filters);\n      this.setState({\n        country: _.map(country, (item) => ({ value: item, label: item })),\n        channel: _.map(channel, (item) => ({ value: item, label: item })),\n        storeCluster: _.map(storeCluster, (item) => ({ value: item, label: item })),\n        customStoreGroup: _.map(customStoreGroup, (item) => ({ value: item, label: item })),\n        store: _.map(store, (item) => ({ value: item, label: item })),\n        hierarchy1: _.map(hierarchy1, (item) => ({ value: item, label: item })),\n        hierarchy2: _.map(hierarchy2, (item) => ({ value: item, label: item })),\n        hierarchy3: _.map(hierarchy3, (item) => ({ value: item, label: item })),\n        hierarchy4: _.map(hierarchy4, (item) => ({ value: item, label: item })),\n        hierarchy5: _.map(hierarchy5, (item) => ({ value: item, label: item })),\n        season: _.map(season, (item) => ({ value: item, label: item })),\n        matrix: _.map(matrix, (item) => ({ value: item, label: item })),\n        exclusionList: _.map(exclusionList, (item) => ({ value: item, label: item })),\n        clearance: _.map(clearance, (item) => ({ value: item, label: item })),\n        customStyleGroup: _.map(customStyleGroup, (item) => ({ value: item, label: item })),\n        styleColor: _.map(styleColor, (item) => ({ value: item, label: item })),\n      });\n    }\n    // if (\n    //   this.props.from !== 'styleConfig' &&\n    //   this.props.from !== 'styleGroupConfig' &&\n    //   !_.isEmpty(this.props.selectedHierarchy8) &&\n    //   !_.isEqual(prevProps.selectedHierarchy8, this.props.selectedHierarchy8)\n    // ) {\n    //   let req = {\n    //     filters: {\n    //       hierarchy1: this.props.selectedHierarchy1,\n    //       hierarchy2: this.props.selectedHierarchy2,\n    //       hierarchy3: this.props.selectedHierarchy3,\n    //       hierarchy4: this.props.selectedHierarchy4,\n    //       hierarchy5: this.props.selectedHierarchy5,\n    //       // hierarchy6: this.props.selectedHierarchy6,\n    //       // hierarchy7: this.props.selectedHierarchy7,\n    //       // hierarchy8: this.props.selectedHierarchy8,\n    //     },\n    //     disable_empty_flag:\n    //       this.props.disable_empty_flag && !this.props.isEdit\n    //         ? this.props.disable_empty_flag\n    //         : false,\n    //   };\n    //   this.props.fetchStyleGroups(req);\n    // }\n  }\n  onHierarchyOneSelection = (val) => {\n    console.log('aaaaaaaaaaaaaaa', val);\n    let hierarchyClone = _.cloneDeep(this.props.filtersOptions);\n    let valiadtion = validations[val[0].label];\n    let findIndex = (index, key) =>\n      _.findIndex(hierarchyClone, {\n        type: `${valiadtion[key][index]}`,\n      }); //finding index num for swap case from validations\n    if (valiadtion && !_.isEmpty(valiadtion.swap)) {\n      //swaping filters\n      let a = findIndex(0, 'swap'),\n        b = findIndex(1, 'swap');\n      let temp = hierarchyClone[a];\n\n      hierarchyClone[a] = hierarchyClone[b];\n      hierarchyClone[b] = temp;\n    }\n    if (valiadtion && !_.isEmpty(valiadtion.remove)) {\n      //remove filters case\n      _.map(valiadtion.remove, (item, i) => {\n        _.remove(hierarchyClone, (itm, index) => index === findIndex(i, 'remove'));\n      });\n    }\n    this.setState({ hierarchy: hierarchyClone });\n    return hierarchyClone;\n  };\n\n  setSelectionHandler = async (val, actionName, name) => {\n    if (name === 'customStoreGroup') {\n      await this.props.setSelectedCustomStoreGroup(val.map((v) => v.value));\n      return;\n    }\n    if (name === 'customStyleGroup') {\n      this.props.setSelectedCustomGroup(\n        val.map((v) => v.value),\n        'name'\n      );\n      await this.props.setSelectedCustomGroup(\n        val.map((v) => v.id),\n        'id'\n      );\n      return;\n    }\n    await this.props[actionName](val.map((e) => e.label));\n    return;\n  };\n  getHierarchyOptions = async (\n    val,\n    filterIndex,\n    currFilterName,\n    isHierarchyPrev,\n    nextFilterName,\n    isHierarchyNext\n  ) => {\n    !Array.isArray(val) && (val = [val]);\n    let hierarchy = _.cloneDeep(this.state.hierarchy);\n\n    if (currFilterName === 'hierarchy1') {\n      //Division selected case\n      hierarchy = await this.onHierarchyOneSelection(val); //returns updated hierarchy data;\n    }\n    if (_.findIndex(hierarchy, { type: 'hierarchy1' }) > filterIndex) {\n      this.setState({ hierarchy: this.props.filtersOptions }); //reset filters that are removed or swapped when filters that comes before H1 are set\n    }\n\n    let nameCapitalized =\n      currFilterName && currFilterName.charAt(0).toUpperCase() + currFilterName.slice(1); //capitalizing the name to match action/reducer name\n    let resetHierachies = {};\n    _.map(hierarchy, (item, index) => {\n      if (index > filterIndex) {\n        resetHierachies[item.type] = null; //all fiters value, which comes after selected filter becomes null(reset)\n      }\n    });\n    this.setState({ [currFilterName]: val, ...resetHierachies }, async () => {\n      let actionName = isHierarchyPrev\n        ? `setSelected${nameCapitalized}`\n        : `setSelectedExtraFil${nameCapitalized}`;\n\n      await this.setSelectionHandler(val, actionName, currFilterName); //handles setSelected action calls\n\n      let req = {};\n      _.map(hierarchy, (item, index) => {\n        if (index <= filterIndex) {\n          let nameCapitalized = item.type && item.type.charAt(0).toUpperCase() + item.type.slice(1); //capitalizing the name to match action/reducer name\n          // if (_.isEmpty(this.props[`selected${nameCapitalized}`])) return; //uncomment if u want empty filters removed\n          let filterName =\n            item.type === 'storeCluster'\n              ? 'store_cluster'\n              : item.type === 'exclusionList'\n              ? 'exclusion_list'\n              : item.type === 'styleColor'\n              ? 'style_color'\n              : item.type;\n          req[filterName] = this.props[`selected${nameCapitalized}`]; //this goes as filters req obj in api calls\n        }\n      });\n      this.setState({ filters: { ...req } });\n    });\n  };\n  setDrop = (val) => {\n    let req = {};\n    let selItems = val.map((item) => item.label);\n    req['drop'] = selItems;\n    this.setState({ filters: { ...req }, drops: val }, () => {\n      this.props.setSelectedDrops(val.map((v) => v.value));\n    });\n  };\n  actionCallHandler = (func, isHierarchyNext, nextFilterName, req) => {\n    console.log('filterName console actionCallHandler', nextFilterName);\n    // let typeName = isHierarchyNext\n    //   ? nextFilterName.toUpperCase()\n    //   : labels[nextFilterName].toUpperCase();\n    // if (nextFilterName === 'store') typeName = 'STORE_CODE';\n    let typeName = filterType[nextFilterName];\n    let reqObj = {\n      filters: req,\n      allowInactiveProducts: this.props.allowInactiveProducts || false,\n    };\n    if (isHierarchyNext) reqObj.hierarchyType = typeName;\n    if (!isHierarchyNext) reqObj.filterType = typeName;\n    if (nextFilterName === 'customStyleGroup') {\n      let req = {\n        filters: reqObj.filters,\n        disable_empty_flag:\n          this.props.disable_empty_flag && !this.props.isEdit\n            ? this.props.disable_empty_flag\n            : false,\n      };\n      reqObj = req;\n      func = `fetchStyleGroups`;\n    }\n    if (nextFilterName === 'customStoreGroup') {\n      reqObj = {};\n      func = `getCustomStores`;\n    }\n\n    this.props[func](reqObj);\n  };\n  filterOnFocusHandler = (filterIndex, filterName, isHierarchy) => {\n    let options = this.props[filterName];\n    if (\n      (filterName && options && !options.callApi && !_.isEmpty(this.props[filterName])) ||\n      !this.validateFilters(filterIndex)\n    )\n      //if filter options already exists or if all of the mandatory filters that comes before this filter is not selected , return\n      return;\n\n    if (filterName === 'channel') {\n      this.props.getExtraFilterChannel();\n      return;\n    }\n    let func = isHierarchy ? `getHierarchyOptions` : `getExtraFiltersOptions`;\n    let req = {};\n    _.map(this.state.hierarchy, (item, index) => {\n      if (index < filterIndex) {\n        let nameCapitalized = item.type && item.type.charAt(0).toUpperCase() + item.type.slice(1); //capitalizing the name to match action/reducer name\n        let selected = this.props[`selected${nameCapitalized}`];\n        // if (_.isEmpty(selected)) return; //uncomment if u want empty filters removed\n        let filterName =\n          item.type === 'storeCluster'\n            ? 'store_cluster'\n            : item.type === 'exclusionList'\n            ? 'exclusion_list'\n            : item.type === 'styleColor'\n            ? 'style_color'\n            : item.type;\n        req[filterName] = selected; //this goes as filters req obj in api calls\n        if (item.type === 'channel' && selected[0] === 'Web') req['ecom_flag'] = [1];\n        if (item.type === 'channel' && selected[0] === 'Outlet') req['retail_flag'] = [1];\n      }\n    });\n    if (filterName && this.props[func]) {\n      //&& Object.keys(req).length\n      this.actionCallHandler(func, isHierarchy, filterName, req); //calles next filters action, to get it's options\n    }\n  };\n  setCustomStyleGroup = (val) => {\n    // let val = [item];\n    let selItems = val.map((item) => item.label);\n    // req['stores'] = selItems;\n    let newFilters = { ...this.state.filters, customStyleGroup: selItems };\n    this.setState({ filters: newFilters, customStyleGroup: val }, () => {\n      // this.props.setSelectedCustomGroup(val.map((v) => v.id));\n      this.props.setSelectedCustomGroup(\n        val.map((v) => v.value),\n        'name'\n      );\n      this.props.setSelectedCustomGroup(\n        val.map((v) => v.id),\n        'id'\n      );\n    });\n  };\n  setCustomStores = (val) => {\n    let selItems = val.map((item) => item.label);\n    let newFilters = { ...this.state.filters, customStoreGroup: selItems };\n    this.setState({ filters: newFilters, customStoreGroup: val }, () => {\n      this.props.setSelectedCustomStoreGroup(val.map((v) => v.value));\n    });\n  };\n  reset = () => {\n    this.props.onReset && this.props.onReset();\n    this.setState(\n      {\n        startDate: null,\n        endDate: null,\n        country: null,\n        channel: null,\n        storeCluster: null,\n        customStoreGroup: null,\n        store: null,\n        hierarchy1: null,\n        hierarchy2: null,\n        hierarchy3: null,\n        hierarchy4: null,\n        hierarchy5: null,\n        season: null,\n        matrix: null,\n        exclusionList: null,\n        clearance: null,\n        customStyleGroup: null,\n        styleColor: null,\n        hierarchy: this.props.filtersOptions,\n        filters: {},\n      },\n      () => {\n        if (this.props.from !== 'draft/status') this.props.resetFilters(); ////////// handling reset issues rising bcs of tabs, only reset this component state, not reducer\n      }\n    );\n  };\n  onDatesChange = ({ startDate, endDate }) => {\n    this.setState(\n      {\n        startDate,\n        endDate,\n      },\n      () => {\n        let weeks = [];\n        if (endDate) {\n          for (let i = startDate.clone(); i <= endDate; i = i.add(7, 'd')) {\n            weeks.push(i.week());\n          }\n        }\n\n        this.props.setDateRange({\n          startDate: startDate && startDate.format('YYYY-MM-DD'),\n          endDate: endDate && endDate.format('YYYY-MM-DD'),\n          weeks,\n        });\n      }\n    );\n  };\n\n  validateFilters = (filterIndex, dateRange) => {\n    let { hierarchy } = this.state;\n    for (let i = 0; i < filterIndex; i++) {\n      let type = hierarchy[i] && hierarchy[i].type;\n\n      let nameCapitalized = type && type.charAt(0).toUpperCase() + type.slice(1); //capitalizing the name to match action/reducer name\n\n      if (\n        hierarchy[i] &&\n        hierarchy[i].isMandatory &&\n        _.isEmpty(this.props[`selected${nameCapitalized}`])\n      ) {\n        return false;\n      }\n    }\n    if (dateRange && (_.isEmpty(this.state.startDate) || _.isEmpty(this.state.endDate)))\n      return false;\n\n    return true;\n  };\n  onFilterHandler = () => {\n    if (!this.validateFilters(this.state.hierarchy.length, this.props.dateRange)) {\n      toast.error(`Please select mandatory filters`, {\n        autoClose: 15000,\n        hideProgressBar: true,\n      });\n      return;\n    }\n    this.props.onFilter({\n      filters: this.state.filters,\n      startDate: this.state.startDate,\n      endDate: this.state.endDate,\n      customStyleGroup: this.state.customStyleGroup,\n    });\n  };\n  render() {\n    return (\n      <React.Fragment>\n        <div\n          className={\n            this.props.isEdit\n              ? 'row d-flex ml-4 mr-4 edit-markdown-filters'\n              : ' d-flex row ml-4 mr-4'\n          }>\n          {this.state.hierarchy &&\n            this.state.hierarchy.map(\n              (filter, i) =>\n                labels[filter.type] && (\n                  <div className=\"col-md-2 \" key={filter.type}>\n                    <label className=\"mb-1 mt-3\" style={{ whiteSpace: 'nowrap' }}>\n                      {labels[filter.type]}\n                      {filter.isMandatory ? <span style={{ color: 'red' }}> * </span> : null}\n                    </label>\n                    <Select\n                      name={filter.type}\n                      options={this.props[filter.type]}\n                      onFocus={(e) => this.filterOnFocusHandler(i, filter.type, filter.isHierarchy)}\n                      onChange={(option) =>\n                        this.getHierarchyOptions(\n                          option,\n                          i,\n                          filter.type,\n                          filter.isHierarchy,\n                          this.state.hierarchy[i + 1] && this.state.hierarchy[i + 1].type,\n                          this.state.hierarchy[i + 1] && this.state.hierarchy[i + 1].isHierarchy\n                        )\n                      }\n                      value={this.state[filter.type]}\n                      isMulti={filter.isMultiple}\n                      isDisabled={\n                        (i === 0 && this.props.styleGroupEdit) ||\n                        (i === 2 && this.props.storeClusterDisable) ||\n                        (i === 3 && this.props.storeClusterDisable) ||\n                        (i === 4 && this.props.storeClusterDisable)\n                          ? true\n                          : false\n                      }\n                      // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n                    />\n                  </div>\n                )\n            )}\n\n          {/* {this.props.customStyleGroups &&\n            labels.customStyleGroup &&\n            !this.props.hideCustomStyleGroup && (\n              <div className=\"col-md-2 \">\n                <label className=\"mb-1 mt-3\">\n                  Custom Style Group\n                  {this.props.customStyleGrpMandatory ? (\n                    <span style={{ color: 'red' }}> * </span>\n                  ) : null}\n                </label>\n                <Select\n                  options={this.props.customStyleGroup}\n                  onChange={(option) => this.setCustomStyleGroup(option)}\n                  value={this.state.customStyleGroup}\n                  isMulti\n                  // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n                />\n              </div>\n            )}\n          {this.props.customStoreGroup && labels.customStoreGroup && !this.props.hideCustomStores && (\n            <div className=\"col-md-2 \">\n              <label className=\"mb-1 mt-3\">\n                {labels.customStoreGroup}\n                \n              </label>\n              <Select\n                options={this.props.customStoreGroup}\n                onChange={(option) => this.setCustomStores(option)}\n                value={this.state.customStoreGroup}\n                isMulti\n                // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n              />\n            </div>\n          )} */}\n          {this.props.dateRange && (\n            <div className=\"col-md-3\">\n              <label className=\"mb-1 mt-3\">\n                Date range <span style={{ color: 'red' }}> * </span>\n              </label>\n              <DateRangePicker\n                startDate={this.state.startDate}\n                startDateId=\"startDate_11\"\n                endDate={this.state.endDate}\n                endDateId=\"endDate_11\"\n                onDatesChange={this.onDatesChange}\n              />\n            </div>\n          )}\n          {!this.props.hidefilterButton && (\n            <div\n              className={\n                !this.props.dateRange && !this.props.hideCustomStores\n                  ? 'col-md-2 mt-5 px-0' //'col-md-3 mt-4  ml-auto text-right'\n                  : 'col-md-3 mt-5'\n              }>\n              <button\n                disabled={this.props.isEdit}\n                onClick={this.onFilterHandler}\n                className={\n                  !this.props.dateRange && !this.props.hideCustomStores\n                    ? 'col-md-5 btn btn-primary btn-filter ml-2'\n                    : 'col-md-4 btn btn-primary btn-filter'\n                }>\n                <span>\n                  <i className=\"fa fa-filter\"></i>&nbsp; Filter\n                </span>\n              </button>\n              <button\n                disabled={this.props.isEdit || this.props.styleGroupEdit}\n                className={\n                  !this.props.dateRange && !this.props.hideCustomStores\n                    ? ' col-md-5 btn btn-primary btn-filter btn-filter-reset ml-3'\n                    : 'col-md-4 offset-1 btn btn-primary btn-filter btn-filter-reset'\n                }\n                onClick={this.reset}>\n                <span>\n                  <i className=\"fa fa-repeat\"></i>&nbsp; Reset\n                </span>\n              </button>\n            </div>\n          )}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => {\n  return {\n    drops: store.filtersReducer.drops,\n    selectedDrops: store.filtersReducer.selectedDrops,\n    hierarchy1: store.filtersReducer.hierarchy1,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    hierarchy2: store.filtersReducer.hierarchy2,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    hierarchy3: store.filtersReducer.hierarchy3,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    hierarchy4: store.filtersReducer.hierarchy4,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    hierarchy5: store.filtersReducer.hierarchy5,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    hierarchy6: store.filtersReducer.hierarchy6,\n    selectedHierarchy6: store.filtersReducer.selectedHierarchy6,\n    hierarchy7: store.filtersReducer.hierarchy7,\n    selectedHierarchy7: store.filtersReducer.selectedHierarchy7,\n    hierarchy8: store.filtersReducer.hierarchy8,\n    selectedHierarchy8: store.filtersReducer.selectedHierarchy8,\n    stores: store.filtersReducer.stores,\n    customStoreGroup: store.filtersReducer.customStoreGroup,\n    customStyleGroup: store.filtersReducer.customStyleGroup,\n    selectedStores: store.filtersReducer.selectedStores,\n    selectedCustomStyleGroup: store.filtersReducer.selectedCustomStyleGroup,\n    selectedCustomStoreGroup: store.filtersReducer.selectedCustomStoreGroup,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n    retainFilters: store.filtersReducer.retainFilters,\n    editPlanDetails: store.manuallyCreateMdData.editPlanDetails,\n\n    season: store.filtersReducer.season,\n    selectedSeason: store.filtersReducer.selectedSeason,\n    clearance: store.filtersReducer.clearance,\n    selectedClearance: store.filtersReducer.selectedClearance,\n    matrix: store.filtersReducer.matrix,\n    selectedMatrix: store.filtersReducer.selectedMatrix,\n    exclusionList: store.filtersReducer.exclusionList,\n    selectedExclusionList: store.filtersReducer.selectedExclusionList,\n    styleColor: store.filtersReducer.styleColor,\n    selectedStyleColor: store.filtersReducer.selectedStyleColor,\n    country: store.filtersReducer.country,\n    selectedCountry: store.filtersReducer.selectedCountry,\n    storeCluster: store.filtersReducer.storeCluster,\n    selectedStoreCluster: store.filtersReducer.selectedStoreCluster,\n    store: store.filtersReducer.store,\n    selectedStore: store.filtersReducer.selectedStore,\n    channel: store.filtersReducer.channel,\n    selectedChannel: store.filtersReducer.selectedChannel,\n    cadenceInput: store.manuallyCreateMdData.cadenceInput,\n  };\n};\nconst mapDispatchToProps = {\n  getHierarchyOptions: FilterActions.getHierarchyOptions,\n  getExtraFiltersOptions: FilterActions.getExtraFiltersOptions,\n  getStores: FilterActions.getStores,\n  getCustomStores: FilterActions.getCustomStores,\n  setSelectedDrops: FilterActions.setSelectedDrops,\n  setSelectedHierarchy1: FilterActions.setSelectedHierarchy1,\n  setSelectedHierarchy2: FilterActions.setSelectedHierarchy2,\n  setSelectedHierarchy3: FilterActions.setSelectedHierarchy3,\n  setSelectedHierarchy4: FilterActions.setSelectedHierarchy4,\n  setSelectedHierarchy5: FilterActions.setSelectedHierarchy5,\n  setSelectedHierarchy6: FilterActions.setSelectedHierarchy6,\n  setSelectedHierarchy7: FilterActions.setSelectedHierarchy7,\n  setSelectedHierarchy8: FilterActions.setSelectedHierarchy8,\n  setSelectedStores: FilterActions.setSelectedStores,\n  setSelectedCustomGroup: FilterActions.setSelectedCustomGroup,\n  setSelectedCustomStoreGroup: FilterActions.setSelectedCustomStoreGroup,\n  setDateRange: FilterActions.setDateRange,\n  resetFilters: FilterActions.resetFilters,\n  setRetainFilters: FilterActions.setRetainFilters,\n  presetFilters: FilterActions.presetFilters,\n  getExtraFilterChannel: FilterActions.getExtraFilterChannel,\n  setSelectedExtraFilSeason: FilterActions.setSelectedExtraFilSeason,\n  setSelectedExtraFilMatrix: FilterActions.setSelectedExtraFilMatrix,\n  setSelectedExtraFilExclusionList: FilterActions.setSelectedExtraFilExclusionList,\n  setSelectedExtraFilClearance: FilterActions.setSelectedExtraFilClearance,\n  setSelectedExtraFilStyleColor: FilterActions.setSelectedExtraFilStyleColor,\n  setSelectedExtraFilCountry: FilterActions.setSelectedExtraFilCountry,\n  setSelectedExtraFilStoreCluster: FilterActions.setSelectedExtraFilStoreCluster,\n  setSelectedExtraFilChannel: FilterActions.setSelectedExtraFilChannel,\n  setSelectedExtraFilStore: FilterActions.setSelectedExtraFilStore,\n  fetchStyleGroups: FilterActions.fetchStyleGroups,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Filters));\n"]},"metadata":{},"sourceType":"module"}