{"ast":null,"code":"import _defineProperty from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/SKUCockpit/SKUCockpit.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PageLoader from '../../utils/Loader';\nimport { getCockpitData as _getCockpitData } from '../../actions/cockpitAction';\nimport _ from 'underscore';\nimport DataTable from '../../services/reactTable';\nimport { ExportToCsv } from 'export-to-csv';\nimport AlertWarning from '../../utils/AlertMessage/alertDanger';\nimport './index.css';\nexport var SKUCocktpit =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SKUCocktpit, _Component);\n\n  function SKUCocktpit(props) {\n    var _this;\n\n    _classCallCheck(this, SKUCocktpit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SKUCocktpit).call(this, props));\n\n    _this.componentDidUpdate = function (oldProps) {\n      if (!_.isEqual(oldProps.cockpitData, _this.props.cockpitData)) {\n        _this.setState({\n          loader: false,\n          tableData: _this.props.cockpitData.data\n        });\n      }\n    };\n\n    _this.roundedMedian = function (leafValues) {\n      var min = leafValues[0] || 0;\n      var max = leafValues[0] || 0;\n      leafValues.forEach(function (value) {\n        min = Math.min(min, value);\n        max = Math.max(max, value);\n      });\n      return Math.round((min + max) / 2);\n    };\n\n    _this.updateMyData = function (rowIndex, columnId, value) {\n      // We also turn on the flag to not reset the page\n      _this.setState(function (old) {\n        var val = old.tableData.map(function (row, index) {\n          if (index === rowIndex) {\n            return _objectSpread({}, row, _defineProperty({}, columnId, value));\n          }\n\n          return row;\n        });\n        return {\n          tableData: val\n        };\n      });\n    };\n\n    _this.pipelineDataNew = {\n      header: [{\n        Header: 'SkU ID/name',\n        accessor: 'sku_id',\n        groupByID: 'sku_id',\n        disableGroupBy: false,\n        width: 50,\n        align: 'left'\n      }, {\n        Header: 'Brand',\n        accessor: 'brand_mn',\n        aggregate: 'uniqueCount',\n        disableGroupBy: false,\n        Aggregated: function Aggregated(_ref) {\n          var value = _ref.value;\n          return \"\".concat(value, \" Unique Names\");\n        },\n        width: 50,\n        align: 'left'\n      }, {\n        Header: 'Inventory onhand',\n        accessor: 'inventory',\n        aggregate: 'average',\n        disableGroupBy: false,\n        Aggregated: function Aggregated(_ref2) {\n          var value = _ref2.value;\n          return \"\".concat(value);\n        },\n        width: 55,\n        align: 'left'\n      }, {\n        Header: 'Quantity Sold',\n        accessor: 'quantity',\n        aggregate: 'average',\n        disableGroupBy: false,\n        Aggregated: function Aggregated(_ref3) {\n          var value = _ref3.value;\n          return \"\".concat(value);\n        },\n        width: 50,\n        align: 'left'\n      }, {\n        Header: 'YTD predicted Sales($)',\n        accessor: 'predicted',\n        aggregate: 'average',\n        disableGroupBy: false,\n        Aggregated: function Aggregated(_ref4) {\n          var value = _ref4.value;\n          return \"\".concat(value);\n        },\n        width: 55,\n        align: 'left'\n      }, {\n        Header: 'YTD Actual Sales($)',\n        accessor: 'sales',\n        aggregate: 'sum',\n        disableGroupBy: false,\n        Aggregated: function Aggregated(_ref5) {\n          var value = _ref5.value;\n          return \"\".concat(value);\n        },\n        width: 55,\n        align: 'left'\n      }, {\n        Header: '% Deviation',\n        accessor: 'deviation',\n        disableGroupBy: false,\n        aggregate: _this.roundedMedian,\n        Aggregated: function Aggregated(_ref6) {\n          var value = _ref6.value;\n          return \"\".concat(value);\n        },\n        width: 50,\n        align: 'left'\n      }, {\n        Header: 'Markdown Indicator',\n        accessor: 'indicator',\n        disableGroupBy: false,\n        Aggregated: function Aggregated(_ref7) {\n          var value = _ref7.value;\n          return \"\".concat(value);\n        },\n        width: 70,\n        align: 'left'\n      }],\n      data: []\n    };\n\n    _this.onRowClick = function (rowInfo) {\n      var selectedRow = _this.state.checkedSku;\n\n      if (_this.state.checkedSku.includes(rowInfo.index)) {\n        var findInd = selectedRow.indexOf(rowInfo.index);\n        selectedRow.splice(findInd, 1);\n      } else {\n        selectedRow.push(rowInfo.index);\n      }\n\n      _this.setState({\n        checkedSku: selectedRow\n      });\n    };\n\n    _this.state = {\n      checkedSku: [],\n      loader: false,\n      showAlertWarning: false,\n      tableData: _this.props.cockpitData.length ? _this.props.cockpitData : []\n    };\n    return _this;\n  }\n\n  _createClass(SKUCocktpit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getCockpitData();\n    }\n  }, {\n    key: \"downloadTable\",\n    value: function downloadTable(columns) {\n      var options = {\n        fieldSeparator: ',',\n        quoteStrings: '\"',\n        decimalSeparator: '.',\n        showLabels: true,\n        showTitle: true,\n        title: 'Sub Category Data',\n        useTextFile: false,\n        useBom: true,\n        useKeysAsHeaders: true // headers: ['Column 1', 'Column 2', etc...] <-- Won't work with useKeysAsHeaders present!\n\n      };\n      var csvExporter = new ExportToCsv(options);\n      csvExporter.generateCsv(this.props.cockpitData.data);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var count = 0;\n\n      if (this.props.cockpitData && this.props.cockpitData.data) {\n        this.props.cockpitData.data.forEach(function (item) {\n          if (item.indicator === 'URGENT') {\n            count++;\n          }\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"alertDivs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, this.state.showAlertWarning ? React.createElement(AlertWarning, {\n        message: \"Please select Sub Categories of same category and brand.\",\n        show: this.state.showAlertWarning,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }) : null), React.createElement(PageLoader, {\n        loader: this.props.loader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"calendarContainer\",\n        id: \"main-calendar-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"promo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card CalendarMain promoCalendarDiv1\",\n        id: \"promocalendar-maincontainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\",\n        style: {\n          padding: '10px 9px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"promolist-header pull-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"pipelineLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"SKU level details\")), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.downloadTable(_this2.pipelineDataNew.header);\n        },\n        className: \"btn btn-primary iconbutton download-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-download\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }))), React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, count + ' SKus are to be Marked Down'), React.createElement(\"button\", {\n        disabled: this.state.checkedSku.length === 0 ? true : false,\n        type: \"button\",\n        className: \"btn btn-primary pull-right\",\n        onClick: function onClick() {\n          return _this2.onCreateMarkdown();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Create Markdown\")), React.createElement(\"div\", {\n        style: {\n          padding: '1rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, this.props.cockpitData.data && this.props.cockpitData.data.length > 0 && React.createElement(DataTable, {\n        columns: this.pipelineDataNew.header,\n        data: this.state.tableData,\n        updateMyData: this.updateMyData,\n        columnAction: \"onlyRowSelection\",\n        visibleColumns: \"onlyRowSelection\",\n        getRowProps: function getRowProps(rowInfo) {\n          return {\n            onClick: function onClick() {\n              return _this2.onRowClick(rowInfo);\n            }\n          };\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return SKUCocktpit;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    cockpitData: state.cockpitReducer.cockpitData\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getCockpitData: function getCockpitData(val) {\n      return dispatch(_getCockpitData(val));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SKUCocktpit);","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/SKUCockpit/SKUCockpit.js"],"names":["React","Component","connect","PageLoader","getCockpitData","_","DataTable","ExportToCsv","AlertWarning","SKUCocktpit","props","componentDidUpdate","oldProps","isEqual","cockpitData","setState","loader","tableData","data","roundedMedian","leafValues","min","max","forEach","value","Math","round","updateMyData","rowIndex","columnId","old","val","map","row","index","pipelineDataNew","header","Header","accessor","groupByID","disableGroupBy","width","align","aggregate","Aggregated","onRowClick","rowInfo","selectedRow","state","checkedSku","includes","findInd","indexOf","splice","push","showAlertWarning","length","columns","options","fieldSeparator","quoteStrings","decimalSeparator","showLabels","showTitle","title","useTextFile","useBom","useKeysAsHeaders","csvExporter","generateCsv","count","item","indicator","padding","downloadTable","color","onCreateMarkdown","onClick","mapStateToProps","cockpitReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PageLoader from '../../utils/Loader';\nimport { getCockpitData } from '../../actions/cockpitAction';\nimport _ from 'underscore';\nimport DataTable from '../../services/reactTable';\nimport { ExportToCsv } from 'export-to-csv';\nimport AlertWarning from '../../utils/AlertMessage/alertDanger';\nimport './index.css';\n\nexport class SKUCocktpit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checkedSku: [],\n      loader: false,\n      showAlertWarning: false,\n      tableData: this.props.cockpitData.length ? this.props.cockpitData : [],\n    };\n  }\n\n  componentDidMount() {\n    this.props.getCockpitData();\n  }\n\n  componentDidUpdate = (oldProps) => {\n    if (!_.isEqual(oldProps.cockpitData, this.props.cockpitData)) {\n      this.setState({\n        loader: false,\n        tableData: this.props.cockpitData.data,\n      });\n    }\n  };\n\n  downloadTable(columns) {\n    const options = {\n      fieldSeparator: ',',\n      quoteStrings: '\"',\n      decimalSeparator: '.',\n      showLabels: true,\n      showTitle: true,\n      title: 'Sub Category Data',\n      useTextFile: false,\n      useBom: true,\n      useKeysAsHeaders: true,\n      // headers: ['Column 1', 'Column 2', etc...] <-- Won't work with useKeysAsHeaders present!\n    };\n\n    const csvExporter = new ExportToCsv(options);\n\n    csvExporter.generateCsv(this.props.cockpitData.data);\n  }\n\n  roundedMedian = (leafValues) => {\n    let min = leafValues[0] || 0;\n    let max = leafValues[0] || 0;\n\n    leafValues.forEach((value) => {\n      min = Math.min(min, value);\n      max = Math.max(max, value);\n    });\n\n    return Math.round((min + max) / 2);\n  };\n\n  updateMyData = (rowIndex, columnId, value) => {\n    // We also turn on the flag to not reset the page\n    this.setState((old) => {\n      let val = old.tableData.map((row, index) => {\n        if (index === rowIndex) {\n          return {\n            ...row,\n            [columnId]: value,\n          };\n        }\n        return row;\n      });\n      return { tableData: val };\n    });\n  };\n  pipelineDataNew = {\n    header: [\n      {\n        Header: 'SkU ID/name',\n        accessor: 'sku_id',\n        groupByID: 'sku_id',\n        disableGroupBy: false,\n        width: 50,\n        align: 'left',\n      },\n      {\n        Header: 'Brand',\n        accessor: 'brand_mn',\n        aggregate: 'uniqueCount',\n        disableGroupBy: false,\n        Aggregated: ({ value }) => `${value} Unique Names`,\n        width: 50,\n        align: 'left',\n      },\n      {\n        Header: 'Inventory onhand',\n        accessor: 'inventory',\n        aggregate: 'average',\n        disableGroupBy: false,\n        Aggregated: ({ value }) => `${value}`,\n        width: 55,\n        align: 'left',\n      },\n      {\n        Header: 'Quantity Sold',\n        accessor: 'quantity',\n        aggregate: 'average',\n        disableGroupBy: false,\n        Aggregated: ({ value }) => `${value}`,\n        width: 50,\n        align: 'left',\n      },\n      {\n        Header: 'YTD predicted Sales($)',\n        accessor: 'predicted',\n        aggregate: 'average',\n        disableGroupBy: false,\n        Aggregated: ({ value }) => `${value}`,\n        width: 55,\n        align: 'left',\n      },\n      {\n        Header: 'YTD Actual Sales($)',\n        accessor: 'sales',\n        aggregate: 'sum',\n        disableGroupBy: false,\n        Aggregated: ({ value }) => `${value}`,\n        width: 55,\n        align: 'left',\n      },\n      {\n        Header: '% Deviation',\n        accessor: 'deviation',\n        disableGroupBy: false,\n        aggregate: this.roundedMedian,\n        Aggregated: ({ value }) => `${value}`,\n        width: 50,\n        align: 'left',\n      },\n      {\n        Header: 'Markdown Indicator',\n        accessor: 'indicator',\n        disableGroupBy: false,\n        Aggregated: ({ value }) => `${value}`,\n        width: 70,\n        align: 'left',\n      },\n    ],\n    data: [],\n  };\n\n  onRowClick = (rowInfo) => {\n    let selectedRow = this.state.checkedSku;\n    if (this.state.checkedSku.includes(rowInfo.index)) {\n      let findInd = selectedRow.indexOf(rowInfo.index);\n      selectedRow.splice(findInd, 1);\n    } else {\n      selectedRow.push(rowInfo.index);\n    }\n    this.setState({\n      checkedSku: selectedRow,\n    });\n  };\n  render() {\n    let count = 0;\n    if (this.props.cockpitData && this.props.cockpitData.data) {\n      this.props.cockpitData.data.forEach((item) => {\n        if (item.indicator === 'URGENT') {\n          count++;\n        }\n      });\n    }\n\n    return (\n      <div>\n        <div className=\"alertDivs\">\n          {this.state.showAlertWarning ? (\n            <AlertWarning\n              message=\"Please select Sub Categories of same category and brand.\"\n              show={this.state.showAlertWarning}\n            />\n          ) : null}\n        </div>\n        <PageLoader loader={this.props.loader}>\n          <div className=\"calendarContainer\" id=\"main-calendar-container\">\n            <div className=\"promo\">\n              <div className=\"card CalendarMain promoCalendarDiv1\" id=\"promocalendar-maincontainer\">\n                <div className=\"\" style={{ padding: '10px 9px' }}>\n                  <div className=\"promolist-header pull-left\">\n                    <label className=\"pipelineLabel\">SKU level details</label>\n                  </div>\n                  <button\n                    onClick={() => this.downloadTable(this.pipelineDataNew.header)}\n                    className=\"btn btn-primary iconbutton download-btn\">\n                    <span>\n                      <i className=\"fa fa-download\" aria-hidden=\"true\" />\n                    </span>\n                  </button>\n                  <span style={{ color: 'red' }}>{count + ' SKus are to be Marked Down'}</span>\n                  <button\n                    disabled={this.state.checkedSku.length === 0 ? true : false}\n                    type=\"button\"\n                    className=\"btn btn-primary pull-right\"\n                    onClick={() => this.onCreateMarkdown()}>\n                    Create Markdown\n                  </button>\n                </div>\n                <div style={{ padding: '1rem' }}>\n                  {this.props.cockpitData.data && this.props.cockpitData.data.length > 0 && (\n                    <DataTable\n                      columns={this.pipelineDataNew.header}\n                      data={this.state.tableData}\n                      updateMyData={this.updateMyData}\n                      columnAction=\"onlyRowSelection\"\n                      visibleColumns=\"onlyRowSelection\"\n                      getRowProps={(rowInfo) => ({\n                        onClick: () => this.onRowClick(rowInfo),\n                      })}\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </PageLoader>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    cockpitData: state.cockpitReducer.cockpitData,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getCockpitData: (val) => dispatch(getCockpitData(val)),\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SKUCocktpit);\n"]},"metadata":{},"sourceType":"module"}