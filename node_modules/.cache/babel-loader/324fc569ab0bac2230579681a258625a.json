{"ast":null,"code":"import _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _default;\n\nvar initialState = {\n  reportingData: {},\n  cockpitData: {},\n  columnHeaders: {\n    Sales: {\n      'Revenue $': 'revenue$',\n      'Actual sales (units)': 'units_sold',\n      \"Last week's sales\": 'last_week_sales',\n      'AUR $': 'aur'\n    },\n    Margin: {\n      'Margin $': 'margin$',\n      'AUM $': 'aum'\n    },\n    Inventory: {\n      'In transit': 'inventory.inventory_in_transit',\n      'On order': 'inventory.inventory_on_order',\n      'In DC': 'inventory.inventory_in_dc',\n      'Weeks on hand': 'wos'\n    },\n    //do not move below two items to top of the object, will cause an issue in reporting metrics(_findKeys)\n    default: (_default = {\n      TY: 'margin_ty',\n      LY: 'margin_ly'\n    }, _defineProperty(_default, \"TY\", 'sell_through_ty'), _defineProperty(_default, \"LY\", 'sell_through_ly'), _defineProperty(_default, 'Style-Color', 'style_number'), _defineProperty(_default, 'Margin $', 'margin$'), _defineProperty(_default, 'AUM $', 'aum'), _defineProperty(_default, 'Revenue $', 'revenue$'), _defineProperty(_default, 'Actual sales (units)', 'units_sold'), _defineProperty(_default, \"Last week's sales\", 'last_week_sales'), _defineProperty(_default, 'AUR $', 'aur'), _defineProperty(_default, 'In transit', 'inventory.inventory_in_transit'), _defineProperty(_default, 'On order', 'inventory.inventory_on_order'), _defineProperty(_default, 'In DC', 'inventory.inventory_in_dc'), _defineProperty(_default, 'Weeks on hand', 'wos'), _default),\n    fixed: {\n      'SKU ID': 'SKU_Id',\n      'Style Description': 'style_desc',\n      'ST %': 'sellThrough',\n      'Markdown status': 'mdStatus'\n    }\n  }\n};\n\nvar getData = function getData(data, year) {\n  return Object.keys(data).sort(function (a, b) {\n    return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n  }).map(function (e) {\n    return data[e][year];\n  });\n};\n\nvar setMarkdownStatus = function setMarkdownStatus(data) {\n  return data.map(function (e) {\n    if (e.wos > 25) e.mdStatus = 'High';else if (e.wos > 15 && e.wos < 25) e.mdStatus = 'Medium';else e.mdStatus = 'Low';\n    return e;\n  });\n};\n\nexport default function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'SET_REPORTING_DATA':\n      return _objectSpread({}, state, {\n        reportingData: action.payload.message ? {\n          message: action.payload.message\n        } : {\n          sellThroughData: {\n            labels: Object.keys(action.payload.sell_through).sort(function (a, b) {\n              return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n            }),\n            datasets: [{\n              label: 'TY',\n              fill: false,\n              borderColor: '#44677b',\n              data: getData(action.payload.sell_through, 'ty'),\n              steppedLine: true\n            }, {\n              label: 'LY',\n              fill: false,\n              borderColor: '#a6cee3',\n              data: getData(action.payload.sell_through, 'ly'),\n              steppedLine: true\n            }]\n          },\n          inventoryData: {\n            labels: Object.keys(action.payload.inventory).sort(function (a, b) {\n              return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n            }),\n            datasets: [{\n              label: 'TY',\n              fill: false,\n              borderColor: '#44677b',\n              data: getData(action.payload.inventory, 'ty')\n            }, {\n              label: 'LY',\n              fill: false,\n              borderColor: '#a6cee3',\n              data: getData(action.payload.inventory, 'ly')\n            }]\n          },\n          marginData: {\n            labels: Object.keys(action.payload.margin).sort(function (a, b) {\n              return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n            }),\n            datasets: [{\n              label: 'TY',\n              fill: false,\n              borderColor: '#44677b',\n              data: getData(action.payload.margin, 'ty')\n            }, {\n              label: 'LY',\n              fill: false,\n              borderColor: '#a6cee3',\n              data: getData(action.payload.margin, 'ly')\n            }]\n          },\n          salesData: {\n            labels: ['Last year', 'Actual'],\n            datasets: [{\n              fill: false,\n              backgroundColor: ['#a6cee3', '#44677b'],\n              data: [action.payload.sales.ly, action.payload.sales.ty]\n            }]\n          }\n        }\n      });\n\n    case 'GET_SKU_COCKPIT':\n      return _objectSpread({}, state, {\n        cockpitData: setMarkdownStatus(action.payload)\n      });\n\n    case 'GET_COLUMNHEADERS':\n      return _objectSpread({}, state, {\n        columnHeaders: _objectSpread({}, state.columnHeaders)\n      });\n\n    case 'RESET_REPORTING_DATA':\n      return _objectSpread({}, state, {\n        reportingData: {},\n        cockpitData: {}\n      });\n\n    default:\n      return _objectSpread({}, state);\n  }\n}","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/reducers/reportingReducer.js"],"names":["initialState","reportingData","cockpitData","columnHeaders","Sales","Margin","Inventory","default","TY","LY","fixed","getData","data","year","Object","keys","sort","a","b","parseInt","slice","length","map","e","setMarkdownStatus","wos","mdStatus","state","action","type","payload","message","sellThroughData","labels","sell_through","datasets","label","fill","borderColor","steppedLine","inventoryData","inventory","marginData","margin","salesData","backgroundColor","sales","ly","ty"],"mappings":"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","sourcesContent":["const initialState = {\n  reportingData: {},\n  cockpitData: {},\n  columnHeaders: {\n    Sales: {\n      'Revenue $': 'revenue$',\n      'Actual sales (units)': 'units_sold',\n      \"Last week's sales\": 'last_week_sales',\n      'AUR $': 'aur',\n    },\n    Margin: {\n      'Margin $': 'margin$',\n      'AUM $': 'aum',\n    },\n    Inventory: {\n      'In transit': 'inventory.inventory_in_transit',\n      'On order': 'inventory.inventory_on_order',\n      'In DC': 'inventory.inventory_in_dc',\n      'Weeks on hand': 'wos',\n    },\n    //do not move below two items to top of the object, will cause an issue in reporting metrics(_findKeys)\n    default: {\n      TY: 'margin_ty',\n      LY: 'margin_ly',\n      TY: 'sell_through_ty',\n      LY: 'sell_through_ly',\n      'Style-Color': 'style_number',\n      'Margin $': 'margin$',\n      'AUM $': 'aum',\n      'Revenue $': 'revenue$',\n      'Actual sales (units)': 'units_sold',\n      \"Last week's sales\": 'last_week_sales',\n      'AUR $': 'aur',\n      'In transit': 'inventory.inventory_in_transit',\n      'On order': 'inventory.inventory_on_order',\n      'In DC': 'inventory.inventory_in_dc',\n      'Weeks on hand': 'wos',\n    },\n    fixed: {\n      'SKU ID': 'SKU_Id',\n      'Style Description': 'style_desc',\n      'ST %': 'sellThrough',\n      'Markdown status': 'mdStatus',\n    },\n  },\n};\nconst getData = (data, year) => {\n  return Object.keys(data)\n    .sort((a, b) => {\n      return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n    })\n    .map((e) => data[e][year]);\n};\n\nconst setMarkdownStatus = (data) => {\n  return data.map((e) => {\n    if (e.wos > 25) e.mdStatus = 'High';\n    else if (e.wos > 15 && e.wos < 25) e.mdStatus = 'Medium';\n    else e.mdStatus = 'Low';\n    return e;\n  });\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case 'SET_REPORTING_DATA':\n      return {\n        ...state,\n        reportingData: action.payload.message\n          ? { message: action.payload.message }\n          : {\n              sellThroughData: {\n                labels: Object.keys(action.payload.sell_through).sort((a, b) => {\n                  return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n                }),\n                datasets: [\n                  {\n                    label: 'TY',\n                    fill: false,\n                    borderColor: '#44677b',\n                    data: getData(action.payload.sell_through, 'ty'),\n                    steppedLine: true,\n                  },\n                  {\n                    label: 'LY',\n                    fill: false,\n                    borderColor: '#a6cee3',\n                    data: getData(action.payload.sell_through, 'ly'),\n                    steppedLine: true,\n                  },\n                ],\n              },\n              inventoryData: {\n                labels: Object.keys(action.payload.inventory).sort((a, b) => {\n                  return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n                }),\n                datasets: [\n                  {\n                    label: 'TY',\n                    fill: false,\n                    borderColor: '#44677b',\n                    data: getData(action.payload.inventory, 'ty'),\n                  },\n                  {\n                    label: 'LY',\n                    fill: false,\n                    borderColor: '#a6cee3',\n                    data: getData(action.payload.inventory, 'ly'),\n                  },\n                ],\n              },\n              marginData: {\n                labels: Object.keys(action.payload.margin).sort((a, b) => {\n                  return parseInt(a.slice(1, a.length)) - parseInt(b.slice(1, b.length));\n                }),\n                datasets: [\n                  {\n                    label: 'TY',\n                    fill: false,\n                    borderColor: '#44677b',\n                    data: getData(action.payload.margin, 'ty'),\n                  },\n                  {\n                    label: 'LY',\n                    fill: false,\n                    borderColor: '#a6cee3',\n                    data: getData(action.payload.margin, 'ly'),\n                  },\n                ],\n              },\n              salesData: {\n                labels: ['Last year', 'Actual'],\n                datasets: [\n                  {\n                    fill: false,\n                    backgroundColor: ['#a6cee3', '#44677b'],\n                    data: [action.payload.sales.ly, action.payload.sales.ty],\n                  },\n                ],\n              },\n            },\n      };\n    case 'GET_SKU_COCKPIT':\n      return {\n        ...state,\n        cockpitData: setMarkdownStatus(action.payload),\n      };\n    case 'GET_COLUMNHEADERS':\n      return {\n        ...state,\n        columnHeaders: {\n          ...state.columnHeaders,\n        },\n      };\n    case 'RESET_REPORTING_DATA':\n      return {\n        ...state,\n        reportingData: {},\n        cockpitData: {},\n      };\n    default:\n      return {\n        ...state,\n      };\n  }\n}\n"]},"metadata":{},"sourceType":"module"}