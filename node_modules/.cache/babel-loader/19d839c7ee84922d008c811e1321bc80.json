{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/draftStatus/index.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  li.nav-item {\\n    padding-right: 0;\\n  }\\n\\n  .nav-tabs .nav-item.show .nav-link,\\n  .nav-tabs .nav-link.active {\\n    background: none;\\n    border-bottom: 2px solid #44667a;\\n  }\\n  .nav-tabs .nav-link {\\n    border: 0px;\\n  }\\n  .nav-link {\\n    padding: 0 0.5rem;\\n  }\\n  .nav-tabs {\\n    margin-bottom: 1.3rem;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport MarkDownActions from '../../actions/markdowns';\nimport styled from 'styled-components';\nimport Draft from './draft';\nimport Status from './status';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport draftColdef from './draft/coldef';\n\nvar DraftStatus =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DraftStatus, _Component);\n\n  function DraftStatus(props) {\n    var _this;\n\n    _classCallCheck(this, DraftStatus);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DraftStatus).call(this, props));\n\n    _this.onToggleTab = function (tab) {\n      _this.setState({\n        toggle: !_this.state.toggle,\n        currentTab: tab\n      });\n\n      tab === 'draft' ? _this.getMarkdowns({\n        status: 'draft'\n      }) : _this.getMarkdowns();\n    };\n\n    _this.getMarkdowns = function (payload) {\n      _this.props.getMarkdowns(payload).then(function (resp) {\n        var tempStatusObj = {};\n\n        _this.props.markdowns.forEach(function (row) {\n          if (tempStatusObj.hasOwnProperty(row.status)) {\n            tempStatusObj[row.status] += 1;\n          } else {\n            tempStatusObj[\"\".concat(row.status)] = 1;\n          }\n        });\n\n        _this.setState({\n          statusCounts: tempStatusObj\n        });\n\n        if (resp.columnHeaders && Object.keys(resp.columnHeaders).length) {\n          var setDefaultColDef = draftColdef().filter(function (col) {\n            return resp.columnHeaders.default.includes(col.Header) || col.Header === 'Time Period';\n          });\n          var setDefaultLabel = [];\n          var setDefaultColumnOptions = [];\n          var setDefaultItems = [];\n\n          var colHeaders = _.cloneDeep(resp.columnHeaders);\n\n          var labels = Object.keys(colHeaders);\n          labels.splice(labels.indexOf('fixed'), 1);\n          labels.splice(labels.indexOf('default'), 1);\n\n          var _loop = function _loop() {\n            var label = _labels[_i];\n\n            function diff() {\n              var A = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : resp.columnHeaders[label];\n              var B = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : resp.columnHeaders.default;\n              return A.filter(function (a) {\n                return B.indexOf(a) !== -1;\n              });\n            }\n\n            if (diff().length) {\n              setDefaultColumnOptions.push.apply(setDefaultColumnOptions, _toConsumableArray(resp.columnHeaders[label]));\n              setDefaultItems.push.apply(setDefaultItems, _toConsumableArray(diff()));\n              setDefaultLabel.push(label);\n            }\n          };\n\n          for (var _i = 0, _labels = labels; _i < _labels.length; _i++) {\n            _loop();\n          }\n\n          var options = setDefaultColumnOptions.map(function (label) {\n            return {\n              label: label,\n              value: label\n            };\n          });\n          var selectedItems = setDefaultItems.map(function (label) {\n            return {\n              label: label,\n              value: label\n            };\n          });\n\n          _this.setState({\n            columns: setDefaultColDef,\n            selLabels: setDefaultLabel,\n            selectedItems: selectedItems,\n            columnOptions: options\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      toggle: false,\n      currentTab: 'draft',\n      selectedItems: [],\n      columnOptions: [],\n      selLabels: [],\n      columns: [],\n      statusCounts: {}\n    };\n    return _this;\n  }\n\n  _createClass(DraftStatus, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(props, state) {\n      if (state.currentTab !== this.state.currentTab) {\n        this.props.setMarkDowns([]);\n        this.props.setMDColumnHeaders({});\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Styles, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Tabs, {\n        defaultActiveKey: \"draft\",\n        id: \"uncontrolled-tab-example\",\n        onSelect: this.onToggleTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        eventKey: \"draft\",\n        title: \"Draft\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Draft, {\n        getMarkdowns: this.getMarkdowns,\n        columns: this.state.columns,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      })), React.createElement(Tab, {\n        eventKey: \"status\",\n        title: \"Status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Status, {\n        getMarkdowns: this.getMarkdowns,\n        columns: this.state.columns,\n        statusCounts: this.state.statusCounts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return DraftStatus;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    markdowns: store.markDownReducers.markdowns,\n    getColumnHeaders: store.markDownReducers.columnHeaders,\n    getStatusOptions: store.draftStatusReducer.statusOptions\n  };\n};\n\nvar mapActionToProps = {\n  getMarkdowns: MarkDownActions.getMarkdowns,\n  setMarkDowns: MarkDownActions.setMarkDowns,\n  setMDColumnHeaders: MarkDownActions.setMDColumnHeaders\n};\nexport default connect(mapStateToProps, mapActionToProps)(DraftStatus);\nvar Styles = styled.div(_templateObject());","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/draftStatus/index.js"],"names":["React","Component","Tabs","Tab","MarkDownActions","styled","Draft","Status","connect","_","draftColdef","DraftStatus","props","onToggleTab","tab","setState","toggle","state","currentTab","getMarkdowns","status","payload","then","resp","tempStatusObj","markdowns","forEach","row","hasOwnProperty","statusCounts","columnHeaders","Object","keys","length","setDefaultColDef","filter","col","default","includes","Header","setDefaultLabel","setDefaultColumnOptions","setDefaultItems","colHeaders","cloneDeep","labels","splice","indexOf","label","diff","A","B","a","push","options","map","value","selectedItems","columns","selLabels","columnOptions","setMarkDowns","setMDColumnHeaders","mapStateToProps","store","markDownReducers","getColumnHeaders","getStatusOptions","draftStatusReducer","statusOptions","mapActionToProps","Styles","div"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport MarkDownActions from '../../actions/markdowns';\nimport styled from 'styled-components';\nimport Draft from './draft';\nimport Status from './status';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport draftColdef from './draft/coldef';\n\nclass DraftStatus extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      toggle: false,\n      currentTab: 'draft',\n      selectedItems: [],\n      columnOptions: [],\n      selLabels: [],\n      columns: [],\n      statusCounts: {},\n    };\n  }\n\n  componentDidUpdate(props, state) {\n    if (state.currentTab !== this.state.currentTab) {\n      this.props.setMarkDowns([]);\n      this.props.setMDColumnHeaders({});\n    }\n  }\n\n  onToggleTab = (tab) => {\n    this.setState({\n      toggle: !this.state.toggle,\n      currentTab: tab,\n    });\n    tab === 'draft' ? this.getMarkdowns({ status: 'draft' }) : this.getMarkdowns();\n  };\n  getMarkdowns = (payload) => {\n    this.props.getMarkdowns(payload).then((resp) => {\n      let tempStatusObj = {};\n      this.props.markdowns.forEach((row) => {\n        if (tempStatusObj.hasOwnProperty(row.status)) {\n          tempStatusObj[row.status] += 1;\n        } else {\n          tempStatusObj[`${row.status}`] = 1;\n        }\n      });\n      this.setState({\n        statusCounts: tempStatusObj,\n      });\n      if (resp.columnHeaders && Object.keys(resp.columnHeaders).length) {\n        let setDefaultColDef = draftColdef().filter((col) =>\n          resp.columnHeaders.default.includes(col.Header) || col.Header === 'Time Period'\n        );\n        let setDefaultLabel = [];\n        let setDefaultColumnOptions = [];\n        let setDefaultItems = [];\n        let colHeaders = _.cloneDeep(resp.columnHeaders);\n        let labels = Object.keys(colHeaders);\n        labels.splice(labels.indexOf('fixed'), 1);\n        labels.splice(labels.indexOf('default'), 1);\n        for (const label of labels) {\n          function diff(A = resp.columnHeaders[label], B = resp.columnHeaders.default) {\n            return A.filter(function (a) {\n              return B.indexOf(a) !== -1;\n            });\n          }\n\n          if (diff().length) {\n            setDefaultColumnOptions.push(...resp.columnHeaders[label]);\n            setDefaultItems.push(...diff());\n            setDefaultLabel.push(label);\n          }\n        }\n        let options = setDefaultColumnOptions.map((label) => {\n          return {\n            label: label,\n            value: label,\n          };\n        });\n        let selectedItems = setDefaultItems.map((label) => {\n          return {\n            label: label,\n            value: label,\n          };\n        });\n        this.setState({\n          columns: setDefaultColDef,\n          selLabels: setDefaultLabel,\n          selectedItems: selectedItems,\n          columnOptions: options,\n        });\n      }\n    });\n  };\n  render() {\n    return (\n      <Styles>\n        <Tabs defaultActiveKey=\"draft\" id=\"uncontrolled-tab-example\" onSelect={this.onToggleTab}>\n          <Tab eventKey=\"draft\" title=\"Draft\">\n            <Draft getMarkdowns={this.getMarkdowns} columns={this.state.columns} />\n          </Tab>\n          <Tab eventKey=\"status\" title=\"Status\">\n            <Status\n              getMarkdowns={this.getMarkdowns}\n              columns={this.state.columns}\n              statusCounts={this.state.statusCounts}\n            />\n          </Tab>\n        </Tabs>\n      </Styles>\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    markdowns: store.markDownReducers.markdowns,\n    getColumnHeaders: store.markDownReducers.columnHeaders,\n    getStatusOptions: store.draftStatusReducer.statusOptions,\n  };\n};\nconst mapActionToProps = {\n  getMarkdowns: MarkDownActions.getMarkdowns,\n  setMarkDowns: MarkDownActions.setMarkDowns,\n  setMDColumnHeaders: MarkDownActions.setMDColumnHeaders,\n};\n\nexport default connect(mapStateToProps, mapActionToProps)(DraftStatus);\n\nconst Styles = styled.div`\n  li.nav-item {\n    padding-right: 0;\n  }\n\n  .nav-tabs .nav-item.show .nav-link,\n  .nav-tabs .nav-link.active {\n    background: none;\n    border-bottom: 2px solid #44667a;\n  }\n  .nav-tabs .nav-link {\n    border: 0px;\n  }\n  .nav-link {\n    padding: 0 0.5rem;\n  }\n  .nav-tabs {\n    margin-bottom: 1.3rem;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}