{"ast":null,"code":"import axios from 'axios';\nimport { config } from '../utils/config';\n\nvar fillMissingWeeks = function fillMissingWeeks(data, weeks) {\n  for (var i = weeks[0]; i <= weeks[weeks.length - 1]; i++) {\n    if (!data.sell_through.hasOwnProperty('W' + i)) {\n      data.sell_through['W' + i] = data.sell_through['W' + Number(i - 1)];\n    }\n\n    if (!data.margin.hasOwnProperty('W' + i)) {\n      data.margin['W' + i] = {\n        ty: 0,\n        ly: 0\n      };\n    }\n\n    if (!data.inventory.hasOwnProperty('W' + i)) {\n      data.inventory['W' + i] = {\n        ty: 0,\n        ly: 0\n      };\n    }\n  }\n\n  return data;\n};\n\nvar reportingActions = {\n  getReportingData: function getReportingData(req) {\n    return function (dispatch) {\n      dispatch({\n        type: 'LOADER_STATE',\n        payload: {\n          status: true\n        }\n      });\n      axios({\n        url: \"\".concat(config.createMarkdownURL, \"/getReporting/\"),\n        method: 'POST',\n        data: req\n      }).then(function (resp) {\n        if (req.reportingType === 'week_level_aggregated_data') {\n          dispatch({\n            type: 'SET_REPORTING_DATA',\n            payload: resp.data.data ? fillMissingWeeks(resp.data.data, req.week) : {\n              message: 'No data found. Please try with different filters.'\n            }\n          });\n          dispatch({\n            type: 'GET_SKU_COCKPIT',\n            payload: []\n          });\n        } else {\n          dispatch({\n            type: 'GET_SKU_COCKPIT',\n            payload: resp.data.data.length ? resp.data.data : {\n              message: 'No data found. Please try with different filters.'\n            }\n          });\n        }\n\n        dispatch({\n          type: 'LOADER_STATE',\n          payload: {\n            status: false\n          }\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n  }\n};\nexport default reportingActions;","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/actions/reportingActions.js"],"names":["axios","config","fillMissingWeeks","data","weeks","i","length","sell_through","hasOwnProperty","Number","margin","ty","ly","inventory","reportingActions","getReportingData","req","dispatch","type","payload","status","url","createMarkdownURL","method","then","resp","reportingType","week","message","catch","err","console","log"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { config } from '../utils/config';\nconst fillMissingWeeks = (data, weeks) => {\n  for (let i = weeks[0]; i <= weeks[weeks.length - 1]; i++) {\n    if (!data.sell_through.hasOwnProperty('W' + i)) {\n      data.sell_through['W' + i] = data.sell_through['W' + Number(i - 1)];\n    }\n    if (!data.margin.hasOwnProperty('W' + i)) {\n      data.margin['W' + i] = { ty: 0, ly: 0 };\n    }\n    if (!data.inventory.hasOwnProperty('W' + i)) {\n      data.inventory['W' + i] = { ty: 0, ly: 0 };\n    }\n  }\n  return data;\n};\nconst reportingActions = {\n  getReportingData: (req) => {\n    return (dispatch) => {\n      dispatch({\n        type: 'LOADER_STATE',\n        payload: {\n          status: true,\n        },\n      });\n      axios({\n        url: `${config.createMarkdownURL}/getReporting/`,\n        method: 'POST',\n        data: req,\n      })\n        .then((resp) => {\n          if (req.reportingType === 'week_level_aggregated_data') {\n            dispatch({\n              type: 'SET_REPORTING_DATA',\n              payload: resp.data.data\n                ? fillMissingWeeks(resp.data.data, req.week)\n                : { message: 'No data found. Please try with different filters.' },\n            });\n            dispatch({\n              type: 'GET_SKU_COCKPIT',\n              payload: [],\n            });\n          } else {\n            dispatch({\n              type: 'GET_SKU_COCKPIT',\n              payload: resp.data.data.length\n                ? resp.data.data\n                : { message: 'No data found. Please try with different filters.' },\n            });\n          }\n          dispatch({\n            type: 'LOADER_STATE',\n            payload: {\n              status: false,\n            },\n          });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    };\n  },\n};\n\nexport default reportingActions;\n"]},"metadata":{},"sourceType":"module"}