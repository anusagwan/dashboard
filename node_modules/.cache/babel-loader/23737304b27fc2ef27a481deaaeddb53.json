{"ast":null,"code":"import _regeneratorRuntime from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/services/filters/index.js\";\nimport React, { Component } from 'react';\nimport { labels } from './config';\nimport Select from '../select';\nimport './index.css';\nimport { connect } from 'react-redux';\nimport { DateRangePicker } from 'react-dates';\nimport FilterActions from '../../actions/filtersAction';\nimport moment from 'moment';\n\nvar Filters =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Filters, _Component);\n\n  function Filters(props) {\n    var _this;\n\n    _classCallCheck(this, Filters);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Filters).call(this, props));\n\n    _this.getHierarchyOptions = function (val, hierarchy) {\n      var resetHierachies = {};\n\n      for (var i = hierarchy + 1; i < _this.props.hierarchy.length; i++) {\n        resetHierachies[\"hierarchy\".concat(i)] = null;\n      }\n\n      _this.setState(_objectSpread(_defineProperty({}, \"hierarchy\".concat(hierarchy), val), resetHierachies),\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var func, req, _i;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.props[\"setSelectedHierarchy\".concat(hierarchy)](val.map(function (e) {\n                  return e.value;\n                }));\n\n              case 2:\n                func = hierarchy === 6 ? \"getStores\" : \"getHierarchyLevel\".concat(hierarchy + 1);\n                req = {}; // if (this.props.selectedDrops.length) {\n                //   req.drops = this.props.selectedDrops;\n                // }\n\n                for (_i = 1; _i <= hierarchy; _i++) {\n                  req[\"hierarchy\".concat(_i)] = _this.props[\"selectedHierarchy\".concat(_i)];\n                }\n\n                if (_this.props[func]) {\n                  if (Object.keys(req).length) {\n                    _this.props[func](req);\n                  } else {\n                    _this.props[func]();\n                  }\n                }\n\n                _this.setState({\n                  filters: _objectSpread({}, req)\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })));\n    };\n\n    _this.setDrop = function (val) {\n      var req = {};\n      var selItems = val.map(function (item) {\n        return item.label;\n      });\n      req['drop'] = selItems;\n\n      _this.setState({\n        filters: _objectSpread({}, req),\n        drops: val\n      }, function () {\n        _this.props.setSelectedDrops(val.map(function (v) {\n          return v.value;\n        }));\n      });\n    };\n\n    _this.setStores = function (val) {\n      var req = {};\n      var selItems = val.map(function (item) {\n        return item.label;\n      });\n      req['stores'] = selItems;\n\n      _this.setState({\n        filters: _objectSpread({}, req),\n        stores: val\n      }, function () {\n        _this.props.setSelectedStores(val.map(function (v) {\n          return v.value;\n        }));\n      });\n    };\n\n    _this.reset = function () {\n      _this.setState({\n        drops: null,\n        startDate: null,\n        endDate: null,\n        hierarchy1: null,\n        hierarchy2: null,\n        hierarchy3: null,\n        hierarchy4: null,\n        hierarchy5: null,\n        hierarchy6: null,\n        stores: null\n      }, function () {\n        return _this.props.resetFilters();\n      });\n    };\n\n    _this.onDatesChange = function (_ref2) {\n      var startDate = _ref2.startDate,\n          endDate = _ref2.endDate;\n\n      _this.setState({\n        startDate: startDate,\n        endDate: endDate\n      });\n\n      var weeks = [];\n\n      if (endDate) {\n        for (var i = moment(startDate).week(); i <= moment(endDate).week(); i++) {\n          weeks.push(i);\n        }\n      }\n\n      _this.props.setDateRange({\n        startDate: moment(startDate).format('MM-DD-YYYY'),\n        endDate: moment(endDate).format('MM-DD-YYYY'),\n        weeks: weeks\n      });\n    };\n\n    _this.state = {\n      drops: null,\n      startDate: null,\n      filters: {},\n      endDate: null,\n      hierarchy1: null,\n      hierarchy2: null,\n      hierarchy3: null,\n      hierarchy4: null,\n      hierarchy5: null,\n      hierarchy6: null,\n      stores: null\n    };\n    props.getDrops();\n    props.getHierarchyLevel1();\n    return _this;\n  }\n\n  _createClass(Filters, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row ml-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, this.props.drop && React.createElement(\"div\", {\n        className: \"col-md-2 filter-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"mb-1 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, labels.drop), React.createElement(Select, {\n        options: this.props.drops,\n        onChange: function onChange(option) {\n          return _this2.setDrop(option);\n        },\n        getOptionLabel: function getOptionLabel(option) {\n          return option.label + (option.year ? option.year : '');\n        },\n        value: this.state.drops,\n        isMulti: true,\n        allowSelectAll: true // isDisabled={!this.props.drops || !this.props.drops.length}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), this.props.hierarchy.map(function (filter, i) {\n        return React.createElement(\"div\", {\n          className: \"col-md-2 filter-block\",\n          key: filter,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"mb-1 mt-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, labels[filter]), React.createElement(Select, {\n          options: _this2.props[filter],\n          onChange: function onChange(option) {\n            return _this2.getHierarchyOptions(option, i + 1);\n          },\n          value: _this2.state[\"hierarchy\".concat(i + 1)],\n          isMulti: true,\n          allowSelectAll: true // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n          ,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }));\n      }), this.props.drop && React.createElement(\"div\", {\n        className: \"col-md-2 filter-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"mb-1 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, labels.store), React.createElement(Select, {\n        options: this.props.stores,\n        onChange: function onChange(option) {\n          return _this2.setStores(option);\n        },\n        value: this.state.stores,\n        isMulti: true,\n        allowSelectAll: true // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-2 filter-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"mb-1 mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Date range\"), React.createElement(DateRangePicker, {\n        showClearDates: true,\n        startDate: this.state.startDate,\n        startDateId: \"startDate\",\n        endDate: this.state.endDate,\n        endDateId: \"endDate\" // onDatesChange={({ startDate, endDate }) => this.setState({ startDate, endDate })}\n        ,\n        onDatesChange: this.onDatesChange,\n        focusedInput: this.state.focusedInput,\n        onFocusChange: function onFocusChange(focusedInput) {\n          return _this2.setState({\n            focusedInput: focusedInput\n          });\n        },\n        isOutsideRange: function isOutsideRange(day) {\n          if (_this2.state.startDate && _this2.state.endDate) {\n            return true;\n          } else if (_this2.state.receiptStartDate) {\n            return moment(day).day() !== 6;\n          } else {\n            return moment(day).day() !== 0;\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-2 mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.props.onFilter({\n            filters: _this2.state.filters,\n            startDate: _this2.state.startDate,\n            endDate: _this2.state.endDate\n          });\n        },\n        className: \"col-md-5 btn btn-primary btn-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), \"\\xA0 Filter\")), React.createElement(\"button\", {\n        className: \"col-md-6 offset-1 btn btn-primary btn-filter btn-filter-reset\",\n        onClick: this.reset,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-repeat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), \"\\xA0 Reset\")))));\n    }\n  }]);\n\n  return Filters;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    drops: store.filtersReducer.drops,\n    selectedDrops: store.filtersReducer.selectedDrops,\n    hierarchy1: store.filtersReducer.hierarchy1,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    hierarchy2: store.filtersReducer.hierarchy2,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    hierarchy3: store.filtersReducer.hierarchy3,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    hierarchy4: store.filtersReducer.hierarchy4,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    hierarchy5: store.filtersReducer.hierarchy5,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    hierarchy6: store.filtersReducer.hierarchy6,\n    selectedHierarchy6: store.filtersReducer.selectedHierarchy6,\n    stores: store.filtersReducer.stores,\n    selectedStores: store.filtersReducer.selectedStores,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks\n  };\n};\n\nvar mapDispatchToProps = {\n  getDrops: FilterActions.getDrops,\n  getHierarchyLevel1: FilterActions.getHierarchyLevel1,\n  getHierarchyLevel2: FilterActions.getHierarchyLevel2,\n  getHierarchyLevel3: FilterActions.getHierarchyLevel3,\n  getHierarchyLevel4: FilterActions.getHierarchyLevel4,\n  getHierarchyLevel5: FilterActions.getHierarchyLevel5,\n  getHierarchyLevel6: FilterActions.getHierarchyLevel6,\n  getStores: FilterActions.getStores,\n  setSelectedDrops: FilterActions.setSelectedDrops,\n  setSelectedHierarchy1: FilterActions.setSelectedHierarchy1,\n  setSelectedHierarchy2: FilterActions.setSelectedHierarchy2,\n  setSelectedHierarchy3: FilterActions.setSelectedHierarchy3,\n  setSelectedHierarchy4: FilterActions.setSelectedHierarchy4,\n  setSelectedHierarchy5: FilterActions.setSelectedHierarchy5,\n  setSelectedHierarchy6: FilterActions.setSelectedHierarchy6,\n  setSelectedStores: FilterActions.setSelectedStores,\n  setDateRange: FilterActions.setDateRange,\n  resetFilters: FilterActions.resetFilters\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Filters);","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/services/filters/index.js"],"names":["React","Component","labels","Select","connect","DateRangePicker","FilterActions","moment","Filters","props","getHierarchyOptions","val","hierarchy","resetHierachies","i","length","setState","map","e","value","func","req","Object","keys","filters","setDrop","selItems","item","label","drops","setSelectedDrops","v","setStores","stores","setSelectedStores","reset","startDate","endDate","hierarchy1","hierarchy2","hierarchy3","hierarchy4","hierarchy5","hierarchy6","resetFilters","onDatesChange","weeks","week","push","setDateRange","format","state","getDrops","getHierarchyLevel1","drop","option","year","filter","store","focusedInput","day","receiptStartDate","onFilter","mapStateToProps","filtersReducer","selectedDrops","selectedHierarchy1","selectedHierarchy2","selectedHierarchy3","selectedHierarchy4","selectedHierarchy5","selectedHierarchy6","selectedStores","mapDispatchToProps","getHierarchyLevel2","getHierarchyLevel3","getHierarchyLevel4","getHierarchyLevel5","getHierarchyLevel6","getStores","setSelectedHierarchy1","setSelectedHierarchy2","setSelectedHierarchy3","setSelectedHierarchy4","setSelectedHierarchy5","setSelectedHierarchy6"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { labels } from './config';\nimport Select from '../select';\nimport './index.css';\nimport { connect } from 'react-redux';\nimport { DateRangePicker } from 'react-dates';\nimport FilterActions from '../../actions/filtersAction';\nimport moment from 'moment';\n\nclass Filters extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      drops: null,\n      startDate: null,\n      filters: {},\n      endDate: null,\n      hierarchy1: null,\n      hierarchy2: null,\n      hierarchy3: null,\n      hierarchy4: null,\n      hierarchy5: null,\n      hierarchy6: null,\n      stores: null,\n    };\n    props.getDrops();\n    props.getHierarchyLevel1();\n  }\n\n  getHierarchyOptions = (val, hierarchy) => {\n    let resetHierachies = {};\n    for (let i = hierarchy + 1; i < this.props.hierarchy.length; i++) {\n      resetHierachies[`hierarchy${i}`] = null;\n    }\n    this.setState({ [`hierarchy${hierarchy}`]: val, ...resetHierachies }, async () => {\n      await this.props[`setSelectedHierarchy${hierarchy}`](val.map((e) => e.value));\n      let func = hierarchy === 6 ? `getStores` : `getHierarchyLevel${hierarchy + 1}`;\n      let req = {};\n      // if (this.props.selectedDrops.length) {\n      //   req.drops = this.props.selectedDrops;\n      // }\n      for (let i = 1; i <= hierarchy; i++) {\n        req[`hierarchy${i}`] = this.props[`selectedHierarchy${i}`];\n      }\n      if (this.props[func]) {\n        if (Object.keys(req).length) {\n          this.props[func](req);\n        } else {\n          this.props[func]();\n        }\n      }\n      this.setState({ filters: { ...req } });\n    });\n  };\n  setDrop = (val) => {\n    let req = {};\n    let selItems = val.map((item) => item.label);\n    req['drop'] = selItems;\n    this.setState({ filters: { ...req }, drops: val }, () => {\n      this.props.setSelectedDrops(val.map((v) => v.value));\n    });\n  };\n  setStores = (val) => {\n    let req = {};\n    let selItems = val.map((item) => item.label);\n    req['stores'] = selItems;\n    this.setState({ filters: { ...req }, stores: val }, () => {\n      this.props.setSelectedStores(val.map((v) => v.value));\n    });\n  };\n  reset = () => {\n    this.setState(\n      {\n        drops: null,\n        startDate: null,\n        endDate: null,\n        hierarchy1: null,\n        hierarchy2: null,\n        hierarchy3: null,\n        hierarchy4: null,\n        hierarchy5: null,\n        hierarchy6: null,\n        stores: null,\n      },\n      () => this.props.resetFilters()\n    );\n  };\n  onDatesChange = ({ startDate, endDate }) => {\n    this.setState({\n      startDate,\n      endDate,\n    });\n    let weeks = [];\n    if (endDate) {\n      for (let i = moment(startDate).week(); i <= moment(endDate).week(); i++) {\n        weeks.push(i);\n      }\n    }\n    this.props.setDateRange({\n      startDate: moment(startDate).format('MM-DD-YYYY'),\n      endDate: moment(endDate).format('MM-DD-YYYY'),\n      weeks,\n    });\n  };\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"row ml-4\">\n          {this.props.drop && (\n            <div className=\"col-md-2 filter-block\">\n              <label className=\"mb-1 mt-3\">{labels.drop}</label>\n              <Select\n                options={this.props.drops}\n                onChange={(option) => this.setDrop(option)}\n                getOptionLabel={(option) => option.label + (option.year ? option.year : '')}\n                value={this.state.drops}\n                isMulti\n                allowSelectAll\n                // isDisabled={!this.props.drops || !this.props.drops.length}\n              />\n            </div>\n          )}\n          {this.props.hierarchy.map((filter, i) => (\n            <div className=\"col-md-2 filter-block\" key={filter}>\n              <label className=\"mb-1 mt-3\">{labels[filter]}</label>\n              <Select\n                options={this.props[filter]}\n                onChange={(option) => this.getHierarchyOptions(option, i + 1)}\n                value={this.state[`hierarchy${i + 1}`]}\n                isMulti\n                allowSelectAll\n                // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n              />\n            </div>\n          ))}\n          {this.props.drop && (\n            <div className=\"col-md-2 filter-block\">\n              <label className=\"mb-1 mt-3\">{labels.store}</label>\n              <Select\n                options={this.props.stores}\n                onChange={(option) => this.setStores(option)}\n                value={this.state.stores}\n                isMulti\n                allowSelectAll\n                // isDisabled={!(this.state[`hierarchy${i}`] && this.state[`hierarchy${i}`].length)}\n              />\n            </div>\n          )}\n          <div className=\"col-md-2 filter-block\">\n            <label className=\"mb-1 mt-3\">Date range</label>\n            <DateRangePicker\n              showClearDates\n              startDate={this.state.startDate}\n              startDateId=\"startDate\"\n              endDate={this.state.endDate}\n              endDateId=\"endDate\"\n              // onDatesChange={({ startDate, endDate }) => this.setState({ startDate, endDate })}\n              onDatesChange={this.onDatesChange}\n              focusedInput={this.state.focusedInput}\n              onFocusChange={(focusedInput) => this.setState({ focusedInput })}\n              isOutsideRange={(day) => {\n                if (this.state.startDate && this.state.endDate) {\n                  return true;\n                } else if (this.state.receiptStartDate) {\n                  return moment(day).day() !== 6;\n                } else {\n                  return moment(day).day() !== 0;\n                }\n              }}\n            />\n          </div>\n          <div className=\"col-md-2 mt-5\">\n            <button\n              onClick={() =>\n                this.props.onFilter({\n                  filters: this.state.filters,\n                  startDate: this.state.startDate,\n                  endDate: this.state.endDate,\n                })\n              }\n              className=\"col-md-5 btn btn-primary btn-filter\">\n              <span>\n                <i className=\"fa fa-filter\"></i>&nbsp; Filter\n              </span>\n            </button>\n            <button\n              className=\"col-md-6 offset-1 btn btn-primary btn-filter btn-filter-reset\"\n              onClick={this.reset}>\n              <span>\n                <i className=\"fa fa-repeat\"></i>&nbsp; Reset\n              </span>\n            </button>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => {\n  return {\n    drops: store.filtersReducer.drops,\n    selectedDrops: store.filtersReducer.selectedDrops,\n    hierarchy1: store.filtersReducer.hierarchy1,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    hierarchy2: store.filtersReducer.hierarchy2,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    hierarchy3: store.filtersReducer.hierarchy3,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    hierarchy4: store.filtersReducer.hierarchy4,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    hierarchy5: store.filtersReducer.hierarchy5,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    hierarchy6: store.filtersReducer.hierarchy6,\n    selectedHierarchy6: store.filtersReducer.selectedHierarchy6,\n    stores: store.filtersReducer.stores,\n    selectedStores: store.filtersReducer.selectedStores,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n  };\n};\nconst mapDispatchToProps = {\n  getDrops: FilterActions.getDrops,\n  getHierarchyLevel1: FilterActions.getHierarchyLevel1,\n  getHierarchyLevel2: FilterActions.getHierarchyLevel2,\n  getHierarchyLevel3: FilterActions.getHierarchyLevel3,\n  getHierarchyLevel4: FilterActions.getHierarchyLevel4,\n  getHierarchyLevel5: FilterActions.getHierarchyLevel5,\n  getHierarchyLevel6: FilterActions.getHierarchyLevel6,\n  getStores: FilterActions.getStores,\n  setSelectedDrops: FilterActions.setSelectedDrops,\n  setSelectedHierarchy1: FilterActions.setSelectedHierarchy1,\n  setSelectedHierarchy2: FilterActions.setSelectedHierarchy2,\n  setSelectedHierarchy3: FilterActions.setSelectedHierarchy3,\n  setSelectedHierarchy4: FilterActions.setSelectedHierarchy4,\n  setSelectedHierarchy5: FilterActions.setSelectedHierarchy5,\n  setSelectedHierarchy6: FilterActions.setSelectedHierarchy6,\n  setSelectedStores: FilterActions.setSelectedStores,\n  setDateRange: FilterActions.setDateRange,\n  resetFilters: FilterActions.resetFilters,\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Filters);\n"]},"metadata":{},"sourceType":"module"}