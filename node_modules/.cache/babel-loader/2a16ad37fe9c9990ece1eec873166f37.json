{"ast":null,"code":"import _objectSpread from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/services/RetailCalendarDatePicker/NRFDatePicker.js\";\nimport React, { Component } from 'react';\nimport { calendarConfig } from '../../config';\nimport moment from 'moment';\nimport _ from 'lodash';\nvar fstMoOfYr = calendarConfig.fstMoOfYr;\nvar days = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nvar nrfWksPatternForAYr = [4, 4, 5, 4, 4, 5, 4, 4, 5, 4, 4, 5];\nvar moJanIdx = 0;\nvar _4Wks = 4;\nvar _5Wks = 5;\nvar nrfCalYrs = {};\n\nfunction generateNrfCalYrs(yr, nrfCalYrs) {\n  var noOfDaysInAWk = days.length;\n  var noOfMosInAYr = nrfWksPatternForAYr.length;\n  var stDt = moment().year(yr).week(1).startOf('week');\n  var doesJanHaveFiveWks = moment().year(yr).weeksInYear() === 53;\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _5Wks); // Inserting Dates by forward calculating from the start date\n\n  var nxtDt = moment(stDt);\n\n  for (var moIdx = fstMoOfYr; moIdx < noOfMosInAYr + fstMoOfYr; moIdx++) {\n    !nrfCalYrs[yr] && (nrfCalYrs[yr] = {});\n    moIdx > 11 && !nrfCalYrs[yr + 1] && (nrfCalYrs[yr + 1] = {});\n    var momentMoIdx = moment().month(moIdx).month();\n    var moDts = [];\n\n    for (var nrfWks = 0; nrfWks < nrfWksPatternForAYr[momentMoIdx]; nrfWks++) {\n      for (var dayIdx = 0; dayIdx < noOfDaysInAWk; dayIdx++) {\n        if (dayIdx === 0) {\n          moDts[nrfWks] = [];\n        }\n\n        moDts[nrfWks].push(moment(nxtDt));\n        nxtDt = nxtDt.add(1, 'days');\n      }\n    }\n\n    moIdx < 12 ? nrfCalYrs[yr][momentMoIdx] = moDts : nrfCalYrs[yr + 1][momentMoIdx] = moDts;\n  } // Setting no of weeks for Jan back to default\n\n\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _4Wks);\n  return nrfCalYrs;\n}\n\nvar Calendar = function Calendar(props) {\n  var getCalendarCellStyle = function getCalendarCellStyle(dt, stDt, endDt) {\n    var className = 'calendar-date_default';\n\n    if (props.startDate && !props.endDate) {\n      dt.isSame(props.startDate) && (className = 'selected-date');\n      dt.isAfter(props.startDate) && dt.isSameOrBefore(props.mouseOveredDt) && (className = 'calendar-date_hovered');\n    } else if (props.startDate && props.endDate) {\n      (dt.isSame(props.startDate) || dt.isSame(props.endDate)) && (className = 'selected-date');\n      dt.isAfter(props.startDate) && dt.isBefore(props.endDate) && (className = 'calendar-date_hovered');\n      props.mouseOveredDt && (dt.isBefore(props.startDate) || dt.isAfter(props.endDate)) && props.mouseOveredDt.isBetween(moment(stDt).subtract(1, 'days'), moment(endDt).add(1, 'days')) && (className = 'calendar-date_default-hover');\n    } else {\n      props.mouseOveredDt && props.mouseOveredDt.isBetween(moment(stDt).subtract(1, 'days'), moment(endDt).add(1, 'days')) && (className = 'calendar-date_default-hover');\n    }\n\n    return className;\n  };\n\n  var startDay = 0,\n      endDay = 6; //for thursday to wednesday selection --- <  startDay = 3,endDay = 2;  >---\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"t-a-c mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, props.month.format('MMM'), \" \", props.month.format('YYYY')), React.createElement(\"table\", {\n    className: \"m-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), props.nrfCalDays && props.nrfCalDays[0] && _.map(props.nrfCalDays[0], function (day, idx) {\n    return React.createElement(\"th\", {\n      className: \"calendar-cell-size calendar-day\",\n      key: idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, day.format('dd'));\n  })), props.nrfCalDays && _.map(props.nrfCalDays, function (week, idx) {\n    return React.createElement(\"tr\", {\n      key: idx,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      className: \"calendar-cell-size calendar-date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, props.nrfCalDays[idx][0].week()), week.map(function (dt, idx) {\n      return React.createElement(\"td\", {\n        key: idx,\n        onClick: function onClick() {\n          if (!props.startDate) {\n            props.onClick(week[startDay]);\n          } else {\n            if (dt.isBefore(props.startDate)) {\n              props.onClick(week[startDay]);\n            } else {\n              props.onClick(week[endDay]);\n            }\n          }\n        },\n        onMouseOver: function onMouseOver() {\n          if (props.startDate) {\n            if (dt.isSameOrAfter(props.startDate)) {\n              props.onMouseOver(week[endDay]);\n            } else {\n              props.onMouseOver(week[startDay]);\n            }\n          } else {\n            props.onMouseOver(week[startDay]);\n          }\n        },\n        className: \"calendar-cell-size \".concat(getCalendarCellStyle(dt, week[0], week[6]), \" calendar-date\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, dt.date());\n    }));\n  }))));\n};\n\nvar MultipleCalendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MultipleCalendar, _Component);\n\n  function MultipleCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, MultipleCalendar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MultipleCalendar).call(this, props));\n    _this.state = {\n      mouseOveredDt: null\n    };\n    return _this;\n  }\n\n  _createClass(MultipleCalendar, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, this.props.months.map(function (month, idx) {\n        return React.createElement(Calendar, {\n          key: idx,\n          month: month,\n          onClick: function onClick(dt) {\n            _this2.props.onClick(dt);\n          },\n          onMouseOver: function onMouseOver(dt) {\n            _this2.setState({\n              mouseOveredDt: dt\n            });\n          },\n          startDate: _this2.props.startDate,\n          endDate: _this2.props.endDate,\n          mouseOveredDt: _this2.state.mouseOveredDt,\n          nrfCalDays: _this2.props.nrfCalYrs[month.year()] && _this2.props.nrfCalYrs[month.year()][month.month()],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        });\n      }));\n    }\n  }]);\n\n  return MultipleCalendar;\n}(Component);\n\nvar RetailCalendar =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(RetailCalendar, _Component2);\n\n  function RetailCalendar(props) {\n    var _this3;\n\n    _classCallCheck(this, RetailCalendar);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(RetailCalendar).call(this, props));\n\n    _this3.onPrevMoClick = function () {\n      var fstMo = _this3.state.dispMos[0];\n\n      if (fstMo.month() === fstMoOfYr) {\n        _this3.onPrevYrClick();\n      }\n\n      var sftdMosBkByOneMo = _this3.state.dispMos.map(function (month) {\n        return month.subtract(1, 'month');\n      });\n\n      _this3.setState({\n        dispMos: sftdMosBkByOneMo\n      });\n    };\n\n    _this3.onNxtMoClick = function () {\n      var dispMos = _this3.state.dispMos;\n      var lstMo = dispMos[dispMos.length - 1];\n      var lstMoOfYr = moment().month(fstMoOfYr - 1).month();\n\n      if (lstMo.month() === lstMoOfYr) {\n        _this3.onNxtYrClick();\n      }\n\n      var sftdMosFwdByOneMo = _this3.state.dispMos.map(function (month) {\n        return month.add(1, 'month');\n      });\n\n      _this3.setState({\n        dispMos: sftdMosFwdByOneMo\n      });\n    };\n\n    _this3.onPrevYrClick = function () {\n      var yr = _this3.state.financialYear;\n      var prevYr = yr - 1;\n      var nxtYr = yr + 1;\n      generateNrfCalYrs(prevYr, nrfCalYrs);\n\n      _this3.setState({\n        financialYear: prevYr\n      });\n\n      if (nrfCalYrs.hasOwnProperty(nxtYr)) delete nrfCalYrs[nxtYr];\n    };\n\n    _this3.onNxtYrClick = function () {\n      var yr = _this3.state.financialYear;\n      var prevYr = yr - 1;\n      var nxtYr = yr + 1;\n      generateNrfCalYrs(nxtYr, nrfCalYrs);\n\n      _this3.setState({\n        financialYear: nxtYr\n      });\n\n      if (nrfCalYrs.hasOwnProperty(prevYr)) delete nrfCalYrs[prevYr];\n    };\n\n    var curDt = props.startDate || moment();\n    var dispMosCnt = 2; //min:1, max:12\n\n    var width = {\n      width: \"\".concat(344 * dispMosCnt, \"px\")\n    };\n    var _dispMos = [];\n    generateNrfCalYrs(curDt.year(), nrfCalYrs);\n    if (curDt.month() === 11) generateNrfCalYrs(curDt.year() + 1, nrfCalYrs);\n\n    for (var i = 0; i < dispMosCnt; i++) {\n      _dispMos.push(moment(curDt).add(i, 'month'));\n    }\n\n    _this3.state = {\n      dispMos: _dispMos,\n      curDt: curDt,\n      financialYear: curDt.month() === 11 ? curDt.year() + 1 : curDt.year(),\n      width: width\n    };\n    return _this3;\n  }\n\n  _createClass(RetailCalendar, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"m-3\",\n        style: _objectSpread({}, this.state.width),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"arrow left-arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        onClick: this.onPrevMoClick,\n        className: \"dr-calendar-month-arrow fa fa-angle-left\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"arrow right-arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        onClick: this.onNxtMoClick,\n        className: \"dr-calendar-month-arrow fa fa-angle-right\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      })), React.createElement(MultipleCalendar, {\n        months: this.state.dispMos,\n        startDate: this.props.startDate,\n        endDate: this.props.endDate,\n        nrfCalYrs: nrfCalYrs,\n        onClick: function onClick(dt) {\n          if (dt.month() === 11) _this4.onNxtYrClick();\n\n          _this4.props.onClick(dt);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return RetailCalendar;\n}(Component);\n\nexport default RetailCalendar;","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/services/RetailCalendarDatePicker/NRFDatePicker.js"],"names":["React","Component","calendarConfig","moment","_","fstMoOfYr","days","nrfWksPatternForAYr","moJanIdx","_4Wks","_5Wks","nrfCalYrs","generateNrfCalYrs","yr","noOfDaysInAWk","length","noOfMosInAYr","stDt","year","week","startOf","doesJanHaveFiveWks","weeksInYear","nxtDt","moIdx","momentMoIdx","month","moDts","nrfWks","dayIdx","push","add","Calendar","props","getCalendarCellStyle","dt","endDt","className","startDate","endDate","isSame","isAfter","isSameOrBefore","mouseOveredDt","isBefore","isBetween","subtract","startDay","endDay","format","nrfCalDays","map","day","idx","onClick","isSameOrAfter","onMouseOver","date","MultipleCalendar","state","display","months","setState","RetailCalendar","onPrevMoClick","fstMo","dispMos","onPrevYrClick","sftdMosBkByOneMo","onNxtMoClick","lstMo","lstMoOfYr","onNxtYrClick","sftdMosFwdByOneMo","financialYear","prevYr","nxtYr","hasOwnProperty","curDt","dispMosCnt","width","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { calendarConfig } from '../../config';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nconst { fstMoOfYr } = calendarConfig;\nconst days = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nconst nrfWksPatternForAYr = [4, 4, 5, 4, 4, 5, 4, 4, 5, 4, 4, 5];\nconst moJanIdx = 0;\nconst _4Wks = 4;\nconst _5Wks = 5;\nconst nrfCalYrs = {};\n\nfunction generateNrfCalYrs(yr, nrfCalYrs) {\n  const noOfDaysInAWk = days.length;\n  const noOfMosInAYr = nrfWksPatternForAYr.length;\n  const stDt = moment().year(yr).week(1).startOf('week');\n\n  const doesJanHaveFiveWks = moment().year(yr).weeksInYear() === 53;\n\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _5Wks);\n\n  // Inserting Dates by forward calculating from the start date\n  let nxtDt = moment(stDt);\n  for (let moIdx = fstMoOfYr; moIdx < noOfMosInAYr + fstMoOfYr; moIdx++) {\n    !nrfCalYrs[yr] && (nrfCalYrs[yr] = {});\n    moIdx > 11 && !nrfCalYrs[yr + 1] && (nrfCalYrs[yr + 1] = {});\n    const momentMoIdx = moment().month(moIdx).month();\n    const moDts = [];\n    for (let nrfWks = 0; nrfWks < nrfWksPatternForAYr[momentMoIdx]; nrfWks++) {\n      for (let dayIdx = 0; dayIdx < noOfDaysInAWk; dayIdx++) {\n        if (dayIdx === 0) {\n          moDts[nrfWks] = [];\n        }\n        moDts[nrfWks].push(moment(nxtDt));\n        nxtDt = nxtDt.add(1, 'days');\n      }\n    }\n    moIdx < 12 ? (nrfCalYrs[yr][momentMoIdx] = moDts) : (nrfCalYrs[yr + 1][momentMoIdx] = moDts);\n  }\n\n  // Setting no of weeks for Jan back to default\n  doesJanHaveFiveWks && (nrfWksPatternForAYr[moJanIdx] = _4Wks);\n  return nrfCalYrs;\n}\n\nconst Calendar = function (props) {\n  const getCalendarCellStyle = (dt, stDt, endDt) => {\n    let className = 'calendar-date_default';\n    if (props.startDate && !props.endDate) {\n      dt.isSame(props.startDate) && (className = 'selected-date');\n      dt.isAfter(props.startDate) &&\n        dt.isSameOrBefore(props.mouseOveredDt) &&\n        (className = 'calendar-date_hovered');\n    } else if (props.startDate && props.endDate) {\n      (dt.isSame(props.startDate) || dt.isSame(props.endDate)) && (className = 'selected-date');\n      dt.isAfter(props.startDate) &&\n        dt.isBefore(props.endDate) &&\n        (className = 'calendar-date_hovered');\n      props.mouseOveredDt &&\n        (dt.isBefore(props.startDate) || dt.isAfter(props.endDate)) &&\n        props.mouseOveredDt.isBetween(\n          moment(stDt).subtract(1, 'days'),\n          moment(endDt).add(1, 'days')\n        ) &&\n        (className = 'calendar-date_default-hover');\n    } else {\n      props.mouseOveredDt &&\n        props.mouseOveredDt.isBetween(\n          moment(stDt).subtract(1, 'days'),\n          moment(endDt).add(1, 'days')\n        ) &&\n        (className = 'calendar-date_default-hover');\n    }\n    return className;\n  };\n  let startDay = 0,\n    endDay = 6; //for thursday to wednesday selection --- <  startDay = 3,endDay = 2;  >---\n  return (\n    <div>\n      <div className=\"t-a-c mt-2\">\n        {props.month.format('MMM')} {props.month.format('YYYY')}\n      </div>\n      <table className=\"m-3\">\n        <tbody>\n          <tr>\n            <th></th>\n            {props.nrfCalDays &&\n              props.nrfCalDays[0] &&\n              _.map(props.nrfCalDays[0], (day, idx) => (\n                <th className=\"calendar-cell-size calendar-day\" key={idx}>\n                  {day.format('dd')}\n                </th>\n              ))}\n          </tr>\n          {props.nrfCalDays &&\n            _.map(props.nrfCalDays, (week, idx) => (\n              <tr key={idx}>\n                <th className=\"calendar-cell-size calendar-date\">\n                  {props.nrfCalDays[idx][0].week()}\n                </th>\n                {week.map((dt, idx) => {\n                  return (\n                    <td\n                      key={idx}\n                      onClick={() => {\n                        if (!props.startDate) {\n                          props.onClick(week[startDay]);\n                        } else {\n                          if (dt.isBefore(props.startDate)) {\n                            props.onClick(week[startDay]);\n                          } else {\n                            props.onClick(week[endDay]);\n                          }\n                        }\n                      }}\n                      onMouseOver={() => {\n                        if (props.startDate) {\n                          if (dt.isSameOrAfter(props.startDate)) {\n                            props.onMouseOver(week[endDay]);\n                          } else {\n                            props.onMouseOver(week[startDay]);\n                          }\n                        } else {\n                          props.onMouseOver(week[startDay]);\n                        }\n                      }}\n                      className={`calendar-cell-size ${getCalendarCellStyle(\n                        dt,\n                        week[0],\n                        week[6]\n                      )} calendar-date`}>\n                      {dt.date()}\n                    </td>\n                  );\n                })}\n              </tr>\n            ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nclass MultipleCalendar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mouseOveredDt: null,\n    };\n  }\n  render() {\n    return (\n      <div style={{ display: 'flex' }}>\n        {this.props.months.map((month, idx) => {\n          return (\n            <Calendar\n              key={idx}\n              month={month}\n              onClick={(dt) => {\n                this.props.onClick(dt);\n              }}\n              onMouseOver={(dt) => {\n                this.setState({\n                  mouseOveredDt: dt,\n                });\n              }}\n              startDate={this.props.startDate}\n              endDate={this.props.endDate}\n              mouseOveredDt={this.state.mouseOveredDt}\n              nrfCalDays={\n                this.props.nrfCalYrs[month.year()] &&\n                this.props.nrfCalYrs[month.year()][month.month()]\n              }\n            />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nclass RetailCalendar extends Component {\n  constructor(props) {\n    super(props);\n    const curDt = props.startDate || moment();\n    const dispMosCnt = 2; //min:1, max:12\n    const width = { width: `${344 * dispMosCnt}px` };\n    let dispMos = [];\n    generateNrfCalYrs(curDt.year(), nrfCalYrs);\n    if (curDt.month() === 11) generateNrfCalYrs(curDt.year() + 1, nrfCalYrs);\n    for (let i = 0; i < dispMosCnt; i++) {\n      dispMos.push(moment(curDt).add(i, 'month'));\n    }\n    this.state = {\n      dispMos,\n      curDt,\n      financialYear: curDt.month() === 11 ? curDt.year() + 1 : curDt.year(),\n      width,\n    };\n  }\n\n  onPrevMoClick = () => {\n    const fstMo = this.state.dispMos[0];\n    if (fstMo.month() === fstMoOfYr) {\n      this.onPrevYrClick();\n    }\n    const sftdMosBkByOneMo = this.state.dispMos.map((month) => {\n      return month.subtract(1, 'month');\n    });\n    this.setState({ dispMos: sftdMosBkByOneMo });\n  };\n  onNxtMoClick = () => {\n    const { dispMos } = this.state;\n    const lstMo = dispMos[dispMos.length - 1];\n    const lstMoOfYr = moment()\n      .month(fstMoOfYr - 1)\n      .month();\n    if (lstMo.month() === lstMoOfYr) {\n      this.onNxtYrClick();\n    }\n    const sftdMosFwdByOneMo = this.state.dispMos.map((month) => {\n      return month.add(1, 'month');\n    });\n    this.setState({ dispMos: sftdMosFwdByOneMo });\n  };\n  onPrevYrClick = () => {\n    const { financialYear: yr } = this.state;\n    const prevYr = yr - 1;\n    const nxtYr = yr + 1;\n    generateNrfCalYrs(prevYr, nrfCalYrs);\n    this.setState({ financialYear: prevYr });\n    if (nrfCalYrs.hasOwnProperty(nxtYr)) delete nrfCalYrs[nxtYr];\n  };\n  onNxtYrClick = () => {\n    const { financialYear: yr } = this.state;\n    const prevYr = yr - 1;\n    const nxtYr = yr + 1;\n    generateNrfCalYrs(nxtYr, nrfCalYrs);\n    this.setState({ financialYear: nxtYr });\n    if (nrfCalYrs.hasOwnProperty(prevYr)) delete nrfCalYrs[prevYr];\n  };\n  render() {\n    return (\n      <div className=\"m-3\" style={{ ...this.state.width }}>\n        <div className=\"arrow left-arrow\">\n          <i\n            onClick={this.onPrevMoClick}\n            className=\"dr-calendar-month-arrow fa fa-angle-left\"\n            aria-hidden=\"true\"></i>\n        </div>\n        <div className=\"arrow right-arrow\">\n          <i\n            onClick={this.onNxtMoClick}\n            className=\"dr-calendar-month-arrow fa fa-angle-right\"\n            aria-hidden=\"true\"></i>\n        </div>\n        <MultipleCalendar\n          months={this.state.dispMos}\n          startDate={this.props.startDate}\n          endDate={this.props.endDate}\n          nrfCalYrs={nrfCalYrs}\n          onClick={(dt) => {\n            if (dt.month() === 11) this.onNxtYrClick();\n            this.props.onClick(dt);\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default RetailCalendar;\n"]},"metadata":{},"sourceType":"module"}