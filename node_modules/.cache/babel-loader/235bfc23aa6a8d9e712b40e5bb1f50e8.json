{"ast":null,"code":"import _slicedToArray from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/Charts/bubble.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport { getChartData } from '../../actions/chart';\nimport { Bubble } from 'react-chartjs-2';\nimport Modal from 'react-awesome-modal';\nimport { Tabs } from 'antd';\nimport Table from '../Charts/table';\nvar TabPane = Tabs.TabPane;\n\nvar BubbleChart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BubbleChart, _Component);\n\n  function BubbleChart(props) {\n    var _this;\n\n    _classCallCheck(this, BubbleChart);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BubbleChart).call(this));\n    _this.state = {\n      visible: false\n    };\n    return _this;\n  }\n\n  _createClass(BubbleChart, [{\n    key: \"openModal\",\n    value: function openModal() {\n      this.setState({\n        visible: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        visible: false\n      });\n\n      if (this.props.closePageModal) {\n        this.props.closePageModal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // console.log('component called')\n      var chartData = this.props.data;\n      var labelsData = chartData.labels;\n      var labelName = chartData.Legend;\n      var visible = !!this.props.inModal || !!this.state.visible; // console.log('bubble chart data',chartData.data)\n      // let backgroundColor;\n\n      var labels = [];\n      var datasets = [];\n      var bubblesArray = []; // var colorArray = []\n      // console.log(\"chartDatabubble\", chartData);\n\n      var data = chartData.data;\n\n      function BubbleObject(x, y, r) {\n        //object creation by constructor method to avoid object by reference\n        this.x = x;\n        this.y = y;\n        this.r = r;\n      }\n\n      var selectedBubbles = []; //an array which stores the indices of the bubbles from the bubbles array to display\n\n      var selectedBubblesRadiusArray = [];\n      var keys = Object.keys(data);\n\n      for (var key in data) {\n        // var obj = key\n        if (key === keys[1]) {\n          data[keys[1]].map(function (value, i) {\n            if (Math.abs(parseInt(data[\"radius_value\"][i]) - parseInt(data[\"radius_value\"][i - 1])) < 1) {} else {\n              var newBubble = new BubbleObject(value, data[keys[2]][i], data[\"radius_value\"][i]);\n              bubblesArray.push(newBubble);\n              selectedBubbles.push(i);\n              selectedBubblesRadiusArray.push(data[\"radius_value\"][i]);\n            }\n          });\n        }\n      }\n\n      for (var key in labelsData) {\n        labelsData[key].map(function (label) {\n          labels.push(label);\n        });\n      }\n\n      var datas = {\n        // labels: \"Promo Name\",\n        datasets: [{\n          label: labelName,\n          fill: false,\n          lineTension: 0.1,\n          backgroundColor: 'rgba(75,192,192,0.4)',\n          borderColor: 'rgba(75,192,192,1)',\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: 'rgba(75,192,192,1)',\n          pointBackgroundColor: '#fff',\n          pointBorderWidth: 1,\n          pointHoverRadius: 5,\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\n          pointHoverBorderWidth: 2,\n          pointRadius: 1,\n          pointHitRadius: 10,\n          data: bubblesArray\n        }]\n      };\n      var lineOption = {\n        plugins: {\n          datalabels: {\n            display: false\n          }\n        },\n        tooltips: {\n          mode: 'nearest',\n          callbacks: {\n            title: function title(_ref, data) {\n              var _ref2 = _slicedToArray(_ref, 1),\n                  tooltipItems = _ref2[0];\n\n              // console.log('tooltip title',data ,tooltipItems)\n              return;\n            },\n            beforeLabel: function beforeLabel(selectedBubbles) {\n              var ranges = [{\n                divider: 1e9,\n                suffix: 'B'\n              }, {\n                divider: 1e6,\n                suffix: 'M'\n              }, {\n                divider: 1e3,\n                suffix: 'k'\n              }];\n\n              function formatNumber(n) {\n                for (var i = 0; i < ranges.length; i++) {\n                  if (n >= ranges[i].divider) {\n                    var newNumber = (n / ranges[i].divider).toFixed(2);\n                    return newNumber.toString() + ranges[i].suffix;\n                  }\n                }\n\n                return n;\n              }\n\n              if (chartData.radius_label) {\n                return \"\".concat(chartData.label) + ': ' + labels[selectedBubbles.index] + '\\n' + \"\".concat(chartData.x_label) + ':  ' + '$' + formatNumber(selectedBubbles.xLabel) + '\\n' + \"\".concat(chartData.y_label) + ':  ' + '$' + formatNumber(selectedBubbles.yLabel) + '\\n' + \"\".concat(chartData.radius_label) + ': ' + '$' + formatNumber(selectedBubblesRadiusArray[selectedBubbles.index]).toFixed(2);\n              } else {\n                return \"\".concat(chartData.label) + ': ' + '\\n' + labels[selectedBubbles.index] + '\\n\\n' + \"\".concat(chartData.x_label) + ':  ' + '\\n' + selectedBubbles.xLabel + '\\n\\n' + \"\".concat(chartData.y_label) + ':  ' + '\\n' + selectedBubbles.yLabel;\n              }\n            },\n            label: function label(tooltipItems, data) {\n              return;\n            }\n          },\n          titleFontSize: 10\n        },\n        legend: {\n          display: true,\n          position: 'bottom',\n          labels: {\n            usePointStyle: true\n          },\n          fontFamily: \"Helvetica\",\n          fontSize: \"12px\"\n        },\n        scales: {\n          xAxes: [{\n            gridLines: {\n              display: true\n            },\n            ticks: {\n              callback: function callback(value) {\n                var ranges = [{\n                  divider: 1e9,\n                  suffix: 'B'\n                }, {\n                  divider: 1e6,\n                  suffix: 'M'\n                }, {\n                  divider: 1e3,\n                  suffix: 'k'\n                }];\n\n                function formatNumber(n) {\n                  for (var i = 0; i < ranges.length; i++) {\n                    if (n >= ranges[i].divider) {\n                      return (n / ranges[i].divider).toString() + ranges[i].suffix;\n                    }\n                  }\n\n                  return n;\n                }\n\n                console.log('value is in negetive');\n\n                if (value > 0) {\n                  return \"$\" + formatNumber(value);\n                } else {\n                  return formatNumber(value);\n                }\n              }\n            },\n            barPercentage: 1.0,\n            scaleLabel: {\n              display: true,\n              labelString: chartData.x_label,\n              fontWeight: 900,\n              fontStyle: \"bold\"\n            }\n          }],\n          yAxes: [{\n            gridLines: {\n              display: true\n            },\n            ticks: {\n              callback: function callback(value) {\n                var ranges = [{\n                  divider: 1e9,\n                  suffix: 'B'\n                }, {\n                  divider: 1e6,\n                  suffix: 'M'\n                }, {\n                  divider: 1e3,\n                  suffix: 'k'\n                }];\n\n                function formatNumber(n) {\n                  for (var i = 0; i < ranges.length; i++) {\n                    if (n >= ranges[i].divider) {\n                      return (n / ranges[i].divider).toString() + ranges[i].suffix;\n                    }\n                  }\n\n                  return n;\n                }\n\n                if (value > 0) {\n                  return \"$\" + formatNumber(value);\n                } else {\n                  return formatNumber(value);\n                }\n              }\n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.y_label,\n              fontStyle: \"bold\"\n            }\n          }]\n        }\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: visible,\n        Width: \"700\",\n        Height: \"630\",\n        effect: \"fadeInDown\",\n        onClickAway: function onClickAway() {\n          return _this2.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginTop: \"0px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"graph-heading\",\n        style: {\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \" \", chartData.title, React.createElement(\"i\", {\n        className: \"fa fa-ellipsis-v pull-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      })), React.createElement(Bubble, {\n        data: datas,\n        options: lineOption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }))), React.createElement(Bubble, {\n        data: datas,\n        options: lineOption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return BubbleChart;\n}(Component);\n\n; //onElementsClick={(e) => { this.openModal() }} \n\nBubbleChart.propTypes = {\n  chartData: PropTypes.func.isRequired,\n  errors: PropTypes.object.isRequired,\n  success: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    chartData: state.chartData,\n    errors: state.errors,\n    success: state.success\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getChartData: getChartData\n})(withRouter(BubbleChart));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/Charts/bubble.js"],"names":["React","Component","connect","withRouter","PropTypes","getChartData","Bubble","Modal","Tabs","Table","TabPane","BubbleChart","props","state","visible","setState","closePageModal","chartData","data","labelsData","labels","labelName","Legend","inModal","datasets","bubblesArray","BubbleObject","x","y","r","selectedBubbles","selectedBubblesRadiusArray","keys","Object","key","map","value","i","Math","abs","parseInt","newBubble","push","label","datas","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","lineOption","plugins","datalabels","display","tooltips","mode","callbacks","title","tooltipItems","beforeLabel","ranges","divider","suffix","formatNumber","n","length","newNumber","toFixed","toString","radius_label","index","x_label","xLabel","y_label","yLabel","titleFontSize","legend","position","usePointStyle","fontFamily","fontSize","scales","xAxes","gridLines","ticks","callback","console","log","barPercentage","scaleLabel","labelString","fontWeight","fontStyle","yAxes","closeModal","marginTop","padding","propTypes","func","isRequired","errors","object","success","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport { getChartData } from '../../actions/chart';\nimport { Bubble } from 'react-chartjs-2';\nimport Modal from 'react-awesome-modal';\n\nimport { Tabs } from 'antd';\nimport Table from '../Charts/table'\n\nconst TabPane = Tabs.TabPane;\n\n\nclass BubbleChart extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      visible: false\n    };\n  }\n  openModal() {\n    this.setState({\n      visible: true\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      visible: false\n    });\n    if(this.props.closePageModal){\n      this.props.closePageModal();\n    }\n  }\n  render() {\n    // console.log('component called')\n    var chartData = this.props.data;\n    let labelsData = chartData.labels;\n    let labelName = chartData.Legend;\n    let visible = !!this.props.inModal || !!this.state.visible;\n    // console.log('bubble chart data',chartData.data)\n    // let backgroundColor;\n    let labels = [];\n    let datasets = [];\n    let bubblesArray = [];\n    // var colorArray = []\n    // console.log(\"chartDatabubble\", chartData);\n    let { data } = chartData;\n    function BubbleObject(x, y, r) {  //object creation by constructor method to avoid object by reference\n      this.x = x;\n      this.y = y;\n      this.r = r;\n    }\n    var selectedBubbles = []; //an array which stores the indices of the bubbles from the bubbles array to display\n    var selectedBubblesRadiusArray = [];\n    var keys = Object.keys(data);\n    for (var key in data) {\n      // var obj = key\n      if (key === keys[1]) {\n        data[keys[1]].map((value, i) => {\n          if (Math.abs(parseInt(data[\"radius_value\"][i]) - parseInt(data[\"radius_value\"][i - 1])) < 1) {\n          } else {\n            var newBubble = new BubbleObject(value, data[keys[2]][i], data[\"radius_value\"][i]);\n            bubblesArray.push(newBubble);\n            selectedBubbles.push(i);\n            selectedBubblesRadiusArray.push(data[\"radius_value\"][i]);\n          }\n        })\n      }\n    }\n    for (var key in labelsData) {\n      labelsData[key].map((label) => {\n        labels.push(label);\n      })\n    }\n\n\n\n    const datas = {\n      // labels: \"Promo Name\",\n      datasets: [\n        {\n          label: labelName,\n          fill: false,\n          lineTension: 0.1,\n          backgroundColor: 'rgba(75,192,192,0.4)',\n          borderColor: 'rgba(75,192,192,1)',\n          borderCapStyle: 'butt',\n          borderDash: [],\n          borderDashOffset: 0.0,\n          borderJoinStyle: 'miter',\n          pointBorderColor: 'rgba(75,192,192,1)',\n          pointBackgroundColor: '#fff',\n          pointBorderWidth: 1,\n          pointHoverRadius: 5,\n          pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n          pointHoverBorderColor: 'rgba(220,220,220,1)',\n          pointHoverBorderWidth: 2,\n          pointRadius: 1,\n          pointHitRadius: 10,\n          data: bubblesArray\n\n        }\n      ]\n    };\n\n    const lineOption = {\n      plugins: {\n        datalabels: {\n          display: false,\n\n        },\n      },\n      tooltips: {\n        mode: 'nearest',\n        callbacks: {\n          title: function([tooltipItems],data) {\n            // console.log('tooltip title',data ,tooltipItems)\n              return ;\n            },\n\n            beforeLabel: function (selectedBubbles) {\n              var ranges = [\n                { divider: 1e9, suffix: 'B' },\n                          { divider: 1e6, suffix: 'M' },\n                          { divider: 1e3, suffix: 'k' }\n                       ];\n                       function formatNumber(n) {\n                            for (var i = 0; i < ranges.length; i++) {\n                               if (n >= (ranges[i].divider)) {\n                                 let newNumber = (n / ranges[i].divider).toFixed(2)\n                                  return newNumber.toString() + ranges[i].suffix;\n                               }\n                            }\n                            return n;\n                         }\n            if(chartData.radius_label){\n              return `${chartData.label}` + ': '  + labels[selectedBubbles.index]  + '\\n' + `${chartData.x_label}` + ':  '  + '$' +  formatNumber(selectedBubbles.xLabel) + '\\n' + `${chartData.y_label}` + ':  '  + '$' +  formatNumber(selectedBubbles.yLabel) + '\\n' + `${chartData.radius_label}` + ': '  + '$' + formatNumber(selectedBubblesRadiusArray[selectedBubbles.index]).toFixed(2);\n            }else {\n              return `${chartData.label}` + ': ' + '\\n' + labels[selectedBubbles.index] + '\\n\\n' + `${chartData.x_label}` + ':  ' + '\\n' +  selectedBubbles.xLabel + '\\n\\n' + `${chartData.y_label}` + ':  ' + '\\n' +  selectedBubbles.yLabel;\n            }\n          },\n          label: function (tooltipItems, data) {    \n            return ;         \n          },\n        },\n        titleFontSize: 10,\n      },\n      legend: {\n        display: true,\n        position: 'bottom',\n        labels: {\n          usePointStyle: true\n        },\n        fontFamily: \"Helvetica\",\n        fontSize: \"12px\",\n\n      },\n      scales: {\n        xAxes: [\n          {\n            gridLines: {\n              display: true,\n\n            },\n            ticks: {\n              callback: function (value) {\n                var ranges = [\n                  { divider: 1e9, suffix: 'B' },\n                  { divider: 1e6, suffix: 'M' },\n                  { divider: 1e3, suffix: 'k' }\n                ];\n                function formatNumber(n) {\n                  for (var i = 0; i < ranges.length; i++) {\n                    if (n >= ranges[i].divider) {\n                      return (n / ranges[i].divider).toString() + ranges[i].suffix;\n                    }\n                  }\n                  return n;\n                }\n                console.log('value is in negetive',)\n                if(value > 0){\n                  return \"$\" + formatNumber(value);\n                }else{\n                  return  formatNumber(value);\n\n                }\n              }\n            },\n\n            barPercentage: 1.0,\n            scaleLabel: {\n              display: true,\n              labelString: chartData.x_label,\n              fontWeight: 900,\n              fontStyle: \"bold\",\n            }\n          }\n        ],\n        yAxes: [\n          {\n            gridLines: {\n              display: true,\n            },\n            ticks: {\n              callback: function (value) {\n                var ranges = [\n                  { divider: 1e9, suffix: 'B' },\n                  { divider: 1e6, suffix: 'M' },\n                  { divider: 1e3, suffix: 'k' }\n                ];\n                function formatNumber(n) {\n                  for (var i = 0; i < ranges.length; i++) {\n                    if (n >= ranges[i].divider) {\n                      return (n / ranges[i].divider).toString() + ranges[i].suffix;\n                    }\n                  }\n                  return n;\n                }\n                if(value > 0){\n                  return \"$\" + formatNumber(value);\n                }else{\n                  return  formatNumber(value);\n\n                }\n              }\n            },\n            scaleLabel: {\n              display: true,\n              labelString: chartData.y_label,\n              fontStyle: \"bold\",\n            },\n          }\n        ]\n      },\n\n    }\n    return (\n      <div>\n        <Modal visible={visible} Width=\"700\" Height=\"630\" effect=\"fadeInDown\" onClickAway={() => this.closeModal()}>\n          <div style={{ marginTop: \"0px\" }}>\n            <div className=\"graph-heading\" style={{ padding: \"10px\" }}> {chartData.title}\n              <i className=\"fa fa-ellipsis-v pull-right\"></i>\n            </div>\n\n            {/* <Tabs defaultActiveKey=\"1\">\n              <TabPane tab=\"Chart\" key=\"1\">\n              <Bubble data={datas} options={lineOption} />\n              </TabPane>\n              <TabPane tab=\"Table\" key=\"2\">\n                <Table data={chartData}/>\n              </TabPane>\n            </Tabs> */}\n            <Bubble data={datas} options={lineOption} />\n          </div>\n        </Modal>\n        <Bubble data={datas} options={lineOption} />\n      </div>\n\n    );\n  }\n};\n//onElementsClick={(e) => { this.openModal() }} \n\nBubbleChart.propTypes = {\n  chartData: PropTypes.func.isRequired,\n  errors: PropTypes.object.isRequired,\n  success: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n  chartData: state.chartData,\n  errors: state.errors,\n  success: state.success\n});\nexport default connect(mapStateToProps, { getChartData })(withRouter(BubbleChart));"]},"metadata":{},"sourceType":"module"}