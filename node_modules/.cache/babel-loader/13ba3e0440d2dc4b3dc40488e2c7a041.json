{"ast":null,"code":"import _slicedToArray from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/Charts/line.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport { getChartData } from '../../actions/chart';\nimport Modal from 'react-awesome-modal';\nimport Chart from 'chart.js';\nimport { Line, Bar, Pie } from 'react-chartjs-2';\nimport { Tabs } from 'antd';\nimport { Switch, Icon } from 'antd';\nimport Table from '../Charts/aggridTable';\nimport DounleBar from '../Charts/Mix/doubleBar';\nvar TabPane = Tabs.TabPane;\n\nvar LineChart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LineChart, _Component);\n\n  function LineChart(props) {\n    var _this;\n\n    _classCallCheck(this, LineChart);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LineChart).call(this, props));\n\n    _this.showTabledata = function () {\n      _this.setState(function (prevState) {\n        return {\n          showGraph: !prevState.showGraph,\n          showTable: !prevState.showTable\n        };\n      });\n    };\n\n    _this.state = {\n      visible: false,\n      //showGraph: true,\n      //showTable: false,\n      showGraph: typeof props.showGraph === \"undefined\" ? true : props.showGraph,\n      showTable: typeof props.showTable === \"undefined\" ? false : props.showTable\n    };\n    return _this;\n  }\n\n  _createClass(LineChart, [{\n    key: \"openModal\",\n    value: function openModal() {\n      this.setState({\n        visible: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        visible: false\n      });\n\n      if (this.props.closePageModal) {\n        this.props.closePageModal();\n      }\n    }\n  }, {\n    key: \"render\",\n    //   graphClickEvent = (event, array) => {\n    //     console.log('enter a function')\n    //     this.openModal()\n    // }\n    value: function render() {\n      var _this2 = this;\n\n      // console.log('asfasdfas', this.props.chartData);\n      var chartData = this.props.data;\n      var labelsData = chartData.labels;\n      var labelsKey = Object.keys(labelsData); // console.log(labelsKey)\n\n      var datasets = [];\n      var labels = [];\n      var visible = !!this.props.inModal || !!this.state.visible;\n\n      for (var key in labelsData) {\n        labelsData[key].map(function (label) {\n          labels.push(label);\n        });\n      }\n\n      var colourPicker = [\"#FF0000\", \"#FFA000\", \"#000000\", \"#008000\"];\n      var object = chartData.data;\n      var x_labelData = chartData.x_label;\n      var y_labelData = chartData.y_label; // console.log('new object data to traverse in line  bar', chartData);\n\n      var lineDatajson = {\n        \"chart_type\": \"line\",\n        \"title\": \"Car Sales 2018\",\n        \"summary\": \"Sales of car\",\n        \"rank\": \"4\",\n        \"x_label\": x_labelData,\n        \"y_label\": y_labelData,\n        \"data\": object,\n        \"labels\": labels\n      };\n      var lineOption = {\n        // onClick: this.graphClickEvent,\n        tooltips: {\n          mode: 'nearest',\n          intersect: false,\n          callbacks: {\n            title: function title(_ref, data) {\n              var _ref2 = _slicedToArray(_ref, 1),\n                  tooltipItems = _ref2[0];\n\n              // console.log('tooltip title',data ,tooltipItems)\n              return x_labelData + ' : ' + tooltipItems.xLabel;\n            },\n            beforeLabel: function beforeLabel(tooltipItem, data) {\n              var ranges = [{\n                divider: 1e9,\n                suffix: 'B'\n              }, {\n                divider: 1e6,\n                suffix: 'M'\n              }, {\n                divider: 1e3,\n                suffix: 'k'\n              }];\n\n              function formatNumber(n) {\n                for (var i = 0; i < ranges.length; i++) {\n                  if (n >= ranges[i].divider) {\n                    var newNumber = (n / ranges[i].divider).toFixed(2);\n                    return newNumber.toString() + ranges[i].suffix;\n                  }\n                }\n\n                return n;\n              }\n\n              if (data.datasets[tooltipItem.datasetIndex].label.includes(\"$\") || lineDatajson.y_label.includes(\"$\")) {\n                return data.datasets[tooltipItem.datasetIndex].label + ': ' + '\\n' + \"$\" + formatNumber(tooltipItem.yLabel);\n              } else {\n                return data.datasets[tooltipItem.datasetIndex].label + ': ' + '\\n' + formatNumber(tooltipItem.yLabel);\n              }\n            },\n            label: function label(tooltipItem) {\n              return;\n            }\n          }\n        },\n        hover: {\n          intersect: false\n        },\n        elements: {\n          line: {\n            tension: 0\n          }\n        },\n        plugins: {\n          datalabels: {\n            display: false\n          }\n        },\n        scales: {\n          xAxes: [{\n            barPercentage: 1.0,\n            scaleLabel: {\n              display: true,\n              labelString: lineDatajson.x_label,\n              fontStyle: \"bold\"\n            },\n            gridLines: {\n              display: false\n            },\n            ticks: {\n              autoSkip: true,\n              maxTicksLimit: 15,\n              fontSize: 10,\n              opacity: 0.7,\n              callback: function callback(value, index, values) {\n                if (value.length >= 12) {\n                  return value.substr(0, 5) + '...' + value.substr(value.length - 5, 0);\n                } else {\n                  return value;\n                }\n              }\n            }\n          }],\n          yAxes: [{\n            gridLines: {\n              display: false\n            },\n            scaleLabel: {\n              display: true,\n              labelString: lineDatajson.y_label,\n              fontStyle: \"bold\",\n              fontSize: 10\n            },\n            ticks: {\n              callback: function callback(value) {\n                var ranges = [{\n                  divider: 1e9,\n                  suffix: 'B'\n                }, {\n                  divider: 1e6,\n                  suffix: 'M'\n                }, {\n                  divider: 1e3,\n                  suffix: 'k'\n                }];\n\n                function formatNumber(n) {\n                  for (var i = 0; i < ranges.length; i++) {\n                    if (n >= ranges[i].divider) {\n                      return (n / ranges[i].divider).toString() + ranges[i].suffix;\n                    }\n                  }\n\n                  return n;\n                }\n\n                return \"$\" + formatNumber(value);\n              }\n            }\n          }]\n        },\n        legend: {\n          display: true,\n          position: 'bottom',\n          labels: {\n            boxWidth: 12\n          },\n          fontFamily: \"poppins\",\n          fontSize: \"12px\"\n        },\n        responsive: true,\n        maintainAspectRatio: true\n      };\n      var colors = [];\n      colors.push({\n        backgroundColor: '#31A4D8'\n      });\n      colors.push({\n        backgroundColor: '#E27A2E'\n      });\n      colors.push({\n        backgroundColor: '#4B4ADA'\n      });\n      colors.push({\n        backgroundColor: '#FC3026'\n      });\n      colors.push({\n        backgroundColor: '#CD36E7'\n      });\n\n      for (var key in object) {\n        var index = Object.keys(object).indexOf(key);\n        datasets.push({\n          label: key,\n          data: object[key],\n          fill: false,\n          // Don't fill area under the line\n          backgroundColor: colors[index % 4].backgroundColor,\n          borderColor: colors[index % 4].backgroundColor // Line color \n\n        });\n      }\n\n      var lineData = {\n        labels: labels,\n        datasets: datasets\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: visible,\n        width: \"700\",\n        height: \"600\",\n        effect: \"fadeInDown\",\n        onClickAway: function onClickAway() {\n          return _this2.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginTop: \"0px\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"graph-heading\",\n        style: {\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \" \", chartData.title, React.createElement(\"i\", {\n        className: \"fa fa-ellipsis-v pull-right modelIcon\",\n        onClick: function onClick() {\n          return _this2.openOptions();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          textAlign: \"right\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        checkedChildren: React.createElement(Icon, {\n          style: {\n            fontSize: \"18px\"\n          },\n          type: \"table\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }),\n        unCheckedChildren: React.createElement(Icon, {\n          style: {\n            fontSize: \"18px\"\n          },\n          type: \"bar-chart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }),\n        defaultChecked: true,\n        onChange: function onChange() {\n          return _this2.showTabledata();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      })), this.state.showGraph ? React.createElement(Line, {\n        data: lineData,\n        options: lineOption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }) : React.createElement(Table, {\n        data: chartData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }))), React.createElement(Line, {\n        data: lineData,\n        options: lineOption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return LineChart;\n}(Component); //onElementsClick={(e) => { this.openModal() }}\n\n\nLineChart.propTypes = {\n  chartData: PropTypes.func.isRequired,\n  errors: PropTypes.object.isRequired,\n  success: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    chartData: state.chartData,\n    errors: state.errors,\n    success: state.success\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getChartData: getChartData\n})(withRouter(LineChart));","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/Charts/line.js"],"names":["React","Component","connect","withRouter","PropTypes","getChartData","Modal","Chart","Line","Bar","Pie","Tabs","Switch","Icon","Table","DounleBar","TabPane","LineChart","props","showTabledata","setState","prevState","showGraph","showTable","state","visible","closePageModal","chartData","data","labelsData","labels","labelsKey","Object","keys","datasets","inModal","key","map","label","push","colourPicker","object","x_labelData","x_label","y_labelData","y_label","lineDatajson","lineOption","tooltips","mode","intersect","callbacks","title","tooltipItems","xLabel","beforeLabel","tooltipItem","ranges","divider","suffix","formatNumber","n","i","length","newNumber","toFixed","toString","datasetIndex","includes","yLabel","hover","elements","line","tension","plugins","datalabels","display","scales","xAxes","barPercentage","scaleLabel","labelString","fontStyle","gridLines","ticks","autoSkip","maxTicksLimit","fontSize","opacity","callback","value","index","values","substr","yAxes","legend","position","boxWidth","fontFamily","responsive","maintainAspectRatio","colors","backgroundColor","indexOf","fill","borderColor","lineData","closeModal","marginTop","padding","openOptions","textAlign","propTypes","func","isRequired","errors","success","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport { getChartData } from '../../actions/chart';\nimport Modal from 'react-awesome-modal';\nimport Chart from 'chart.js';\nimport { Line,Bar,Pie } from 'react-chartjs-2';\nimport { Tabs } from 'antd';\nimport { Switch, Icon } from 'antd';\nimport Table from '../Charts/aggridTable'\nimport DounleBar from '../Charts/Mix/doubleBar'\n\n\n\nconst TabPane = Tabs.TabPane;\n\n\n\nclass LineChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n      //showGraph: true,\n      //showTable: false,\n      showGraph: typeof props.showGraph === \"undefined\" ? true :  props.showGraph,\n      showTable: typeof props.showTable === \"undefined\" ? false :  props.showTable\n    };\n  }\n\n  openModal() {\n    this.setState({\n      visible: true\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      visible: false\n    });\n    if(this.props.closePageModal){\n      this.props.closePageModal();\n    }\n  }\n\n  showTabledata = ()=>{\n    this.setState(prevState => ({\n     showGraph: !prevState.showGraph,\n     showTable: !prevState.showTable,\n   }));\n  }\n\n//   graphClickEvent = (event, array) => {\n    \n//     console.log('enter a function')\n//     this.openModal()\n// }\n\n\n  render() {\n    // console.log('asfasdfas', this.props.chartData);\n    var chartData = this.props.data;\n    let labelsData = chartData.labels;\n    let labelsKey = Object.keys(labelsData)\n    // console.log(labelsKey)\n    let datasets = [];\n    let labels = [];\n    let visible = !!this.props.inModal || !!this.state.visible;\n    \n    for (var key in labelsData) {\n      labelsData[key].map((label) => {\n        labels.push(label);\n      })\n    }\n\n    var colourPicker = [\"#FF0000\", \"#FFA000\", \"#000000\", \"#008000\"];\n    var object = chartData.data;\n    var x_labelData = chartData.x_label;\n    var y_labelData = chartData.y_label;\n    // console.log('new object data to traverse in line  bar', chartData);\n\n   \n\n    const lineDatajson = {\n      \"chart_type\": \"line\",\n      \"title\": \"Car Sales 2018\",\n      \"summary\": \"Sales of car\",\n      \"rank\": \"4\",\n      \"x_label\": x_labelData,\n      \"y_label\": y_labelData,\n      \"data\": object,\n      \"labels\": labels\n    }\n\n\n    const lineOption = {\n      // onClick: this.graphClickEvent,\n      tooltips: {\n        mode: 'nearest',\n        intersect: false,\n        callbacks: {\n          title: function([tooltipItems],data) {\n            // console.log('tooltip title',data ,tooltipItems)\n              return x_labelData + ' : ' + tooltipItems.xLabel;\n            },\n\n            beforeLabel: function(tooltipItem,data) {\n              var ranges = [\n                { divider: 1e9, suffix: 'B' },\n                          { divider: 1e6, suffix: 'M' },\n                          { divider: 1e3, suffix: 'k' }\n                       ];\n                       function formatNumber(n) {\n                            for (var i = 0; i < ranges.length; i++) {\n                               if (n >= (ranges[i].divider)) {\n                                 let newNumber = (n / ranges[i].divider).toFixed(2)\n                                  return newNumber.toString() + ranges[i].suffix;\n                               }\n                            }\n                            return n;\n                         }\n              if(data.datasets[tooltipItem.datasetIndex].label.includes(\"$\") || lineDatajson.y_label.includes(\"$\")){\n              return data.datasets[tooltipItem.datasetIndex].label + ': '  + '\\n' + \"$\" + formatNumber(tooltipItem.yLabel);\n              }else{\n                return data.datasets[tooltipItem.datasetIndex].label + ': '  + '\\n' + formatNumber(tooltipItem.yLabel);\n              }\n          },\n          label: function(tooltipItem) {\n            return ;\n          }\n\n        },\n      },\n      hover: {\n        intersect: false\n      },\n      elements: {\n        line: {\n          tension: 0\n        }\n      },\n      plugins: {\n        datalabels: {\n           display: false\n        }\n     },\n      scales: {\n        xAxes: [\n          {\n            barPercentage: 1.0,\n            scaleLabel: {\n              display:true,\n              labelString: lineDatajson.x_label,\n              fontStyle: \"bold\",\n            },\n            gridLines: {\n              display: false,\n            },\n            ticks: {\n              autoSkip: true,\n              maxTicksLimit: 15,\n              fontSize: 10,\n              opacity: 0.7,\n              callback: function (value, index, values) {\n                if(value.length >= 12){\n                  return (value.substr(0, 5) + '...' + value.substr(value.length - 5, 0))\n                }else {\n                  return value\n                }\n              }\n             },\n          },\n        ],\n        yAxes: [\n          {\n            gridLines: {\n              display: false\n            },\n            scaleLabel: {\n              display:true,\n              labelString: lineDatajson.y_label,\n              fontStyle: \"bold\",\n              fontSize: 10,\n            },\n            ticks: {\n              callback: function(value) {\n                var ranges = [\n                  { divider: 1e9, suffix: 'B' },\n                  { divider: 1e6, suffix: 'M' },\n                  { divider: 1e3, suffix: 'k' }\n               ];\n               function formatNumber(n) {\n                    for (var i = 0; i < ranges.length; i++) {\n                       if (n >= ranges[i].divider) {\n                          return (n / ranges[i].divider).toString() + ranges[i].suffix;\n                       }\n                    }\n                    return n;\n                 }\n                 return \"$\" + formatNumber(value);\n              }\n           },\n          }\n        ]\n      },\n      legend: {\n        display: true,\n        position: 'bottom',\n        labels: {\n          boxWidth: 12\n      },\n        fontFamily: \"poppins\",\n        fontSize: \"12px\",\n        \n      },\n      responsive: true,\n      maintainAspectRatio: true,\n    }\n\n  \n    var colors = []\n    colors.push({\n      backgroundColor: '#31A4D8'\n    })\n    colors.push({\n      backgroundColor: '#E27A2E'\n    })\n    colors.push({\n      backgroundColor: '#4B4ADA'\n    })\n    colors.push({\n      backgroundColor: '#FC3026'\n    })\n    colors.push({\n      backgroundColor: '#CD36E7'\n    })\n    for(var key in object){\n      var index = Object.keys(object).indexOf(key);\n      datasets.push(\n        {\n          label: key,\n          data: object[key],\n          fill: false,          // Don't fill area under the line\n          backgroundColor: colors[index % 4].backgroundColor ,\n          borderColor:  colors[index % 4].backgroundColor   // Line color \n        }\n      )\n    }\n\n    const lineData = {\n      labels: labels,\n      datasets: datasets\n    }\n    return (\n      <div>\n        <Modal visible={visible} width=\"700\" height=\"600\" effect=\"fadeInDown\"  onClickAway={() => this.closeModal()}>\n        <div style={{marginTop:\"0px\",padding:\"10px\"}}>\n        <div className=\"graph-heading\" style={{padding:\"10px\"}}> {chartData.title}\n          <i className=\"fa fa-ellipsis-v pull-right modelIcon\" onClick={() => this.openOptions()}></i>\n        </div>\n        <div style={{textAlign: \"right\",padding: \"10px\"}}>\n        <Switch checkedChildren={<Icon style={{fontSize:\"18px\"}} type=\"table\" />} unCheckedChildren={<Icon style={{fontSize:\"18px\"}} type=\"bar-chart\"/>} defaultChecked onChange={()=>this.showTabledata()}/>\n        </div>\n      {this.state.showGraph ? \n        <Line data={lineData} options={lineOption} />\n       :  <Table data={chartData}/>}\n        </div>\n        </Modal> \n        <Line data={lineData} options={lineOption} />\n      </div>\n    )\n  }\n}\n//onElementsClick={(e) => { this.openModal() }}\n\nLineChart.propTypes = {\n  chartData: PropTypes.func.isRequired,\n  errors: PropTypes.object.isRequired,\n  success: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n  chartData: state.chartData,\n  errors: state.errors,\n  success: state.success\n});\n\nexport default connect(mapStateToProps, { getChartData })(withRouter(LineChart));\n"]},"metadata":{},"sourceType":"module"}