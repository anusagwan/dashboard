{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/Reporting/index.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport Filters from '../../services/filters';\nimport SkuCockpit from '../../components/SKUCockpit/SKUCockpit';\nimport LineChart from '../support/Charts/LineChart';\nimport BarChart from '../support/Charts/Barchart';\nimport { connect } from 'react-redux';\nimport * as chartjs from 'chart.js';\nimport _ from 'lodash';\nimport './index.css';\nimport reportingActions from '../../actions/reportingActions';\nimport LoadingOverlay from '../../utils/Loader';\nimport moment from 'moment';\nimport { decimalFormatter, toUnit, formatThousands, toDollar } from '../../helper/formatter';\nimport { toast } from 'react-toastify';\nimport filterActions from '../../actions/filtersAction';\nimport styled from 'styled-components';\nimport SkuColDef from '../../../src/components/SKUCockpit/skuColdef.js';\nchartjs.pluginService.register({\n  beforeDraw: function beforeDraw(chart) {\n    if (chart.config.options && chart.config.options.backgroundColor) {\n      var ctx = chart.chart.ctx;\n      var chartArea = chart.chartArea;\n      ctx.save();\n      ctx.fillStyle = chart.config.options.backgroundColor;\n      ctx.fillRect(chartArea.left, chartArea.top, chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n      ctx.restore();\n    }\n  }\n});\n\nfunction AggregateFunc(subRows, accessor) {\n  var value = 0;\n\n  _.map(subRows, function (item) {\n    value = item[accessor] ? value + item[accessor] : value;\n  });\n\n  return value / subRows.length;\n}\n\nfunction mainAggregateFunc(subRows, accessor) {\n  var value = 0;\n\n  _.map(subRows, function (item) {\n    var aggregate = AggregateFunc(item.subRows, accessor);\n    value = aggregate ? value + aggregate : value;\n  });\n\n  return value / subRows.length;\n}\n\nfunction FormatterStyling(props, value, val) {\n  var val1 = val || val == 0 ? val : props.value;\n  var props1 = val || val == 0 ? {\n    value: val\n  } : props;\n\n  if (value == 'units_sold' || value == 'last_week_sales' || value == 'inventory.inventory_on_hand' || value == 'inventory.inventory_in_transit' || value == 'inventory.inventory_on_order' || value == 'inventory.inventory_on_hand' || value == 'inventory.inventory_in_dc' || value == 'wos') {\n    return props === 'downloadFormatter' ? toUnit : val1 || val1 == 0 ? toUnit(props1) : '-';\n  }\n\n  if (value == 'revenue$' || value == 'aur' || value == 'margin$' || value == 'aum' || value == 'overall_aum' || value == 'overall_revenue$' || value == 'overall_aur' || value == 'overall_margin$') {\n    return props === 'downloadFormatter' ? toDollar : val1 || val1 == 0 ? toDollar(props1) : '-';\n  }\n\n  return '-';\n}\n\nvar MarkdownReporting =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MarkdownReporting, _Component);\n\n  function MarkdownReporting() {\n    var _this;\n\n    _classCallCheck(this, MarkdownReporting);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MarkdownReporting).call(this));\n    _this.sellThroughOptions = {\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return decimalFormatter({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Sell through %'\n          },\n          ticks: {\n            suggestedMin: 0 // minimum will be 0, unless there is a lower value.\n\n          }\n        }]\n      }\n    };\n    _this.inventoryOptions = {\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return toUnit({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Units'\n          },\n          ticks: {\n            suggestedMin: 0,\n            // minimum will be 0, unless there is a lower value.\n            callback: function callback(value) {\n              return formatThousands(value);\n            }\n          }\n        }]\n      }\n    };\n    _this.marginOptions = {\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return decimalFormatter({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Margin %'\n          },\n          ticks: {\n            suggestedMin: 0 // minimum will be 0, unless there is a lower value.\n\n          }\n        }]\n      }\n    };\n    _this.salesComparisonOptions = {\n      legend: {\n        display: false\n      },\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return toUnit({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Units'\n          },\n          ticks: {\n            suggestedMin: 0,\n            // minimum will be 0, unless there is a lower value.\n            beginAtZero: true,\n            // minimum value will be 0.\n            callback: function callback(value) {\n              return formatThousands(value);\n            }\n          }\n        }]\n      }\n    };\n\n    _this.getDefaultHeaders = function () {\n      if (_this.props.columnHeaders && Object.keys(_this.props.columnHeaders).length) {\n        (function () {\n          var defaultHeader = Object.keys(_this.props.columnHeaders.default);\n          var setDefaultColDef = SkuColDef();\n          var setDefaultLabel = [];\n          var setDefaultColumnOptions = [];\n          var setDefaultColumnOptions1 = [];\n          var setDefaultItems = [];\n\n          var colHeaders = _.cloneDeep(_this.props.columnHeaders);\n\n          var labels = Object.keys(colHeaders);\n          labels.splice(labels.indexOf('fixed'), 1);\n          labels.splice(labels.indexOf('default'), 1);\n\n          var _loop = function _loop() {\n            var label = _labels[_i];\n            var labelArray = Object.keys(_this.props.columnHeaders[label]);\n\n            function diff() {\n              var A = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : labelArray;\n              var B = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultHeader;\n              return A.filter(function (a) {\n                return B.indexOf(a) !== -1;\n              });\n            }\n\n            if (diff().length) {\n              setDefaultColumnOptions.push.apply(setDefaultColumnOptions, _toConsumableArray(Object.keys(_this.props.columnHeaders[label])));\n              setDefaultColumnOptions1.push(_this.props.columnHeaders[label]);\n              setDefaultItems.push.apply(setDefaultItems, _toConsumableArray(diff()));\n              setDefaultLabel.push(label);\n            }\n          };\n\n          for (var _i = 0, _labels = labels; _i < _labels.length; _i++) {\n            _loop();\n          }\n\n          var options = setDefaultColumnOptions.map(function (label) {\n            var find = null;\n\n            _.map(setDefaultColumnOptions1, function (item) {\n              if (item[label]) {\n                find = item[label];\n              }\n            });\n\n            var findKey = _.findKey(_this.props.columnHeaders, function (item) {\n              return item[label] === find;\n            });\n\n            return {\n              label: label,\n              value: find,\n              metricName: findKey\n            };\n          });\n          var selectedItems = setDefaultItems.map(function (label, i) {\n            var find = null;\n\n            _.map(setDefaultColumnOptions1, function (item) {\n              if (item[label]) {\n                find = item[label];\n              }\n            });\n\n            var findKey = _.findKey(_this.props.columnHeaders, function (item) {\n              return item[label] === find;\n            });\n\n            return {\n              label: label,\n              value: find,\n              metricName: findKey\n            };\n          });\n\n          _this.setState({\n            columns: setDefaultColDef,\n            selLabels: setDefaultLabel,\n            selectedItems: selectedItems,\n            columnOptions: options\n          });\n\n          if (selectedItems) {\n            var filteredHeader = _.find(options, {\n              accessor: selectedItems[0].value\n            });\n\n            if (!filteredHeader) {\n              _this.onHandleDropdownSelect(selectedItems, true, setDefaultColDef);\n            }\n          }\n        })();\n      }\n    };\n\n    _this.onFilter = function () {\n      // if (!this.mandatoryFiltersVal()) {\n      //   toast.error(`Please select mandatory filters`, {\n      //     autoClose: 15000,\n      //     hideProgressBar: true,\n      //   });\n      //   return;\n      // }\n      _this.setState({\n        showSkuCockpit: true\n      });\n\n      _this.getReportingData('week_level_aggregated_data');\n    };\n\n    _this.onCreateMarkdown =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(items) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.props.setRetainFilters(true);\n\n              case 2:\n                _this.props.history.push({\n                  pathname: '/vis/Markdown/create-markdown',\n                  state: {\n                    styles: items\n                  }\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.getReportingData = function (reportingType) {\n      var req = {\n        filters: {\n          country: _this.props.selectedCountry,\n          channel: _this.props.selectedChannel,\n          store_cluster: _this.props.selectedStoreCluster,\n          customStoreGroup: _this.props.selectedCustomStoreGroup,\n          store: _this.props.selectedStore,\n          hierarchy1: _this.props.selectedHierarchy1.map(function (e) {\n            return e.replace(/'/g, \"''\");\n          }),\n          hierarchy2: _this.props.selectedHierarchy2.map(function (e) {\n            return e.replace(/'/g, \"''\");\n          }),\n          hierarchy3: _this.props.selectedHierarchy3.map(function (e) {\n            return e.replace(/'/g, \"''\");\n          }),\n          hierarchy4: _this.props.selectedHierarchy4.map(function (e) {\n            return e.replace(/'/g, \"''\");\n          }),\n          hierarchy5: _this.props.selectedHierarchy5.map(function (e) {\n            return e.replace(/'/g, \"''\");\n          }),\n          season: _this.props.selectedSeason,\n          clearance: _this.props.selectedClearance,\n          matrix: _this.props.selectedMatrix,\n          exclusion_list: _this.props.selectedExclusionList,\n          style_color: _this.props.selectedStyleColor,\n          customStyleGroup: _this.props.selectedCustomStyleGroup\n        },\n        startDate: moment(_this.props.startDate).format('YYYY-MM-DD'),\n        endDate: moment(_this.props.endDate).format('YYYY-MM-DD'),\n        week: _this.props.weeks,\n        reportingType: reportingType\n      };\n      if (_this.props.selectedChannel[0] === 'Web') req.filters['ecom_flag'] = [1];\n      if (_this.props.selectedChannel[0] === 'Outlet') req['retail_flag'] = [1];\n\n      if (!_this.props.selectedCustomStoreGroup.length) {\n        delete req.filters['customStoreGroup'];\n      }\n\n      if (!_this.props.selectedCustomStyleGroup.length) {\n        delete req.filters['customStyleGroup'];\n      }\n\n      var abc1 = {\n        filters: {\n          country: ['US'],\n          channel: ['Outlet'],\n          store_cluster: [],\n          customStoreGroup: [10, 9, 7, 5, 4, 3],\n          store: ['USRO0063', 'USRO0088', 'USRO0046', 'USRO0070', 'USRO0058', 'USRO0086', 'USRO0038', 'USRO0080', 'USRO0071', 'USRO0003', 'USRO0078', 'USRO0044', 'USRF0004', 'USRO0030', 'USRO0029', 'USRO0084', 'USRO0009', 'USRO0036', 'USRO0022', 'USRO0091', 'USRO0035', 'USRO0021', 'USRO0055', 'USRO0064', 'USRO0073', 'USRO0076', 'USRO0077', 'USRO0002', 'USRO0043', 'USRO0031', 'USRO0066', 'USRO0106', 'USRO0014', 'USRO0090', 'USRF0019', 'USRO0105', 'USRO0047', 'PNA20', 'USRF0011', 'USRO0102', 'USRO0081', 'USRO0098', 'USRO0079', 'USRO0054', 'USRO0005', 'USRO0008', 'USRO0007', 'USRO0010', 'USRO0037', 'USRO0062', 'USRO0034', 'USRO0039', 'USRO0019', 'USRO0049', 'USRO0056', 'USRO0016', 'USRO0024', 'USRO0051', 'USRO0023', 'USRO0015', 'USRO0006', 'USRO0017', 'USRO0032', 'USRO0094', 'USRO0027', 'USRO0025', 'USRO0083', 'USRO0085', 'USRO0099', 'USRO0040', 'USRO0072', 'USRO0097', 'USRO0045', 'USRO0026', 'USRO0074', 'USRO0089', 'USRO0075', 'USRO0100', 'USRO0104', 'USRO0103', 'USRO0028', 'USRO0087', 'USRO0092', 'USRO0041', 'USRO0107', 'USRO0033'],\n          hierarchy1: ['Apparel'],\n          hierarchy2: ['MNS'],\n          hierarchy3: ['Basketball', 'Ecosphere', 'Esports', 'Fundamentals', 'Golf', 'Licensing', 'Lifestyle', 'Motorsport', 'Other Business', 'Running', 'Run/Train', 'Sportstyle Core / Kids', 'Sportstyle Prime / Select', 'Swimwear', 'Teamsport', 'Training & Fitness', 'Tretorn Fundamentals', 'Tretorn Lifestyle', 'Tretorn Outdoor', 'Undefined'],\n          hierarchy4: [],\n          hierarchy5: ['AWPT', 'AWSH', 'ACMK', 'AMLS', 'AKID', 'AWLS', 'AWLJ', 'AWBS', 'AMTK', 'AWTP', 'AMNW', 'ACMS', 'AMFL', 'AMBT', 'AMTT', 'AWBT', 'ACHT', 'AMBS', 'AMSH', 'AWFL', 'AMPT', 'CUSA', 'AMLJ', 'AMTP', 'AWTT'],\n          season: ['20122', '20093', '20173', '20114', '20082', '20211', '20151', '20074', '20123', '20201', '20143', '20131', '20063', '20112', '20164', '20073', '20174', '20062', '20081', '20134', '20142', '20083', '20141', '20072', '20171', '20204', '20161', '20043', '20104', '20094', '20052', '20183', '20193', '20113', '20092', '20102', '20132', '20133', '20061', '20121', '20172', '20163', '20053', '20144', '20111', '20054', '20103', '20202', '20192', '20162', '20154', '20152', '20194', '20091', '20071', '20101', '20181', '20084', '20153', '20191', '20203', '20064', '20184', '20182', '20124', '20051'],\n          clearance: ['CLR'],\n          matrix: [],\n          exclusion_list: [],\n          style_color: ['85506301', '56772102', '57800301', '57664401']\n        },\n        startDate: '2020-08-03',\n        endDate: '2020-10-04',\n        week: [32, 33, 34, 35, 36, 37, 38, 39, 40],\n        reportingType: 'week_level_aggregated_data',\n        retail_flag: [1]\n      };\n\n      _this.props.getReportingData(abc1);\n\n      var abc = {\n        filters: {\n          country: ['US'],\n          channel: ['Outlet'],\n          store_cluster: [],\n          customStoreGroup: [10, 9, 7, 5, 4, 3],\n          store: ['USRO0063', 'USRO0088', 'USRO0046', 'USRO0070', 'USRO0058', 'USRO0086', 'USRO0038', 'USRO0080', 'USRO0071', 'USRO0003', 'USRO0078', 'USRO0044', 'USRF0004', 'USRO0030', 'USRO0029', 'USRO0084', 'USRO0009', 'USRO0036', 'USRO0022', 'USRO0091', 'USRO0035', 'USRO0021', 'USRO0055', 'USRO0064', 'USRO0073', 'USRO0076', 'USRO0077', 'USRO0002', 'USRO0043', 'USRO0031', 'USRO0066', 'USRO0106', 'USRO0014', 'USRO0090', 'USRF0019', 'USRO0105', 'USRO0047', 'PNA20', 'USRF0011', 'USRO0102', 'USRO0081', 'USRO0098', 'USRO0079', 'USRO0054', 'USRO0005', 'USRO0008', 'USRO0007', 'USRO0010', 'USRO0037', 'USRO0062', 'USRO0034', 'USRO0039', 'USRO0019', 'USRO0049', 'USRO0056', 'USRO0016', 'USRO0024', 'USRO0051', 'USRO0023', 'USRO0015', 'USRO0006', 'USRO0017', 'USRO0032', 'USRO0094', 'USRO0027', 'USRO0025', 'USRO0083', 'USRO0085', 'USRO0099', 'USRO0040', 'USRO0072', 'USRO0097', 'USRO0045', 'USRO0026', 'USRO0074', 'USRO0089', 'USRO0075', 'USRO0100', 'USRO0104', 'USRO0103', 'USRO0028', 'USRO0087', 'USRO0092', 'USRO0041', 'USRO0107', 'USRO0033'],\n          hierarchy1: ['Apparel'],\n          hierarchy2: ['MNS'],\n          hierarchy3: ['Basketball', 'Ecosphere', 'Esports', 'Fundamentals', 'Golf', 'Licensing', 'Lifestyle', 'Motorsport', 'Other Business', 'Running', 'Run/Train', 'Sportstyle Core / Kids', 'Sportstyle Prime / Select', 'Swimwear', 'Teamsport', 'Training & Fitness', 'Tretorn Fundamentals', 'Tretorn Lifestyle', 'Tretorn Outdoor', 'Undefined'],\n          hierarchy4: [],\n          hierarchy5: ['AWPT', 'AWSH', 'ACMK', 'AMLS', 'AKID', 'AWLS', 'AWLJ', 'AWBS', 'AMTK', 'AWTP', 'AMNW', 'ACMS', 'AMFL', 'AMBT', 'AMTT', 'AWBT', 'ACHT', 'AMBS', 'AMSH', 'AWFL', 'AMPT', 'CUSA', 'AMLJ', 'AMTP', 'AWTT'],\n          season: ['20122', '20093', '20173', '20114', '20082', '20211', '20151', '20074', '20123', '20201', '20143', '20131', '20063', '20112', '20164', '20073', '20174', '20062', '20081', '20134', '20142', '20083', '20141', '20072', '20171', '20204', '20161', '20043', '20104', '20094', '20052', '20183', '20193', '20113', '20092', '20102', '20132', '20133', '20061', '20121', '20172', '20163', '20053', '20144', '20111', '20054', '20103', '20202', '20192', '20162', '20154', '20152', '20194', '20091', '20071', '20101', '20181', '20084', '20153', '20191', '20203', '20064', '20184', '20182', '20124', '20051'],\n          clearance: ['CLR'],\n          matrix: [],\n          exclusion_list: [],\n          style_color: ['85506301', '56772102', '57800301', '57664401']\n        },\n        startDate: '2020-08-03',\n        endDate: '2020-10-04',\n        week: [32, 33, 34, 35, 36, 37, 38, 39, 40],\n        reportingType: 'style_level_detailed_data',\n        retail_flag: [1]\n      };\n\n      _this.props.getReportingData(abc);\n\n      _this.getDefaultHeaders();\n    };\n\n    _this.getReportingDataStyleGroup = function () {\n      _this.getReportingData('style_level_detailed_data');\n\n      _this.setState({\n        buttonClicked: true\n      });\n    };\n\n    _this.onHandleCheckBox = function (e, label, index) {\n      //adding\n      if (e.target.checked) {\n        if (_this.state.selLabels.indexOf(label) === -1) {\n          var labels = [].concat(_toConsumableArray(_this.state.selLabels), [label]);\n          var tempArr = [];\n          labels.forEach(function (key) {\n            var columns = _this.props.columnHeaders[key];\n            var labelColumns = Object.keys(columns);\n            var options = labelColumns.map(function (item) {\n              var findKey = _.findKey(_this.props.columnHeaders, function (val) {\n                return val[item] === columns[item];\n              });\n\n              return {\n                label: item,\n                value: columns[item],\n                metricName: findKey\n              };\n            });\n            tempArr.push.apply(tempArr, _toConsumableArray(options));\n          });\n\n          _this.setState({\n            selLabels: labels,\n            columnOptions: tempArr\n          });\n        }\n      } else {\n        //removing\n        var _index = _this.state.selLabels.indexOf(label);\n\n        if (_index !== -1) {\n          var selectedLabel = _.cloneDeep(_this.state.selLabels);\n\n          selectedLabel.splice(_index, 1);\n          var _tempArr = [];\n          selectedLabel.forEach(function (label) {\n            var columns = _this.props.columnHeaders[label];\n            var labelColumns = Object.keys(columns); // let findKey = _.findKey(this.props.columnHeaders, (item) => {\n            //   return item[label] === columns[label];\n            // });\n\n            var options = labelColumns.map(function (label) {\n              var findKey = _.findKey(_this.props.columnHeaders, function (val) {\n                return val[label] === columns[label];\n              });\n\n              return {\n                label: label,\n                value: columns[label],\n                metricName: findKey\n              };\n            });\n\n            _tempArr.push.apply(_tempArr, _toConsumableArray(options));\n          });\n\n          var selectedItemsClone = _.cloneDeep(_this.state.selectedItems);\n\n          var newSelectedItems = [];\n          var labelArr = Object.keys(_this.props.columnHeaders[label]);\n          selectedItemsClone.forEach(function (item) {\n            if (!labelArr.includes(item.label)) {\n              newSelectedItems.push(item);\n            }\n          });\n\n          _this.onHandleDropdownSelect(newSelectedItems);\n\n          _this.setState({\n            selLabels: selectedLabel,\n            columnOptions: _tempArr,\n            selectedItems: newSelectedItems\n          });\n        }\n      }\n    };\n\n    _this.onHandleDropdownSelect = function (selOptions, proceed, columns) {\n      if (!_.isEqual(_this.state.selectedItems, selOptions) || proceed) {\n        var headers = columns ? _.cloneDeep(columns) : _.cloneDeep(_this.state.columns);\n\n        _.remove(headers, function (item) {\n          return item.metric;\n        });\n\n        selOptions.forEach(function (item) {\n          var newTableCols = headers.filter(function (a) {\n            return a.accessor === item.value;\n          });\n\n          if (newTableCols.length == 0) {\n            var metricNameCalc = item.metricName === 'Inventory' ? 'Current inventory' : item.metricName;\n\n            var spliceAt = headers.length - 5,\n                findMetricName = _.find(headers, {\n              Header: metricNameCalc\n            }),\n                downloadFormatter = FormatterStyling('downloadFormatter', item.value);\n\n            if (findMetricName) {\n              findMetricName.columns.push({\n                Header: item.label,\n                accessor: item.value,\n                Aggregated: function Aggregated(_ref2) {\n                  var row = _ref2.row;\n                  // You can even render the cell differently if it's an aggregated cell\n                  var aggregate = row.id.includes('.') ? AggregateFunc(row.original.subRows, item.value) : mainAggregateFunc(row.original.subRows, item.value);\n                  return React.createElement(\"span\", {\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 925\n                    },\n                    __self: this\n                  }, aggregate.toFixed(2));\n                },\n                Cell: function Cell(props) {\n                  return FormatterStyling(props, item.value);\n                },\n                downloadFormatter: downloadFormatter\n              });\n            } else {\n              headers.splice(spliceAt, 0, {\n                Header: item.metricName === 'Inventory' ? 'Current inventory' : item.metricName,\n                metric: true,\n                columns: [{\n                  Header: item.label,\n                  accessor: item.value,\n                  Aggregated: function Aggregated(_ref3) {\n                    var row = _ref3.row;\n                    // You can even render the cell differently if it's an aggregated cell\n                    var aggregate = row.id.includes('.') ? AggregateFunc(row.original.subRows, item.value) : mainAggregateFunc(row.original.subRows, item.value);\n                    return React.createElement(\"span\", {\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 944\n                      },\n                      __self: this\n                    }, aggregate.toFixed(2));\n                  },\n                  Cell: function Cell(props) {\n                    return FormatterStyling(props, item.value);\n                  },\n                  downloadFormatter: downloadFormatter\n                }]\n              });\n            }\n          }\n        });\n\n        _this.setState({\n          columns: headers,\n          selectedItems: selOptions\n        });\n      }\n    };\n\n    _this.state = {\n      columnOptions: [],\n      selLabels: [],\n      selectedItems: [],\n      columns: [],\n      buttonClicked: false,\n      showSkuCockpit: false\n    };\n    return _this;\n  }\n\n  _createClass(MarkdownReporting, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.onReset();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 963\n        },\n        __self: this\n      }, React.createElement(LoadingOverlay, {\n        loader: this.props.overlayLoaderState,\n        spinner: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 964\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 965\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 966\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"font-size-14  pad-10 markdown-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 967\n        },\n        __self: this\n      }, \"MarkSmart /\", React.createElement(\"span\", {\n        className: \"font-bold color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 968\n        },\n        __self: this\n      }, \"Reporting Section\"))), React.createElement(\"hr\", {\n        style: {\n          marginTop: '-4px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 971\n        },\n        __self: this\n      }), React.createElement(Filters, {\n        drop: true,\n        stores: true,\n        customStoreGroup: true,\n        dateRange: true,\n        filtersOptions: [{\n          type: 'country',\n          isMandatory: true,\n          isMultiple: false\n        }, {\n          type: 'channel',\n          isMandatory: true,\n          isMultiple: false\n        }, {\n          type: 'storeCluster',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'customStoreGroup',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'store',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'hierarchy1',\n          isMandatory: true,\n          isMultiple: false,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy2',\n          isMandatory: true,\n          isMultiple: false,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy3',\n          isMandatory: true,\n          isMultiple: true,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy4',\n          isMandatory: true,\n          isMultiple: true,\n          isHierarchy: true\n        }, {\n          type: 'hierarchy5',\n          isMandatory: true,\n          isMultiple: true,\n          isHierarchy: true\n        }, {\n          type: 'season',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'matrix',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'exclusionList',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'clearance',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'customStyleGroup',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'styleColor',\n          isMandatory: true,\n          isMultiple: true\n        }],\n        onFilter: this.onFilter,\n        onReset: this.props.onReset,\n        customStyleGroups: true // allowInactiveProducts={true} // no need for reporting now\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 976\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        className: \"hr-style mt-4 mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1029\n        },\n        __self: this\n      }), this.props.reportingData && this.props.reportingData.message ? React.createElement(\"div\", {\n        className: \"no-data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1031\n        },\n        __self: this\n      }, this.props.reportingData.message) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1033\n        },\n        __self: this\n      }, !!Object.keys(this.props.reportingData).length ? React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1035\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1036\n        },\n        __self: this\n      }, \"Sell through\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1038\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: this.props.reportingData.sellThroughData,\n        options: this.sellThroughOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1039\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1044\n        },\n        __self: this\n      }, \"Inventory\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1046\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: this.props.reportingData.inventoryData,\n        options: this.inventoryOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1047\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1052\n        },\n        __self: this\n      }, \"Margin\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1054\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: this.props.reportingData.marginData,\n        options: this.marginOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1055\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1060\n        },\n        __self: this\n      }, \"Sales comparison\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1062\n        },\n        __self: this\n      }, React.createElement(BarChart, {\n        data: this.props.reportingData.salesData,\n        options: this.salesComparisonOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1063\n        },\n        __self: this\n      })))) : React.createElement(\"div\", {\n        className: \"no-data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1070\n        },\n        __self: this\n      }, \"Please select filters\"))), !!Object.keys(this.props.reportingData).length && !this.props.reportingData.message && React.createElement(\"div\", {\n        className: \"show-detail-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1076\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary mt-3\",\n        onClick: function onClick() {\n          return _this2.getReportingDataStyleGroup();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1077\n        },\n        __self: this\n      }, \"Show Style Group level data\")), this.state.showSkuCockpit && this.state.buttonClicked ? this.props.cockpitData.length ? React.createElement(\"div\", {\n        className: \"card mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1086\n        },\n        __self: this\n      }, React.createElement(SkuCockpit, {\n        columnHeaders: this.props.columnHeaders,\n        onHandleSelect: this.onHandleDropdownSelect,\n        selectedItems: this.state.selectedItems,\n        onHandleCheckBox: this.onHandleCheckBox,\n        columnOptions: this.state.columnOptions,\n        selLabels: this.state.selLabels,\n        columns: this.state.columns,\n        cockpitData: this.props.cockpitData,\n        onCreateMarkdown: this.onCreateMarkdown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1087\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1100\n        },\n        __self: this\n      }, \"No data found. Please try with other filters.\") : null));\n    }\n  }]);\n\n  return MarkdownReporting;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    overlayLoaderState: store.loaderReducer.overlayLoaderState,\n    reportingData: store.reportingReducer.reportingData,\n    cockpitData: store.reportingReducer.cockpitData,\n    columnHeaders: store.reportingReducer.columnHeaders,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    selectedCustomStyleGroup: store.filtersReducer.selectedCustomStyleGroup,\n    selectedCustomStoreGroup: store.filtersReducer.selectedCustomStoreGroup,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n    selectedSeason: store.filtersReducer.selectedSeason,\n    selectedClearance: store.filtersReducer.selectedClearance,\n    selectedMatrix: store.filtersReducer.selectedMatrix,\n    selectedExclusionList: store.filtersReducer.selectedExclusionList,\n    selectedStyleColor: store.filtersReducer.selectedStyleColor,\n    selectedCountry: store.filtersReducer.selectedCountry,\n    selectedStoreCluster: store.filtersReducer.selectedStoreCluster,\n    selectedStore: store.filtersReducer.selectedStore,\n    selectedChannel: store.filtersReducer.selectedChannel\n  };\n};\n\nvar mapActionsToProps = {\n  getReportingData: reportingActions.getReportingData,\n  onReset: reportingActions.onReset,\n  setRetainFilters: filterActions.setRetainFilters\n};\nexport default connect(mapStateToProps, mapActionsToProps)(MarkdownReporting);\nvar ColSelBtn = styled.div(_templateObject());","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/Reporting/index.js"],"names":["React","Component","Filters","SkuCockpit","LineChart","BarChart","connect","chartjs","_","reportingActions","LoadingOverlay","moment","decimalFormatter","toUnit","formatThousands","toDollar","toast","filterActions","styled","SkuColDef","pluginService","register","beforeDraw","chart","config","options","backgroundColor","ctx","chartArea","save","fillStyle","fillRect","left","top","right","bottom","restore","AggregateFunc","subRows","accessor","value","map","item","length","mainAggregateFunc","aggregate","FormatterStyling","props","val","val1","props1","MarkdownReporting","sellThroughOptions","tooltips","callbacks","label","tooltipItem","scales","xAxes","scaleLabel","display","labelString","yAxes","ticks","suggestedMin","inventoryOptions","callback","marginOptions","salesComparisonOptions","legend","beginAtZero","getDefaultHeaders","columnHeaders","Object","keys","defaultHeader","default","setDefaultColDef","setDefaultLabel","setDefaultColumnOptions","setDefaultColumnOptions1","setDefaultItems","colHeaders","cloneDeep","labels","splice","indexOf","labelArray","diff","A","B","filter","a","push","find","findKey","metricName","selectedItems","i","setState","columns","selLabels","columnOptions","filteredHeader","onHandleDropdownSelect","onFilter","showSkuCockpit","getReportingData","onCreateMarkdown","items","setRetainFilters","history","pathname","state","styles","reportingType","req","filters","country","selectedCountry","channel","selectedChannel","store_cluster","selectedStoreCluster","customStoreGroup","selectedCustomStoreGroup","store","selectedStore","hierarchy1","selectedHierarchy1","e","replace","hierarchy2","selectedHierarchy2","hierarchy3","selectedHierarchy3","hierarchy4","selectedHierarchy4","hierarchy5","selectedHierarchy5","season","selectedSeason","clearance","selectedClearance","matrix","selectedMatrix","exclusion_list","selectedExclusionList","style_color","selectedStyleColor","customStyleGroup","selectedCustomStyleGroup","startDate","format","endDate","week","weeks","abc1","retail_flag","abc","getReportingDataStyleGroup","buttonClicked","onHandleCheckBox","index","target","checked","tempArr","forEach","key","labelColumns","selectedLabel","selectedItemsClone","newSelectedItems","labelArr","includes","selOptions","proceed","isEqual","headers","remove","metric","newTableCols","metricNameCalc","spliceAt","findMetricName","Header","downloadFormatter","Aggregated","row","id","original","toFixed","Cell","onReset","overlayLoaderState","marginTop","type","isMandatory","isMultiple","isHierarchy","reportingData","message","sellThroughData","inventoryData","marginData","salesData","cockpitData","textAlign","mapStateToProps","loaderReducer","reportingReducer","filtersReducer","mapActionsToProps","ColSelBtn","div"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Filters from '../../services/filters';\nimport SkuCockpit from '../../components/SKUCockpit/SKUCockpit';\nimport LineChart from '../support/Charts/LineChart';\nimport BarChart from '../support/Charts/Barchart';\nimport { connect } from 'react-redux';\nimport * as chartjs from 'chart.js';\nimport _ from 'lodash';\nimport './index.css';\nimport reportingActions from '../../actions/reportingActions';\nimport LoadingOverlay from '../../utils/Loader';\nimport moment from 'moment';\nimport { decimalFormatter, toUnit, formatThousands, toDollar } from '../../helper/formatter';\nimport { toast } from 'react-toastify';\nimport filterActions from '../../actions/filtersAction';\nimport styled from 'styled-components';\nimport SkuColDef from '../../../src/components/SKUCockpit/skuColdef.js';\n\nchartjs.pluginService.register({\n  beforeDraw: function (chart) {\n    if (chart.config.options && chart.config.options.backgroundColor) {\n      var ctx = chart.chart.ctx;\n      var chartArea = chart.chartArea;\n      ctx.save();\n      ctx.fillStyle = chart.config.options.backgroundColor;\n      ctx.fillRect(\n        chartArea.left,\n        chartArea.top,\n        chartArea.right - chartArea.left,\n        chartArea.bottom - chartArea.top\n      );\n      ctx.restore();\n    }\n  },\n});\n\nfunction AggregateFunc(subRows, accessor) {\n  let value = 0;\n  _.map(subRows, (item) => {\n    value = item[accessor] ? value + item[accessor] : value;\n  });\n  return value / subRows.length;\n}\nfunction mainAggregateFunc(subRows, accessor) {\n  let value = 0;\n  _.map(subRows, (item) => {\n    let aggregate = AggregateFunc(item.subRows, accessor);\n    value = aggregate ? value + aggregate : value;\n  });\n  return value / subRows.length;\n}\nfunction FormatterStyling(props, value, val) {\n  let val1 = val || val == 0 ? val : props.value;\n  let props1 = val || val == 0 ? { value: val } : props;\n  if (\n    value == 'units_sold' ||\n    value == 'last_week_sales' ||\n    value == 'inventory.inventory_on_hand' ||\n    value == 'inventory.inventory_in_transit' ||\n    value == 'inventory.inventory_on_order' ||\n    value == 'inventory.inventory_on_hand' ||\n    value == 'inventory.inventory_in_dc' ||\n    value == 'wos'\n  ) {\n    return props === 'downloadFormatter' ? toUnit : val1 || val1 == 0 ? toUnit(props1) : '-';\n  }\n  if (\n    value == 'revenue$' ||\n    value == 'aur' ||\n    value == 'margin$' ||\n    value == 'aum' ||\n    value == 'overall_aum' ||\n    value == 'overall_revenue$' ||\n    value == 'overall_aur' ||\n    value == 'overall_margin$'\n  ) {\n    return props === 'downloadFormatter' ? toDollar : val1 || val1 == 0 ? toDollar(props1) : '-';\n  }\n\n  return '-';\n}\nclass MarkdownReporting extends Component {\n  constructor() {\n    super();\n    this.state = {\n      columnOptions: [],\n      selLabels: [],\n      selectedItems: [],\n      columns: [],\n      buttonClicked: false,\n      showSkuCockpit: false,\n    };\n  }\n  sellThroughOptions = {\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return decimalFormatter({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Sell through %',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n          },\n        },\n      ],\n    },\n  };\n  inventoryOptions = {\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return toUnit({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Units',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n            callback: (value) => {\n              return formatThousands(value);\n            },\n          },\n        },\n      ],\n    },\n  };\n  marginOptions = {\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return decimalFormatter({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Margin %',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n          },\n        },\n      ],\n    },\n  };\n  salesComparisonOptions = {\n    legend: { display: false },\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return toUnit({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Units',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n            beginAtZero: true, // minimum value will be 0.\n            callback: (value) => {\n              return formatThousands(value);\n            },\n          },\n        },\n      ],\n    },\n  };\n  getDefaultHeaders = () => {\n    if (this.props.columnHeaders && Object.keys(this.props.columnHeaders).length) {\n      let defaultHeader = Object.keys(this.props.columnHeaders.default);\n\n      let setDefaultColDef = SkuColDef();\n      let setDefaultLabel = [];\n      let setDefaultColumnOptions = [];\n      let setDefaultColumnOptions1 = [];\n      let setDefaultItems = [];\n      let colHeaders = _.cloneDeep(this.props.columnHeaders);\n      let labels = Object.keys(colHeaders);\n      labels.splice(labels.indexOf('fixed'), 1);\n      labels.splice(labels.indexOf('default'), 1);\n      for (const label of labels) {\n        let labelArray = Object.keys(this.props.columnHeaders[label]);\n        function diff(A = labelArray, B = defaultHeader) {\n          return A.filter(function (a) {\n            return B.indexOf(a) !== -1;\n          });\n        }\n\n        if (diff().length) {\n          setDefaultColumnOptions.push(...Object.keys(this.props.columnHeaders[label]));\n          setDefaultColumnOptions1.push(this.props.columnHeaders[label]);\n          setDefaultItems.push(...diff());\n          setDefaultLabel.push(label);\n        }\n      }\n      let options = setDefaultColumnOptions.map((label) => {\n        let find = null;\n        _.map(setDefaultColumnOptions1, (item) => {\n          if (item[label]) {\n            find = item[label];\n          }\n        });\n        let findKey = _.findKey(this.props.columnHeaders, (item) => {\n          return item[label] === find;\n        });\n        return {\n          label: label,\n          value: find,\n          metricName: findKey,\n        };\n      });\n      let selectedItems = setDefaultItems.map((label, i) => {\n        let find = null;\n        _.map(setDefaultColumnOptions1, (item) => {\n          if (item[label]) {\n            find = item[label];\n          }\n        });\n        let findKey = _.findKey(this.props.columnHeaders, (item) => {\n          return item[label] === find;\n        });\n\n        return {\n          label: label,\n          value: find,\n          metricName: findKey,\n        };\n      });\n      this.setState({\n        columns: setDefaultColDef,\n        selLabels: setDefaultLabel,\n        selectedItems: selectedItems,\n        columnOptions: options,\n      });\n      if (selectedItems) {\n        let filteredHeader = _.find(options, { accessor: selectedItems[0].value });\n        if (!filteredHeader) {\n          this.onHandleDropdownSelect(selectedItems, true, setDefaultColDef);\n        }\n      }\n    }\n  };\n  // mandatoryFiltersVal = () => {\n  //   return (\n  //     this.props.selectedHierarchy1 &&\n  //     this.props.selectedHierarchy2.length &&\n  //     this.props.selectedHierarchy3.length &&\n  //     this.props.selectedHierarchy4.length &&\n  //     this.props.selectedHierarchy5.length &&\n  //     this.props.selectedHierarchy6.length &&\n  //     this.props.selectedHierarchy7.length &&\n  //     this.props.selectedHierarchy8.length &&\n  //     this.props.selectedStores.length &&\n  //     this.props.startDate &&\n  //     this.props.endDate\n  //   );\n  // };\n  onFilter = () => {\n    // if (!this.mandatoryFiltersVal()) {\n    //   toast.error(`Please select mandatory filters`, {\n    //     autoClose: 15000,\n    //     hideProgressBar: true,\n    //   });\n    //   return;\n    // }\n    this.setState({ showSkuCockpit: true });\n    this.getReportingData('week_level_aggregated_data');\n  };\n  onCreateMarkdown = async (items) => {\n    await this.props.setRetainFilters(true);\n    this.props.history.push({\n      pathname: '/vis/Markdown/create-markdown',\n      state: { styles: items },\n    });\n  };\n  getReportingData = (reportingType) => {\n    let req = {\n      filters: {\n        country: this.props.selectedCountry,\n        channel: this.props.selectedChannel,\n        store_cluster: this.props.selectedStoreCluster,\n        customStoreGroup: this.props.selectedCustomStoreGroup,\n        store: this.props.selectedStore,\n        hierarchy1: this.props.selectedHierarchy1.map((e) => e.replace(/'/g, \"''\")),\n        hierarchy2: this.props.selectedHierarchy2.map((e) => e.replace(/'/g, \"''\")),\n        hierarchy3: this.props.selectedHierarchy3.map((e) => e.replace(/'/g, \"''\")),\n        hierarchy4: this.props.selectedHierarchy4.map((e) => e.replace(/'/g, \"''\")),\n        hierarchy5: this.props.selectedHierarchy5.map((e) => e.replace(/'/g, \"''\")),\n        season: this.props.selectedSeason,\n        clearance: this.props.selectedClearance,\n        matrix: this.props.selectedMatrix,\n        exclusion_list: this.props.selectedExclusionList,\n        style_color: this.props.selectedStyleColor,\n        customStyleGroup: this.props.selectedCustomStyleGroup,\n      },\n      startDate: moment(this.props.startDate).format('YYYY-MM-DD'),\n      endDate: moment(this.props.endDate).format('YYYY-MM-DD'),\n      week: this.props.weeks,\n      reportingType,\n    };\n\n    if (this.props.selectedChannel[0] === 'Web') req.filters['ecom_flag'] = [1];\n    if (this.props.selectedChannel[0] === 'Outlet') req['retail_flag'] = [1];\n    if (!this.props.selectedCustomStoreGroup.length) {\n      delete req.filters['customStoreGroup'];\n    }\n    if (!this.props.selectedCustomStyleGroup.length) {\n      delete req.filters['customStyleGroup'];\n    }\n    let abc1 = {\n      filters: {\n        country: ['US'],\n        channel: ['Outlet'],\n        store_cluster: [],\n        customStoreGroup: [10, 9, 7, 5, 4, 3],\n        store: [\n          'USRO0063',\n          'USRO0088',\n          'USRO0046',\n          'USRO0070',\n          'USRO0058',\n          'USRO0086',\n          'USRO0038',\n          'USRO0080',\n          'USRO0071',\n          'USRO0003',\n          'USRO0078',\n          'USRO0044',\n          'USRF0004',\n          'USRO0030',\n          'USRO0029',\n          'USRO0084',\n          'USRO0009',\n          'USRO0036',\n          'USRO0022',\n          'USRO0091',\n          'USRO0035',\n          'USRO0021',\n          'USRO0055',\n          'USRO0064',\n          'USRO0073',\n          'USRO0076',\n          'USRO0077',\n          'USRO0002',\n          'USRO0043',\n          'USRO0031',\n          'USRO0066',\n          'USRO0106',\n          'USRO0014',\n          'USRO0090',\n          'USRF0019',\n          'USRO0105',\n          'USRO0047',\n          'PNA20',\n          'USRF0011',\n          'USRO0102',\n          'USRO0081',\n          'USRO0098',\n          'USRO0079',\n          'USRO0054',\n          'USRO0005',\n          'USRO0008',\n          'USRO0007',\n          'USRO0010',\n          'USRO0037',\n          'USRO0062',\n          'USRO0034',\n          'USRO0039',\n          'USRO0019',\n          'USRO0049',\n          'USRO0056',\n          'USRO0016',\n          'USRO0024',\n          'USRO0051',\n          'USRO0023',\n          'USRO0015',\n          'USRO0006',\n          'USRO0017',\n          'USRO0032',\n          'USRO0094',\n          'USRO0027',\n          'USRO0025',\n          'USRO0083',\n          'USRO0085',\n          'USRO0099',\n          'USRO0040',\n          'USRO0072',\n          'USRO0097',\n          'USRO0045',\n          'USRO0026',\n          'USRO0074',\n          'USRO0089',\n          'USRO0075',\n          'USRO0100',\n          'USRO0104',\n          'USRO0103',\n          'USRO0028',\n          'USRO0087',\n          'USRO0092',\n          'USRO0041',\n          'USRO0107',\n          'USRO0033',\n        ],\n        hierarchy1: ['Apparel'],\n        hierarchy2: ['MNS'],\n        hierarchy3: [\n          'Basketball',\n          'Ecosphere',\n          'Esports',\n          'Fundamentals',\n          'Golf',\n          'Licensing',\n          'Lifestyle',\n          'Motorsport',\n          'Other Business',\n          'Running',\n          'Run/Train',\n          'Sportstyle Core / Kids',\n          'Sportstyle Prime / Select',\n          'Swimwear',\n          'Teamsport',\n          'Training & Fitness',\n          'Tretorn Fundamentals',\n          'Tretorn Lifestyle',\n          'Tretorn Outdoor',\n          'Undefined',\n        ],\n        hierarchy4: [],\n        hierarchy5: [\n          'AWPT',\n          'AWSH',\n          'ACMK',\n          'AMLS',\n          'AKID',\n          'AWLS',\n          'AWLJ',\n          'AWBS',\n          'AMTK',\n          'AWTP',\n          'AMNW',\n          'ACMS',\n          'AMFL',\n          'AMBT',\n          'AMTT',\n          'AWBT',\n          'ACHT',\n          'AMBS',\n          'AMSH',\n          'AWFL',\n          'AMPT',\n          'CUSA',\n          'AMLJ',\n          'AMTP',\n          'AWTT',\n        ],\n        season: [\n          '20122',\n          '20093',\n          '20173',\n          '20114',\n          '20082',\n          '20211',\n          '20151',\n          '20074',\n          '20123',\n          '20201',\n          '20143',\n          '20131',\n          '20063',\n          '20112',\n          '20164',\n          '20073',\n          '20174',\n          '20062',\n          '20081',\n          '20134',\n          '20142',\n          '20083',\n          '20141',\n          '20072',\n          '20171',\n          '20204',\n          '20161',\n          '20043',\n          '20104',\n          '20094',\n          '20052',\n          '20183',\n          '20193',\n          '20113',\n          '20092',\n          '20102',\n          '20132',\n          '20133',\n          '20061',\n          '20121',\n          '20172',\n          '20163',\n          '20053',\n          '20144',\n          '20111',\n          '20054',\n          '20103',\n          '20202',\n          '20192',\n          '20162',\n          '20154',\n          '20152',\n          '20194',\n          '20091',\n          '20071',\n          '20101',\n          '20181',\n          '20084',\n          '20153',\n          '20191',\n          '20203',\n          '20064',\n          '20184',\n          '20182',\n          '20124',\n          '20051',\n        ],\n        clearance: ['CLR'],\n        matrix: [],\n        exclusion_list: [],\n        style_color: ['85506301', '56772102', '57800301', '57664401'],\n      },\n      startDate: '2020-08-03',\n      endDate: '2020-10-04',\n      week: [32, 33, 34, 35, 36, 37, 38, 39, 40],\n      reportingType: 'week_level_aggregated_data',\n      retail_flag: [1],\n    };\n    this.props.getReportingData(abc1);\n    let abc = {\n      filters: {\n        country: ['US'],\n        channel: ['Outlet'],\n        store_cluster: [],\n        customStoreGroup: [10, 9, 7, 5, 4, 3],\n        store: [\n          'USRO0063',\n          'USRO0088',\n          'USRO0046',\n          'USRO0070',\n          'USRO0058',\n          'USRO0086',\n          'USRO0038',\n          'USRO0080',\n          'USRO0071',\n          'USRO0003',\n          'USRO0078',\n          'USRO0044',\n          'USRF0004',\n          'USRO0030',\n          'USRO0029',\n          'USRO0084',\n          'USRO0009',\n          'USRO0036',\n          'USRO0022',\n          'USRO0091',\n          'USRO0035',\n          'USRO0021',\n          'USRO0055',\n          'USRO0064',\n          'USRO0073',\n          'USRO0076',\n          'USRO0077',\n          'USRO0002',\n          'USRO0043',\n          'USRO0031',\n          'USRO0066',\n          'USRO0106',\n          'USRO0014',\n          'USRO0090',\n          'USRF0019',\n          'USRO0105',\n          'USRO0047',\n          'PNA20',\n          'USRF0011',\n          'USRO0102',\n          'USRO0081',\n          'USRO0098',\n          'USRO0079',\n          'USRO0054',\n          'USRO0005',\n          'USRO0008',\n          'USRO0007',\n          'USRO0010',\n          'USRO0037',\n          'USRO0062',\n          'USRO0034',\n          'USRO0039',\n          'USRO0019',\n          'USRO0049',\n          'USRO0056',\n          'USRO0016',\n          'USRO0024',\n          'USRO0051',\n          'USRO0023',\n          'USRO0015',\n          'USRO0006',\n          'USRO0017',\n          'USRO0032',\n          'USRO0094',\n          'USRO0027',\n          'USRO0025',\n          'USRO0083',\n          'USRO0085',\n          'USRO0099',\n          'USRO0040',\n          'USRO0072',\n          'USRO0097',\n          'USRO0045',\n          'USRO0026',\n          'USRO0074',\n          'USRO0089',\n          'USRO0075',\n          'USRO0100',\n          'USRO0104',\n          'USRO0103',\n          'USRO0028',\n          'USRO0087',\n          'USRO0092',\n          'USRO0041',\n          'USRO0107',\n          'USRO0033',\n        ],\n        hierarchy1: ['Apparel'],\n        hierarchy2: ['MNS'],\n        hierarchy3: [\n          'Basketball',\n          'Ecosphere',\n          'Esports',\n          'Fundamentals',\n          'Golf',\n          'Licensing',\n          'Lifestyle',\n          'Motorsport',\n          'Other Business',\n          'Running',\n          'Run/Train',\n          'Sportstyle Core / Kids',\n          'Sportstyle Prime / Select',\n          'Swimwear',\n          'Teamsport',\n          'Training & Fitness',\n          'Tretorn Fundamentals',\n          'Tretorn Lifestyle',\n          'Tretorn Outdoor',\n          'Undefined',\n        ],\n        hierarchy4: [],\n        hierarchy5: [\n          'AWPT',\n          'AWSH',\n          'ACMK',\n          'AMLS',\n          'AKID',\n          'AWLS',\n          'AWLJ',\n          'AWBS',\n          'AMTK',\n          'AWTP',\n          'AMNW',\n          'ACMS',\n          'AMFL',\n          'AMBT',\n          'AMTT',\n          'AWBT',\n          'ACHT',\n          'AMBS',\n          'AMSH',\n          'AWFL',\n          'AMPT',\n          'CUSA',\n          'AMLJ',\n          'AMTP',\n          'AWTT',\n        ],\n        season: [\n          '20122',\n          '20093',\n          '20173',\n          '20114',\n          '20082',\n          '20211',\n          '20151',\n          '20074',\n          '20123',\n          '20201',\n          '20143',\n          '20131',\n          '20063',\n          '20112',\n          '20164',\n          '20073',\n          '20174',\n          '20062',\n          '20081',\n          '20134',\n          '20142',\n          '20083',\n          '20141',\n          '20072',\n          '20171',\n          '20204',\n          '20161',\n          '20043',\n          '20104',\n          '20094',\n          '20052',\n          '20183',\n          '20193',\n          '20113',\n          '20092',\n          '20102',\n          '20132',\n          '20133',\n          '20061',\n          '20121',\n          '20172',\n          '20163',\n          '20053',\n          '20144',\n          '20111',\n          '20054',\n          '20103',\n          '20202',\n          '20192',\n          '20162',\n          '20154',\n          '20152',\n          '20194',\n          '20091',\n          '20071',\n          '20101',\n          '20181',\n          '20084',\n          '20153',\n          '20191',\n          '20203',\n          '20064',\n          '20184',\n          '20182',\n          '20124',\n          '20051',\n        ],\n        clearance: ['CLR'],\n        matrix: [],\n        exclusion_list: [],\n        style_color: ['85506301', '56772102', '57800301', '57664401'],\n      },\n      startDate: '2020-08-03',\n      endDate: '2020-10-04',\n      week: [32, 33, 34, 35, 36, 37, 38, 39, 40],\n      reportingType: 'style_level_detailed_data',\n      retail_flag: [1],\n    };\n    this.props.getReportingData(abc);\n    this.getDefaultHeaders();\n  };\n  getReportingDataStyleGroup = () => {\n    this.getReportingData('style_level_detailed_data');\n    this.setState({ buttonClicked: true });\n  };\n  componentWillUnmount() {\n    this.props.onReset();\n  }\n  onHandleCheckBox = (e, label, index) => {\n    //adding\n    if (e.target.checked) {\n      if (this.state.selLabels.indexOf(label) === -1) {\n        let labels = [...this.state.selLabels, label];\n        let tempArr = [];\n        labels.forEach((key) => {\n          let columns = this.props.columnHeaders[key];\n          let labelColumns = Object.keys(columns);\n          let options = labelColumns.map((item) => {\n            let findKey = _.findKey(this.props.columnHeaders, (val) => {\n              return val[item] === columns[item];\n            });\n            return {\n              label: item,\n              value: columns[item],\n              metricName: findKey,\n            };\n          });\n          tempArr.push(...options);\n        });\n        this.setState({\n          selLabels: labels,\n          columnOptions: tempArr,\n        });\n      }\n    } else {\n      //removing\n      let index = this.state.selLabels.indexOf(label);\n      if (index !== -1) {\n        let selectedLabel = _.cloneDeep(this.state.selLabels);\n        selectedLabel.splice(index, 1);\n        let tempArr = [];\n        selectedLabel.forEach((label) => {\n          let columns = this.props.columnHeaders[label];\n          let labelColumns = Object.keys(columns);\n          // let findKey = _.findKey(this.props.columnHeaders, (item) => {\n          //   return item[label] === columns[label];\n          // });\n          let options = labelColumns.map((label) => {\n            let findKey = _.findKey(this.props.columnHeaders, (val) => {\n              return val[label] === columns[label];\n            });\n            return {\n              label: label,\n              value: columns[label],\n              metricName: findKey,\n            };\n          });\n          tempArr.push(...options);\n        });\n\n        let selectedItemsClone = _.cloneDeep(this.state.selectedItems);\n        let newSelectedItems = [];\n        let labelArr = Object.keys(this.props.columnHeaders[label]);\n        selectedItemsClone.forEach((item) => {\n          if (!labelArr.includes(item.label)) {\n            newSelectedItems.push(item);\n          }\n        });\n\n        this.onHandleDropdownSelect(newSelectedItems);\n        this.setState({\n          selLabels: selectedLabel,\n          columnOptions: tempArr,\n          selectedItems: newSelectedItems,\n        });\n      }\n    }\n  };\n  onHandleDropdownSelect = (selOptions, proceed, columns) => {\n    if (!_.isEqual(this.state.selectedItems, selOptions) || proceed) {\n      let headers = columns ? _.cloneDeep(columns) : _.cloneDeep(this.state.columns);\n      _.remove(headers, (item) => item.metric);\n\n      selOptions.forEach((item) => {\n        let newTableCols = headers.filter((a) => {\n          return a.accessor === item.value;\n        });\n        if (newTableCols.length == 0) {\n          let metricNameCalc =\n            item.metricName === 'Inventory' ? 'Current inventory' : item.metricName;\n          let spliceAt = headers.length - 5,\n            findMetricName = _.find(headers, { Header: metricNameCalc }),\n            downloadFormatter = FormatterStyling('downloadFormatter', item.value);\n\n          if (findMetricName) {\n            findMetricName.columns.push({\n              Header: item.label,\n              accessor: item.value,\n              Aggregated: ({ row }) => {\n                // You can even render the cell differently if it's an aggregated cell\n                let aggregate = row.id.includes('.')\n                  ? AggregateFunc(row.original.subRows, item.value)\n                  : mainAggregateFunc(row.original.subRows, item.value);\n\n                return <span>{aggregate.toFixed(2)}</span>;\n              },\n              Cell: (props) => FormatterStyling(props, item.value),\n              downloadFormatter,\n            });\n          } else {\n            headers.splice(spliceAt, 0, {\n              Header: item.metricName === 'Inventory' ? 'Current inventory' : item.metricName,\n              metric: true,\n              columns: [\n                {\n                  Header: item.label,\n                  accessor: item.value,\n                  Aggregated: ({ row }) => {\n                    // You can even render the cell differently if it's an aggregated cell\n                    let aggregate = row.id.includes('.')\n                      ? AggregateFunc(row.original.subRows, item.value)\n                      : mainAggregateFunc(row.original.subRows, item.value);\n\n                    return <span>{aggregate.toFixed(2)}</span>;\n                  },\n                  Cell: (props) => FormatterStyling(props, item.value),\n                  downloadFormatter,\n                },\n              ],\n            });\n          }\n        }\n      });\n      this.setState({\n        columns: headers,\n        selectedItems: selOptions,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <LoadingOverlay loader={this.props.overlayLoaderState} spinner>\n          <div className=\"card\">\n            <div>\n              <h4 className=\"font-size-14  pad-10 markdown-heading\">\n                MarkSmart /<span className=\"font-bold color-blue\">Reporting Section</span>\n              </h4>\n            </div>\n            <hr\n              style={{\n                marginTop: '-4px',\n              }}\n            />\n            <Filters\n              drop\n              stores\n              customStoreGroup\n              dateRange\n              filtersOptions={[\n                { type: 'country', isMandatory: true, isMultiple: false },\n                { type: 'channel', isMandatory: true, isMultiple: false },\n                { type: 'storeCluster', isMandatory: false, isMultiple: true },\n                { type: 'customStoreGroup', isMandatory: false, isMultiple: true },\n                { type: 'store', isMandatory: false, isMultiple: true },\n                {\n                  type: 'hierarchy1',\n                  isMandatory: true,\n                  isMultiple: false,\n                  isHierarchy: true,\n                },\n                {\n                  type: 'hierarchy2',\n                  isMandatory: true,\n                  isMultiple: false,\n                  isHierarchy: true,\n                },\n                {\n                  type: 'hierarchy3',\n                  isMandatory: true,\n                  isMultiple: true,\n                  isHierarchy: true,\n                },\n                {\n                  type: 'hierarchy4',\n                  isMandatory: true,\n                  isMultiple: true,\n                  isHierarchy: true,\n                },\n                {\n                  type: 'hierarchy5',\n                  isMandatory: true,\n                  isMultiple: true,\n                  isHierarchy: true,\n                },\n                { type: 'season', isMandatory: false, isMultiple: true },\n                { type: 'matrix', isMandatory: false, isMultiple: true },\n                { type: 'exclusionList', isMandatory: false, isMultiple: true },\n                { type: 'clearance', isMandatory: false, isMultiple: true },\n                { type: 'customStyleGroup', isMandatory: false, isMultiple: true },\n                { type: 'styleColor', isMandatory: true, isMultiple: true },\n              ]}\n              onFilter={this.onFilter}\n              onReset={this.props.onReset}\n              customStyleGroups\n              // allowInactiveProducts={true} // no need for reporting now\n            />\n            <hr className=\"hr-style mt-4 mb-4\" />\n            {this.props.reportingData && this.props.reportingData.message ? (\n              <div className=\"no-data\">{this.props.reportingData.message}</div>\n            ) : (\n              <React.Fragment>\n                {!!Object.keys(this.props.reportingData).length ? (\n                  <div className=\"row justify-content-center\">\n                    <div className=\"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\">\n                      Sell through\n                      <div>\n                        <LineChart\n                          data={this.props.reportingData.sellThroughData}\n                          options={this.sellThroughOptions}></LineChart>\n                      </div>\n                    </div>\n                    <div className=\"card col-md-5 ml-4 mb-4 reporting-chart-container\">\n                      Inventory\n                      <div>\n                        <LineChart\n                          data={this.props.reportingData.inventoryData}\n                          options={this.inventoryOptions}></LineChart>\n                      </div>\n                    </div>\n                    <div className=\"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\">\n                      Margin\n                      <div>\n                        <LineChart\n                          data={this.props.reportingData.marginData}\n                          options={this.marginOptions}></LineChart>\n                      </div>\n                    </div>\n                    <div className=\"card col-md-5 ml-4 mb-4 reporting-chart-container\">\n                      Sales comparison\n                      <div>\n                        <BarChart\n                          data={this.props.reportingData.salesData}\n                          options={this.salesComparisonOptions}></BarChart>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"no-data\">Please select filters</div>\n                )}\n              </React.Fragment>\n            )}\n          </div>\n          {!!Object.keys(this.props.reportingData).length && !this.props.reportingData.message && (\n            <div className=\"show-detail-button\">\n              <button\n                className=\"btn btn-primary mt-3\"\n                onClick={() => this.getReportingDataStyleGroup()}>\n                Show Style Group level data\n              </button>\n            </div>\n          )}\n          {this.state.showSkuCockpit && this.state.buttonClicked ? (\n            this.props.cockpitData.length ? (\n              <div className=\"card mt-4\">\n                <SkuCockpit\n                  columnHeaders={this.props.columnHeaders}\n                  onHandleSelect={this.onHandleDropdownSelect}\n                  selectedItems={this.state.selectedItems}\n                  onHandleCheckBox={this.onHandleCheckBox}\n                  columnOptions={this.state.columnOptions}\n                  selLabels={this.state.selLabels}\n                  columns={this.state.columns}\n                  cockpitData={this.props.cockpitData}\n                  onCreateMarkdown={this.onCreateMarkdown}\n                />\n              </div>\n            ) : (\n              <div style={{ textAlign: 'center' }}>\n                No data found. Please try with other filters.\n              </div>\n            )\n          ) : null}\n        </LoadingOverlay>\n      </React.Fragment>\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    overlayLoaderState: store.loaderReducer.overlayLoaderState,\n    reportingData: store.reportingReducer.reportingData,\n    cockpitData: store.reportingReducer.cockpitData,\n    columnHeaders: store.reportingReducer.columnHeaders,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    selectedCustomStyleGroup: store.filtersReducer.selectedCustomStyleGroup,\n    selectedCustomStoreGroup: store.filtersReducer.selectedCustomStoreGroup,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n\n    selectedSeason: store.filtersReducer.selectedSeason,\n    selectedClearance: store.filtersReducer.selectedClearance,\n    selectedMatrix: store.filtersReducer.selectedMatrix,\n    selectedExclusionList: store.filtersReducer.selectedExclusionList,\n    selectedStyleColor: store.filtersReducer.selectedStyleColor,\n    selectedCountry: store.filtersReducer.selectedCountry,\n    selectedStoreCluster: store.filtersReducer.selectedStoreCluster,\n    selectedStore: store.filtersReducer.selectedStore,\n    selectedChannel: store.filtersReducer.selectedChannel,\n  };\n};\nconst mapActionsToProps = {\n  getReportingData: reportingActions.getReportingData,\n  onReset: reportingActions.onReset,\n  setRetainFilters: filterActions.setRetainFilters,\n};\nexport default connect(mapStateToProps, mapActionsToProps)(MarkdownReporting);\n\nconst ColSelBtn = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`;\n"]},"metadata":{},"sourceType":"module"}