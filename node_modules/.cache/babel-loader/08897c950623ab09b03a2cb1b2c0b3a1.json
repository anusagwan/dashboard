{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/generic-markdown-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/generic-markdown-frontend/src/components/Reporting/index.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport Filters from '../../services/filters';\nimport Breadcrumbs from '../../services/breadcrumbs';\nimport SkuCockpit from '../../components/SKUCockpit/SKUCockpit';\nimport LineChart from '../support/Charts/LineChart';\nimport BarChart from '../support/Charts/Barchart';\nimport { connect } from 'react-redux';\nimport * as chartjs from 'chart.js';\nimport _ from 'lodash';\nimport './index.css';\nimport reportingActions from '../../actions/reportingActions';\nimport LoadingOverlay from '../../utils/Loader';\nimport moment from 'moment';\nimport { decimalFormatter, toUnit, formatThousands } from '../../helper/formatter';\nimport { toast } from 'react-toastify';\nimport filterActions from '../../actions/filtersAction';\nimport ColumnSelection from '../../components/columnSelection';\nimport styled from 'styled-components';\nchartjs.pluginService.register({\n  beforeDraw: function beforeDraw(chart) {\n    if (chart.config.options && chart.config.options.backgroundColor) {\n      var ctx = chart.chart.ctx;\n      var chartArea = chart.chartArea;\n      ctx.save();\n      ctx.fillStyle = chart.config.options.backgroundColor;\n      ctx.fillRect(chartArea.left, chartArea.top, chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n      ctx.restore();\n    }\n  }\n});\n\nvar MarkdownReporting =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MarkdownReporting, _Component);\n\n  function MarkdownReporting() {\n    var _this;\n\n    _classCallCheck(this, MarkdownReporting);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MarkdownReporting).call(this));\n    _this.sellThroughOptions = {\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return decimalFormatter({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Sell through %'\n          },\n          ticks: {\n            suggestedMin: 0 // minimum will be 0, unless there is a lower value.\n\n          }\n        }]\n      }\n    };\n    _this.inventoryOptions = {\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return toUnit({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Units'\n          },\n          ticks: {\n            suggestedMin: 0,\n            // minimum will be 0, unless there is a lower value.\n            callback: function callback(value) {\n              return formatThousands(value);\n            }\n          }\n        }]\n      }\n    };\n    _this.marginOptions = {\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return decimalFormatter({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Margin %'\n          },\n          ticks: {\n            suggestedMin: 0 // minimum will be 0, unless there is a lower value.\n\n          }\n        }]\n      }\n    };\n    _this.salesComparisonOptions = {\n      legend: {\n        display: false\n      },\n      backgroundColor: '#fff',\n      tooltips: {\n        callbacks: {\n          label: function label(tooltipItem) {\n            return toUnit({\n              value: tooltipItem.value\n            });\n          }\n        }\n      },\n      scales: {\n        xAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Period'\n          }\n        }],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: 'Units'\n          },\n          ticks: {\n            suggestedMin: 0,\n            // minimum will be 0, unless there is a lower value.\n            beginAtZero: true,\n            // minimum value will be 0.\n            callback: function callback(value) {\n              return formatThousands(value);\n            }\n          }\n        }]\n      }\n    };\n    _this.header = [{\n      Header: 'Style-Color',\n      columns: [{\n        Header: '',\n        downloadHeader: 'Style-Color',\n        accessor: 'style_number',\n        groupByID: 'style_number',\n        disableGroupBy: true,\n        align: 'left',\n        showFilter: true\n      }]\n    }, {\n      Header: 'Sell through %',\n      columns: [{\n        Header: 'TY',\n        downloadHeader: 'Sell through TY %',\n        downloadFormatter: toPercentage,\n        accessor: 'sell_through_ty',\n        aggregate: 'sum',\n        disableGroupBy: true,\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 204\n            },\n            __self: this\n          }, \" \", toPercentage({\n            value: props.value\n          }), \" \");\n        }\n      }, {\n        Header: 'LY',\n        downloadHeader: 'Sell through LY %',\n        downloadFormatter: toPercentage,\n        accessor: 'sell_through_ly',\n        disableGroupBy: true,\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 213\n            },\n            __self: this\n          }, \" \", toPercentage({\n            value: props.value\n          }), \" \");\n        }\n      }]\n    }, {\n      Header: 'Margin %',\n      columns: [{\n        Header: 'TY',\n        downloadHeader: 'Margin TY %',\n        downloadFormatter: toPercentage,\n        accessor: 'margin_ty',\n        disableGroupBy: true,\n        aggregate: _this.roundedMedian,\n        Aggregated: function Aggregated(_ref) {\n          var value = _ref.value;\n          return \"\".concat(value);\n        },\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229\n            },\n            __self: this\n          }, \" \", toPercentage({\n            value: props.value\n          }), \" \");\n        }\n      }, {\n        Header: 'LY',\n        downloadHeader: 'Margin LY %',\n        downloadFormatter: toPercentage,\n        accessor: 'margin_ly',\n        disableGroupBy: true,\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 238\n            },\n            __self: this\n          }, \" \", toPercentage({\n            value: props.value\n          }), \" \");\n        }\n      }]\n    }, {\n      Header: 'Margin ',\n      columns: [{\n        Header: 'Margin ($)',\n        accessor: 'margin$',\n        disableGroupBy: true,\n        Aggregated: function Aggregated(_ref2) {\n          var value = _ref2.value;\n          return \"\".concat(value);\n        },\n        align: 'centre',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251\n            },\n            __self: this\n          }, \" \", toDollar(props), \" \");\n        },\n        downloadFormatter: toDollar\n      }, {\n        Header: 'AUM $',\n        accessor: 'aum',\n        disableGroupBy: true,\n        Aggregated: function Aggregated(_ref3) {\n          var value = _ref3.value;\n          return \"\".concat(value);\n        },\n        align: 'centre',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261\n            },\n            __self: this\n          }, \" \", toDollar(props), \" \");\n        },\n        downloadFormatter: toDollar\n      }]\n    }, {\n      Header: 'Sales',\n      columns: [{\n        Header: 'Actual sales (units)',\n        accessor: 'units_sold',\n        aggregate: 'average',\n        disableGroupBy: true,\n        Aggregated: function Aggregated(_ref4) {\n          var value = _ref4.value;\n          return \"\".concat(value);\n        },\n        align: 'centre',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 276\n            },\n            __self: this\n          }, \" \", toUnit(props), \" \");\n        },\n        downloadFormatter: toUnit\n      }, {\n        Header: 'Revenue ($)',\n        accessor: 'revenue$',\n        disableGroupBy: true,\n        Aggregated: function Aggregated(_ref5) {\n          var value = _ref5.value;\n          return \"\".concat(value);\n        },\n        align: 'centre',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 285\n            },\n            __self: this\n          }, \" \", toDollar(props), \" \");\n        },\n        downloadFormatter: toDollar\n      }, {\n        Header: 'AUR $',\n        accessor: 'aur',\n        disableGroupBy: true,\n        Aggregated: function Aggregated(_ref6) {\n          var value = _ref6.value;\n          return \"\".concat(value);\n        },\n        align: 'centre',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 294\n            },\n            __self: this\n          }, \" \", toDollar(props), \" \");\n        },\n        downloadFormatter: toDollar\n      }, {\n        Header: \"Last week's sales\",\n        accessor: 'last_week_sales',\n        disableGroupBy: true,\n        Aggregated: function Aggregated(_ref7) {\n          var value = _ref7.value;\n          return \"\".concat(value);\n        },\n        align: 'centre'\n      }]\n    }, {\n      Header: 'Current inventory',\n      columns: [{\n        Header: 'On hand',\n        accessor: 'inventory.inventory_on_hand',\n        aggregate: 'average',\n        disableGroupBy: true,\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 316\n            },\n            __self: this\n          }, \" \", toUnit(props), \" \");\n        },\n        downloadFormatter: toUnit\n      }, {\n        Header: 'In transit',\n        accessor: 'inventory.inventory_in_transit',\n        aggregate: 'average',\n        disableGroupBy: true,\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 325\n            },\n            __self: this\n          }, \" \", toUnit(props), \" \");\n        },\n        downloadFormatter: toUnit\n      }, {\n        Header: 'On order',\n        accessor: 'inventory.inventory_on_order',\n        aggregate: 'average',\n        disableGroupBy: true,\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 334\n            },\n            __self: this\n          }, \" \", toUnit(props), \" \");\n        },\n        downloadFormatter: toUnit\n      }, {\n        Header: 'In DC',\n        accessor: 'inventory.inventory_in_dc',\n        aggregate: 'average',\n        disableGroupBy: true,\n        align: 'left',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 343\n            },\n            __self: this\n          }, \" \", toUnit(props), \" \");\n        },\n        downloadFormatter: toUnit\n      }, {\n        Header: 'Weeks on hand',\n        accessor: 'wos',\n        disableGroupBy: true,\n        Aggregated: function Aggregated(_ref8) {\n          var value = _ref8.value;\n          return \"\".concat(value);\n        },\n        align: 'centre',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 352\n            },\n            __self: this\n          }, \" \", toUnit(props), \" \");\n        },\n        downloadFormatter: toUnit\n      }]\n    }, {\n      Header: 'Markdown status',\n      columns: [{\n        Header: '',\n        downloadHeader: 'Markdown status',\n        accessor: 'mdStatus',\n        disableGroupBy: true,\n        align: 'centre',\n        showFilter: true,\n        Cell: function Cell(props) {\n          switch (props.row.original.mdStatus) {\n            case 'High':\n              return React.createElement(\"div\", {\n                className: \"high-status\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 370\n                },\n                __self: this\n              }, \"High\");\n\n            case 'Medium':\n              return React.createElement(\"div\", {\n                className: \"medium-status\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 372\n                },\n                __self: this\n              }, \"Medium\");\n\n            case 'Low':\n              return React.createElement(\"div\", {\n                className: \"low-status\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 374\n                },\n                __self: this\n              }, \"Low\");\n\n            default:\n              return React.createElement(\"div\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 376\n                },\n                __self: this\n              });\n          }\n        }\n      }]\n    }];\n\n    _this.mandatoryFiltersVal = function () {\n      return _this.props.selectedHierarchy1 && _this.props.selectedHierarchy2.length && _this.props.selectedHierarchy3.length && _this.props.selectedHierarchy4.length && _this.props.selectedHierarchy5.length && _this.props.selectedStores.length && _this.props.startDate && _this.props.endDate;\n    };\n\n    _this.onFilter = function () {\n      if (!_this.mandatoryFiltersVal()) {\n        toast.error(\"Please select mandatory filters\", {\n          autoClose: 15000,\n          hideProgressBar: true\n        });\n        return;\n      }\n\n      _this.getReportingData('week_level_aggregated_data');\n    };\n\n    _this.onCreateMarkdown =\n    /*#__PURE__*/\n    function () {\n      var _ref9 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(items) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.props.setRetainFilters(true);\n\n              case 2:\n                _this.props.history.push({\n                  pathname: '/vis/Markdown/create-markdown',\n                  state: {\n                    styles: items\n                  }\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref9.apply(this, arguments);\n      };\n    }();\n\n    _this.getReportingData = function (reportingType) {\n      var req = {\n        filters: {\n          hierarchy1: _this.props.selectedHierarchy1,\n          hierarchy2: _this.props.selectedHierarchy2,\n          hierarchy3: _this.props.selectedHierarchy3,\n          hierarchy4: _this.props.selectedHierarchy4,\n          hierarchy5: _this.props.selectedHierarchy5,\n          hierarchy6: _this.props.selectedHierarchy6,\n          hierarchy7: _this.props.selectedHierarchy7,\n          hierarchy8: _this.props.selectedHierarchy8,\n          tiers: _this.props.selectedStores\n        },\n        startDate: moment(_this.props.startDate).format('YYYY-MM-DD'),\n        endDate: moment(_this.props.endDate).format('YYYY-MM-DD'),\n        week: _this.props.weeks,\n        reportingType: reportingType\n      };\n\n      _this.props.getReportingData(req).then(function (resp) {\n        if (resp.columnHeaders && Object.keys(resp.columnHeaders).length) {\n          (function () {\n            var defaultHeader = Object.keys(resp.columnHeaders.default);\n            var setDefaultColDef = Coldef();\n            var setDefaultLabel = [];\n            var setDefaultColumnOptions = [];\n            var setDefaultColumnOptions1 = [];\n            var setDefaultItems = [];\n\n            var colHeaders = _.cloneDeep(resp.columnHeaders);\n\n            var labels = Object.keys(colHeaders);\n            labels.splice(labels.indexOf('fixed'), 1);\n            labels.splice(labels.indexOf('default'), 1);\n\n            var _loop = function _loop() {\n              var label = _labels[_i];\n              var labelArray = Object.keys(resp.columnHeaders[label]);\n\n              function diff() {\n                var A = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : labelArray;\n                var B = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultHeader;\n                return A.filter(function (a) {\n                  return B.indexOf(a) !== -1;\n                });\n              }\n\n              if (diff().length) {\n                setDefaultColumnOptions.push.apply(setDefaultColumnOptions, _toConsumableArray(Object.keys(resp.columnHeaders[label])));\n                setDefaultColumnOptions1.push(resp.columnHeaders[label]);\n                setDefaultItems.push.apply(setDefaultItems, _toConsumableArray(diff()));\n                setDefaultLabel.push(label);\n              }\n            };\n\n            for (var _i = 0, _labels = labels; _i < _labels.length; _i++) {\n              _loop();\n            }\n\n            var options = setDefaultColumnOptions.map(function (label) {\n              var find = setDefaultColumnOptions1 && setDefaultColumnOptions1[0][label];\n              return {\n                label: label,\n                value: find\n              };\n            });\n            var selectedItems = setDefaultItems.map(function (label) {\n              var find = setDefaultColumnOptions1 && setDefaultColumnOptions1[0][label];\n              return {\n                label: label,\n                value: find\n              };\n            });\n            setDefaultColDef.push({\n              id: 'selection',\n              groupByBoundary: true,\n              Header: 'Actions',\n              // fixed: 'left',\n              Cell: function Cell(props) {\n                var row = props.row,\n                    rows = props.rows;\n\n                var mdPlan = row.original.markdown_id,\n                    mainGrp = _.find(rows, {\n                  isSelected: true,\n                  original: {\n                    markdown_id: mdPlan\n                  }\n                }),\n                    checkboxDisabled = mainGrp && !row.isSelected ? true : false;\n\n                return row.canExpand ? React.createElement(\"div\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 489\n                  },\n                  __self: this\n                }, React.createElement(IndeterminateCheckbox, Object.assign({\n                  row: row.id,\n                  onClick: function onClick() {\n                    _this.onScenarioSelection(row);\n                  },\n                  disabled: checkboxDisabled\n                }, row.getToggleRowSelectedProps(), {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 490\n                  },\n                  __self: this\n                }))) : null;\n              }\n            });\n\n            _this.setState({\n              columns: setDefaultColDef,\n              selLabels: setDefaultLabel,\n              selectedItems: selectedItems,\n              columnOptions: options\n            });\n          })();\n        }\n      });\n    };\n\n    _this.onHandleCheckBox = function (e, label, index) {\n      //adding\n      if (e.target.checked) {\n        if (_this.state.selLabels.indexOf(label) === -1) {\n          var labels = [].concat(_toConsumableArray(_this.state.selLabels), [label]);\n          var tempArr = [];\n          labels.forEach(function (label) {\n            var columns = _this.props.columnHeaders[label];\n            var labelColumns = Object.keys(columns);\n            var options = labelColumns.map(function (label) {\n              return {\n                label: label,\n                value: columns[label]\n              };\n            });\n            tempArr.push.apply(tempArr, _toConsumableArray(options));\n          });\n\n          _this.setState({\n            selLabels: labels,\n            columnOptions: tempArr\n          });\n        }\n      } else {\n        //removing\n        var _index = _this.state.selLabels.indexOf(label);\n\n        if (_index !== -1) {\n          var selectedLabel = _.cloneDeep(_this.state.selLabels);\n\n          selectedLabel.splice(_index, 1);\n          var _tempArr = [];\n          selectedLabel.forEach(function (label) {\n            var columns = _this.props.columnHeaders[label];\n            var labelColumns = Object.keys(columns);\n            var options = labelColumns.map(function (label) {\n              return {\n                label: label,\n                value: columns[label]\n              };\n            });\n\n            _tempArr.push.apply(_tempArr, _toConsumableArray(options));\n          });\n\n          var selectedItemsClone = _.cloneDeep(_this.state.selectedItems);\n\n          var newSelectedItems = [];\n          var labelArr = Object.keys(_this.props.columnHeaders[label]);\n          selectedItemsClone.forEach(function (item) {\n            if (!labelArr.includes(item.label)) {\n              newSelectedItems.push(item);\n            }\n          });\n\n          _this.onHandleDropdownSelect(newSelectedItems);\n\n          _this.setState({\n            selLabels: selectedLabel,\n            columnOptions: _tempArr,\n            selectedItems: newSelectedItems\n          });\n        }\n      }\n    };\n\n    _this.onHandleDropdownSelect = function (options) {};\n\n    _this.state = {\n      columnOptions: [],\n      selLabels: [],\n      selectedItems: []\n    };\n    return _this;\n  }\n\n  _createClass(MarkdownReporting, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.resetReportingData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.props.columnHeaders, 'cococococo');\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577\n        },\n        __self: this\n      }, React.createElement(LoadingOverlay, {\n        loader: this.props.overlayLoaderState,\n        spinner: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 580\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"font-size-14  pad-10 markdown-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581\n        },\n        __self: this\n      }, \"Markdown Optimization /\", React.createElement(\"span\", {\n        className: \"font-bold color-blue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583\n        },\n        __self: this\n      }, \"Reporting Section\"))), React.createElement(\"hr\", {\n        style: {\n          marginTop: '-4px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586\n        },\n        __self: this\n      }), React.createElement(Filters, {\n        drop: true,\n        stores: true,\n        dateRange: true,\n        hierarchy: [{\n          type: 'hierarchy1',\n          isMandatory: true,\n          isMultiple: false\n        }, {\n          type: 'hierarchy2',\n          isMandatory: true,\n          isMultiple: true\n        }, {\n          type: 'hierarchy3',\n          isMandatory: true,\n          isMultiple: true\n        }, {\n          type: 'hierarchy4',\n          isMandatory: true,\n          isMultiple: true\n        }, {\n          type: 'hierarchy5',\n          isMandatory: true,\n          isMultiple: true\n        }, {\n          type: 'hierarchy6',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'hierarchy7',\n          isMandatory: false,\n          isMultiple: true\n        }, {\n          type: 'hierarchy8',\n          isMandatory: false,\n          isMultiple: true\n        }],\n        onFilter: this.onFilter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 591\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        className: \"hr-style mt-4 mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 639\n        },\n        __self: this\n      }), this.props.reportingData && this.props.reportingData.message ? React.createElement(\"div\", {\n        className: \"no-data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      }, this.props.reportingData.message) : React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643\n        },\n        __self: this\n      }, !!Object.keys(this.props.reportingData).length ? React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646\n        },\n        __self: this\n      }, \"Sell through\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 648\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: this.props.reportingData.sellThroughData,\n        options: this.sellThroughOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 649\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 654\n        },\n        __self: this\n      }, \"Inventory\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 656\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: this.props.reportingData.inventoryData,\n        options: this.inventoryOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 657\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 662\n        },\n        __self: this\n      }, \"Margin\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 664\n        },\n        __self: this\n      }, React.createElement(LineChart, {\n        data: this.props.reportingData.marginData,\n        options: this.marginOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 665\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card col-md-5 ml-4 mb-4 reporting-chart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 670\n        },\n        __self: this\n      }, \"Sales comparison\", React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 672\n        },\n        __self: this\n      }, React.createElement(BarChart, {\n        data: this.props.reportingData.salesData,\n        options: this.salesComparisonOptions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 673\n        },\n        __self: this\n      })))) : React.createElement(\"div\", {\n        className: \"no-data\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 680\n        },\n        __self: this\n      }, \"Please select filters\"))), !!Object.keys(this.props.reportingData).length && !this.props.reportingData.message && React.createElement(\"div\", {\n        className: \"show-detail-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 686\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary mt-3\",\n        onClick: function onClick() {\n          return _this2.getReportingData('style_level_detailed_data');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 687\n        },\n        __self: this\n      }, \"Show Style-Color level data\")), !!this.props.cockpitData.length && React.createElement(\"div\", {\n        className: \"card mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 696\n        },\n        __self: this\n      }, React.createElement(ColSelBtn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 697\n        },\n        __self: this\n      }, React.createElement(ColumnSelection, {\n        onHandleCheckBox: this.onHandleCheckBox,\n        columnHeaders: this.props.columnHeaders,\n        onHandleSelect: this.onHandleDropdownSelect,\n        columnOptions: this.state.columnOptions,\n        selectedItems: this.state.selectedItems,\n        selLabels: this.state.selLabels,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 698\n        },\n        __self: this\n      })), React.createElement(SkuCockpit, {\n        header: this.props.header,\n        cockpitData: this.props.cockpitData,\n        onCreateMarkdown: this.onCreateMarkdown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 707\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return MarkdownReporting;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    overlayLoaderState: store.loaderReducer.overlayLoaderState,\n    reportingData: store.reportingReducer.reportingData,\n    cockpitData: store.reportingReducer.cockpitData,\n    columnHeaders: store.reportingReducer.columnHeaders,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    selectedHierarchy6: store.filtersReducer.selectedHierarchy6,\n    selectedHierarchy7: store.filtersReducer.selectedHierarchy7,\n    selectedHierarchy8: store.filtersReducer.selectedHierarchy8,\n    selectedStores: store.filtersReducer.selectedStores,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks\n  };\n};\n\nvar mapActionsToProps = {\n  getReportingData: reportingActions.getReportingData,\n  resetReportingData: reportingActions.resetReportingData,\n  setRetainFilters: filterActions.setRetainFilters\n};\nexport default connect(mapStateToProps, mapActionsToProps)(MarkdownReporting);\nvar ColSelBtn = styled.div(_templateObject());","map":{"version":3,"sources":["/home/user/generic-markdown-frontend/src/components/Reporting/index.js"],"names":["React","Component","Filters","Breadcrumbs","SkuCockpit","LineChart","BarChart","connect","chartjs","_","reportingActions","LoadingOverlay","moment","decimalFormatter","toUnit","formatThousands","toast","filterActions","ColumnSelection","styled","pluginService","register","beforeDraw","chart","config","options","backgroundColor","ctx","chartArea","save","fillStyle","fillRect","left","top","right","bottom","restore","MarkdownReporting","sellThroughOptions","tooltips","callbacks","label","tooltipItem","value","scales","xAxes","scaleLabel","display","labelString","yAxes","ticks","suggestedMin","inventoryOptions","callback","marginOptions","salesComparisonOptions","legend","beginAtZero","header","Header","columns","downloadHeader","accessor","groupByID","disableGroupBy","align","showFilter","downloadFormatter","toPercentage","aggregate","Cell","props","roundedMedian","Aggregated","toDollar","row","original","mdStatus","mandatoryFiltersVal","selectedHierarchy1","selectedHierarchy2","length","selectedHierarchy3","selectedHierarchy4","selectedHierarchy5","selectedStores","startDate","endDate","onFilter","error","autoClose","hideProgressBar","getReportingData","onCreateMarkdown","items","setRetainFilters","history","push","pathname","state","styles","reportingType","req","filters","hierarchy1","hierarchy2","hierarchy3","hierarchy4","hierarchy5","hierarchy6","selectedHierarchy6","hierarchy7","selectedHierarchy7","hierarchy8","selectedHierarchy8","tiers","format","week","weeks","then","resp","columnHeaders","Object","keys","defaultHeader","default","setDefaultColDef","Coldef","setDefaultLabel","setDefaultColumnOptions","setDefaultColumnOptions1","setDefaultItems","colHeaders","cloneDeep","labels","splice","indexOf","labelArray","diff","A","B","filter","a","map","find","selectedItems","id","groupByBoundary","rows","mdPlan","markdown_id","mainGrp","isSelected","checkboxDisabled","canExpand","onScenarioSelection","getToggleRowSelectedProps","setState","selLabels","columnOptions","onHandleCheckBox","e","index","target","checked","tempArr","forEach","labelColumns","selectedLabel","selectedItemsClone","newSelectedItems","labelArr","item","includes","onHandleDropdownSelect","resetReportingData","console","log","overlayLoaderState","marginTop","type","isMandatory","isMultiple","reportingData","message","sellThroughData","inventoryData","marginData","salesData","cockpitData","mapStateToProps","store","loaderReducer","reportingReducer","filtersReducer","mapActionsToProps","ColSelBtn","div"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Filters from '../../services/filters';\nimport Breadcrumbs from '../../services/breadcrumbs';\nimport SkuCockpit from '../../components/SKUCockpit/SKUCockpit';\nimport LineChart from '../support/Charts/LineChart';\nimport BarChart from '../support/Charts/Barchart';\n\nimport { connect } from 'react-redux';\nimport * as chartjs from 'chart.js';\nimport _ from 'lodash';\nimport './index.css';\nimport reportingActions from '../../actions/reportingActions';\nimport LoadingOverlay from '../../utils/Loader';\nimport moment from 'moment';\nimport { decimalFormatter, toUnit, formatThousands } from '../../helper/formatter';\nimport { toast } from 'react-toastify';\nimport filterActions from '../../actions/filtersAction';\nimport ColumnSelection from '../../components/columnSelection';\nimport styled from 'styled-components';\nchartjs.pluginService.register({\n  beforeDraw: function (chart) {\n    if (chart.config.options && chart.config.options.backgroundColor) {\n      var ctx = chart.chart.ctx;\n      var chartArea = chart.chartArea;\n      ctx.save();\n      ctx.fillStyle = chart.config.options.backgroundColor;\n      ctx.fillRect(\n        chartArea.left,\n        chartArea.top,\n        chartArea.right - chartArea.left,\n        chartArea.bottom - chartArea.top\n      );\n      ctx.restore();\n    }\n  },\n});\nclass MarkdownReporting extends Component {\n  constructor() {\n    super();\n    this.state = {\n      columnOptions: [],\n      selLabels: [],\n      selectedItems: [],\n    };\n  }\n  sellThroughOptions = {\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return decimalFormatter({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Sell through %',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n          },\n        },\n      ],\n    },\n  };\n  inventoryOptions = {\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return toUnit({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Units',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n            callback: (value) => {\n              return formatThousands(value);\n            },\n          },\n        },\n      ],\n    },\n  };\n  marginOptions = {\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return decimalFormatter({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Margin %',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n          },\n        },\n      ],\n    },\n  };\n  salesComparisonOptions = {\n    legend: { display: false },\n    backgroundColor: '#fff',\n    tooltips: {\n      callbacks: {\n        label: function (tooltipItem) {\n          return toUnit({ value: tooltipItem.value });\n        },\n      },\n    },\n    scales: {\n      xAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Period',\n          },\n        },\n      ],\n      yAxes: [\n        {\n          scaleLabel: {\n            display: true,\n            labelString: 'Units',\n          },\n          ticks: {\n            suggestedMin: 0, // minimum will be 0, unless there is a lower value.\n            beginAtZero: true, // minimum value will be 0.\n            callback: (value) => {\n              return formatThousands(value);\n            },\n          },\n        },\n      ],\n    },\n  };\n  header = [\n    {\n      Header: 'Style-Color',\n      columns: [\n        {\n          Header: '',\n          downloadHeader: 'Style-Color',\n          accessor: 'style_number',\n          groupByID: 'style_number',\n          disableGroupBy: true,\n          align: 'left',\n          showFilter: true,\n        },\n      ],\n    },\n    {\n      Header: 'Sell through %',\n      columns: [\n        {\n          Header: 'TY',\n          downloadHeader: 'Sell through TY %',\n          downloadFormatter: toPercentage,\n          accessor: 'sell_through_ty',\n          aggregate: 'sum',\n          disableGroupBy: true,\n          align: 'left',\n          Cell: (props) => <div> {toPercentage({ value: props.value })} </div>,\n        },\n        {\n          Header: 'LY',\n          downloadHeader: 'Sell through LY %',\n          downloadFormatter: toPercentage,\n          accessor: 'sell_through_ly',\n          disableGroupBy: true,\n          align: 'left',\n          Cell: (props) => <div> {toPercentage({ value: props.value })} </div>,\n        },\n      ],\n    },\n    {\n      Header: 'Margin %',\n      columns: [\n        {\n          Header: 'TY',\n          downloadHeader: 'Margin TY %',\n          downloadFormatter: toPercentage,\n          accessor: 'margin_ty',\n          disableGroupBy: true,\n          aggregate: this.roundedMedian,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'left',\n          Cell: (props) => <div> {toPercentage({ value: props.value })} </div>,\n        },\n        {\n          Header: 'LY',\n          downloadHeader: 'Margin LY %',\n          downloadFormatter: toPercentage,\n          accessor: 'margin_ly',\n          disableGroupBy: true,\n          align: 'left',\n          Cell: (props) => <div> {toPercentage({ value: props.value })} </div>,\n        },\n      ],\n    },\n    {\n      Header: 'Margin ',\n      columns: [\n        {\n          Header: 'Margin ($)',\n          accessor: 'margin$',\n          disableGroupBy: true,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'centre',\n          Cell: (props) => <div> {toDollar(props)} </div>,\n          downloadFormatter: toDollar,\n        },\n\n        {\n          Header: 'AUM $',\n          accessor: 'aum',\n          disableGroupBy: true,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'centre',\n          Cell: (props) => <div> {toDollar(props)} </div>,\n          downloadFormatter: toDollar,\n        },\n      ],\n    },\n    {\n      Header: 'Sales',\n      columns: [\n        {\n          Header: 'Actual sales (units)',\n          accessor: 'units_sold',\n          aggregate: 'average',\n          disableGroupBy: true,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'centre',\n          Cell: (props) => <div> {toUnit(props)} </div>,\n          downloadFormatter: toUnit,\n        },\n        {\n          Header: 'Revenue ($)',\n          accessor: 'revenue$',\n          disableGroupBy: true,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'centre',\n          Cell: (props) => <div> {toDollar(props)} </div>,\n          downloadFormatter: toDollar,\n        },\n        {\n          Header: 'AUR $',\n          accessor: 'aur',\n          disableGroupBy: true,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'centre',\n          Cell: (props) => <div> {toDollar(props)} </div>,\n          downloadFormatter: toDollar,\n        },\n        {\n          Header: \"Last week's sales\",\n          accessor: 'last_week_sales',\n          disableGroupBy: true,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'centre',\n        },\n      ],\n    },\n\n    {\n      Header: 'Current inventory',\n      columns: [\n        {\n          Header: 'On hand',\n          accessor: 'inventory.inventory_on_hand',\n          aggregate: 'average',\n          disableGroupBy: true,\n          align: 'left',\n          Cell: (props) => <div> {toUnit(props)} </div>,\n          downloadFormatter: toUnit,\n        },\n        {\n          Header: 'In transit',\n          accessor: 'inventory.inventory_in_transit',\n          aggregate: 'average',\n          disableGroupBy: true,\n          align: 'left',\n          Cell: (props) => <div> {toUnit(props)} </div>,\n          downloadFormatter: toUnit,\n        },\n        {\n          Header: 'On order',\n          accessor: 'inventory.inventory_on_order',\n          aggregate: 'average',\n          disableGroupBy: true,\n          align: 'left',\n          Cell: (props) => <div> {toUnit(props)} </div>,\n          downloadFormatter: toUnit,\n        },\n        {\n          Header: 'In DC',\n          accessor: 'inventory.inventory_in_dc',\n          aggregate: 'average',\n          disableGroupBy: true,\n          align: 'left',\n          Cell: (props) => <div> {toUnit(props)} </div>,\n          downloadFormatter: toUnit,\n        },\n        {\n          Header: 'Weeks on hand',\n          accessor: 'wos',\n          disableGroupBy: true,\n          Aggregated: ({ value }) => `${value}`,\n          align: 'centre',\n          Cell: (props) => <div> {toUnit(props)} </div>,\n          downloadFormatter: toUnit,\n        },\n      ],\n    },\n    {\n      Header: 'Markdown status',\n      columns: [\n        {\n          Header: '',\n          downloadHeader: 'Markdown status',\n          accessor: 'mdStatus',\n          disableGroupBy: true,\n          align: 'centre',\n          showFilter: true,\n          Cell: (props) => {\n            switch (props.row.original.mdStatus) {\n              case 'High':\n                return <div className=\"high-status\">High</div>;\n              case 'Medium':\n                return <div className=\"medium-status\">Medium</div>;\n              case 'Low':\n                return <div className=\"low-status\">Low</div>;\n              default:\n                return <div></div>;\n            }\n          },\n        },\n      ],\n    },\n  ];\n\n  mandatoryFiltersVal = () => {\n    return (\n      this.props.selectedHierarchy1 &&\n      this.props.selectedHierarchy2.length &&\n      this.props.selectedHierarchy3.length &&\n      this.props.selectedHierarchy4.length &&\n      this.props.selectedHierarchy5.length &&\n      this.props.selectedStores.length &&\n      this.props.startDate &&\n      this.props.endDate\n    );\n  };\n  onFilter = () => {\n    if (!this.mandatoryFiltersVal()) {\n      toast.error(`Please select mandatory filters`, {\n        autoClose: 15000,\n        hideProgressBar: true,\n      });\n      return;\n    }\n    this.getReportingData('week_level_aggregated_data');\n  };\n\n  onCreateMarkdown = async (items) => {\n    await this.props.setRetainFilters(true);\n    this.props.history.push({\n      pathname: '/vis/Markdown/create-markdown',\n      state: { styles: items },\n    });\n  };\n  getReportingData = (reportingType) => {\n    let req = {\n      filters: {\n        hierarchy1: this.props.selectedHierarchy1,\n        hierarchy2: this.props.selectedHierarchy2,\n        hierarchy3: this.props.selectedHierarchy3,\n        hierarchy4: this.props.selectedHierarchy4,\n        hierarchy5: this.props.selectedHierarchy5,\n        hierarchy6: this.props.selectedHierarchy6,\n        hierarchy7: this.props.selectedHierarchy7,\n        hierarchy8: this.props.selectedHierarchy8,\n        tiers: this.props.selectedStores,\n      },\n      startDate: moment(this.props.startDate).format('YYYY-MM-DD'),\n      endDate: moment(this.props.endDate).format('YYYY-MM-DD'),\n      week: this.props.weeks,\n      reportingType,\n    };\n    this.props.getReportingData(req).then((resp) => {\n      if (resp.columnHeaders && Object.keys(resp.columnHeaders).length) {\n        let defaultHeader = Object.keys(resp.columnHeaders.default);\n\n        let setDefaultColDef = Coldef();\n        let setDefaultLabel = [];\n        let setDefaultColumnOptions = [];\n        let setDefaultColumnOptions1 = [];\n        let setDefaultItems = [];\n        let colHeaders = _.cloneDeep(resp.columnHeaders);\n        let labels = Object.keys(colHeaders);\n        labels.splice(labels.indexOf('fixed'), 1);\n        labels.splice(labels.indexOf('default'), 1);\n        for (const label of labels) {\n          let labelArray = Object.keys(resp.columnHeaders[label]);\n          function diff(A = labelArray, B = defaultHeader) {\n            return A.filter(function (a) {\n              return B.indexOf(a) !== -1;\n            });\n          }\n\n          if (diff().length) {\n            setDefaultColumnOptions.push(...Object.keys(resp.columnHeaders[label]));\n            setDefaultColumnOptions1.push(resp.columnHeaders[label]);\n            setDefaultItems.push(...diff());\n            setDefaultLabel.push(label);\n          }\n        }\n        let options = setDefaultColumnOptions.map((label) => {\n          let find = setDefaultColumnOptions1 && setDefaultColumnOptions1[0][label];\n          return {\n            label: label,\n            value: find,\n          };\n        });\n        let selectedItems = setDefaultItems.map((label) => {\n          let find = setDefaultColumnOptions1 && setDefaultColumnOptions1[0][label];\n          return {\n            label: label,\n            value: find,\n          };\n        });\n        setDefaultColDef.push({\n          id: 'selection',\n          groupByBoundary: true,\n          Header: 'Actions',\n          // fixed: 'left',\n          Cell: (props) => {\n            let { row, rows } = props;\n            let mdPlan = row.original.markdown_id,\n              mainGrp = _.find(rows, {\n                isSelected: true,\n                original: { markdown_id: mdPlan },\n              }),\n              checkboxDisabled = mainGrp && !row.isSelected ? true : false;\n\n            return row.canExpand ? (\n              <div>\n                <IndeterminateCheckbox\n                  row={row.id}\n                  onClick={() => {\n                    this.onScenarioSelection(row);\n                  }}\n                  disabled={checkboxDisabled}\n                  {...row.getToggleRowSelectedProps()}\n                />\n              </div>\n            ) : null;\n          },\n        });\n        this.setState({\n          columns: setDefaultColDef,\n          selLabels: setDefaultLabel,\n          selectedItems: selectedItems,\n          columnOptions: options,\n        });\n      }\n    });\n  };\n  componentWillUnmount() {\n    this.props.resetReportingData();\n  }\n  onHandleCheckBox = (e, label, index) => {\n    //adding\n    if (e.target.checked) {\n      if (this.state.selLabels.indexOf(label) === -1) {\n        let labels = [...this.state.selLabels, label];\n        let tempArr = [];\n        labels.forEach((label) => {\n          let columns = this.props.columnHeaders[label];\n          let labelColumns = Object.keys(columns);\n          let options = labelColumns.map((label) => {\n            return {\n              label: label,\n              value: columns[label],\n            };\n          });\n          tempArr.push(...options);\n        });\n        this.setState({\n          selLabels: labels,\n          columnOptions: tempArr,\n        });\n      }\n    } else {\n      //removing\n      let index = this.state.selLabels.indexOf(label);\n      if (index !== -1) {\n        let selectedLabel = _.cloneDeep(this.state.selLabels);\n        selectedLabel.splice(index, 1);\n        let tempArr = [];\n        selectedLabel.forEach((label) => {\n          let columns = this.props.columnHeaders[label];\n          let labelColumns = Object.keys(columns);\n          let options = labelColumns.map((label) => {\n            return {\n              label: label,\n              value: columns[label],\n            };\n          });\n          tempArr.push(...options);\n        });\n\n        let selectedItemsClone = _.cloneDeep(this.state.selectedItems);\n        let newSelectedItems = [];\n        let labelArr = Object.keys(this.props.columnHeaders[label]);\n        selectedItemsClone.forEach((item) => {\n          if (!labelArr.includes(item.label)) {\n            newSelectedItems.push(item);\n          }\n        });\n\n        this.onHandleDropdownSelect(newSelectedItems);\n        this.setState({\n          selLabels: selectedLabel,\n          columnOptions: tempArr,\n          selectedItems: newSelectedItems,\n        });\n      }\n    }\n  };\n  onHandleDropdownSelect = (options) => {};\n  render() {\n    console.log(this.props.columnHeaders, 'cococococo');\n    return (\n      <React.Fragment>\n        <LoadingOverlay loader={this.props.overlayLoaderState} spinner>\n          <div className=\"card\">\n            <div>\n              <h4 className=\"font-size-14  pad-10 markdown-heading\">\n                Markdown Optimization /\n                <span className=\"font-bold color-blue\">Reporting Section</span>\n              </h4>\n            </div>\n            <hr\n              style={{\n                marginTop: '-4px',\n              }}\n            />\n            <Filters\n              drop\n              stores\n              dateRange\n              hierarchy={[\n                {\n                  type: 'hierarchy1',\n                  isMandatory: true,\n                  isMultiple: false,\n                },\n                {\n                  type: 'hierarchy2',\n                  isMandatory: true,\n                  isMultiple: true,\n                },\n                {\n                  type: 'hierarchy3',\n                  isMandatory: true,\n                  isMultiple: true,\n                },\n                {\n                  type: 'hierarchy4',\n                  isMandatory: true,\n                  isMultiple: true,\n                },\n                {\n                  type: 'hierarchy5',\n                  isMandatory: true,\n                  isMultiple: true,\n                },\n                {\n                  type: 'hierarchy6',\n                  isMandatory: false,\n                  isMultiple: true,\n                },\n                {\n                  type: 'hierarchy7',\n                  isMandatory: false,\n                  isMultiple: true,\n                },\n                {\n                  type: 'hierarchy8',\n                  isMandatory: false,\n                  isMultiple: true,\n                },\n              ]}\n              onFilter={this.onFilter}\n            />\n            <hr className=\"hr-style mt-4 mb-4\" />\n            {this.props.reportingData && this.props.reportingData.message ? (\n              <div className=\"no-data\">{this.props.reportingData.message}</div>\n            ) : (\n              <React.Fragment>\n                {!!Object.keys(this.props.reportingData).length ? (\n                  <div className=\"row justify-content-center\">\n                    <div className=\"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\">\n                      Sell through\n                      <div>\n                        <LineChart\n                          data={this.props.reportingData.sellThroughData}\n                          options={this.sellThroughOptions}></LineChart>\n                      </div>\n                    </div>\n                    <div className=\"card col-md-5 ml-4 mb-4 reporting-chart-container\">\n                      Inventory\n                      <div>\n                        <LineChart\n                          data={this.props.reportingData.inventoryData}\n                          options={this.inventoryOptions}></LineChart>\n                      </div>\n                    </div>\n                    <div className=\"card col-md-5 ml-4 mb-4 mr-4 reporting-chart-container\">\n                      Margin\n                      <div>\n                        <LineChart\n                          data={this.props.reportingData.marginData}\n                          options={this.marginOptions}></LineChart>\n                      </div>\n                    </div>\n                    <div className=\"card col-md-5 ml-4 mb-4 reporting-chart-container\">\n                      Sales comparison\n                      <div>\n                        <BarChart\n                          data={this.props.reportingData.salesData}\n                          options={this.salesComparisonOptions}></BarChart>\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"no-data\">Please select filters</div>\n                )}\n              </React.Fragment>\n            )}\n          </div>\n          {!!Object.keys(this.props.reportingData).length && !this.props.reportingData.message && (\n            <div className=\"show-detail-button\">\n              <button\n                className=\"btn btn-primary mt-3\"\n                onClick={() => this.getReportingData('style_level_detailed_data')}>\n                Show Style-Color level data\n              </button>\n            </div>\n          )}\n\n          {!!this.props.cockpitData.length && (\n            <div className=\"card mt-4\">\n              <ColSelBtn>\n                <ColumnSelection\n                  onHandleCheckBox={this.onHandleCheckBox}\n                  columnHeaders={this.props.columnHeaders}\n                  onHandleSelect={this.onHandleDropdownSelect}\n                  columnOptions={this.state.columnOptions}\n                  selectedItems={this.state.selectedItems}\n                  selLabels={this.state.selLabels}\n                />\n              </ColSelBtn>\n              <SkuCockpit\n                header={this.props.header}\n                cockpitData={this.props.cockpitData}\n                onCreateMarkdown={this.onCreateMarkdown}\n              />\n            </div>\n          )}\n        </LoadingOverlay>\n      </React.Fragment>\n    );\n  }\n}\nconst mapStateToProps = (store) => {\n  return {\n    overlayLoaderState: store.loaderReducer.overlayLoaderState,\n    reportingData: store.reportingReducer.reportingData,\n    cockpitData: store.reportingReducer.cockpitData,\n    columnHeaders: store.reportingReducer.columnHeaders,\n    selectedHierarchy1: store.filtersReducer.selectedHierarchy1,\n    selectedHierarchy2: store.filtersReducer.selectedHierarchy2,\n    selectedHierarchy3: store.filtersReducer.selectedHierarchy3,\n    selectedHierarchy4: store.filtersReducer.selectedHierarchy4,\n    selectedHierarchy5: store.filtersReducer.selectedHierarchy5,\n    selectedHierarchy6: store.filtersReducer.selectedHierarchy6,\n    selectedHierarchy7: store.filtersReducer.selectedHierarchy7,\n    selectedHierarchy8: store.filtersReducer.selectedHierarchy8,\n    selectedStores: store.filtersReducer.selectedStores,\n    startDate: store.filtersReducer.startDate,\n    endDate: store.filtersReducer.endDate,\n    weeks: store.filtersReducer.weeks,\n  };\n};\nconst mapActionsToProps = {\n  getReportingData: reportingActions.getReportingData,\n  resetReportingData: reportingActions.resetReportingData,\n  setRetainFilters: filterActions.setRetainFilters,\n};\nexport default connect(mapStateToProps, mapActionsToProps)(MarkdownReporting);\n\nconst ColSelBtn = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`;\n"]},"metadata":{},"sourceType":"module"}